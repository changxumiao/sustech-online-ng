var Ab=Object.defineProperty,Pb=Object.defineProperties;var Cb=Object.getOwnPropertyDescriptors;var Dg=Object.getOwnPropertySymbols;var kb=Object.prototype.hasOwnProperty,Db=Object.prototype.propertyIsEnumerable;var zg=(t,i,s)=>i in t?Ab(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,fn=(t,i)=>{for(var s in i||(i={}))kb.call(i,s)&&zg(t,s,i[s]);if(Dg)for(var s of Dg(i))Db.call(i,s)&&zg(t,s,i[s]);return t},qo=(t,i)=>Pb(t,Cb(i));const um={},zb="modulepreload",Mg={},Mb="/",Ce=function(i,s){return!s||s.length===0?i():Promise.all(s.map(u=>{if(u=`${Mb}${u}`,u in Mg)return;Mg[u]=!0;const m=u.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${v}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":zb,m||(x.as="script",x.crossOrigin=""),x.href=u,document.head.appendChild(x),m)return new Promise((l,T)=>{x.addEventListener("load",l),x.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${u}`)))})})).then(()=>i())},Ob={"v-8daa1a0e":()=>Ce(()=>import("./index.html.fb738e33.js"),[]).then(({data:t})=>t),"v-74bc627b":()=>Ce(()=>import("./index.html.b9a24d77.js"),[]).then(({data:t})=>t),"v-08ae5eba":()=>Ce(()=>import("./2018-2019.html.41c12250.js"),[]).then(({data:t})=>t),"v-93cfbde4":()=>Ce(()=>import("./2019-2020.html.ff3f8436.js"),[]).then(({data:t})=>t),"v-f917537a":()=>Ce(()=>import("./2020-2021.html.0147055f.js"),[]).then(({data:t})=>t),"v-1a0de1a3":()=>Ce(()=>import("./2021-2022.html.42cae55f.js"),[]).then(({data:t})=>t),"v-190ab309":()=>Ce(()=>import("./2021fall.html.bb4649c1.js"),[]).then(({data:t})=>t),"v-96167c50":()=>Ce(()=>import("./index.html.be85f74f.js"),[]).then(({data:t})=>t),"v-96536bf0":()=>Ce(()=>import("./index.html.2b562ada.js"),[]).then(({data:t})=>t),"v-dbd38712":()=>Ce(()=>import("./index.html.83bc90cd.js"),[]).then(({data:t})=>t),"v-c73889da":()=>Ce(()=>import("./index.html.685fe13b.js"),[]).then(({data:t})=>t),"v-104cfa63":()=>Ce(()=>import("./2021.html.03454fb3.js"),[]).then(({data:t})=>t),"v-780207b9":()=>Ce(()=>import("./index.html.ae60c149.js"),[]).then(({data:t})=>t),"v-14e6315a":()=>Ce(()=>import("./index.html.79c01d7c.js"),[]).then(({data:t})=>t),"v-42f2be94":()=>Ce(()=>import("./vehicle-charger.html.ef9b5735.js"),[]).then(({data:t})=>t),"v-ed48bdf8":()=>Ce(()=>import("./index.html.205bdc21.js"),[]).then(({data:t})=>t),"v-f4bc5604":()=>Ce(()=>import("./index.html.45d22f7d.js"),[]).then(({data:t})=>t),"v-1500d063":()=>Ce(()=>import("./index.html.c83e194c.js"),[]).then(({data:t})=>t),"v-014445c8":()=>Ce(()=>import("./index.html.83515730.js"),[]).then(({data:t})=>t),"v-461d4a7c":()=>Ce(()=>import("./registered-organization-2019.html.78b33160.js"),[]).then(({data:t})=>t),"v-6ba7e826":()=>Ce(()=>import("./registered-organization-2020.html.968962f3.js"),[]).then(({data:t})=>t),"v-28ddfa13":()=>Ce(()=>import("./index.html.75a10613.js"),[]).then(({data:t})=>t),"v-be92ea7e":()=>Ce(()=>import("./index.html.cb0594af.js"),[]).then(({data:t})=>t),"v-d7188082":()=>Ce(()=>import("./index.html.3e3a667b.js"),[]).then(({data:t})=>t),"v-d1061704":()=>Ce(()=>import("./paper-tools.html.32372a48.js"),[]).then(({data:t})=>t),"v-4322d0a7":()=>Ce(()=>import("./index.html.76fccd7c.js"),[]).then(({data:t})=>t),"v-69b23ddf":()=>Ce(()=>import("./index.html.7ae1afea.js"),[]).then(({data:t})=>t),"v-1678dd6f":()=>Ce(()=>import("./bustimer-wx.html.b31473ae.js"),[]).then(({data:t})=>t),"v-1630dfb5":()=>Ce(()=>import("./bustimer.html.52d95e39.js"),[]).then(({data:t})=>t),"v-6a28f6e0":()=>Ce(()=>import("./holiday.html.f6f0d6ce.js"),[]).then(({data:t})=>t),"v-48975204":()=>Ce(()=>import("./redirect.html.b7ecce4c.js"),[]).then(({data:t})=>t),"v-8059a7a6":()=>Ce(()=>import("./workday.html.3cce468d.js"),[]).then(({data:t})=>t),"v-22cd7d0c":()=>Ce(()=>import("./index.html.78f2faad.js"),[]).then(({data:t})=>t),"v-0e92d420":()=>Ce(()=>import("./index.html.44088269.js"),[]).then(({data:t})=>t),"v-2b8cac58":()=>Ce(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.html.61f379b5.js"),[]).then(({data:t})=>t),"v-66965350":()=>Ce(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.html.c4827ace.js"),[]).then(({data:t})=>t),"v-66317da4":()=>Ce(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.html.1e665176.js"),[]).then(({data:t})=>t),"v-5c3fcdf6":()=>Ce(()=>import("./index.html.8b31012d.js"),[]).then(({data:t})=>t),"v-04710004":()=>Ce(()=>import("./index.html.f969d81d.js"),[]).then(({data:t})=>t),"v-d42194b6":()=>Ce(()=>import("./index.html.75c45102.js"),[]).then(({data:t})=>t),"v-20383a78":()=>Ce(()=>import("./index.html.c4f9e215.js"),[]).then(({data:t})=>t),"v-42c1fa44":()=>Ce(()=>import("./index.html.54521cd7.js"),[]).then(({data:t})=>t),"v-76cff034":()=>Ce(()=>import("./index.html.00ca893a.js"),[]).then(({data:t})=>t),"v-29860ed0":()=>Ce(()=>import("./index.html.b26b3070.js"),[]).then(({data:t})=>t),"v-622da02f":()=>Ce(()=>import("./index.html.4850de8c.js"),[]).then(({data:t})=>t),"v-5e590ec6":()=>Ce(()=>import("./index.html.9beb91e9.js"),[]).then(({data:t})=>t),"v-1fa222d4":()=>Ce(()=>import("./index.html.0f5c1b30.js"),[]).then(({data:t})=>t),"v-48519846":()=>Ce(()=>import("./index.html.5de4d7b4.js"),[]).then(({data:t})=>t),"v-369295b4":()=>Ce(()=>import("./index.html.f239815e.js"),[]).then(({data:t})=>t),"v-3692bb1f":()=>Ce(()=>import("./index.html.b386f775.js"),[]).then(({data:t})=>t),"v-425958ce":()=>Ce(()=>import("./index.html.ab1c37c7.js"),[]).then(({data:t})=>t),"v-3692ee77":()=>Ce(()=>import("./index.html.9bd6ac85.js"),[]).then(({data:t})=>t),"v-2686552a":()=>Ce(()=>import("./index.html.894a7afb.js"),[]).then(({data:t})=>t),"v-45d74ec0":()=>Ce(()=>import("./index.html.09b49459.js"),[]).then(({data:t})=>t),"v-772a5784":()=>Ce(()=>import("./index.html.07d86b2d.js"),[]).then(({data:t})=>t),"v-8460eeb8":()=>Ce(()=>import("./advice-on-study.html.2be0accf.js"),[]).then(({data:t})=>t),"v-435bd49a":()=>Ce(()=>import("./info-on-study.html.ab6407c2.js"),[]).then(({data:t})=>t),"v-6323734e":()=>Ce(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.html.fe0e89bd.js"),[]).then(({data:t})=>t),"v-2a23f022":()=>Ce(()=>import("./index.html.769645e5.js"),[]).then(({data:t})=>t),"v-66061b92":()=>Ce(()=>import("./index.html.d9b1e89a.js"),[]).then(({data:t})=>t),"v-89ac2bec":()=>Ce(()=>import("./index.html.f14876c7.js"),[]).then(({data:t})=>t),"v-1549b190":()=>Ce(()=>import("./index.html.2cd18f7c.js"),[]).then(({data:t})=>t),"v-9e1961f8":()=>Ce(()=>import("./index.html.a9e9ef5e.js"),[]).then(({data:t})=>t),"v-6bba5e58":()=>Ce(()=>import("./index.html.bcc47b51.js"),[]).then(({data:t})=>t),"v-83a77034":()=>Ce(()=>import("./index.html.d6e7bc84.js"),[]).then(({data:t})=>t),"v-296d1d15":()=>Ce(()=>import("./index.html.737abe99.js"),[]).then(({data:t})=>t),"v-fb711be8":()=>Ce(()=>import("./index.html.640fb9f2.js"),[]).then(({data:t})=>t),"v-3706649a":()=>Ce(()=>import("./404.html.7caa4353.js"),[]).then(({data:t})=>t)};function Sf(t,i){const s=Object.create(null),u=t.split(",");for(let m=0;m<u.length;m++)s[u[m]]=!0;return i?m=>!!s[m.toLowerCase()]:m=>!!s[m]}const Lb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Rb=Sf(Lb);function ev(t){return!!t||t===""}function Hc(t){if(Ut(t)){const i={};for(let s=0;s<t.length;s++){const u=t[s],m=Rr(u)?Nb(u):Hc(u);if(m)for(const v in m)i[v]=m[v]}return i}else{if(Rr(t))return t;if(un(t))return t}}const Bb=/;(?![^(]*\))/g,Fb=/:(.+)/;function Nb(t){const i={};return t.split(Bb).forEach(s=>{if(s){const u=s.split(Fb);u.length>1&&(i[u[0].trim()]=u[1].trim())}}),i}function os(t){let i="";if(Rr(t))i=t;else if(Ut(t))for(let s=0;s<t.length;s++){const u=os(t[s]);u&&(i+=u+" ")}else if(un(t))for(const s in t)t[s]&&(i+=s+" ");return i.trim()}function jb(t){if(!t)return null;let{class:i,style:s}=t;return i&&!Rr(i)&&(t.class=os(i)),s&&(t.style=Hc(s)),t}const Ci=t=>Rr(t)?t:t==null?"":Ut(t)||un(t)&&(t.toString===iv||!Yt(t.toString))?JSON.stringify(t,tv,2):String(t),tv=(t,i)=>i&&i.__v_isRef?tv(t,i.value):Ka(i)?{[`Map(${i.size})`]:[...i.entries()].reduce((s,[u,m])=>(s[`${u} =>`]=m,s),{})}:rv(i)?{[`Set(${i.size})`]:[...i.values()]}:un(i)&&!Ut(i)&&!ov(i)?String(i):i,Lr={},Wa=[],Fi=()=>{},Vb=()=>!1,Ub=/^on[^a-z]/,Gc=t=>Ub.test(t),Tf=t=>t.startsWith("onUpdate:"),zn=Object.assign,If=(t,i)=>{const s=t.indexOf(i);s>-1&&t.splice(s,1)},$b=Object.prototype.hasOwnProperty,gr=(t,i)=>$b.call(t,i),Ut=Array.isArray,Ka=t=>Hh(t)==="[object Map]",rv=t=>Hh(t)==="[object Set]",Yt=t=>typeof t=="function",Rr=t=>typeof t=="string",Af=t=>typeof t=="symbol",un=t=>t!==null&&typeof t=="object",nv=t=>un(t)&&Yt(t.then)&&Yt(t.catch),iv=Object.prototype.toString,Hh=t=>iv.call(t),qb=t=>Hh(t).slice(8,-1),ov=t=>Hh(t)==="[object Object]",Pf=t=>Rr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,wc=Sf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gh=t=>{const i=Object.create(null);return s=>i[s]||(i[s]=t(s))},Hb=/-(\w)/g,Gi=Gh(t=>t.replace(Hb,(i,s)=>s?s.toUpperCase():"")),Gb=/\B([A-Z])/g,Gs=Gh(t=>t.replace(Gb,"-$1").toLowerCase()),Zh=Gh(t=>t.charAt(0).toUpperCase()+t.slice(1)),_p=Gh(t=>t?`on${Zh(t)}`:""),zc=(t,i)=>!Object.is(t,i),yp=(t,i)=>{for(let s=0;s<t.length;s++)t[s](i)},Th=(t,i,s)=>{Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value:s})},sv=t=>{const i=parseFloat(t);return isNaN(i)?t:i};let Og;const Zb=()=>Og||(Og=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let pi;class Wb{constructor(i=!1){this.active=!0,this.effects=[],this.cleanups=[],!i&&pi&&(this.parent=pi,this.index=(pi.scopes||(pi.scopes=[])).push(this)-1)}run(i){if(this.active){const s=pi;try{return pi=this,i()}finally{pi=s}}}on(){pi=this}off(){pi=this.parent}stop(i){if(this.active){let s,u;for(s=0,u=this.effects.length;s<u;s++)this.effects[s].stop();for(s=0,u=this.cleanups.length;s<u;s++)this.cleanups[s]();if(this.scopes)for(s=0,u=this.scopes.length;s<u;s++)this.scopes[s].stop(!0);if(this.parent&&!i){const m=this.parent.scopes.pop();m&&m!==this&&(this.parent.scopes[this.index]=m,m.index=this.index)}this.active=!1}}}function Kb(t,i=pi){i&&i.active&&i.effects.push(t)}function Xb(){return pi}function Jb(t){pi&&pi.cleanups.push(t)}const Cf=t=>{const i=new Set(t);return i.w=0,i.n=0,i},av=t=>(t.w&ns)>0,lv=t=>(t.n&ns)>0,Yb=({deps:t})=>{if(t.length)for(let i=0;i<t.length;i++)t[i].w|=ns},Qb=t=>{const{deps:i}=t;if(i.length){let s=0;for(let u=0;u<i.length;u++){const m=i[u];av(m)&&!lv(m)?m.delete(t):i[s++]=m,m.w&=~ns,m.n&=~ns}i.length=s}},$p=new WeakMap;let yc=0,ns=1;const qp=30;let Bi;const Vs=Symbol(""),Hp=Symbol("");class kf{constructor(i,s=null,u){this.fn=i,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,Kb(this,u)}run(){if(!this.active)return this.fn();let i=Bi,s=es;for(;i;){if(i===this)return;i=i.parent}try{return this.parent=Bi,Bi=this,es=!0,ns=1<<++yc,yc<=qp?Yb(this):Lg(this),this.fn()}finally{yc<=qp&&Qb(this),ns=1<<--yc,Bi=this.parent,es=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Bi===this?this.deferStop=!0:this.active&&(Lg(this),this.onStop&&this.onStop(),this.active=!1)}}function Lg(t){const{deps:i}=t;if(i.length){for(let s=0;s<i.length;s++)i[s].delete(t);i.length=0}}let es=!0;const cv=[];function il(){cv.push(es),es=!1}function ol(){const t=cv.pop();es=t===void 0?!0:t}function _i(t,i,s){if(es&&Bi){let u=$p.get(t);u||$p.set(t,u=new Map);let m=u.get(s);m||u.set(s,m=Cf()),uv(m)}}function uv(t,i){let s=!1;yc<=qp?lv(t)||(t.n|=ns,s=!av(t)):s=!t.has(Bi),s&&(t.add(Bi),Bi.deps.push(t))}function bo(t,i,s,u,m,v){const x=$p.get(t);if(!x)return;let l=[];if(i==="clear")l=[...x.values()];else if(s==="length"&&Ut(t))x.forEach((T,C)=>{(C==="length"||C>=u)&&l.push(T)});else switch(s!==void 0&&l.push(x.get(s)),i){case"add":Ut(t)?Pf(s)&&l.push(x.get("length")):(l.push(x.get(Vs)),Ka(t)&&l.push(x.get(Hp)));break;case"delete":Ut(t)||(l.push(x.get(Vs)),Ka(t)&&l.push(x.get(Hp)));break;case"set":Ka(t)&&l.push(x.get(Vs));break}if(l.length===1)l[0]&&Gp(l[0]);else{const T=[];for(const C of l)C&&T.push(...C);Gp(Cf(T))}}function Gp(t,i){for(const s of Ut(t)?t:[...t])(s!==Bi||s.allowRecurse)&&(s.scheduler?s.scheduler():s.run())}const ew=Sf("__proto__,__v_isRef,__isVue"),hv=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(Af)),tw=Df(),rw=Df(!1,!0),nw=Df(!0),Rg=iw();function iw(){const t={};return["includes","indexOf","lastIndexOf"].forEach(i=>{t[i]=function(...s){const u=Er(this);for(let v=0,x=this.length;v<x;v++)_i(u,"get",v+"");const m=u[i](...s);return m===-1||m===!1?u[i](...s.map(Er)):m}}),["push","pop","shift","unshift","splice"].forEach(i=>{t[i]=function(...s){il();const u=Er(this)[i].apply(this,s);return ol(),u}}),t}function Df(t=!1,i=!1){return function(u,m,v){if(m==="__v_isReactive")return!t;if(m==="__v_isReadonly")return t;if(m==="__v_isShallow")return i;if(m==="__v_raw"&&v===(t?i?xw:gv:i?mv:fv).get(u))return u;const x=Ut(u);if(!t&&x&&gr(Rg,m))return Reflect.get(Rg,m,v);const l=Reflect.get(u,m,v);return(Af(m)?hv.has(m):ew(m))||(t||_i(u,"get",m),i)?l:wn(l)?!x||!Pf(m)?l.value:l:un(l)?t?Of(l):sl(l):l}}const ow=dv(),sw=dv(!0);function dv(t=!1){return function(s,u,m,v){let x=s[u];if(Mc(x)&&wn(x)&&!wn(m))return!1;if(!t&&!Mc(m)&&(_v(m)||(m=Er(m),x=Er(x)),!Ut(s)&&wn(x)&&!wn(m)))return x.value=m,!0;const l=Ut(s)&&Pf(u)?Number(u)<s.length:gr(s,u),T=Reflect.set(s,u,m,v);return s===Er(v)&&(l?zc(m,x)&&bo(s,"set",u,m):bo(s,"add",u,m)),T}}function aw(t,i){const s=gr(t,i);t[i];const u=Reflect.deleteProperty(t,i);return u&&s&&bo(t,"delete",i,void 0),u}function lw(t,i){const s=Reflect.has(t,i);return(!Af(i)||!hv.has(i))&&_i(t,"has",i),s}function cw(t){return _i(t,"iterate",Ut(t)?"length":Vs),Reflect.ownKeys(t)}const pv={get:tw,set:ow,deleteProperty:aw,has:lw,ownKeys:cw},uw={get:nw,set(t,i){return!0},deleteProperty(t,i){return!0}},hw=zn({},pv,{get:rw,set:sw}),zf=t=>t,Wh=t=>Reflect.getPrototypeOf(t);function Ju(t,i,s=!1,u=!1){t=t.__v_raw;const m=Er(t),v=Er(i);i!==v&&!s&&_i(m,"get",i),!s&&_i(m,"get",v);const{has:x}=Wh(m),l=u?zf:s?Rf:Oc;if(x.call(m,i))return l(t.get(i));if(x.call(m,v))return l(t.get(v));t!==m&&t.get(i)}function Yu(t,i=!1){const s=this.__v_raw,u=Er(s),m=Er(t);return t!==m&&!i&&_i(u,"has",t),!i&&_i(u,"has",m),t===m?s.has(t):s.has(t)||s.has(m)}function Qu(t,i=!1){return t=t.__v_raw,!i&&_i(Er(t),"iterate",Vs),Reflect.get(t,"size",t)}function Bg(t){t=Er(t);const i=Er(this);return Wh(i).has.call(i,t)||(i.add(t),bo(i,"add",t,t)),this}function Fg(t,i){i=Er(i);const s=Er(this),{has:u,get:m}=Wh(s);let v=u.call(s,t);v||(t=Er(t),v=u.call(s,t));const x=m.call(s,t);return s.set(t,i),v?zc(i,x)&&bo(s,"set",t,i):bo(s,"add",t,i),this}function Ng(t){const i=Er(this),{has:s,get:u}=Wh(i);let m=s.call(i,t);m||(t=Er(t),m=s.call(i,t)),u&&u.call(i,t);const v=i.delete(t);return m&&bo(i,"delete",t,void 0),v}function jg(){const t=Er(this),i=t.size!==0,s=t.clear();return i&&bo(t,"clear",void 0,void 0),s}function eh(t,i){return function(u,m){const v=this,x=v.__v_raw,l=Er(x),T=i?zf:t?Rf:Oc;return!t&&_i(l,"iterate",Vs),x.forEach((C,A)=>u.call(m,T(C),T(A),v))}}function th(t,i,s){return function(...u){const m=this.__v_raw,v=Er(m),x=Ka(v),l=t==="entries"||t===Symbol.iterator&&x,T=t==="keys"&&x,C=m[t](...u),A=s?zf:i?Rf:Oc;return!i&&_i(v,"iterate",T?Hp:Vs),{next(){const{value:F,done:O}=C.next();return O?{value:F,done:O}:{value:l?[A(F[0]),A(F[1])]:A(F),done:O}},[Symbol.iterator](){return this}}}}function Ho(t){return function(...i){return t==="delete"?!1:this}}function dw(){const t={get(v){return Ju(this,v)},get size(){return Qu(this)},has:Yu,add:Bg,set:Fg,delete:Ng,clear:jg,forEach:eh(!1,!1)},i={get(v){return Ju(this,v,!1,!0)},get size(){return Qu(this)},has:Yu,add:Bg,set:Fg,delete:Ng,clear:jg,forEach:eh(!1,!0)},s={get(v){return Ju(this,v,!0)},get size(){return Qu(this,!0)},has(v){return Yu.call(this,v,!0)},add:Ho("add"),set:Ho("set"),delete:Ho("delete"),clear:Ho("clear"),forEach:eh(!0,!1)},u={get(v){return Ju(this,v,!0,!0)},get size(){return Qu(this,!0)},has(v){return Yu.call(this,v,!0)},add:Ho("add"),set:Ho("set"),delete:Ho("delete"),clear:Ho("clear"),forEach:eh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(v=>{t[v]=th(v,!1,!1),s[v]=th(v,!0,!1),i[v]=th(v,!1,!0),u[v]=th(v,!0,!0)}),[t,s,i,u]}const[pw,fw,mw,gw]=dw();function Mf(t,i){const s=i?t?gw:mw:t?fw:pw;return(u,m,v)=>m==="__v_isReactive"?!t:m==="__v_isReadonly"?t:m==="__v_raw"?u:Reflect.get(gr(s,m)&&m in u?s:u,m,v)}const _w={get:Mf(!1,!1)},yw={get:Mf(!1,!0)},vw={get:Mf(!0,!1)},fv=new WeakMap,mv=new WeakMap,gv=new WeakMap,xw=new WeakMap;function bw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ww(t){return t.__v_skip||!Object.isExtensible(t)?0:bw(qb(t))}function sl(t){return Mc(t)?t:Lf(t,!1,pv,_w,fv)}function Ew(t){return Lf(t,!1,hw,yw,mv)}function Of(t){return Lf(t,!0,uw,vw,gv)}function Lf(t,i,s,u,m){if(!un(t)||t.__v_raw&&!(i&&t.__v_isReactive))return t;const v=m.get(t);if(v)return v;const x=ww(t);if(x===0)return t;const l=new Proxy(t,x===2?u:s);return m.set(t,l),l}function Xa(t){return Mc(t)?Xa(t.__v_raw):!!(t&&t.__v_isReactive)}function Mc(t){return!!(t&&t.__v_isReadonly)}function _v(t){return!!(t&&t.__v_isShallow)}function yv(t){return Xa(t)||Mc(t)}function Er(t){const i=t&&t.__v_raw;return i?Er(i):t}function vv(t){return Th(t,"__v_skip",!0),t}const Oc=t=>un(t)?sl(t):t,Rf=t=>un(t)?Of(t):t;function xv(t){es&&Bi&&(t=Er(t),uv(t.dep||(t.dep=Cf())))}function bv(t,i){t=Er(t),t.dep&&Gp(t.dep)}function wn(t){return!!(t&&t.__v_isRef===!0)}function En(t){return Ev(t,!1)}function wv(t){return Ev(t,!0)}function Ev(t,i){return wn(t)?t:new Sw(t,i)}class Sw{constructor(i,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?i:Er(i),this._value=s?i:Oc(i)}get value(){return xv(this),this._value}set value(i){i=this.__v_isShallow?i:Er(i),zc(i,this._rawValue)&&(this._rawValue=i,this._value=this.__v_isShallow?i:Oc(i),bv(this))}}function Us(t){return wn(t)?t.value:t}const Tw={get:(t,i,s)=>Us(Reflect.get(t,i,s)),set:(t,i,s,u)=>{const m=t[i];return wn(m)&&!wn(s)?(m.value=s,!0):Reflect.set(t,i,s,u)}};function Sv(t){return Xa(t)?t:new Proxy(t,Tw)}function Iw(t){const i=Ut(t)?new Array(t.length):{};for(const s in t)i[s]=Pw(t,s);return i}class Aw{constructor(i,s,u){this._object=i,this._key=s,this._defaultValue=u,this.__v_isRef=!0}get value(){const i=this._object[this._key];return i===void 0?this._defaultValue:i}set value(i){this._object[this._key]=i}}function Pw(t,i,s){const u=t[i];return wn(u)?u:new Aw(t,i,s)}class Cw{constructor(i,s,u,m){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new kf(i,()=>{this._dirty||(this._dirty=!0,bv(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!m,this.__v_isReadonly=u}get value(){const i=Er(this);return xv(i),(i._dirty||!i._cacheable)&&(i._dirty=!1,i._value=i.effect.run()),i._value}set value(i){this._setter(i)}}function kw(t,i,s=!1){let u,m;const v=Yt(t);return v?(u=t,m=Fi):(u=t.get,m=t.set),new Cw(u,m,v||!m,s)}function ts(t,i,s,u){let m;try{m=u?t(...u):t()}catch(v){Zc(v,i,s)}return m}function ki(t,i,s,u){if(Yt(t)){const v=ts(t,i,s,u);return v&&nv(v)&&v.catch(x=>{Zc(x,i,s)}),v}const m=[];for(let v=0;v<t.length;v++)m.push(ki(t[v],i,s,u));return m}function Zc(t,i,s,u=!0){const m=i?i.vnode:null;if(i){let v=i.parent;const x=i.proxy,l=s;for(;v;){const C=v.ec;if(C){for(let A=0;A<C.length;A++)if(C[A](t,x,l)===!1)return}v=v.parent}const T=i.appContext.config.errorHandler;if(T){ts(T,null,10,[t,x,l]);return}}Dw(t,s,m,u)}function Dw(t,i,s,u=!0){console.error(t)}let Ih=!1,Zp=!1;const fi=[];let _o=0;const Ec=[];let vc=null,ja=0;const Sc=[];let Xo=null,Va=0;const Tv=Promise.resolve();let Bf=null,Wp=null;function Ff(t){const i=Bf||Tv;return t?i.then(this?t.bind(this):t):i}function zw(t){let i=_o+1,s=fi.length;for(;i<s;){const u=i+s>>>1;Lc(fi[u])<t?i=u+1:s=u}return i}function Nf(t){(!fi.length||!fi.includes(t,Ih&&t.allowRecurse?_o+1:_o))&&t!==Wp&&(t.id==null?fi.push(t):fi.splice(zw(t.id),0,t),Iv())}function Iv(){!Ih&&!Zp&&(Zp=!0,Bf=Tv.then(Pv))}function Mw(t){const i=fi.indexOf(t);i>_o&&fi.splice(i,1)}function Av(t,i,s,u){Ut(t)?s.push(...t):(!i||!i.includes(t,t.allowRecurse?u+1:u))&&s.push(t),Iv()}function Ow(t){Av(t,vc,Ec,ja)}function Lw(t){Av(t,Xo,Sc,Va)}function jf(t,i=null){if(Ec.length){for(Wp=i,vc=[...new Set(Ec)],Ec.length=0,ja=0;ja<vc.length;ja++)vc[ja]();vc=null,ja=0,Wp=null,jf(t,i)}}function Ah(t){if(Sc.length){const i=[...new Set(Sc)];if(Sc.length=0,Xo){Xo.push(...i);return}for(Xo=i,Xo.sort((s,u)=>Lc(s)-Lc(u)),Va=0;Va<Xo.length;Va++)Xo[Va]();Xo=null,Va=0}}const Lc=t=>t.id==null?1/0:t.id;function Pv(t){Zp=!1,Ih=!0,jf(t),fi.sort((s,u)=>Lc(s)-Lc(u));const i=Fi;try{for(_o=0;_o<fi.length;_o++){const s=fi[_o];s&&s.active!==!1&&ts(s,null,14)}}finally{_o=0,fi.length=0,Ah(),Ih=!1,Bf=null,(fi.length||Ec.length||Sc.length)&&Pv(t)}}function Rw(t,i,...s){if(t.isUnmounted)return;const u=t.vnode.props||Lr;let m=s;const v=i.startsWith("update:"),x=v&&i.slice(7);if(x&&x in u){const A=`${x==="modelValue"?"model":x}Modifiers`,{number:F,trim:O}=u[A]||Lr;O?m=s.map(K=>K.trim()):F&&(m=s.map(sv))}let l,T=u[l=_p(i)]||u[l=_p(Gi(i))];!T&&v&&(T=u[l=_p(Gs(i))]),T&&ki(T,t,6,m);const C=u[l+"Once"];if(C){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,ki(C,t,6,m)}}function Cv(t,i,s=!1){const u=i.emitsCache,m=u.get(t);if(m!==void 0)return m;const v=t.emits;let x={},l=!1;if(!Yt(t)){const T=C=>{const A=Cv(C,i,!0);A&&(l=!0,zn(x,A))};!s&&i.mixins.length&&i.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}return!v&&!l?(u.set(t,null),null):(Ut(v)?v.forEach(T=>x[T]=null):zn(x,v),u.set(t,x),x)}function Kh(t,i){return!t||!Gc(i)?!1:(i=i.slice(2).replace(/Once$/,""),gr(t,i[0].toLowerCase()+i.slice(1))||gr(t,Gs(i))||gr(t,i))}let Nn=null,Xh=null;function Ph(t){const i=Nn;return Nn=t,Xh=t&&t.type.__scopeId||null,i}function Bw(t){Xh=t}function Fw(){Xh=null}function mh(t,i=Nn,s){if(!i||t._n)return t;const u=(...m)=>{u._d&&Jg(-1);const v=Ph(i),x=t(...m);return Ph(v),u._d&&Jg(1),x};return u._n=!0,u._c=!0,u._d=!0,u}function vp(t){const{type:i,vnode:s,proxy:u,withProxy:m,props:v,propsOptions:[x],slots:l,attrs:T,emit:C,render:A,renderCache:F,data:O,setupState:K,ctx:oe,inheritAttrs:de}=t;let te,se;const me=Ph(t);try{if(s.shapeFlag&4){const Ae=m||u;te=Ri(A.call(Ae,Ae,F,v,K,O,oe)),se=T}else{const Ae=i;te=Ri(Ae.length>1?Ae(v,{attrs:T,slots:l,emit:C}):Ae(v,null)),se=i.props?T:Nw(T)}}catch(Ae){Ic.length=0,Zc(Ae,t,1),te=qr(gi)}let _e=te;if(se&&de!==!1){const Ae=Object.keys(se),{shapeFlag:Me}=_e;Ae.length&&Me&7&&(x&&Ae.some(Tf)&&(se=jw(se,x)),_e=Hs(_e,se))}return s.dirs&&(_e.dirs=_e.dirs?_e.dirs.concat(s.dirs):s.dirs),s.transition&&(_e.transition=s.transition),te=_e,Ph(me),te}const Nw=t=>{let i;for(const s in t)(s==="class"||s==="style"||Gc(s))&&((i||(i={}))[s]=t[s]);return i},jw=(t,i)=>{const s={};for(const u in t)(!Tf(u)||!(u.slice(9)in i))&&(s[u]=t[u]);return s};function Vw(t,i,s){const{props:u,children:m,component:v}=t,{props:x,children:l,patchFlag:T}=i,C=v.emitsOptions;if(i.dirs||i.transition)return!0;if(s&&T>=0){if(T&1024)return!0;if(T&16)return u?Vg(u,x,C):!!x;if(T&8){const A=i.dynamicProps;for(let F=0;F<A.length;F++){const O=A[F];if(x[O]!==u[O]&&!Kh(C,O))return!0}}}else return(m||l)&&(!l||!l.$stable)?!0:u===x?!1:u?x?Vg(u,x,C):!0:!!x;return!1}function Vg(t,i,s){const u=Object.keys(i);if(u.length!==Object.keys(t).length)return!0;for(let m=0;m<u.length;m++){const v=u[m];if(i[v]!==t[v]&&!Kh(s,v))return!0}return!1}function Uw({vnode:t,parent:i},s){for(;i&&i.subTree===t;)(t=i.vnode).el=s,i=i.parent}const $w=t=>t.__isSuspense;function kv(t,i){i&&i.pendingBranch?Ut(t)?i.effects.push(...t):i.effects.push(t):Lw(t)}function rs(t,i){if(mn){let s=mn.provides;const u=mn.parent&&mn.parent.provides;u===s&&(s=mn.provides=Object.create(u)),s[t]=i}}function gn(t,i,s=!1){const u=mn||Nn;if(u){const m=u.parent==null?u.vnode.appContext&&u.vnode.appContext.provides:u.parent.provides;if(m&&t in m)return m[t];if(arguments.length>1)return s&&Yt(i)?i.call(u.proxy):i}}const Ug={};function Ni(t,i,s){return Dv(t,i,s)}function Dv(t,i,{immediate:s,deep:u,flush:m,onTrack:v,onTrigger:x}=Lr){const l=mn;let T,C=!1,A=!1;if(wn(t)?(T=()=>t.value,C=_v(t)):Xa(t)?(T=()=>t,u=!0):Ut(t)?(A=!0,C=t.some(Xa),T=()=>t.map(se=>{if(wn(se))return se.value;if(Xa(se))return js(se);if(Yt(se))return ts(se,l,2)})):Yt(t)?i?T=()=>ts(t,l,2):T=()=>{if(!(l&&l.isUnmounted))return F&&F(),ki(t,l,3,[O])}:T=Fi,i&&u){const se=T;T=()=>js(se())}let F,O=se=>{F=te.onStop=()=>{ts(se,l,4)}};if(Qa)return O=Fi,i?s&&ki(i,l,3,[T(),A?[]:void 0,O]):T(),Fi;let K=A?[]:Ug;const oe=()=>{if(!!te.active)if(i){const se=te.run();(u||C||(A?se.some((me,_e)=>zc(me,K[_e])):zc(se,K)))&&(F&&F(),ki(i,l,3,[se,K===Ug?void 0:K,O]),K=se)}else te.run()};oe.allowRecurse=!!i;let de;m==="sync"?de=oe:m==="post"?de=()=>ni(oe,l&&l.suspense):de=()=>{!l||l.isMounted?Ow(oe):oe()};const te=new kf(T,de);return i?s?oe():K=te.run():m==="post"?ni(te.run.bind(te),l&&l.suspense):te.run(),()=>{te.stop(),l&&l.scope&&If(l.scope.effects,te)}}function qw(t,i,s){const u=this.proxy,m=Rr(t)?t.includes(".")?zv(u,t):()=>u[t]:t.bind(u,u);let v;Yt(i)?v=i:(v=i.handler,s=i);const x=mn;Ya(this);const l=Dv(m,v.bind(u),s);return x?Ya(x):qs(),l}function zv(t,i){const s=i.split(".");return()=>{let u=t;for(let m=0;m<s.length&&u;m++)u=u[s[m]];return u}}function js(t,i){if(!un(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),wn(t))js(t.value,i);else if(Ut(t))for(let s=0;s<t.length;s++)js(t[s],i);else if(rv(t)||Ka(t))t.forEach(s=>{js(s,i)});else if(ov(t))for(const s in t)js(t[s],i);return t}function Hw(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zi(()=>{t.isMounted=!0}),Vf(()=>{t.isUnmounting=!0}),t}const Ai=[Function,Array],Gw={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ai,onEnter:Ai,onAfterEnter:Ai,onEnterCancelled:Ai,onBeforeLeave:Ai,onLeave:Ai,onAfterLeave:Ai,onLeaveCancelled:Ai,onBeforeAppear:Ai,onAppear:Ai,onAfterAppear:Ai,onAppearCancelled:Ai},setup(t,{slots:i}){const s=Yv(),u=Hw();let m;return()=>{const v=i.default&&Lv(i.default(),!0);if(!v||!v.length)return;let x=v[0];if(v.length>1){for(const de of v)if(de.type!==gi){x=de;break}}const l=Er(t),{mode:T}=l;if(u.isLeaving)return xp(x);const C=$g(x);if(!C)return xp(x);const A=Kp(C,l,u,s);Xp(C,A);const F=s.subTree,O=F&&$g(F);let K=!1;const{getTransitionKey:oe}=C.type;if(oe){const de=oe();m===void 0?m=de:de!==m&&(m=de,K=!0)}if(O&&O.type!==gi&&(!Fs(C,O)||K)){const de=Kp(O,l,u,s);if(Xp(O,de),T==="out-in")return u.isLeaving=!0,de.afterLeave=()=>{u.isLeaving=!1,s.update()},xp(x);T==="in-out"&&C.type!==gi&&(de.delayLeave=(te,se,me)=>{const _e=Ov(u,O);_e[String(O.key)]=O,te._leaveCb=()=>{se(),te._leaveCb=void 0,delete A.delayedLeave},A.delayedLeave=me})}return x}}},Mv=Gw;function Ov(t,i){const{leavingVNodes:s}=t;let u=s.get(i.type);return u||(u=Object.create(null),s.set(i.type,u)),u}function Kp(t,i,s,u){const{appear:m,mode:v,persisted:x=!1,onBeforeEnter:l,onEnter:T,onAfterEnter:C,onEnterCancelled:A,onBeforeLeave:F,onLeave:O,onAfterLeave:K,onLeaveCancelled:oe,onBeforeAppear:de,onAppear:te,onAfterAppear:se,onAppearCancelled:me}=i,_e=String(t.key),Ae=Ov(s,t),Me=(De,Se)=>{De&&ki(De,u,9,Se)},He={mode:v,persisted:x,beforeEnter(De){let Se=l;if(!s.isMounted)if(m)Se=de||l;else return;De._leaveCb&&De._leaveCb(!0);const rt=Ae[_e];rt&&Fs(t,rt)&&rt.el._leaveCb&&rt.el._leaveCb(),Me(Se,[De])},enter(De){let Se=T,rt=C,ot=A;if(!s.isMounted)if(m)Se=te||T,rt=se||C,ot=me||A;else return;let ft=!1;const Te=De._enterCb=nt=>{ft||(ft=!0,nt?Me(ot,[De]):Me(rt,[De]),He.delayedLeave&&He.delayedLeave(),De._enterCb=void 0)};Se?(Se(De,Te),Se.length<=1&&Te()):Te()},leave(De,Se){const rt=String(t.key);if(De._enterCb&&De._enterCb(!0),s.isUnmounting)return Se();Me(F,[De]);let ot=!1;const ft=De._leaveCb=Te=>{ot||(ot=!0,Se(),Te?Me(oe,[De]):Me(K,[De]),De._leaveCb=void 0,Ae[rt]===t&&delete Ae[rt])};Ae[rt]=t,O?(O(De,ft),O.length<=1&&ft()):ft()},clone(De){return Kp(De,i,s,u)}};return He}function xp(t){if(Wc(t))return t=Hs(t),t.children=null,t}function $g(t){return Wc(t)?t.children?t.children[0]:void 0:t}function Xp(t,i){t.shapeFlag&6&&t.component?Xp(t.component.subTree,i):t.shapeFlag&128?(t.ssContent.transition=i.clone(t.ssContent),t.ssFallback.transition=i.clone(t.ssFallback)):t.transition=i}function Lv(t,i=!1,s){let u=[],m=0;for(let v=0;v<t.length;v++){let x=t[v];const l=s==null?x.key:String(s)+String(x.key!=null?x.key:v);x.type===bn?(x.patchFlag&128&&m++,u=u.concat(Lv(x.children,i,l))):(i||x.type!==gi)&&u.push(l!=null?Hs(x,{key:l}):x)}if(m>1)for(let v=0;v<u.length;v++)u[v].patchFlag=-2;return u}function Jn(t){return Yt(t)?{setup:t,name:t.name}:t}const Rc=t=>!!t.type.__asyncLoader;function bt(t){Yt(t)&&(t={loader:t});const{loader:i,loadingComponent:s,errorComponent:u,delay:m=200,timeout:v,suspensible:x=!0,onError:l}=t;let T=null,C,A=0;const F=()=>(A++,T=null,O()),O=()=>{let K;return T||(K=T=i().catch(oe=>{if(oe=oe instanceof Error?oe:new Error(String(oe)),l)return new Promise((de,te)=>{l(oe,()=>de(F()),()=>te(oe),A+1)});throw oe}).then(oe=>K!==T&&T?T:(oe&&(oe.__esModule||oe[Symbol.toStringTag]==="Module")&&(oe=oe.default),C=oe,oe)))};return Jn({name:"AsyncComponentWrapper",__asyncLoader:O,get __asyncResolved(){return C},setup(){const K=mn;if(C)return()=>bp(C,K);const oe=me=>{T=null,Zc(me,K,13,!u)};if(x&&K.suspense||Qa)return O().then(me=>()=>bp(me,K)).catch(me=>(oe(me),()=>u?qr(u,{error:me}):null));const de=En(!1),te=En(),se=En(!!m);return m&&setTimeout(()=>{se.value=!1},m),v!=null&&setTimeout(()=>{if(!de.value&&!te.value){const me=new Error(`Async component timed out after ${v}ms.`);oe(me),te.value=me}},v),O().then(()=>{de.value=!0,K.parent&&Wc(K.parent.vnode)&&Nf(K.parent.update)}).catch(me=>{oe(me),te.value=me}),()=>{if(de.value&&C)return bp(C,K);if(te.value&&u)return qr(u,{error:te.value});if(s&&!se.value)return qr(s)}}})}function bp(t,{vnode:{ref:i,props:s,children:u}}){const m=qr(t,s,u);return m.ref=i,m}const Wc=t=>t.type.__isKeepAlive;function Zw(t,i){Rv(t,"a",i)}function Ww(t,i){Rv(t,"da",i)}function Rv(t,i,s=mn){const u=t.__wdc||(t.__wdc=()=>{let m=s;for(;m;){if(m.isDeactivated)return;m=m.parent}return t()});if(Jh(i,u,s),s){let m=s.parent;for(;m&&m.parent;)Wc(m.parent.vnode)&&Kw(u,i,s,m),m=m.parent}}function Kw(t,i,s,u){const m=Jh(i,t,u,!0);Uf(()=>{If(u[i],m)},s)}function Jh(t,i,s=mn,u=!1){if(s){const m=s[t]||(s[t]=[]),v=i.__weh||(i.__weh=(...x)=>{if(s.isUnmounted)return;il(),Ya(s);const l=ki(i,s,t,x);return qs(),ol(),l});return u?m.unshift(v):m.push(v),v}}const wo=t=>(i,s=mn)=>(!Qa||t==="sp")&&Jh(t,i,s),Bv=wo("bm"),Zi=wo("m"),Xw=wo("bu"),Jw=wo("u"),Vf=wo("bum"),Uf=wo("um"),Yw=wo("sp"),Qw=wo("rtg"),e2=wo("rtc");function t2(t,i=mn){Jh("ec",t,i)}let Jp=!0;function r2(t){const i=Nv(t),s=t.proxy,u=t.ctx;Jp=!1,i.beforeCreate&&qg(i.beforeCreate,t,"bc");const{data:m,computed:v,methods:x,watch:l,provide:T,inject:C,created:A,beforeMount:F,mounted:O,beforeUpdate:K,updated:oe,activated:de,deactivated:te,beforeDestroy:se,beforeUnmount:me,destroyed:_e,unmounted:Ae,render:Me,renderTracked:He,renderTriggered:De,errorCaptured:Se,serverPrefetch:rt,expose:ot,inheritAttrs:ft,components:Te,directives:nt,filters:St}=i;if(C&&n2(C,u,null,t.appContext.config.unwrapInjectedRef),x)for(const Dt in x){const zt=x[Dt];Yt(zt)&&(u[Dt]=zt.bind(s))}if(m){const Dt=m.call(s,s);un(Dt)&&(t.data=sl(Dt))}if(Jp=!0,v)for(const Dt in v){const zt=v[Dt],dr=Yt(zt)?zt.bind(s,s):Yt(zt.get)?zt.get.bind(s,s):Fi,pr=!Yt(zt)&&Yt(zt.set)?zt.set.bind(s):Fi,Ir=Fr({get:dr,set:pr});Object.defineProperty(u,Dt,{enumerable:!0,configurable:!0,get:()=>Ir.value,set:vr=>Ir.value=vr})}if(l)for(const Dt in l)Fv(l[Dt],u,s,Dt);if(T){const Dt=Yt(T)?T.call(s):T;Reflect.ownKeys(Dt).forEach(zt=>{rs(zt,Dt[zt])})}A&&qg(A,t,"c");function Ve(Dt,zt){Ut(zt)?zt.forEach(dr=>Dt(dr.bind(s))):zt&&Dt(zt.bind(s))}if(Ve(Bv,F),Ve(Zi,O),Ve(Xw,K),Ve(Jw,oe),Ve(Zw,de),Ve(Ww,te),Ve(t2,Se),Ve(e2,He),Ve(Qw,De),Ve(Vf,me),Ve(Uf,Ae),Ve(Yw,rt),Ut(ot))if(ot.length){const Dt=t.exposed||(t.exposed={});ot.forEach(zt=>{Object.defineProperty(Dt,zt,{get:()=>s[zt],set:dr=>s[zt]=dr})})}else t.exposed||(t.exposed={});Me&&t.render===Fi&&(t.render=Me),ft!=null&&(t.inheritAttrs=ft),Te&&(t.components=Te),nt&&(t.directives=nt)}function n2(t,i,s=Fi,u=!1){Ut(t)&&(t=Yp(t));for(const m in t){const v=t[m];let x;un(v)?"default"in v?x=gn(v.from||m,v.default,!0):x=gn(v.from||m):x=gn(v),wn(x)&&u?Object.defineProperty(i,m,{enumerable:!0,configurable:!0,get:()=>x.value,set:l=>x.value=l}):i[m]=x}}function qg(t,i,s){ki(Ut(t)?t.map(u=>u.bind(i.proxy)):t.bind(i.proxy),i,s)}function Fv(t,i,s,u){const m=u.includes(".")?zv(s,u):()=>s[u];if(Rr(t)){const v=i[t];Yt(v)&&Ni(m,v)}else if(Yt(t))Ni(m,t.bind(s));else if(un(t))if(Ut(t))t.forEach(v=>Fv(v,i,s,u));else{const v=Yt(t.handler)?t.handler.bind(s):i[t.handler];Yt(v)&&Ni(m,v,t)}}function Nv(t){const i=t.type,{mixins:s,extends:u}=i,{mixins:m,optionsCache:v,config:{optionMergeStrategies:x}}=t.appContext,l=v.get(i);let T;return l?T=l:!m.length&&!s&&!u?T=i:(T={},m.length&&m.forEach(C=>Ch(T,C,x,!0)),Ch(T,i,x)),v.set(i,T),T}function Ch(t,i,s,u=!1){const{mixins:m,extends:v}=i;v&&Ch(t,v,s,!0),m&&m.forEach(x=>Ch(t,x,s,!0));for(const x in i)if(!(u&&x==="expose")){const l=i2[x]||s&&s[x];t[x]=l?l(t[x],i[x]):i[x]}return t}const i2={data:Hg,props:Ls,emits:Ls,methods:Ls,computed:Ls,beforeCreate:Kn,created:Kn,beforeMount:Kn,mounted:Kn,beforeUpdate:Kn,updated:Kn,beforeDestroy:Kn,beforeUnmount:Kn,destroyed:Kn,unmounted:Kn,activated:Kn,deactivated:Kn,errorCaptured:Kn,serverPrefetch:Kn,components:Ls,directives:Ls,watch:s2,provide:Hg,inject:o2};function Hg(t,i){return i?t?function(){return zn(Yt(t)?t.call(this,this):t,Yt(i)?i.call(this,this):i)}:i:t}function o2(t,i){return Ls(Yp(t),Yp(i))}function Yp(t){if(Ut(t)){const i={};for(let s=0;s<t.length;s++)i[t[s]]=t[s];return i}return t}function Kn(t,i){return t?[...new Set([].concat(t,i))]:i}function Ls(t,i){return t?zn(zn(Object.create(null),t),i):i}function s2(t,i){if(!t)return i;if(!i)return t;const s=zn(Object.create(null),t);for(const u in i)s[u]=Kn(t[u],i[u]);return s}function a2(t,i,s,u=!1){const m={},v={};Th(v,Yh,1),t.propsDefaults=Object.create(null),jv(t,i,m,v);for(const x in t.propsOptions[0])x in m||(m[x]=void 0);s?t.props=u?m:Ew(m):t.type.props?t.props=m:t.props=v,t.attrs=v}function l2(t,i,s,u){const{props:m,attrs:v,vnode:{patchFlag:x}}=t,l=Er(m),[T]=t.propsOptions;let C=!1;if((u||x>0)&&!(x&16)){if(x&8){const A=t.vnode.dynamicProps;for(let F=0;F<A.length;F++){let O=A[F];if(Kh(t.emitsOptions,O))continue;const K=i[O];if(T)if(gr(v,O))K!==v[O]&&(v[O]=K,C=!0);else{const oe=Gi(O);m[oe]=Qp(T,l,oe,K,t,!1)}else K!==v[O]&&(v[O]=K,C=!0)}}}else{jv(t,i,m,v)&&(C=!0);let A;for(const F in l)(!i||!gr(i,F)&&((A=Gs(F))===F||!gr(i,A)))&&(T?s&&(s[F]!==void 0||s[A]!==void 0)&&(m[F]=Qp(T,l,F,void 0,t,!0)):delete m[F]);if(v!==l)for(const F in v)(!i||!gr(i,F)&&!0)&&(delete v[F],C=!0)}C&&bo(t,"set","$attrs")}function jv(t,i,s,u){const[m,v]=t.propsOptions;let x=!1,l;if(i)for(let T in i){if(wc(T))continue;const C=i[T];let A;m&&gr(m,A=Gi(T))?!v||!v.includes(A)?s[A]=C:(l||(l={}))[A]=C:Kh(t.emitsOptions,T)||(!(T in u)||C!==u[T])&&(u[T]=C,x=!0)}if(v){const T=Er(s),C=l||Lr;for(let A=0;A<v.length;A++){const F=v[A];s[F]=Qp(m,T,F,C[F],t,!gr(C,F))}}return x}function Qp(t,i,s,u,m,v){const x=t[s];if(x!=null){const l=gr(x,"default");if(l&&u===void 0){const T=x.default;if(x.type!==Function&&Yt(T)){const{propsDefaults:C}=m;s in C?u=C[s]:(Ya(m),u=C[s]=T.call(null,i),qs())}else u=T}x[0]&&(v&&!l?u=!1:x[1]&&(u===""||u===Gs(s))&&(u=!0))}return u}function Vv(t,i,s=!1){const u=i.propsCache,m=u.get(t);if(m)return m;const v=t.props,x={},l=[];let T=!1;if(!Yt(t)){const A=F=>{T=!0;const[O,K]=Vv(F,i,!0);zn(x,O),K&&l.push(...K)};!s&&i.mixins.length&&i.mixins.forEach(A),t.extends&&A(t.extends),t.mixins&&t.mixins.forEach(A)}if(!v&&!T)return u.set(t,Wa),Wa;if(Ut(v))for(let A=0;A<v.length;A++){const F=Gi(v[A]);Gg(F)&&(x[F]=Lr)}else if(v)for(const A in v){const F=Gi(A);if(Gg(F)){const O=v[A],K=x[F]=Ut(O)||Yt(O)?{type:O}:O;if(K){const oe=Kg(Boolean,K.type),de=Kg(String,K.type);K[0]=oe>-1,K[1]=de<0||oe<de,(oe>-1||gr(K,"default"))&&l.push(F)}}}const C=[x,l];return u.set(t,C),C}function Gg(t){return t[0]!=="$"}function Zg(t){const i=t&&t.toString().match(/^\s*function (\w+)/);return i?i[1]:t===null?"null":""}function Wg(t,i){return Zg(t)===Zg(i)}function Kg(t,i){return Ut(i)?i.findIndex(s=>Wg(s,t)):Yt(i)&&Wg(i,t)?0:-1}const Uv=t=>t[0]==="_"||t==="$stable",$f=t=>Ut(t)?t.map(Ri):[Ri(t)],c2=(t,i,s)=>{const u=mh((...m)=>$f(i(...m)),s);return u._c=!1,u},$v=(t,i,s)=>{const u=t._ctx;for(const m in t){if(Uv(m))continue;const v=t[m];if(Yt(v))i[m]=c2(m,v,u);else if(v!=null){const x=$f(v);i[m]=()=>x}}},qv=(t,i)=>{const s=$f(i);t.slots.default=()=>s},u2=(t,i)=>{if(t.vnode.shapeFlag&32){const s=i._;s?(t.slots=Er(i),Th(i,"_",s)):$v(i,t.slots={})}else t.slots={},i&&qv(t,i);Th(t.slots,Yh,1)},h2=(t,i,s)=>{const{vnode:u,slots:m}=t;let v=!0,x=Lr;if(u.shapeFlag&32){const l=i._;l?s&&l===1?v=!1:(zn(m,i),!s&&l===1&&delete m._):(v=!i.$stable,$v(i,m)),x=i}else i&&(qv(t,i),x={default:1});if(v)for(const l in m)!Uv(l)&&!(l in x)&&delete m[l]};function k5(t,i){const s=Nn;if(s===null)return t;const u=ed(s)||s.proxy,m=t.dirs||(t.dirs=[]);for(let v=0;v<i.length;v++){let[x,l,T,C=Lr]=i[v];Yt(x)&&(x={mounted:x,updated:x}),x.deep&&js(l),m.push({dir:x,instance:u,value:l,oldValue:void 0,arg:T,modifiers:C})}return t}function $i(t,i,s,u){const m=t.dirs,v=i&&i.dirs;for(let x=0;x<m.length;x++){const l=m[x];v&&(l.oldValue=v[x].value);let T=l.dir[u];T&&(il(),ki(T,s,8,[t.el,l,t,i]),ol())}}function Hv(){return{app:null,config:{isNativeTag:Vb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let d2=0;function p2(t,i){return function(u,m=null){Yt(u)||(u=Object.assign({},u)),m!=null&&!un(m)&&(m=null);const v=Hv(),x=new Set;let l=!1;const T=v.app={_uid:d2++,_component:u,_props:m,_container:null,_context:v,_instance:null,version:O2,get config(){return v.config},set config(C){},use(C,...A){return x.has(C)||(C&&Yt(C.install)?(x.add(C),C.install(T,...A)):Yt(C)&&(x.add(C),C(T,...A))),T},mixin(C){return v.mixins.includes(C)||v.mixins.push(C),T},component(C,A){return A?(v.components[C]=A,T):v.components[C]},directive(C,A){return A?(v.directives[C]=A,T):v.directives[C]},mount(C,A,F){if(!l){const O=qr(u,m);return O.appContext=v,A&&i?i(O,C):t(O,C,F),l=!0,T._container=C,C.__vue_app__=T,ed(O.component)||O.component.proxy}},unmount(){l&&(t(null,T._container),delete T._container.__vue_app__)},provide(C,A){return v.provides[C]=A,T}};return T}}function kh(t,i,s,u,m=!1){if(Ut(t)){t.forEach((O,K)=>kh(O,i&&(Ut(i)?i[K]:i),s,u,m));return}if(Rc(u)&&!m)return;const v=u.shapeFlag&4?ed(u.component)||u.component.proxy:u.el,x=m?null:v,{i:l,r:T}=t,C=i&&i.r,A=l.refs===Lr?l.refs={}:l.refs,F=l.setupState;if(C!=null&&C!==T&&(Rr(C)?(A[C]=null,gr(F,C)&&(F[C]=null)):wn(C)&&(C.value=null)),Yt(T))ts(T,l,12,[x,A]);else{const O=Rr(T),K=wn(T);if(O||K){const oe=()=>{if(t.f){const de=O?A[T]:T.value;m?Ut(de)&&If(de,v):Ut(de)?de.includes(v)||de.push(v):O?(A[T]=[v],gr(F,T)&&(F[T]=A[T])):(T.value=[v],t.k&&(A[t.k]=T.value))}else O?(A[T]=x,gr(F,T)&&(F[T]=x)):wn(T)&&(T.value=x,t.k&&(A[t.k]=x))};x?(oe.id=-1,ni(oe,s)):oe()}}}let Go=!1;const rh=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",wp=t=>t.nodeType===8;function f2(t){const{mt:i,p:s,o:{patchProp:u,nextSibling:m,parentNode:v,remove:x,insert:l,createComment:T}}=t,C=(te,se)=>{if(!se.hasChildNodes()){s(null,te,se),Ah();return}Go=!1,A(se.firstChild,te,null,null,null),Ah(),Go&&console.error("Hydration completed but contains mismatches.")},A=(te,se,me,_e,Ae,Me=!1)=>{const He=wp(te)&&te.data==="[",De=()=>oe(te,se,me,_e,Ae,He),{type:Se,ref:rt,shapeFlag:ot}=se,ft=te.nodeType;se.el=te;let Te=null;switch(Se){case Bc:ft!==3?Te=De():(te.data!==se.children&&(Go=!0,te.data=se.children),Te=m(te));break;case gi:ft!==8||He?Te=De():Te=m(te);break;case Tc:if(ft!==1)Te=De();else{Te=te;const nt=!se.children.length;for(let St=0;St<se.staticCount;St++)nt&&(se.children+=Te.outerHTML),St===se.staticCount-1&&(se.anchor=Te),Te=m(Te);return Te}break;case bn:He?Te=K(te,se,me,_e,Ae,Me):Te=De();break;default:if(ot&1)ft!==1||se.type.toLowerCase()!==te.tagName.toLowerCase()?Te=De():Te=F(te,se,me,_e,Ae,Me);else if(ot&6){se.slotScopeIds=Ae;const nt=v(te);if(i(se,nt,null,me,_e,rh(nt),Me),Te=He?de(te):m(te),Rc(se)){let St;He?(St=qr(bn),St.anchor=Te?Te.previousSibling:nt.lastChild):St=te.nodeType===3?qf(""):qr("div"),St.el=te,se.component.subTree=St}}else ot&64?ft!==8?Te=De():Te=se.type.hydrate(te,se,me,_e,Ae,Me,t,O):ot&128&&(Te=se.type.hydrate(te,se,me,_e,rh(v(te)),Ae,Me,t,A))}return rt!=null&&kh(rt,null,_e,se),Te},F=(te,se,me,_e,Ae,Me)=>{Me=Me||!!se.dynamicChildren;const{type:He,props:De,patchFlag:Se,shapeFlag:rt,dirs:ot}=se,ft=He==="input"&&ot||He==="option";if(ft||Se!==-1){if(ot&&$i(se,null,me,"created"),De)if(ft||!Me||Se&48)for(const nt in De)(ft&&nt.endsWith("value")||Gc(nt)&&!wc(nt))&&u(te,nt,null,De[nt],!1,void 0,me);else De.onClick&&u(te,"onClick",null,De.onClick,!1,void 0,me);let Te;if((Te=De&&De.onVnodeBeforeMount)&&Pi(Te,me,se),ot&&$i(se,null,me,"beforeMount"),((Te=De&&De.onVnodeMounted)||ot)&&kv(()=>{Te&&Pi(Te,me,se),ot&&$i(se,null,me,"mounted")},_e),rt&16&&!(De&&(De.innerHTML||De.textContent))){let nt=O(te.firstChild,se,te,me,_e,Ae,Me);for(;nt;){Go=!0;const St=nt;nt=nt.nextSibling,x(St)}}else rt&8&&te.textContent!==se.children&&(Go=!0,te.textContent=se.children)}return te.nextSibling},O=(te,se,me,_e,Ae,Me,He)=>{He=He||!!se.dynamicChildren;const De=se.children,Se=De.length;for(let rt=0;rt<Se;rt++){const ot=He?De[rt]:De[rt]=Ri(De[rt]);if(te)te=A(te,ot,_e,Ae,Me,He);else{if(ot.type===Bc&&!ot.children)continue;Go=!0,s(null,ot,me,null,_e,Ae,rh(me),Me)}}return te},K=(te,se,me,_e,Ae,Me)=>{const{slotScopeIds:He}=se;He&&(Ae=Ae?Ae.concat(He):He);const De=v(te),Se=O(m(te),se,De,me,_e,Ae,Me);return Se&&wp(Se)&&Se.data==="]"?m(se.anchor=Se):(Go=!0,l(se.anchor=T("]"),De,Se),Se)},oe=(te,se,me,_e,Ae,Me)=>{if(Go=!0,se.el=null,Me){const Se=de(te);for(;;){const rt=m(te);if(rt&&rt!==Se)x(rt);else break}}const He=m(te),De=v(te);return x(te),s(null,se,De,He,me,_e,rh(De),Ae),He},de=te=>{let se=0;for(;te;)if(te=m(te),te&&wp(te)&&(te.data==="["&&se++,te.data==="]")){if(se===0)return m(te);se--}return te};return[C,A]}const ni=kv;function m2(t){return g2(t,f2)}function g2(t,i){const s=Zb();s.__VUE__=!0;const{insert:u,remove:m,patchProp:v,createElement:x,createText:l,createComment:T,setText:C,setElementText:A,parentNode:F,nextSibling:O,setScopeId:K=Fi,cloneNode:oe,insertStaticContent:de}=t,te=(Z,ne,ye,Le=null,Re=null,Ue=null,Je=!1,qe=null,Qe=!!ne.dynamicChildren)=>{if(Z===ne)return;Z&&!Fs(Z,ne)&&(Le=dt(Z),Ar(Z,Re,Ue,!0),Z=null),ne.patchFlag===-2&&(Qe=!1,ne.dynamicChildren=null);const{type:Ze,ref:Ye,shapeFlag:vt}=ne;switch(Ze){case Bc:se(Z,ne,ye,Le);break;case gi:me(Z,ne,ye,Le);break;case Tc:Z==null&&_e(ne,ye,Le,Je);break;case bn:nt(Z,ne,ye,Le,Re,Ue,Je,qe,Qe);break;default:vt&1?He(Z,ne,ye,Le,Re,Ue,Je,qe,Qe):vt&6?St(Z,ne,ye,Le,Re,Ue,Je,qe,Qe):(vt&64||vt&128)&&Ze.process(Z,ne,ye,Le,Re,Ue,Je,qe,Qe,nr)}Ye!=null&&Re&&kh(Ye,Z&&Z.ref,Ue,ne||Z,!ne)},se=(Z,ne,ye,Le)=>{if(Z==null)u(ne.el=l(ne.children),ye,Le);else{const Re=ne.el=Z.el;ne.children!==Z.children&&C(Re,ne.children)}},me=(Z,ne,ye,Le)=>{Z==null?u(ne.el=T(ne.children||""),ye,Le):ne.el=Z.el},_e=(Z,ne,ye,Le)=>{[Z.el,Z.anchor]=de(Z.children,ne,ye,Le,Z.el,Z.anchor)},Ae=({el:Z,anchor:ne},ye,Le)=>{let Re;for(;Z&&Z!==ne;)Re=O(Z),u(Z,ye,Le),Z=Re;u(ne,ye,Le)},Me=({el:Z,anchor:ne})=>{let ye;for(;Z&&Z!==ne;)ye=O(Z),m(Z),Z=ye;m(ne)},He=(Z,ne,ye,Le,Re,Ue,Je,qe,Qe)=>{Je=Je||ne.type==="svg",Z==null?De(ne,ye,Le,Re,Ue,Je,qe,Qe):ot(Z,ne,Re,Ue,Je,qe,Qe)},De=(Z,ne,ye,Le,Re,Ue,Je,qe)=>{let Qe,Ze;const{type:Ye,props:vt,shapeFlag:_t,transition:At,patchFlag:jt,dirs:ve}=Z;if(Z.el&&oe!==void 0&&jt===-1)Qe=Z.el=oe(Z.el);else{if(Qe=Z.el=x(Z.type,Ue,vt&&vt.is,vt),_t&8?A(Qe,Z.children):_t&16&&rt(Z.children,Qe,null,Le,Re,Ue&&Ye!=="foreignObject",Je,qe),ve&&$i(Z,null,Le,"created"),vt){for(const ur in vt)ur!=="value"&&!wc(ur)&&v(Qe,ur,null,vt[ur],Ue,Z.children,Le,Re,Xe);"value"in vt&&v(Qe,"value",null,vt.value),(Ze=vt.onVnodeBeforeMount)&&Pi(Ze,Le,Z)}Se(Qe,Z,Z.scopeId,Je,Le)}ve&&$i(Z,null,Le,"beforeMount");const $e=(!Re||Re&&!Re.pendingBranch)&&At&&!At.persisted;$e&&At.beforeEnter(Qe),u(Qe,ne,ye),((Ze=vt&&vt.onVnodeMounted)||$e||ve)&&ni(()=>{Ze&&Pi(Ze,Le,Z),$e&&At.enter(Qe),ve&&$i(Z,null,Le,"mounted")},Re)},Se=(Z,ne,ye,Le,Re)=>{if(ye&&K(Z,ye),Le)for(let Ue=0;Ue<Le.length;Ue++)K(Z,Le[Ue]);if(Re){let Ue=Re.subTree;if(ne===Ue){const Je=Re.vnode;Se(Z,Je,Je.scopeId,Je.slotScopeIds,Re.parent)}}},rt=(Z,ne,ye,Le,Re,Ue,Je,qe,Qe=0)=>{for(let Ze=Qe;Ze<Z.length;Ze++){const Ye=Z[Ze]=qe?Jo(Z[Ze]):Ri(Z[Ze]);te(null,Ye,ne,ye,Le,Re,Ue,Je,qe)}},ot=(Z,ne,ye,Le,Re,Ue,Je)=>{const qe=ne.el=Z.el;let{patchFlag:Qe,dynamicChildren:Ze,dirs:Ye}=ne;Qe|=Z.patchFlag&16;const vt=Z.props||Lr,_t=ne.props||Lr;let At;ye&&Ds(ye,!1),(At=_t.onVnodeBeforeUpdate)&&Pi(At,ye,ne,Z),Ye&&$i(ne,Z,ye,"beforeUpdate"),ye&&Ds(ye,!0);const jt=Re&&ne.type!=="foreignObject";if(Ze?ft(Z.dynamicChildren,Ze,qe,ye,Le,jt,Ue):Je||dr(Z,ne,qe,null,ye,Le,jt,Ue,!1),Qe>0){if(Qe&16)Te(qe,ne,vt,_t,ye,Le,Re);else if(Qe&2&&vt.class!==_t.class&&v(qe,"class",null,_t.class,Re),Qe&4&&v(qe,"style",vt.style,_t.style,Re),Qe&8){const ve=ne.dynamicProps;for(let $e=0;$e<ve.length;$e++){const ur=ve[$e],Hr=vt[ur],ir=_t[ur];(ir!==Hr||ur==="value")&&v(qe,ur,Hr,ir,Re,Z.children,ye,Le,Xe)}}Qe&1&&Z.children!==ne.children&&A(qe,ne.children)}else!Je&&Ze==null&&Te(qe,ne,vt,_t,ye,Le,Re);((At=_t.onVnodeUpdated)||Ye)&&ni(()=>{At&&Pi(At,ye,ne,Z),Ye&&$i(ne,Z,ye,"updated")},Le)},ft=(Z,ne,ye,Le,Re,Ue,Je)=>{for(let qe=0;qe<ne.length;qe++){const Qe=Z[qe],Ze=ne[qe],Ye=Qe.el&&(Qe.type===bn||!Fs(Qe,Ze)||Qe.shapeFlag&70)?F(Qe.el):ye;te(Qe,Ze,Ye,null,Le,Re,Ue,Je,!0)}},Te=(Z,ne,ye,Le,Re,Ue,Je)=>{if(ye!==Le){for(const qe in Le){if(wc(qe))continue;const Qe=Le[qe],Ze=ye[qe];Qe!==Ze&&qe!=="value"&&v(Z,qe,Ze,Qe,Je,ne.children,Re,Ue,Xe)}if(ye!==Lr)for(const qe in ye)!wc(qe)&&!(qe in Le)&&v(Z,qe,ye[qe],null,Je,ne.children,Re,Ue,Xe);"value"in Le&&v(Z,"value",ye.value,Le.value)}},nt=(Z,ne,ye,Le,Re,Ue,Je,qe,Qe)=>{const Ze=ne.el=Z?Z.el:l(""),Ye=ne.anchor=Z?Z.anchor:l("");let{patchFlag:vt,dynamicChildren:_t,slotScopeIds:At}=ne;At&&(qe=qe?qe.concat(At):At),Z==null?(u(Ze,ye,Le),u(Ye,ye,Le),rt(ne.children,ye,Ye,Re,Ue,Je,qe,Qe)):vt>0&&vt&64&&_t&&Z.dynamicChildren?(ft(Z.dynamicChildren,_t,ye,Re,Ue,Je,qe),(ne.key!=null||Re&&ne===Re.subTree)&&Gv(Z,ne,!0)):dr(Z,ne,ye,Ye,Re,Ue,Je,qe,Qe)},St=(Z,ne,ye,Le,Re,Ue,Je,qe,Qe)=>{ne.slotScopeIds=qe,Z==null?ne.shapeFlag&512?Re.ctx.activate(ne,ye,Le,Je,Qe):Ft(ne,ye,Le,Re,Ue,Je,Qe):Ve(Z,ne,Qe)},Ft=(Z,ne,ye,Le,Re,Ue,Je)=>{const qe=Z.component=A2(Z,Le,Re);if(Wc(Z)&&(qe.ctx.renderer=nr),P2(qe),qe.asyncDep){if(Re&&Re.registerDep(qe,Dt),!Z.el){const Qe=qe.subTree=qr(gi);me(null,Qe,ne,ye)}return}Dt(qe,Z,ne,ye,Re,Ue,Je)},Ve=(Z,ne,ye)=>{const Le=ne.component=Z.component;if(Vw(Z,ne,ye))if(Le.asyncDep&&!Le.asyncResolved){zt(Le,ne,ye);return}else Le.next=ne,Mw(Le.update),Le.update();else ne.component=Z.component,ne.el=Z.el,Le.vnode=ne},Dt=(Z,ne,ye,Le,Re,Ue,Je)=>{const qe=()=>{if(Z.isMounted){let{next:Ye,bu:vt,u:_t,parent:At,vnode:jt}=Z,ve=Ye,$e;Ds(Z,!1),Ye?(Ye.el=jt.el,zt(Z,Ye,Je)):Ye=jt,vt&&yp(vt),($e=Ye.props&&Ye.props.onVnodeBeforeUpdate)&&Pi($e,At,Ye,jt),Ds(Z,!0);const ur=vp(Z),Hr=Z.subTree;Z.subTree=ur,te(Hr,ur,F(Hr.el),dt(Hr),Z,Re,Ue),Ye.el=ur.el,ve===null&&Uw(Z,ur.el),_t&&ni(_t,Re),($e=Ye.props&&Ye.props.onVnodeUpdated)&&ni(()=>Pi($e,At,Ye,jt),Re)}else{let Ye;const{el:vt,props:_t}=ne,{bm:At,m:jt,parent:ve}=Z,$e=Rc(ne);if(Ds(Z,!1),At&&yp(At),!$e&&(Ye=_t&&_t.onVnodeBeforeMount)&&Pi(Ye,ve,ne),Ds(Z,!0),vt&&Ot){const ur=()=>{Z.subTree=vp(Z),Ot(vt,Z.subTree,Z,Re,null)};$e?ne.type.__asyncLoader().then(()=>!Z.isUnmounted&&ur()):ur()}else{const ur=Z.subTree=vp(Z);te(null,ur,ye,Le,Z,Re,Ue),ne.el=ur.el}if(jt&&ni(jt,Re),!$e&&(Ye=_t&&_t.onVnodeMounted)){const ur=ne;ni(()=>Pi(Ye,ve,ur),Re)}ne.shapeFlag&256&&Z.a&&ni(Z.a,Re),Z.isMounted=!0,ne=ye=Le=null}},Qe=Z.effect=new kf(qe,()=>Nf(Z.update),Z.scope),Ze=Z.update=Qe.run.bind(Qe);Ze.id=Z.uid,Ds(Z,!0),Ze()},zt=(Z,ne,ye)=>{ne.component=Z;const Le=Z.vnode.props;Z.vnode=ne,Z.next=null,l2(Z,ne.props,Le,ye),h2(Z,ne.children,ye),il(),jf(void 0,Z.update),ol()},dr=(Z,ne,ye,Le,Re,Ue,Je,qe,Qe=!1)=>{const Ze=Z&&Z.children,Ye=Z?Z.shapeFlag:0,vt=ne.children,{patchFlag:_t,shapeFlag:At}=ne;if(_t>0){if(_t&128){Ir(Ze,vt,ye,Le,Re,Ue,Je,qe,Qe);return}else if(_t&256){pr(Ze,vt,ye,Le,Re,Ue,Je,qe,Qe);return}}At&8?(Ye&16&&Xe(Ze,Re,Ue),vt!==Ze&&A(ye,vt)):Ye&16?At&16?Ir(Ze,vt,ye,Le,Re,Ue,Je,qe,Qe):Xe(Ze,Re,Ue,!0):(Ye&8&&A(ye,""),At&16&&rt(vt,ye,Le,Re,Ue,Je,qe,Qe))},pr=(Z,ne,ye,Le,Re,Ue,Je,qe,Qe)=>{Z=Z||Wa,ne=ne||Wa;const Ze=Z.length,Ye=ne.length,vt=Math.min(Ze,Ye);let _t;for(_t=0;_t<vt;_t++){const At=ne[_t]=Qe?Jo(ne[_t]):Ri(ne[_t]);te(Z[_t],At,ye,null,Re,Ue,Je,qe,Qe)}Ze>Ye?Xe(Z,Re,Ue,!0,!1,vt):rt(ne,ye,Le,Re,Ue,Je,qe,Qe,vt)},Ir=(Z,ne,ye,Le,Re,Ue,Je,qe,Qe)=>{let Ze=0;const Ye=ne.length;let vt=Z.length-1,_t=Ye-1;for(;Ze<=vt&&Ze<=_t;){const At=Z[Ze],jt=ne[Ze]=Qe?Jo(ne[Ze]):Ri(ne[Ze]);if(Fs(At,jt))te(At,jt,ye,null,Re,Ue,Je,qe,Qe);else break;Ze++}for(;Ze<=vt&&Ze<=_t;){const At=Z[vt],jt=ne[_t]=Qe?Jo(ne[_t]):Ri(ne[_t]);if(Fs(At,jt))te(At,jt,ye,null,Re,Ue,Je,qe,Qe);else break;vt--,_t--}if(Ze>vt){if(Ze<=_t){const At=_t+1,jt=At<Ye?ne[At].el:Le;for(;Ze<=_t;)te(null,ne[Ze]=Qe?Jo(ne[Ze]):Ri(ne[Ze]),ye,jt,Re,Ue,Je,qe,Qe),Ze++}}else if(Ze>_t)for(;Ze<=vt;)Ar(Z[Ze],Re,Ue,!0),Ze++;else{const At=Ze,jt=Ze,ve=new Map;for(Ze=jt;Ze<=_t;Ze++){const Xt=ne[Ze]=Qe?Jo(ne[Ze]):Ri(ne[Ze]);Xt.key!=null&&ve.set(Xt.key,Ze)}let $e,ur=0;const Hr=_t-jt+1;let ir=!1,Sn=0;const Gr=new Array(Hr);for(Ze=0;Ze<Hr;Ze++)Gr[Ze]=0;for(Ze=At;Ze<=vt;Ze++){const Xt=Z[Ze];if(ur>=Hr){Ar(Xt,Re,Ue,!0);continue}let Ke;if(Xt.key!=null)Ke=ve.get(Xt.key);else for($e=jt;$e<=_t;$e++)if(Gr[$e-jt]===0&&Fs(Xt,ne[$e])){Ke=$e;break}Ke===void 0?Ar(Xt,Re,Ue,!0):(Gr[Ke-jt]=Ze+1,Ke>=Sn?Sn=Ke:ir=!0,te(Xt,ne[Ke],ye,null,Re,Ue,Je,qe,Qe),ur++)}const vi=ir?_2(Gr):Wa;for($e=vi.length-1,Ze=Hr-1;Ze>=0;Ze--){const Xt=jt+Ze,Ke=ne[Xt],$t=Xt+1<Ye?ne[Xt+1].el:Le;Gr[Ze]===0?te(null,Ke,ye,$t,Re,Ue,Je,qe,Qe):ir&&($e<0||Ze!==vi[$e]?vr(Ke,ye,$t,2):$e--)}}},vr=(Z,ne,ye,Le,Re=null)=>{const{el:Ue,type:Je,transition:qe,children:Qe,shapeFlag:Ze}=Z;if(Ze&6){vr(Z.component.subTree,ne,ye,Le);return}if(Ze&128){Z.suspense.move(ne,ye,Le);return}if(Ze&64){Je.move(Z,ne,ye,nr);return}if(Je===bn){u(Ue,ne,ye);for(let vt=0;vt<Qe.length;vt++)vr(Qe[vt],ne,ye,Le);u(Z.anchor,ne,ye);return}if(Je===Tc){Ae(Z,ne,ye);return}if(Le!==2&&Ze&1&&qe)if(Le===0)qe.beforeEnter(Ue),u(Ue,ne,ye),ni(()=>qe.enter(Ue),Re);else{const{leave:vt,delayLeave:_t,afterLeave:At}=qe,jt=()=>u(Ue,ne,ye),ve=()=>{vt(Ue,()=>{jt(),At&&At()})};_t?_t(Ue,jt,ve):ve()}else u(Ue,ne,ye)},Ar=(Z,ne,ye,Le=!1,Re=!1)=>{const{type:Ue,props:Je,ref:qe,children:Qe,dynamicChildren:Ze,shapeFlag:Ye,patchFlag:vt,dirs:_t}=Z;if(qe!=null&&kh(qe,null,ye,Z,!0),Ye&256){ne.ctx.deactivate(Z);return}const At=Ye&1&&_t,jt=!Rc(Z);let ve;if(jt&&(ve=Je&&Je.onVnodeBeforeUnmount)&&Pi(ve,ne,Z),Ye&6)at(Z.component,ye,Le);else{if(Ye&128){Z.suspense.unmount(ye,Le);return}At&&$i(Z,null,ne,"beforeUnmount"),Ye&64?Z.type.remove(Z,ne,ye,Re,nr,Le):Ze&&(Ue!==bn||vt>0&&vt&64)?Xe(Ze,ne,ye,!1,!0):(Ue===bn&&vt&384||!Re&&Ye&16)&&Xe(Qe,ne,ye),Le&&jr(Z)}(jt&&(ve=Je&&Je.onVnodeUnmounted)||At)&&ni(()=>{ve&&Pi(ve,ne,Z),At&&$i(Z,null,ne,"unmounted")},ye)},jr=Z=>{const{type:ne,el:ye,anchor:Le,transition:Re}=Z;if(ne===bn){Fe(ye,Le);return}if(ne===Tc){Me(Z);return}const Ue=()=>{m(ye),Re&&!Re.persisted&&Re.afterLeave&&Re.afterLeave()};if(Z.shapeFlag&1&&Re&&!Re.persisted){const{leave:Je,delayLeave:qe}=Re,Qe=()=>Je(ye,Ue);qe?qe(Z.el,Ue,Qe):Qe()}else Ue()},Fe=(Z,ne)=>{let ye;for(;Z!==ne;)ye=O(Z),m(Z),Z=ye;m(ne)},at=(Z,ne,ye)=>{const{bum:Le,scope:Re,update:Ue,subTree:Je,um:qe}=Z;Le&&yp(Le),Re.stop(),Ue&&(Ue.active=!1,Ar(Je,Z,ne,ye)),qe&&ni(qe,ne),ni(()=>{Z.isUnmounted=!0},ne),ne&&ne.pendingBranch&&!ne.isUnmounted&&Z.asyncDep&&!Z.asyncResolved&&Z.suspenseId===ne.pendingId&&(ne.deps--,ne.deps===0&&ne.resolve())},Xe=(Z,ne,ye,Le=!1,Re=!1,Ue=0)=>{for(let Je=Ue;Je<Z.length;Je++)Ar(Z[Je],ne,ye,Le,Re)},dt=Z=>Z.shapeFlag&6?dt(Z.component.subTree):Z.shapeFlag&128?Z.suspense.next():O(Z.anchor||Z.el),Zt=(Z,ne,ye)=>{Z==null?ne._vnode&&Ar(ne._vnode,null,null,!0):te(ne._vnode||null,Z,ne,null,null,null,ye),Ah(),ne._vnode=Z},nr={p:te,um:Ar,m:vr,r:jr,mt:Ft,mc:rt,pc:dr,pbc:ft,n:dt,o:t};let Rt,Ot;return i&&([Rt,Ot]=i(nr)),{render:Zt,hydrate:Rt,createApp:p2(Zt,Rt)}}function Ds({effect:t,update:i},s){t.allowRecurse=i.allowRecurse=s}function Gv(t,i,s=!1){const u=t.children,m=i.children;if(Ut(u)&&Ut(m))for(let v=0;v<u.length;v++){const x=u[v];let l=m[v];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=m[v]=Jo(m[v]),l.el=x.el),s||Gv(x,l))}}function _2(t){const i=t.slice(),s=[0];let u,m,v,x,l;const T=t.length;for(u=0;u<T;u++){const C=t[u];if(C!==0){if(m=s[s.length-1],t[m]<C){i[u]=m,s.push(u);continue}for(v=0,x=s.length-1;v<x;)l=v+x>>1,t[s[l]]<C?v=l+1:x=l;C<t[s[v]]&&(v>0&&(i[u]=s[v-1]),s[v]=u)}}for(v=s.length,x=s[v-1];v-- >0;)s[v]=x,x=i[x];return s}const y2=t=>t.__isTeleport,Zv="components";function qa(t,i){return x2(Zv,t,!0,i)||t}const v2=Symbol();function x2(t,i,s=!0,u=!1){const m=Nn||mn;if(m){const v=m.type;if(t===Zv){const l=z2(v);if(l&&(l===i||l===Gi(i)||l===Zh(Gi(i))))return v}const x=Xg(m[t]||v[t],i)||Xg(m.appContext[t],i);return!x&&u?v:x}}function Xg(t,i){return t&&(t[i]||t[Gi(i)]||t[Zh(Gi(i))])}const bn=Symbol(void 0),Bc=Symbol(void 0),gi=Symbol(void 0),Tc=Symbol(void 0),Ic=[];let $s=null;function tn(t=!1){Ic.push($s=t?null:[])}function b2(){Ic.pop(),$s=Ic[Ic.length-1]||null}let Dh=1;function Jg(t){Dh+=t}function Wv(t){return t.dynamicChildren=Dh>0?$s||Wa:null,b2(),Dh>0&&$s&&$s.push(t),t}function Dn(t,i,s,u,m,v){return Wv(mi(t,i,s,u,m,v,!0))}function Fc(t,i,s,u,m){return Wv(qr(t,i,s,u,m,!0))}function zh(t){return t?t.__v_isVNode===!0:!1}function Fs(t,i){return t.type===i.type&&t.key===i.key}const Yh="__vInternal",Kv=({key:t})=>t!=null?t:null,gh=({ref:t,ref_key:i,ref_for:s})=>t!=null?Rr(t)||wn(t)||Yt(t)?{i:Nn,r:t,k:i,f:!!s}:t:null;function mi(t,i=null,s=null,u=0,m=null,v=t===bn?0:1,x=!1,l=!1){const T={__v_isVNode:!0,__v_skip:!0,type:t,props:i,key:i&&Kv(i),ref:i&&gh(i),scopeId:Xh,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:v,patchFlag:u,dynamicProps:m,dynamicChildren:null,appContext:null};return l?(Hf(T,s),v&128&&t.normalize(T)):s&&(T.shapeFlag|=Rr(s)?8:16),Dh>0&&!x&&$s&&(T.patchFlag>0||v&6)&&T.patchFlag!==32&&$s.push(T),T}const qr=w2;function w2(t,i=null,s=null,u=0,m=null,v=!1){if((!t||t===v2)&&(t=gi),zh(t)){const l=Hs(t,i,!0);return s&&Hf(l,s),l}if(M2(t)&&(t=t.__vccOpts),i){i=E2(i);let{class:l,style:T}=i;l&&!Rr(l)&&(i.class=os(l)),un(T)&&(yv(T)&&!Ut(T)&&(T=zn({},T)),i.style=Hc(T))}const x=Rr(t)?1:$w(t)?128:y2(t)?64:un(t)?4:Yt(t)?2:0;return mi(t,i,s,u,m,x,v,!0)}function E2(t){return t?yv(t)||Yh in t?zn({},t):t:null}function Hs(t,i,s=!1){const{props:u,ref:m,patchFlag:v,children:x}=t,l=i?Xv(u||{},i):u;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Kv(l),ref:i&&i.ref?s&&m?Ut(m)?m.concat(gh(i)):[m,gh(i)]:gh(i):m,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:x,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:i&&t.type!==bn?v===-1?16:v|16:v,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Hs(t.ssContent),ssFallback:t.ssFallback&&Hs(t.ssFallback),el:t.el,anchor:t.anchor}}function qf(t=" ",i=0){return qr(Bc,null,t,i)}function D5(t,i){const s=qr(Tc,null,t);return s.staticCount=i,s}function Ja(t="",i=!1){return i?(tn(),Fc(gi,null,t)):qr(gi,null,t)}function Ri(t){return t==null||typeof t=="boolean"?qr(gi):Ut(t)?qr(bn,null,t.slice()):typeof t=="object"?Jo(t):qr(Bc,null,String(t))}function Jo(t){return t.el===null||t.memo?t:Hs(t)}function Hf(t,i){let s=0;const{shapeFlag:u}=t;if(i==null)i=null;else if(Ut(i))s=16;else if(typeof i=="object")if(u&65){const m=i.default;m&&(m._c&&(m._d=!1),Hf(t,m()),m._c&&(m._d=!0));return}else{s=32;const m=i._;!m&&!(Yh in i)?i._ctx=Nn:m===3&&Nn&&(Nn.slots._===1?i._=1:(i._=2,t.patchFlag|=1024))}else Yt(i)?(i={default:i,_ctx:Nn},s=32):(i=String(i),u&64?(s=16,i=[qf(i)]):s=8);t.children=i,t.shapeFlag|=s}function Xv(...t){const i={};for(let s=0;s<t.length;s++){const u=t[s];for(const m in u)if(m==="class")i.class!==u.class&&(i.class=os([i.class,u.class]));else if(m==="style")i.style=Hc([i.style,u.style]);else if(Gc(m)){const v=i[m],x=u[m];x&&v!==x&&!(Ut(v)&&v.includes(x))&&(i[m]=v?[].concat(v,x):x)}else m!==""&&(i[m]=u[m])}return i}function Pi(t,i,s,u=null){ki(t,i,7,[s,u])}function Gf(t,i,s,u){let m;const v=s&&s[u];if(Ut(t)||Rr(t)){m=new Array(t.length);for(let x=0,l=t.length;x<l;x++)m[x]=i(t[x],x,void 0,v&&v[x])}else if(typeof t=="number"){m=new Array(t);for(let x=0;x<t;x++)m[x]=i(x+1,x,void 0,v&&v[x])}else if(un(t))if(t[Symbol.iterator])m=Array.from(t,(x,l)=>i(x,l,void 0,v&&v[l]));else{const x=Object.keys(t);m=new Array(x.length);for(let l=0,T=x.length;l<T;l++){const C=x[l];m[l]=i(t[C],C,l,v&&v[l])}}else m=[];return s&&(s[u]=m),m}function Qh(t,i,s={},u,m){if(Nn.isCE||Nn.parent&&Rc(Nn.parent)&&Nn.parent.isCE)return qr("slot",i==="default"?null:{name:i},u&&u());let v=t[i];v&&v._c&&(v._d=!1),tn();const x=v&&Jv(v(s)),l=Fc(bn,{key:s.key||`_${i}`},x||(u?u():[]),x&&t._===1?64:-2);return!m&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),v&&v._c&&(v._d=!0),l}function Jv(t){return t.some(i=>zh(i)?!(i.type===gi||i.type===bn&&!Jv(i.children)):!0)?t:null}const ef=t=>t?Qv(t)?ed(t)||t.proxy:ef(t.parent):null,Mh=zn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ef(t.parent),$root:t=>ef(t.root),$emit:t=>t.emit,$options:t=>Nv(t),$forceUpdate:t=>()=>Nf(t.update),$nextTick:t=>Ff.bind(t.proxy),$watch:t=>qw.bind(t)}),S2={get({_:t},i){const{ctx:s,setupState:u,data:m,props:v,accessCache:x,type:l,appContext:T}=t;let C;if(i[0]!=="$"){const K=x[i];if(K!==void 0)switch(K){case 1:return u[i];case 2:return m[i];case 4:return s[i];case 3:return v[i]}else{if(u!==Lr&&gr(u,i))return x[i]=1,u[i];if(m!==Lr&&gr(m,i))return x[i]=2,m[i];if((C=t.propsOptions[0])&&gr(C,i))return x[i]=3,v[i];if(s!==Lr&&gr(s,i))return x[i]=4,s[i];Jp&&(x[i]=0)}}const A=Mh[i];let F,O;if(A)return i==="$attrs"&&_i(t,"get",i),A(t);if((F=l.__cssModules)&&(F=F[i]))return F;if(s!==Lr&&gr(s,i))return x[i]=4,s[i];if(O=T.config.globalProperties,gr(O,i))return O[i]},set({_:t},i,s){const{data:u,setupState:m,ctx:v}=t;return m!==Lr&&gr(m,i)?(m[i]=s,!0):u!==Lr&&gr(u,i)?(u[i]=s,!0):gr(t.props,i)||i[0]==="$"&&i.slice(1)in t?!1:(v[i]=s,!0)},has({_:{data:t,setupState:i,accessCache:s,ctx:u,appContext:m,propsOptions:v}},x){let l;return!!s[x]||t!==Lr&&gr(t,x)||i!==Lr&&gr(i,x)||(l=v[0])&&gr(l,x)||gr(u,x)||gr(Mh,x)||gr(m.config.globalProperties,x)},defineProperty(t,i,s){return s.get!=null?t._.accessCache[i]=0:gr(s,"value")&&this.set(t,i,s.value,null),Reflect.defineProperty(t,i,s)}},T2=Hv();let I2=0;function A2(t,i,s){const u=t.type,m=(i?i.appContext:t.appContext)||T2,v={uid:I2++,vnode:t,type:u,parent:i,appContext:m,root:null,next:null,subTree:null,effect:null,update:null,scope:new Wb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:i?i.provides:Object.create(m.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vv(u,m),emitsOptions:Cv(u,m),emit:null,emitted:null,propsDefaults:Lr,inheritAttrs:u.inheritAttrs,ctx:Lr,data:Lr,props:Lr,attrs:Lr,slots:Lr,refs:Lr,setupState:Lr,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return v.ctx={_:v},v.root=i?i.root:v,v.emit=Rw.bind(null,v),t.ce&&t.ce(v),v}let mn=null;const Yv=()=>mn||Nn,Ya=t=>{mn=t,t.scope.on()},qs=()=>{mn&&mn.scope.off(),mn=null};function Qv(t){return t.vnode.shapeFlag&4}let Qa=!1;function P2(t,i=!1){Qa=i;const{props:s,children:u}=t.vnode,m=Qv(t);a2(t,s,m,i),u2(t,u);const v=m?C2(t,i):void 0;return Qa=!1,v}function C2(t,i){const s=t.type;t.accessCache=Object.create(null),t.proxy=vv(new Proxy(t.ctx,S2));const{setup:u}=s;if(u){const m=t.setupContext=u.length>1?D2(t):null;Ya(t),il();const v=ts(u,t,0,[t.props,m]);if(ol(),qs(),nv(v)){if(v.then(qs,qs),i)return v.then(x=>{Yg(t,x,i)}).catch(x=>{Zc(x,t,0)});t.asyncDep=v}else Yg(t,v,i)}else e0(t,i)}function Yg(t,i,s){Yt(i)?t.type.__ssrInlineRender?t.ssrRender=i:t.render=i:un(i)&&(t.setupState=Sv(i)),e0(t,s)}let Qg;function e0(t,i,s){const u=t.type;if(!t.render){if(!i&&Qg&&!u.render){const m=u.template;if(m){const{isCustomElement:v,compilerOptions:x}=t.appContext.config,{delimiters:l,compilerOptions:T}=u,C=zn(zn({isCustomElement:v,delimiters:l},x),T);u.render=Qg(m,C)}}t.render=u.render||Fi}Ya(t),il(),r2(t),ol(),qs()}function k2(t){return new Proxy(t.attrs,{get(i,s){return _i(t,"get","$attrs"),i[s]}})}function D2(t){const i=u=>{t.exposed=u||{}};let s;return{get attrs(){return s||(s=k2(t))},slots:t.slots,emit:t.emit,expose:i}}function ed(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Sv(vv(t.exposed)),{get(i,s){if(s in i)return i[s];if(s in Mh)return Mh[s](t)}}))}function z2(t){return Yt(t)&&t.displayName||t.name}function M2(t){return Yt(t)&&"__vccOpts"in t}const Fr=(t,i)=>kw(t,i,Qa);function cr(t,i,s){const u=arguments.length;return u===2?un(i)&&!Ut(i)?zh(i)?qr(t,null,[i]):qr(t,i):qr(t,null,i):(u>3?s=Array.prototype.slice.call(arguments,2):u===3&&zh(s)&&(s=[s]),qr(t,i,s))}const O2="3.2.33",L2="http://www.w3.org/2000/svg",Ns=typeof document!="undefined"?document:null,e_=Ns&&Ns.createElement("template"),R2={insert:(t,i,s)=>{i.insertBefore(t,s||null)},remove:t=>{const i=t.parentNode;i&&i.removeChild(t)},createElement:(t,i,s,u)=>{const m=i?Ns.createElementNS(L2,t):Ns.createElement(t,s?{is:s}:void 0);return t==="select"&&u&&u.multiple!=null&&m.setAttribute("multiple",u.multiple),m},createText:t=>Ns.createTextNode(t),createComment:t=>Ns.createComment(t),setText:(t,i)=>{t.nodeValue=i},setElementText:(t,i)=>{t.textContent=i},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ns.querySelector(t),setScopeId(t,i){t.setAttribute(i,"")},cloneNode(t){const i=t.cloneNode(!0);return"_value"in t&&(i._value=t._value),i},insertStaticContent(t,i,s,u,m,v){const x=s?s.previousSibling:i.lastChild;if(m&&(m===v||m.nextSibling))for(;i.insertBefore(m.cloneNode(!0),s),!(m===v||!(m=m.nextSibling)););else{e_.innerHTML=u?`<svg>${t}</svg>`:t;const l=e_.content;if(u){const T=l.firstChild;for(;T.firstChild;)l.appendChild(T.firstChild);l.removeChild(T)}i.insertBefore(l,s)}return[x?x.nextSibling:i.firstChild,s?s.previousSibling:i.lastChild]}};function B2(t,i,s){const u=t._vtc;u&&(i=(i?[i,...u]:[...u]).join(" ")),i==null?t.removeAttribute("class"):s?t.setAttribute("class",i):t.className=i}function F2(t,i,s){const u=t.style,m=Rr(s);if(s&&!m){for(const v in s)tf(u,v,s[v]);if(i&&!Rr(i))for(const v in i)s[v]==null&&tf(u,v,"")}else{const v=u.display;m?i!==s&&(u.cssText=s):i&&t.removeAttribute("style"),"_vod"in t&&(u.display=v)}}const t_=/\s*!important$/;function tf(t,i,s){if(Ut(s))s.forEach(u=>tf(t,i,u));else if(s==null&&(s=""),i.startsWith("--"))t.setProperty(i,s);else{const u=N2(t,i);t_.test(s)?t.setProperty(Gs(u),s.replace(t_,""),"important"):t[u]=s}}const r_=["Webkit","Moz","ms"],Ep={};function N2(t,i){const s=Ep[i];if(s)return s;let u=Gi(i);if(u!=="filter"&&u in t)return Ep[i]=u;u=Zh(u);for(let m=0;m<r_.length;m++){const v=r_[m]+u;if(v in t)return Ep[i]=v}return i}const n_="http://www.w3.org/1999/xlink";function j2(t,i,s,u,m){if(u&&i.startsWith("xlink:"))s==null?t.removeAttributeNS(n_,i.slice(6,i.length)):t.setAttributeNS(n_,i,s);else{const v=Rb(i);s==null||v&&!ev(s)?t.removeAttribute(i):t.setAttribute(i,v?"":s)}}function V2(t,i,s,u,m,v,x){if(i==="innerHTML"||i==="textContent"){u&&x(u,m,v),t[i]=s==null?"":s;return}if(i==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=s;const T=s==null?"":s;(t.value!==T||t.tagName==="OPTION")&&(t.value=T),s==null&&t.removeAttribute(i);return}let l=!1;if(s===""||s==null){const T=typeof t[i];T==="boolean"?s=ev(s):s==null&&T==="string"?(s="",l=!0):T==="number"&&(s=0,l=!0)}try{t[i]=s}catch{}l&&t.removeAttribute(i)}const[t0,U2]=(()=>{let t=Date.now,i=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(t=()=>performance.now());const s=navigator.userAgent.match(/firefox\/(\d+)/i);i=!!(s&&Number(s[1])<=53)}return[t,i]})();let rf=0;const $2=Promise.resolve(),q2=()=>{rf=0},H2=()=>rf||($2.then(q2),rf=t0());function G2(t,i,s,u){t.addEventListener(i,s,u)}function Z2(t,i,s,u){t.removeEventListener(i,s,u)}function W2(t,i,s,u,m=null){const v=t._vei||(t._vei={}),x=v[i];if(u&&x)x.value=u;else{const[l,T]=K2(i);if(u){const C=v[i]=X2(u,m);G2(t,l,C,T)}else x&&(Z2(t,l,x,T),v[i]=void 0)}}const i_=/(?:Once|Passive|Capture)$/;function K2(t){let i;if(i_.test(t)){i={};let s;for(;s=t.match(i_);)t=t.slice(0,t.length-s[0].length),i[s[0].toLowerCase()]=!0}return[Gs(t.slice(2)),i]}function X2(t,i){const s=u=>{const m=u.timeStamp||t0();(U2||m>=s.attached-1)&&ki(J2(u,s.value),i,5,[u])};return s.value=t,s.attached=H2(),s}function J2(t,i){if(Ut(i)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},i.map(u=>m=>!m._stopped&&u&&u(m))}else return i}const o_=/^on[a-z]/,Y2=(t,i,s,u,m=!1,v,x,l,T)=>{i==="class"?B2(t,u,m):i==="style"?F2(t,s,u):Gc(i)?Tf(i)||W2(t,i,s,u,x):(i[0]==="."?(i=i.slice(1),!0):i[0]==="^"?(i=i.slice(1),!1):Q2(t,i,u,m))?V2(t,i,u,v,x,l,T):(i==="true-value"?t._trueValue=u:i==="false-value"&&(t._falseValue=u),j2(t,i,u,m))};function Q2(t,i,s,u){return u?!!(i==="innerHTML"||i==="textContent"||i in t&&o_.test(i)&&Yt(s)):i==="spellcheck"||i==="draggable"||i==="translate"||i==="form"||i==="list"&&t.tagName==="INPUT"||i==="type"&&t.tagName==="TEXTAREA"||o_.test(i)&&Rr(s)?!1:i in t}const Zo="transition",uc="animation",td=(t,{slots:i})=>cr(Mv,eE(t),i);td.displayName="Transition";const r0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};td.props=zn({},Mv.props,r0);const zs=(t,i=[])=>{Ut(t)?t.forEach(s=>s(...i)):t&&t(...i)},s_=t=>t?Ut(t)?t.some(i=>i.length>1):t.length>1:!1;function eE(t){const i={};for(const Te in t)Te in r0||(i[Te]=t[Te]);if(t.css===!1)return i;const{name:s="v",type:u,duration:m,enterFromClass:v=`${s}-enter-from`,enterActiveClass:x=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:T=v,appearActiveClass:C=x,appearToClass:A=l,leaveFromClass:F=`${s}-leave-from`,leaveActiveClass:O=`${s}-leave-active`,leaveToClass:K=`${s}-leave-to`}=t,oe=tE(m),de=oe&&oe[0],te=oe&&oe[1],{onBeforeEnter:se,onEnter:me,onEnterCancelled:_e,onLeave:Ae,onLeaveCancelled:Me,onBeforeAppear:He=se,onAppear:De=me,onAppearCancelled:Se=_e}=i,rt=(Te,nt,St)=>{Ma(Te,nt?A:l),Ma(Te,nt?C:x),St&&St()},ot=(Te,nt)=>{Ma(Te,K),Ma(Te,O),nt&&nt()},ft=Te=>(nt,St)=>{const Ft=Te?De:me,Ve=()=>rt(nt,Te,St);zs(Ft,[nt,Ve]),a_(()=>{Ma(nt,Te?T:v),Wo(nt,Te?A:l),s_(Ft)||l_(nt,u,de,Ve)})};return zn(i,{onBeforeEnter(Te){zs(se,[Te]),Wo(Te,v),Wo(Te,x)},onBeforeAppear(Te){zs(He,[Te]),Wo(Te,T),Wo(Te,C)},onEnter:ft(!1),onAppear:ft(!0),onLeave(Te,nt){const St=()=>ot(Te,nt);Wo(Te,F),iE(),Wo(Te,O),a_(()=>{Ma(Te,F),Wo(Te,K),s_(Ae)||l_(Te,u,te,St)}),zs(Ae,[Te,St])},onEnterCancelled(Te){rt(Te,!1),zs(_e,[Te])},onAppearCancelled(Te){rt(Te,!0),zs(Se,[Te])},onLeaveCancelled(Te){ot(Te),zs(Me,[Te])}})}function tE(t){if(t==null)return null;if(un(t))return[Sp(t.enter),Sp(t.leave)];{const i=Sp(t);return[i,i]}}function Sp(t){return sv(t)}function Wo(t,i){i.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t._vtc||(t._vtc=new Set)).add(i)}function Ma(t,i){i.split(/\s+/).forEach(u=>u&&t.classList.remove(u));const{_vtc:s}=t;s&&(s.delete(i),s.size||(t._vtc=void 0))}function a_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let rE=0;function l_(t,i,s,u){const m=t._endId=++rE,v=()=>{m===t._endId&&u()};if(s)return setTimeout(v,s);const{type:x,timeout:l,propCount:T}=nE(t,i);if(!x)return u();const C=x+"end";let A=0;const F=()=>{t.removeEventListener(C,O),v()},O=K=>{K.target===t&&++A>=T&&F()};setTimeout(()=>{A<T&&F()},l+1),t.addEventListener(C,O)}function nE(t,i){const s=window.getComputedStyle(t),u=oe=>(s[oe]||"").split(", "),m=u(Zo+"Delay"),v=u(Zo+"Duration"),x=c_(m,v),l=u(uc+"Delay"),T=u(uc+"Duration"),C=c_(l,T);let A=null,F=0,O=0;i===Zo?x>0&&(A=Zo,F=x,O=v.length):i===uc?C>0&&(A=uc,F=C,O=T.length):(F=Math.max(x,C),A=F>0?x>C?Zo:uc:null,O=A?A===Zo?v.length:T.length:0);const K=A===Zo&&/\b(transform|all)(,|$)/.test(s[Zo+"Property"]);return{type:A,timeout:F,propCount:O,hasTransform:K}}function c_(t,i){for(;t.length<i.length;)t=t.concat(t);return Math.max(...i.map((s,u)=>u_(s)+u_(t[u])))}function u_(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function iE(){return document.body.offsetHeight}const oE={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},z5=(t,i)=>s=>{if(!("key"in s))return;const u=Gs(s.key);if(i.some(m=>m===u||oE[m]===u))return t(s)},M5={beforeMount(t,{value:i},{transition:s}){t._vod=t.style.display==="none"?"":t.style.display,s&&i?s.beforeEnter(t):hc(t,i)},mounted(t,{value:i},{transition:s}){s&&i&&s.enter(t)},updated(t,{value:i,oldValue:s},{transition:u}){!i!=!s&&(u?i?(u.beforeEnter(t),hc(t,!0),u.enter(t)):u.leave(t,()=>{hc(t,!1)}):hc(t,i))},beforeUnmount(t,{value:i}){hc(t,i)}};function hc(t,i){t.style.display=i?t._vod:"none"}const sE=zn({patchProp:Y2},R2);let Tp,h_=!1;function aE(){return Tp=h_?Tp:m2(sE),h_=!0,Tp}const lE=(...t)=>{const i=aE().createApp(...t),{mount:s}=i;return i.mount=u=>{const m=cE(u);if(m)return s(m,!0,m instanceof SVGElement)},i};function cE(t){return Rr(t)?document.querySelector(t):t}const uE={base:"/",lang:"en-US",title:"",description:"",head:[["link",{rel:"icon",href:"/logo-assets/touch/homescreen192.png"}],["meta",{name:"theme-color",content:"#49BF7C"}],["link",{rel:"manifest",href:"/manifest.json"}],["meta",{prefix:"og: http://ogp.me/ns#",property:"og:type",content:"article"}],["meta",{prefix:"og: http://ogp.me/ns#",property:"og:image",content:"https://mirrors.sustech.edu.cn/git/sustech-online/sustech-online-ng/-/raw/master/docs/assets/og-image.png"}],["meta",{prefix:"og: http://ogp.me/ns#",property:"og:article:author",content:"sustech.online"}],["meta",{name:"apple-mobile-web-app-capable",content:"yes"}],["meta",{name:"apple-mobile-web-app-status-bar-style",content:"black"}],["link",{rel:"apple-touch-icon",href:"/logo-assets/touch/homescreen168.png"}],["meta",{name:"msapplication-TileImage",content:"/logo-assets/touch/homescreen144.png"}],["meta",{name:"msapplication-TileColor",content:"#49BF7C"}],["meta",{name:"google-site-verification",content:"Av-srANCmFA_yZ8Iasa1yQsIPJCF_zlP5AoD35m6_Ww"}],["script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=G-1BQBXDGY3R"}],["script",{},`
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-1BQBXDGY3R');
    `],["script",{src:"/wx_helper.js"}],["script",{src:"https://res.wx.qq.com/open/js/jweixin-1.6.0.js"}],["script",{src:"https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"}],["script",{src:"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"}],["link",{rel:"stylesheet",type:"text/css",href:"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"}],["script",{src:"https://lib.baomitu.com/datatables/1.10.21/js/jquery.dataTables.min.js"}],["link",{rel:"stylesheet",type:"text/css",href:"https://lib.baomitu.com/datatables/1.10.21/css/jquery.dataTables.min.css"}]],locales:{"/":{title:"\u5357\u79D1\u624B\u518C",lang:"zh-CN",description:"Online manual for sustecher"}}};var hE=([t,i,s])=>t==="meta"&&i.name?`${t}.${i.name}`:["title","base"].includes(t)?t:t==="template"&&i.id?`${t}.${i.id}`:JSON.stringify([t,i,s]),dE=t=>{const i=new Set,s=[];return t.forEach(u=>{const m=hE(u);i.has(m)||(i.add(m),s.push(u))}),s},pE=t=>/^(https?:)?\/\//.test(t),O5=t=>/^mailto:/.test(t),L5=t=>/^tel:/.test(t),n0=t=>Object.prototype.toString.call(t)==="[object Object]",fE=t=>t.replace(/\/$/,""),mE=t=>t.replace(/^\//,""),i0=(t,i)=>{const s=Object.keys(t).sort((u,m)=>{const v=m.split("/").length-u.split("/").length;return v!==0?v:m.length-u.length});for(const u of s)if(i.startsWith(u))return u;return"/"},gE=(t,i="/")=>t.replace(/^(https?:)?\/\/[^/]*/,"").replace(new RegExp(`^${i}`),"/");const o0={"v-8daa1a0e":bt(()=>Ce(()=>import("./index.html.055a55a7.js"),[])),"v-74bc627b":bt(()=>Ce(()=>import("./index.html.fe9ba911.js"),[])),"v-08ae5eba":bt(()=>Ce(()=>import("./2018-2019.html.453acd86.js"),[])),"v-93cfbde4":bt(()=>Ce(()=>import("./2019-2020.html.961761bd.js"),[])),"v-f917537a":bt(()=>Ce(()=>import("./2020-2021.html.d8754999.js"),[])),"v-1a0de1a3":bt(()=>Ce(()=>import("./2021-2022.html.5ffeedf7.js"),[])),"v-190ab309":bt(()=>Ce(()=>import("./2021fall.html.7374e8ec.js"),[])),"v-96167c50":bt(()=>Ce(()=>import("./index.html.420256e2.js"),[])),"v-96536bf0":bt(()=>Ce(()=>import("./index.html.b093c773.js"),[])),"v-dbd38712":bt(()=>Ce(()=>import("./index.html.d740f578.js"),[])),"v-c73889da":bt(()=>Ce(()=>import("./index.html.a2ab5206.js"),[])),"v-104cfa63":bt(()=>Ce(()=>import("./2021.html.6d440ee5.js"),[])),"v-780207b9":bt(()=>Ce(()=>import("./index.html.34519b62.js"),[])),"v-14e6315a":bt(()=>Ce(()=>import("./index.html.61ac3234.js"),[])),"v-42f2be94":bt(()=>Ce(()=>import("./vehicle-charger.html.0bd6d2c2.js"),[])),"v-ed48bdf8":bt(()=>Ce(()=>import("./index.html.d80d2cbf.js"),[])),"v-f4bc5604":bt(()=>Ce(()=>import("./index.html.af4f8c15.js"),[])),"v-1500d063":bt(()=>Ce(()=>import("./index.html.fb301ded.js"),[])),"v-014445c8":bt(()=>Ce(()=>import("./index.html.def76de4.js"),[])),"v-461d4a7c":bt(()=>Ce(()=>import("./registered-organization-2019.html.00db67a0.js"),[])),"v-6ba7e826":bt(()=>Ce(()=>import("./registered-organization-2020.html.dada7e32.js"),[])),"v-28ddfa13":bt(()=>Ce(()=>import("./index.html.d7c205ec.js"),[])),"v-be92ea7e":bt(()=>Ce(()=>import("./index.html.912c3d1b.js"),[])),"v-d7188082":bt(()=>Ce(()=>import("./index.html.8fb8c67a.js"),[])),"v-d1061704":bt(()=>Ce(()=>import("./paper-tools.html.4a04b5f3.js"),[])),"v-4322d0a7":bt(()=>Ce(()=>import("./index.html.8a0660fc.js"),["assets/index.html.8a0660fc.js","assets/1.7b653657.js"])),"v-69b23ddf":bt(()=>Ce(()=>import("./index.html.58bd17da.js"),["assets/index.html.58bd17da.js","assets/1.7b653657.js"])),"v-1678dd6f":bt(()=>Ce(()=>import("./bustimer-wx.html.f2c26fc7.js"),["assets/bustimer-wx.html.f2c26fc7.js","assets/busline2.5a106069.js"])),"v-1630dfb5":bt(()=>Ce(()=>import("./bustimer.html.59ec296a.js"),["assets/bustimer.html.59ec296a.js","assets/busline2.5a106069.js"])),"v-6a28f6e0":bt(()=>Ce(()=>import("./holiday.html.bf14055b.js"),["assets/holiday.html.bf14055b.js","assets/busline2.5a106069.js"])),"v-48975204":bt(()=>Ce(()=>import("./redirect.html.b3b65541.js"),[])),"v-8059a7a6":bt(()=>Ce(()=>import("./workday.html.ba0c437b.js"),["assets/workday.html.ba0c437b.js","assets/busline2.5a106069.js"])),"v-22cd7d0c":bt(()=>Ce(()=>import("./index.html.05a5361b.js"),[])),"v-0e92d420":bt(()=>Ce(()=>import("./index.html.7dfca945.js"),[])),"v-2b8cac58":bt(()=>Ce(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.html.db5603eb.js"),[])),"v-66965350":bt(()=>Ce(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.html.9ef25008.js"),[])),"v-66317da4":bt(()=>Ce(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.html.615df534.js"),[])),"v-5c3fcdf6":bt(()=>Ce(()=>import("./index.html.3d1ad83c.js"),[])),"v-04710004":bt(()=>Ce(()=>import("./index.html.4163111e.js"),[])),"v-d42194b6":bt(()=>Ce(()=>import("./index.html.e2220c90.js"),[])),"v-20383a78":bt(()=>Ce(()=>import("./index.html.25e9a948.js"),[])),"v-42c1fa44":bt(()=>Ce(()=>import("./index.html.2b732d50.js"),[])),"v-76cff034":bt(()=>Ce(()=>import("./index.html.d53ad1ef.js"),[])),"v-29860ed0":bt(()=>Ce(()=>import("./index.html.a70e05ab.js"),[])),"v-622da02f":bt(()=>Ce(()=>import("./index.html.b31e06c1.js"),[])),"v-5e590ec6":bt(()=>Ce(()=>import("./index.html.9b80bcae.js"),[])),"v-1fa222d4":bt(()=>Ce(()=>import("./index.html.6af052ba.js"),[])),"v-48519846":bt(()=>Ce(()=>import("./index.html.bab2906c.js"),[])),"v-369295b4":bt(()=>Ce(()=>import("./index.html.b71588d5.js"),[])),"v-3692bb1f":bt(()=>Ce(()=>import("./index.html.9e6cefbe.js"),[])),"v-425958ce":bt(()=>Ce(()=>import("./index.html.271dc252.js"),[])),"v-3692ee77":bt(()=>Ce(()=>import("./index.html.af8b0905.js"),[])),"v-2686552a":bt(()=>Ce(()=>import("./index.html.a185a3ab.js"),[])),"v-45d74ec0":bt(()=>Ce(()=>import("./index.html.baa1cc58.js"),[])),"v-772a5784":bt(()=>Ce(()=>import("./index.html.51714cf8.js"),[])),"v-8460eeb8":bt(()=>Ce(()=>import("./advice-on-study.html.3ec4e4f0.js"),[])),"v-435bd49a":bt(()=>Ce(()=>import("./info-on-study.html.6077edff.js"),[])),"v-6323734e":bt(()=>Ce(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.html.b60c937e.js"),[])),"v-2a23f022":bt(()=>Ce(()=>import("./index.html.074cf96f.js"),[])),"v-66061b92":bt(()=>Ce(()=>import("./index.html.1fecc84d.js"),[])),"v-89ac2bec":bt(()=>Ce(()=>import("./index.html.2bb2748a.js"),[])),"v-1549b190":bt(()=>Ce(()=>import("./index.html.7024f5fd.js"),[])),"v-9e1961f8":bt(()=>Ce(()=>import("./index.html.c853cba3.js"),[])),"v-6bba5e58":bt(()=>Ce(()=>import("./index.html.9f5d2271.js"),[])),"v-83a77034":bt(()=>Ce(()=>import("./index.html.72f7f3b6.js"),[])),"v-296d1d15":bt(()=>Ce(()=>import("./index.html.dd7351f0.js"),[])),"v-fb711be8":bt(()=>Ce(()=>import("./index.html.e0941bd4.js"),[])),"v-3706649a":bt(()=>Ce(()=>import("./404.html.30fa278d.js"),[]))},_E={"404":bt(()=>Ce(()=>import("./404.48d73007.js"),[])),Layout:bt(()=>Ce(()=>import("./Layout.12ba2eee.js"),[]))};var s0=En(Ob),a0=Of({key:"",path:"",title:"",lang:"",frontmatter:{},excerpt:"",headers:[]}),yo=En(a0),al=()=>yo;um.webpackHot&&(__VUE_HMR_RUNTIME__.updatePageData=t=>{s0.value[t.key]=()=>Promise.resolve(t),t.key===yo.value.key&&(yo.value=t)});var l0=Symbol(""),yE=()=>{const t=gn(l0);if(!t)throw new Error("usePageFrontmatter() is called without provider.");return t},c0=Symbol(""),vE=()=>{const t=gn(c0);if(!t)throw new Error("usePageHead() is called without provider.");return t},xE=Symbol(""),u0=Symbol(""),h0=()=>{const t=gn(u0);if(!t)throw new Error("usePageLang() is called without provider.");return t},Zf=Symbol(""),Wf=()=>{const t=gn(Zf);if(!t)throw new Error("useRouteLocale() is called without provider.");return t},Qo=En(uE),d0=()=>Qo;um.webpackHot&&(__VUE_HMR_RUNTIME__.updateSiteData=t=>{Qo.value=t});var p0=Symbol(""),R5=()=>{const t=gn(p0);if(!t)throw new Error("useSiteLocaleData() is called without provider.");return t},bE=Symbol(""),Rs=sl({resolvePageData:async t=>{const i=s0.value[t],s=await(i==null?void 0:i());return s!=null?s:a0},resolvePageFrontmatter:t=>t.frontmatter,resolvePageHead:(t,i,s)=>{const u=Rr(i.description)?i.description:s.description,m=[...Ut(i.head)?i.head:[],...s.head,["title",{},t],["meta",{name:"description",content:u}]];return dE(m)},resolvePageHeadTitle:(t,i)=>`${t.title?`${t.title} | `:""}${i.title}`,resolvePageLang:t=>t.lang||"en",resolveRouteLocale:(t,i)=>i0(t,i),resolveSiteLocaleData:(t,i)=>fn(fn({},t),t.locales[i])}),wE=Jn({setup(t,i){const s=En(!1);return Zi(()=>{s.value=!0}),()=>{var u,m;return s.value?(m=(u=i.slots).default)==null?void 0:m.call(u):null}}}),Kf=t=>{let i;t.pageKey?i=t.pageKey:i=al().value.key;const s=o0[i];return s?cr(s):cr("div","404 Not Found")};Kf.displayName="Content";Kf.props={pageKey:{type:String,required:!1}};var d_=Jn({name:"Vuepress",setup(){const t=al(),i=Fr(()=>{let s;if(t.value.path){const u=t.value.frontmatter.layout;Rr(u)?s=u:s="Layout"}else s="404";return _E[s]||qa(s,!1)});return()=>cr(i.value)}}),f0=t=>pE(t)?t:`${d0().value.base}${mE(t)}`,yi=t=>t;function Xf(t,i,s){var u,m,v;i===void 0&&(i=50),s===void 0&&(s={});var x=(u=s.isImmediate)!=null&&u,l=(m=s.callback)!=null&&m,T=s.maxWait,C=Date.now(),A=[];function F(){if(T!==void 0){var K=Date.now()-C;if(K+i>=T)return T-K}return i}var O=function(){var K=[].slice.call(arguments),oe=this;return new Promise(function(de,te){var se=x&&v===void 0;if(v!==void 0&&clearTimeout(v),v=setTimeout(function(){if(v=void 0,C=Date.now(),!x){var _e=t.apply(oe,K);l&&l(_e),A.forEach(function(Ae){return(0,Ae.resolve)(_e)}),A=[]}},F()),se){var me=t.apply(oe,K);return l&&l(me),de(me)}A.push({resolve:de,reject:te})})};return O.cancel=function(K){v!==void 0&&clearTimeout(v),A.forEach(function(oe){return(0,oe.reject)(K)}),A=[]},O}/*!
  * vue-router v4.0.15
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const m0=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",ll=t=>m0?Symbol(t):"_vr_"+t,EE=ll("rvlm"),p_=ll("rvd"),rd=ll("r"),Jf=ll("rl"),nf=ll("rvl"),Ua=typeof window!="undefined";function SE(t){return t.__esModule||m0&&t[Symbol.toStringTag]==="Module"}const Or=Object.assign;function Ip(t,i){const s={};for(const u in i){const m=i[u];s[u]=Array.isArray(m)?m.map(t):t(m)}return s}const Ac=()=>{},TE=/\/$/,IE=t=>t.replace(TE,"");function Ap(t,i,s="/"){let u,m={},v="",x="";const l=i.indexOf("?"),T=i.indexOf("#",l>-1?l:0);return l>-1&&(u=i.slice(0,l),v=i.slice(l+1,T>-1?T:i.length),m=t(v)),T>-1&&(u=u||i.slice(0,T),x=i.slice(T,i.length)),u=kE(u!=null?u:i,s),{fullPath:u+(v&&"?")+v+x,path:u,query:m,hash:x}}function AE(t,i){const s=i.query?t(i.query):"";return i.path+(s&&"?")+s+(i.hash||"")}function f_(t,i){return!i||!t.toLowerCase().startsWith(i.toLowerCase())?t:t.slice(i.length)||"/"}function PE(t,i,s){const u=i.matched.length-1,m=s.matched.length-1;return u>-1&&u===m&&el(i.matched[u],s.matched[m])&&g0(i.params,s.params)&&t(i.query)===t(s.query)&&i.hash===s.hash}function el(t,i){return(t.aliasOf||t)===(i.aliasOf||i)}function g0(t,i){if(Object.keys(t).length!==Object.keys(i).length)return!1;for(const s in t)if(!CE(t[s],i[s]))return!1;return!0}function CE(t,i){return Array.isArray(t)?m_(t,i):Array.isArray(i)?m_(i,t):t===i}function m_(t,i){return Array.isArray(i)?t.length===i.length&&t.every((s,u)=>s===i[u]):t.length===1&&t[0]===i}function kE(t,i){if(t.startsWith("/"))return t;if(!t)return i;const s=i.split("/"),u=t.split("/");let m=s.length-1,v,x;for(v=0;v<u.length;v++)if(x=u[v],!(m===1||x==="."))if(x==="..")m--;else break;return s.slice(0,m).join("/")+"/"+u.slice(v-(v===u.length?1:0)).join("/")}var Nc;(function(t){t.pop="pop",t.push="push"})(Nc||(Nc={}));var Pc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Pc||(Pc={}));function DE(t){if(!t)if(Ua){const i=document.querySelector("base");t=i&&i.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),IE(t)}const zE=/^[^#]+#/;function ME(t,i){return t.replace(zE,"#")+i}function OE(t,i){const s=document.documentElement.getBoundingClientRect(),u=t.getBoundingClientRect();return{behavior:i.behavior,left:u.left-s.left-(i.left||0),top:u.top-s.top-(i.top||0)}}const nd=()=>({left:window.pageXOffset,top:window.pageYOffset});function LE(t){let i;if("el"in t){const s=t.el,u=typeof s=="string"&&s.startsWith("#"),m=typeof s=="string"?u?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!m)return;i=OE(m,t)}else i=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(i):window.scrollTo(i.left!=null?i.left:window.pageXOffset,i.top!=null?i.top:window.pageYOffset)}function g_(t,i){return(history.state?history.state.position-i:-1)+t}const of=new Map;function RE(t,i){of.set(t,i)}function BE(t){const i=of.get(t);return of.delete(t),i}let FE=()=>location.protocol+"//"+location.host;function _0(t,i){const{pathname:s,search:u,hash:m}=i,v=t.indexOf("#");if(v>-1){let l=m.includes(t.slice(v))?t.slice(v).length:1,T=m.slice(l);return T[0]!=="/"&&(T="/"+T),f_(T,"")}return f_(s,t)+u+m}function NE(t,i,s,u){let m=[],v=[],x=null;const l=({state:O})=>{const K=_0(t,location),oe=s.value,de=i.value;let te=0;if(O){if(s.value=K,i.value=O,x&&x===oe){x=null;return}te=de?O.position-de.position:0}else u(K);m.forEach(se=>{se(s.value,oe,{delta:te,type:Nc.pop,direction:te?te>0?Pc.forward:Pc.back:Pc.unknown})})};function T(){x=s.value}function C(O){m.push(O);const K=()=>{const oe=m.indexOf(O);oe>-1&&m.splice(oe,1)};return v.push(K),K}function A(){const{history:O}=window;!O.state||O.replaceState(Or({},O.state,{scroll:nd()}),"")}function F(){for(const O of v)O();v=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",A)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",A),{pauseListeners:T,listen:C,destroy:F}}function __(t,i,s,u=!1,m=!1){return{back:t,current:i,forward:s,replaced:u,position:window.history.length,scroll:m?nd():null}}function jE(t){const{history:i,location:s}=window,u={value:_0(t,s)},m={value:i.state};m.value||v(u.value,{back:null,current:u.value,forward:null,position:i.length-1,replaced:!0,scroll:null},!0);function v(T,C,A){const F=t.indexOf("#"),O=F>-1?(s.host&&document.querySelector("base")?t:t.slice(F))+T:FE()+t+T;try{i[A?"replaceState":"pushState"](C,"",O),m.value=C}catch(K){console.error(K),s[A?"replace":"assign"](O)}}function x(T,C){const A=Or({},i.state,__(m.value.back,T,m.value.forward,!0),C,{position:m.value.position});v(T,A,!0),u.value=T}function l(T,C){const A=Or({},m.value,i.state,{forward:T,scroll:nd()});v(A.current,A,!0);const F=Or({},__(u.value,T,null),{position:A.position+1},C);v(T,F,!1),u.value=T}return{location:u,state:m,push:l,replace:x}}function VE(t){t=DE(t);const i=jE(t),s=NE(t,i.state,i.location,i.replace);function u(v,x=!0){x||s.pauseListeners(),history.go(v)}const m=Or({location:"",base:t,go:u,createHref:ME.bind(null,t)},i,s);return Object.defineProperty(m,"location",{enumerable:!0,get:()=>i.location.value}),Object.defineProperty(m,"state",{enumerable:!0,get:()=>i.state.value}),m}function UE(t){return typeof t=="string"||t&&typeof t=="object"}function y0(t){return typeof t=="string"||typeof t=="symbol"}const go={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},v0=ll("nf");var y_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(y_||(y_={}));function tl(t,i){return Or(new Error,{type:t,[v0]:!0},i)}function Ko(t,i){return t instanceof Error&&v0 in t&&(i==null||!!(t.type&i))}const v_="[^/]+?",$E={sensitive:!1,strict:!1,start:!0,end:!0},qE=/[.+*?^${}()[\]/\\]/g;function HE(t,i){const s=Or({},$E,i),u=[];let m=s.start?"^":"";const v=[];for(const C of t){const A=C.length?[]:[90];s.strict&&!C.length&&(m+="/");for(let F=0;F<C.length;F++){const O=C[F];let K=40+(s.sensitive?.25:0);if(O.type===0)F||(m+="/"),m+=O.value.replace(qE,"\\$&"),K+=40;else if(O.type===1){const{value:oe,repeatable:de,optional:te,regexp:se}=O;v.push({name:oe,repeatable:de,optional:te});const me=se||v_;if(me!==v_){K+=10;try{new RegExp(`(${me})`)}catch(Ae){throw new Error(`Invalid custom RegExp for param "${oe}" (${me}): `+Ae.message)}}let _e=de?`((?:${me})(?:/(?:${me}))*)`:`(${me})`;F||(_e=te&&C.length<2?`(?:/${_e})`:"/"+_e),te&&(_e+="?"),m+=_e,K+=20,te&&(K+=-8),de&&(K+=-20),me===".*"&&(K+=-50)}A.push(K)}u.push(A)}if(s.strict&&s.end){const C=u.length-1;u[C][u[C].length-1]+=.7000000000000001}s.strict||(m+="/?"),s.end?m+="$":s.strict&&(m+="(?:/|$)");const x=new RegExp(m,s.sensitive?"":"i");function l(C){const A=C.match(x),F={};if(!A)return null;for(let O=1;O<A.length;O++){const K=A[O]||"",oe=v[O-1];F[oe.name]=K&&oe.repeatable?K.split("/"):K}return F}function T(C){let A="",F=!1;for(const O of t){(!F||!A.endsWith("/"))&&(A+="/"),F=!1;for(const K of O)if(K.type===0)A+=K.value;else if(K.type===1){const{value:oe,repeatable:de,optional:te}=K,se=oe in C?C[oe]:"";if(Array.isArray(se)&&!de)throw new Error(`Provided param "${oe}" is an array but it is not repeatable (* or + modifiers)`);const me=Array.isArray(se)?se.join("/"):se;if(!me)if(te)O.length<2&&t.length>1&&(A.endsWith("/")?A=A.slice(0,-1):F=!0);else throw new Error(`Missing required param "${oe}"`);A+=me}}return A}return{re:x,score:u,keys:v,parse:l,stringify:T}}function GE(t,i){let s=0;for(;s<t.length&&s<i.length;){const u=i[s]-t[s];if(u)return u;s++}return t.length<i.length?t.length===1&&t[0]===40+40?-1:1:t.length>i.length?i.length===1&&i[0]===40+40?1:-1:0}function ZE(t,i){let s=0;const u=t.score,m=i.score;for(;s<u.length&&s<m.length;){const v=GE(u[s],m[s]);if(v)return v;s++}return m.length-u.length}const WE={type:0,value:""},KE=/[a-zA-Z0-9_]/;function XE(t){if(!t)return[[]];if(t==="/")return[[WE]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function i(K){throw new Error(`ERR (${s})/"${C}": ${K}`)}let s=0,u=s;const m=[];let v;function x(){v&&m.push(v),v=[]}let l=0,T,C="",A="";function F(){!C||(s===0?v.push({type:0,value:C}):s===1||s===2||s===3?(v.length>1&&(T==="*"||T==="+")&&i(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),v.push({type:1,value:C,regexp:A,repeatable:T==="*"||T==="+",optional:T==="*"||T==="?"})):i("Invalid state to consume buffer"),C="")}function O(){C+=T}for(;l<t.length;){if(T=t[l++],T==="\\"&&s!==2){u=s,s=4;continue}switch(s){case 0:T==="/"?(C&&F(),x()):T===":"?(F(),s=1):O();break;case 4:O(),s=u;break;case 1:T==="("?s=2:KE.test(T)?O():(F(),s=0,T!=="*"&&T!=="?"&&T!=="+"&&l--);break;case 2:T===")"?A[A.length-1]=="\\"?A=A.slice(0,-1)+T:s=3:A+=T;break;case 3:F(),s=0,T!=="*"&&T!=="?"&&T!=="+"&&l--,A="";break;default:i("Unknown state");break}}return s===2&&i(`Unfinished custom RegExp for param "${C}"`),F(),x(),m}function JE(t,i,s){const u=HE(XE(t.path),s),m=Or(u,{record:t,parent:i,children:[],alias:[]});return i&&!m.record.aliasOf==!i.record.aliasOf&&i.children.push(m),m}function YE(t,i){const s=[],u=new Map;i=b_({strict:!1,end:!0,sensitive:!1},i);function m(A){return u.get(A)}function v(A,F,O){const K=!O,oe=eS(A);oe.aliasOf=O&&O.record;const de=b_(i,A),te=[oe];if("alias"in A){const _e=typeof A.alias=="string"?[A.alias]:A.alias;for(const Ae of _e)te.push(Or({},oe,{components:O?O.record.components:oe.components,path:Ae,aliasOf:O?O.record:oe}))}let se,me;for(const _e of te){const{path:Ae}=_e;if(F&&Ae[0]!=="/"){const Me=F.record.path,He=Me[Me.length-1]==="/"?"":"/";_e.path=F.record.path+(Ae&&He+Ae)}if(se=JE(_e,F,de),O?O.alias.push(se):(me=me||se,me!==se&&me.alias.push(se),K&&A.name&&!x_(se)&&x(A.name)),"children"in oe){const Me=oe.children;for(let He=0;He<Me.length;He++)v(Me[He],se,O&&O.children[He])}O=O||se,T(se)}return me?()=>{x(me)}:Ac}function x(A){if(y0(A)){const F=u.get(A);F&&(u.delete(A),s.splice(s.indexOf(F),1),F.children.forEach(x),F.alias.forEach(x))}else{const F=s.indexOf(A);F>-1&&(s.splice(F,1),A.record.name&&u.delete(A.record.name),A.children.forEach(x),A.alias.forEach(x))}}function l(){return s}function T(A){let F=0;for(;F<s.length&&ZE(A,s[F])>=0&&(A.record.path!==s[F].record.path||!x0(A,s[F]));)F++;s.splice(F,0,A),A.record.name&&!x_(A)&&u.set(A.record.name,A)}function C(A,F){let O,K={},oe,de;if("name"in A&&A.name){if(O=u.get(A.name),!O)throw tl(1,{location:A});de=O.record.name,K=Or(QE(F.params,O.keys.filter(me=>!me.optional).map(me=>me.name)),A.params),oe=O.stringify(K)}else if("path"in A)oe=A.path,O=s.find(me=>me.re.test(oe)),O&&(K=O.parse(oe),de=O.record.name);else{if(O=F.name?u.get(F.name):s.find(me=>me.re.test(F.path)),!O)throw tl(1,{location:A,currentLocation:F});de=O.record.name,K=Or({},F.params,A.params),oe=O.stringify(K)}const te=[];let se=O;for(;se;)te.unshift(se.record),se=se.parent;return{name:de,path:oe,params:K,matched:te,meta:rS(te)}}return t.forEach(A=>v(A)),{addRoute:v,resolve:C,removeRoute:x,getRoutes:l,getRecordMatcher:m}}function QE(t,i){const s={};for(const u of i)u in t&&(s[u]=t[u]);return s}function eS(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:tS(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}function tS(t){const i={},s=t.props||!1;if("component"in t)i.default=s;else for(const u in t.components)i[u]=typeof s=="boolean"?s:s[u];return i}function x_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function rS(t){return t.reduce((i,s)=>Or(i,s.meta),{})}function b_(t,i){const s={};for(const u in t)s[u]=u in i?i[u]:t[u];return s}function x0(t,i){return i.children.some(s=>s===t||x0(t,s))}const b0=/#/g,nS=/&/g,iS=/\//g,oS=/=/g,sS=/\?/g,w0=/\+/g,aS=/%5B/g,lS=/%5D/g,E0=/%5E/g,cS=/%60/g,S0=/%7B/g,uS=/%7C/g,T0=/%7D/g,hS=/%20/g;function Yf(t){return encodeURI(""+t).replace(uS,"|").replace(aS,"[").replace(lS,"]")}function dS(t){return Yf(t).replace(S0,"{").replace(T0,"}").replace(E0,"^")}function sf(t){return Yf(t).replace(w0,"%2B").replace(hS,"+").replace(b0,"%23").replace(nS,"%26").replace(cS,"`").replace(S0,"{").replace(T0,"}").replace(E0,"^")}function pS(t){return sf(t).replace(oS,"%3D")}function fS(t){return Yf(t).replace(b0,"%23").replace(sS,"%3F")}function mS(t){return t==null?"":fS(t).replace(iS,"%2F")}function Oh(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function gS(t){const i={};if(t===""||t==="?")return i;const u=(t[0]==="?"?t.slice(1):t).split("&");for(let m=0;m<u.length;++m){const v=u[m].replace(w0," "),x=v.indexOf("="),l=Oh(x<0?v:v.slice(0,x)),T=x<0?null:Oh(v.slice(x+1));if(l in i){let C=i[l];Array.isArray(C)||(C=i[l]=[C]),C.push(T)}else i[l]=T}return i}function w_(t){let i="";for(let s in t){const u=t[s];if(s=pS(s),u==null){u!==void 0&&(i+=(i.length?"&":"")+s);continue}(Array.isArray(u)?u.map(v=>v&&sf(v)):[u&&sf(u)]).forEach(v=>{v!==void 0&&(i+=(i.length?"&":"")+s,v!=null&&(i+="="+v))})}return i}function _S(t){const i={};for(const s in t){const u=t[s];u!==void 0&&(i[s]=Array.isArray(u)?u.map(m=>m==null?null:""+m):u==null?u:""+u)}return i}function dc(){let t=[];function i(u){return t.push(u),()=>{const m=t.indexOf(u);m>-1&&t.splice(m,1)}}function s(){t=[]}return{add:i,list:()=>t,reset:s}}function Yo(t,i,s,u,m){const v=u&&(u.enterCallbacks[m]=u.enterCallbacks[m]||[]);return()=>new Promise((x,l)=>{const T=F=>{F===!1?l(tl(4,{from:s,to:i})):F instanceof Error?l(F):UE(F)?l(tl(2,{from:i,to:F})):(v&&u.enterCallbacks[m]===v&&typeof F=="function"&&v.push(F),x())},C=t.call(u&&u.instances[m],i,s,T);let A=Promise.resolve(C);t.length<3&&(A=A.then(T)),A.catch(F=>l(F))})}function Pp(t,i,s,u){const m=[];for(const v of t)for(const x in v.components){let l=v.components[x];if(!(i!=="beforeRouteEnter"&&!v.instances[x]))if(yS(l)){const C=(l.__vccOpts||l)[i];C&&m.push(Yo(C,s,u,v,x))}else{let T=l();m.push(()=>T.then(C=>{if(!C)return Promise.reject(new Error(`Couldn't resolve component "${x}" at "${v.path}"`));const A=SE(C)?C.default:C;v.components[x]=A;const O=(A.__vccOpts||A)[i];return O&&Yo(O,s,u,v,x)()}))}}return m}function yS(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function E_(t){const i=gn(rd),s=gn(Jf),u=Fr(()=>i.resolve(Us(t.to))),m=Fr(()=>{const{matched:T}=u.value,{length:C}=T,A=T[C-1],F=s.matched;if(!A||!F.length)return-1;const O=F.findIndex(el.bind(null,A));if(O>-1)return O;const K=S_(T[C-2]);return C>1&&S_(A)===K&&F[F.length-1].path!==K?F.findIndex(el.bind(null,T[C-2])):O}),v=Fr(()=>m.value>-1&&bS(s.params,u.value.params)),x=Fr(()=>m.value>-1&&m.value===s.matched.length-1&&g0(s.params,u.value.params));function l(T={}){return xS(T)?i[Us(t.replace)?"replace":"push"](Us(t.to)).catch(Ac):Promise.resolve()}return{route:u,href:Fr(()=>u.value.href),isActive:v,isExactActive:x,navigate:l}}const vS=Jn({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:E_,setup(t,{slots:i}){const s=sl(E_(t)),{options:u}=gn(rd),m=Fr(()=>({[T_(t.activeClass,u.linkActiveClass,"router-link-active")]:s.isActive,[T_(t.exactActiveClass,u.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const v=i.default&&i.default(s);return t.custom?v:cr("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:m.value},v)}}}),I0=vS;function xS(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const i=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(i))return}return t.preventDefault&&t.preventDefault(),!0}}function bS(t,i){for(const s in i){const u=i[s],m=t[s];if(typeof u=="string"){if(u!==m)return!1}else if(!Array.isArray(m)||m.length!==u.length||u.some((v,x)=>v!==m[x]))return!1}return!0}function S_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const T_=(t,i,s)=>t!=null?t:i!=null?i:s,wS=Jn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:i,slots:s}){const u=gn(nf),m=Fr(()=>t.route||u.value),v=gn(p_,0),x=Fr(()=>m.value.matched[v]);rs(p_,v+1),rs(EE,x),rs(nf,m);const l=En();return Ni(()=>[l.value,x.value,t.name],([T,C,A],[F,O,K])=>{C&&(C.instances[A]=T,O&&O!==C&&T&&T===F&&(C.leaveGuards.size||(C.leaveGuards=O.leaveGuards),C.updateGuards.size||(C.updateGuards=O.updateGuards))),T&&C&&(!O||!el(C,O)||!F)&&(C.enterCallbacks[A]||[]).forEach(oe=>oe(T))},{flush:"post"}),()=>{const T=m.value,C=x.value,A=C&&C.components[t.name],F=t.name;if(!A)return I_(s.default,{Component:A,route:T});const O=C.props[t.name],K=O?O===!0?T.params:typeof O=="function"?O(T):O:null,de=cr(A,Or({},K,i,{onVnodeUnmounted:te=>{te.component.isUnmounted&&(C.instances[F]=null)},ref:l}));return I_(s.default,{Component:de,route:T})||de}}});function I_(t,i){if(!t)return null;const s=t(i);return s.length===1?s[0]:s}const A0=wS;function ES(t){const i=YE(t.routes,t),s=t.parseQuery||gS,u=t.stringifyQuery||w_,m=t.history,v=dc(),x=dc(),l=dc(),T=wv(go);let C=go;Ua&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const A=Ip.bind(null,Fe=>""+Fe),F=Ip.bind(null,mS),O=Ip.bind(null,Oh);function K(Fe,at){let Xe,dt;return y0(Fe)?(Xe=i.getRecordMatcher(Fe),dt=at):dt=Fe,i.addRoute(dt,Xe)}function oe(Fe){const at=i.getRecordMatcher(Fe);at&&i.removeRoute(at)}function de(){return i.getRoutes().map(Fe=>Fe.record)}function te(Fe){return!!i.getRecordMatcher(Fe)}function se(Fe,at){if(at=Or({},at||T.value),typeof Fe=="string"){const Ot=Ap(s,Fe,at.path),Z=i.resolve({path:Ot.path},at),ne=m.createHref(Ot.fullPath);return Or(Ot,Z,{params:O(Z.params),hash:Oh(Ot.hash),redirectedFrom:void 0,href:ne})}let Xe;if("path"in Fe)Xe=Or({},Fe,{path:Ap(s,Fe.path,at.path).path});else{const Ot=Or({},Fe.params);for(const Z in Ot)Ot[Z]==null&&delete Ot[Z];Xe=Or({},Fe,{params:F(Fe.params)}),at.params=F(at.params)}const dt=i.resolve(Xe,at),Zt=Fe.hash||"";dt.params=A(O(dt.params));const nr=AE(u,Or({},Fe,{hash:dS(Zt),path:dt.path})),Rt=m.createHref(nr);return Or({fullPath:nr,hash:Zt,query:u===w_?_S(Fe.query):Fe.query||{}},dt,{redirectedFrom:void 0,href:Rt})}function me(Fe){return typeof Fe=="string"?Ap(s,Fe,T.value.path):Or({},Fe)}function _e(Fe,at){if(C!==Fe)return tl(8,{from:at,to:Fe})}function Ae(Fe){return De(Fe)}function Me(Fe){return Ae(Or(me(Fe),{replace:!0}))}function He(Fe){const at=Fe.matched[Fe.matched.length-1];if(at&&at.redirect){const{redirect:Xe}=at;let dt=typeof Xe=="function"?Xe(Fe):Xe;return typeof dt=="string"&&(dt=dt.includes("?")||dt.includes("#")?dt=me(dt):{path:dt},dt.params={}),Or({query:Fe.query,hash:Fe.hash,params:Fe.params},dt)}}function De(Fe,at){const Xe=C=se(Fe),dt=T.value,Zt=Fe.state,nr=Fe.force,Rt=Fe.replace===!0,Ot=He(Xe);if(Ot)return De(Or(me(Ot),{state:Zt,force:nr,replace:Rt}),at||Xe);const Z=Xe;Z.redirectedFrom=at;let ne;return!nr&&PE(u,dt,Xe)&&(ne=tl(16,{to:Z,from:dt}),pr(dt,dt,!0,!1)),(ne?Promise.resolve(ne):rt(Z,dt)).catch(ye=>Ko(ye)?Ko(ye,2)?ye:dr(ye):Dt(ye,Z,dt)).then(ye=>{if(ye){if(Ko(ye,2))return De(Or(me(ye.to),{state:Zt,force:nr,replace:Rt}),at||Z)}else ye=ft(Z,dt,!0,Rt,Zt);return ot(Z,dt,ye),ye})}function Se(Fe,at){const Xe=_e(Fe,at);return Xe?Promise.reject(Xe):Promise.resolve()}function rt(Fe,at){let Xe;const[dt,Zt,nr]=SS(Fe,at);Xe=Pp(dt.reverse(),"beforeRouteLeave",Fe,at);for(const Ot of dt)Ot.leaveGuards.forEach(Z=>{Xe.push(Yo(Z,Fe,at))});const Rt=Se.bind(null,Fe,at);return Xe.push(Rt),Oa(Xe).then(()=>{Xe=[];for(const Ot of v.list())Xe.push(Yo(Ot,Fe,at));return Xe.push(Rt),Oa(Xe)}).then(()=>{Xe=Pp(Zt,"beforeRouteUpdate",Fe,at);for(const Ot of Zt)Ot.updateGuards.forEach(Z=>{Xe.push(Yo(Z,Fe,at))});return Xe.push(Rt),Oa(Xe)}).then(()=>{Xe=[];for(const Ot of Fe.matched)if(Ot.beforeEnter&&!at.matched.includes(Ot))if(Array.isArray(Ot.beforeEnter))for(const Z of Ot.beforeEnter)Xe.push(Yo(Z,Fe,at));else Xe.push(Yo(Ot.beforeEnter,Fe,at));return Xe.push(Rt),Oa(Xe)}).then(()=>(Fe.matched.forEach(Ot=>Ot.enterCallbacks={}),Xe=Pp(nr,"beforeRouteEnter",Fe,at),Xe.push(Rt),Oa(Xe))).then(()=>{Xe=[];for(const Ot of x.list())Xe.push(Yo(Ot,Fe,at));return Xe.push(Rt),Oa(Xe)}).catch(Ot=>Ko(Ot,8)?Ot:Promise.reject(Ot))}function ot(Fe,at,Xe){for(const dt of l.list())dt(Fe,at,Xe)}function ft(Fe,at,Xe,dt,Zt){const nr=_e(Fe,at);if(nr)return nr;const Rt=at===go,Ot=Ua?history.state:{};Xe&&(dt||Rt?m.replace(Fe.fullPath,Or({scroll:Rt&&Ot&&Ot.scroll},Zt)):m.push(Fe.fullPath,Zt)),T.value=Fe,pr(Fe,at,Xe,Rt),dr()}let Te;function nt(){Te||(Te=m.listen((Fe,at,Xe)=>{const dt=se(Fe),Zt=He(dt);if(Zt){De(Or(Zt,{replace:!0}),dt).catch(Ac);return}C=dt;const nr=T.value;Ua&&RE(g_(nr.fullPath,Xe.delta),nd()),rt(dt,nr).catch(Rt=>Ko(Rt,12)?Rt:Ko(Rt,2)?(De(Rt.to,dt).then(Ot=>{Ko(Ot,20)&&!Xe.delta&&Xe.type===Nc.pop&&m.go(-1,!1)}).catch(Ac),Promise.reject()):(Xe.delta&&m.go(-Xe.delta,!1),Dt(Rt,dt,nr))).then(Rt=>{Rt=Rt||ft(dt,nr,!1),Rt&&(Xe.delta?m.go(-Xe.delta,!1):Xe.type===Nc.pop&&Ko(Rt,20)&&m.go(-1,!1)),ot(dt,nr,Rt)}).catch(Ac)}))}let St=dc(),Ft=dc(),Ve;function Dt(Fe,at,Xe){dr(Fe);const dt=Ft.list();return dt.length?dt.forEach(Zt=>Zt(Fe,at,Xe)):console.error(Fe),Promise.reject(Fe)}function zt(){return Ve&&T.value!==go?Promise.resolve():new Promise((Fe,at)=>{St.add([Fe,at])})}function dr(Fe){return Ve||(Ve=!Fe,nt(),St.list().forEach(([at,Xe])=>Fe?Xe(Fe):at()),St.reset()),Fe}function pr(Fe,at,Xe,dt){const{scrollBehavior:Zt}=t;if(!Ua||!Zt)return Promise.resolve();const nr=!Xe&&BE(g_(Fe.fullPath,0))||(dt||!Xe)&&history.state&&history.state.scroll||null;return Ff().then(()=>Zt(Fe,at,nr)).then(Rt=>Rt&&LE(Rt)).catch(Rt=>Dt(Rt,Fe,at))}const Ir=Fe=>m.go(Fe);let vr;const Ar=new Set;return{currentRoute:T,addRoute:K,removeRoute:oe,hasRoute:te,getRoutes:de,resolve:se,options:t,push:Ae,replace:Me,go:Ir,back:()=>Ir(-1),forward:()=>Ir(1),beforeEach:v.add,beforeResolve:x.add,afterEach:l.add,onError:Ft.add,isReady:zt,install(Fe){const at=this;Fe.component("RouterLink",I0),Fe.component("RouterView",A0),Fe.config.globalProperties.$router=at,Object.defineProperty(Fe.config.globalProperties,"$route",{enumerable:!0,get:()=>Us(T)}),Ua&&!vr&&T.value===go&&(vr=!0,Ae(m.location).catch(Zt=>{}));const Xe={};for(const Zt in go)Xe[Zt]=Fr(()=>T.value[Zt]);Fe.provide(rd,at),Fe.provide(Jf,sl(Xe)),Fe.provide(nf,T);const dt=Fe.unmount;Ar.add(Fe),Fe.unmount=function(){Ar.delete(Fe),Ar.size<1&&(C=go,Te&&Te(),Te=null,T.value=go,vr=!1,Ve=!1),dt()}}}}function Oa(t){return t.reduce((i,s)=>i.then(()=>s()),Promise.resolve())}function SS(t,i){const s=[],u=[],m=[],v=Math.max(i.matched.length,t.matched.length);for(let x=0;x<v;x++){const l=i.matched[x];l&&(t.matched.find(C=>el(C,l))?u.push(l):s.push(l));const T=t.matched[x];T&&(i.matched.find(C=>el(C,T))||m.push(T))}return[s,u,m]}function id(){return gn(rd)}function od(){return gn(Jf)}const TS=({headerLinkSelector:t,headerAnchorSelector:i,delay:s,offset:u=5})=>{const m=id(),v=al(),l=Xf(()=>{var de,te,se,me;const T=Array.from(document.querySelectorAll(t)),A=Array.from(document.querySelectorAll(i)).filter(_e=>T.some(Ae=>Ae.hash===_e.hash)),F=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),O=window.innerHeight+F,K=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),oe=Math.abs(K-O)<u;for(let _e=0;_e<A.length;_e++){const Ae=A[_e],Me=A[_e+1],He=F>=((te=(de=Ae.parentElement)==null?void 0:de.offsetTop)!=null?te:0)-u,De=!Me||F<((me=(se=Me.parentElement)==null?void 0:se.offsetTop)!=null?me:0)-u;if(!(He&&De))continue;const rt=decodeURIComponent(m.currentRoute.value.hash),ot=decodeURIComponent(Ae.hash);if(rt===ot)return;if(oe){for(let ft=_e+1;ft<A.length;ft++)if(rt===decodeURIComponent(A[ft].hash))return}IS(m,{hash:ot,force:!0});return}},s);Zi(()=>{l(),window.addEventListener("scroll",l)}),Vf(()=>{window.removeEventListener("scroll",l)}),Ni(()=>v.value.path,l)},IS=async(t,...i)=>{const{scrollBehavior:s}=t.options;t.options.scrollBehavior=void 0,await t.replace(...i).finally(()=>t.options.scrollBehavior=s)},AS="a.sidebar-item",PS=".header-anchor",CS=300,kS=5;var DS=yi({setup(){TS({headerLinkSelector:AS,headerAnchorSelector:PS,delay:CS,offset:kS})}});const zS=cr("svg",{class:"external-link-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},[cr("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),cr("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})]),MS=Jn({name:"ExternalLinkIcon",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(t){const i=Wf(),s=Fr(()=>{var u;return(u=t.locales[i.value])!=null?u:{openInNewWindow:"open in new window"}});return()=>cr("span",[zS,cr("span",{class:"external-link-icon-sr-only"},s.value.openInNewWindow)])}}),OS={"/":{openInNewWindow:"open in new window"}};var LS=yi({enhance({app:t}){t.component("ExternalLinkIcon",cr(MS,{locales:OS}))}});const RS={navbar:[{text:"\u4E3B\u9875",link:"/"},{text:"\u5FEB\u8BAF\u7F51",link:"https://daily.sustech.online/"},{text:"\u5C0F\u7A0B\u5E8F",link:"/miniapp/"},{text:"\u5173\u4E8E",link:"/about/"},{text:"\u7AD9\u70B9\u5E2E\u52A9",link:"/site-help/"}],repo:"sustech-cra/sustech-online-ng",repoLabel:"\u5728Github\u4E0A\u67E5\u770B",docsRepo:"sustech-cra/sustech-online-ng",docsDir:"docs",editLinkText:"\u4E00\u8D77\u5B8C\u5584\u8FD9\u672C\u624B\u518C\uFF01",lastUpdatedText:"\u4E0A\u6B21\u66F4\u65B0",contributorsText:"\u8D21\u732E\u8005",editLinks:!0,docsBranch:"master",sidebarDepth:2,sidebar:["/","/facility/","/contact/","/calendar/","/service/","/life/","/study/","/organizations/","/media/",{text:"\u{1F684}\u4EA4\u901A",link:"/transport/",children:[{text:"\u{1F68C}\u65B0\u7248\u5DF4\u58EB\u65F6\u523B\u8868",link:"/transport/bustimer.md",children:[]},{text:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB-\u5DE5\u4F5C\u65E5",link:"/transport/workday.md",children:[]},{text:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB-\u8282\u5047\u65E5",link:"/transport/holiday.md",children:[]},{text:"\u5468\u56F4\u4EA4\u901A",link:"/transport/",children:[]}]},"/surroundings/"],locales:{"/":{selectLanguageName:"English"}},logo:null,darkMode:!0,selectLanguageText:"Languages",selectLanguageAriaLabel:"Select language",editLink:!0,lastUpdated:!0,contributors:!0,notFound:["There's nothing here.","How did we get here?","That's a Four-Oh-Four.","Looks like we've got some broken links."],backToHome:"Take me home",openInNewWindow:"open in new window",toggleDarkMode:"toggle dark mode",toggleSidebar:"toggle sidebar"},P0=En(RS),BS=()=>P0;um.webpackHot&&(__VUE_HMR_RUNTIME__.updateThemeData=t=>{P0.value=t});const C0=Symbol(""),FS=()=>{const t=gn(C0);if(!t)throw new Error("useThemeLocaleData() is called without provider.");return t},NS=(t,i)=>{var s;return fn(fn({},t),(s=t.locales)==null?void 0:s[i])};var jS=yi({enhance({app:t}){const i=BS(),s=t._context.provides[Zf],u=Fr(()=>NS(i.value,s.value));t.provide(C0,u),Object.defineProperties(t.config.globalProperties,{$theme:{get(){return i.value}},$themeLocale:{get(){return u.value}}})}}),Wi=(t,i)=>{const s=t.__vccOpts||t;for(const[u,m]of i)s[u]=m;return s};const VS=Jn({props:{type:{type:String,required:!1,default:"tip"},text:{type:String,required:!1,default:""},vertical:{type:String,required:!1,default:void 0}},setup(t){return(i,s)=>(tn(),Dn("span",{class:os(["badge",t.type]),style:Hc({verticalAlign:t.vertical})},[Qh(i.$slots,"default",{},()=>[qf(Ci(t.text),1)])],6))}});var US=Wi(VS,[["__file","Badge.vue"]]),$S=Jn({name:"CodeGroup",setup(t,{slots:i}){const s=En(-1),u=En([]),m=(l=s.value)=>{l<u.value.length-1?s.value=l+1:s.value=0,u.value[s.value].focus()},v=(l=s.value)=>{l>0?s.value=l-1:s.value=u.value.length-1,u.value[s.value].focus()},x=(l,T)=>{l.key===" "||l.key==="Enter"?(l.preventDefault(),s.value=T):l.key==="ArrowRight"?(l.preventDefault(),m(T)):l.key==="ArrowLeft"&&(l.preventDefault(),v(T))};return()=>{var T;const l=(((T=i.default)==null?void 0:T.call(i))||[]).filter(C=>C.type.name==="CodeGroupItem").map(C=>(C.props===null&&(C.props={}),C));return l.length===0?null:(s.value<0||s.value>l.length-1?(s.value=l.findIndex(C=>C.props.active===""||C.props.active===!0),s.value===-1&&(s.value=0)):l.forEach((C,A)=>{C.props.active=A===s.value}),cr("div",{class:"code-group"},[cr("div",{class:"code-group__nav"},cr("ul",{class:"code-group__ul"},l.map((C,A)=>{const F=A===s.value;return cr("li",{class:"code-group__li"},cr("button",{ref:O=>{O&&(u.value[A]=O)},class:{"code-group__nav-tab":!0,"code-group__nav-tab-active":F},ariaPressed:F,ariaExpanded:F,onClick:()=>s.value=A,onKeydown:O=>x(O,A)},C.props.title))}))),l]))}}});const qS=["aria-selected"],HS=Jn({name:"CodeGroupItem"}),GS=Jn(qo(fn({},HS),{props:{title:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},setup(t){return(i,s)=>(tn(),Dn("div",{class:os(["code-group-item",{"code-group-item__active":t.active}]),"aria-selected":t.active},[Qh(i.$slots,"default")],10,qS))}}));var ZS=Wi(GS,[["__file","CodeGroupItem.vue"]]);function k0(t){return Xb()?(Jb(t),!0):!1}var A_;const Kc=typeof window!="undefined",WS=t=>typeof t=="string",Cp=()=>{};Kc&&((A_=window==null?void 0:window.navigator)==null?void 0:A_.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function KS(t,i){function s(...u){t(()=>i.apply(this,u),{fn:i,thisArg:this,args:u})}return s}const D0=t=>t();function XS(t=D0){const i=En(!0);function s(){i.value=!1}function u(){i.value=!0}return{isActive:i,pause:s,resume:u,eventFilter:(...v)=>{i.value&&t(...v)}}}function JS(t,i=!0){Yv()?Bv(t):i?t():Ff(t)}var P_=Object.getOwnPropertySymbols,YS=Object.prototype.hasOwnProperty,QS=Object.prototype.propertyIsEnumerable,eT=(t,i)=>{var s={};for(var u in t)YS.call(t,u)&&i.indexOf(u)<0&&(s[u]=t[u]);if(t!=null&&P_)for(var u of P_(t))i.indexOf(u)<0&&QS.call(t,u)&&(s[u]=t[u]);return s};function tT(t,i,s={}){const u=s,{eventFilter:m=D0}=u,v=eT(u,["eventFilter"]);return Ni(t,KS(m,i),v)}var rT=Object.defineProperty,nT=Object.defineProperties,iT=Object.getOwnPropertyDescriptors,Lh=Object.getOwnPropertySymbols,z0=Object.prototype.hasOwnProperty,M0=Object.prototype.propertyIsEnumerable,C_=(t,i,s)=>i in t?rT(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,oT=(t,i)=>{for(var s in i||(i={}))z0.call(i,s)&&C_(t,s,i[s]);if(Lh)for(var s of Lh(i))M0.call(i,s)&&C_(t,s,i[s]);return t},sT=(t,i)=>nT(t,iT(i)),aT=(t,i)=>{var s={};for(var u in t)z0.call(t,u)&&i.indexOf(u)<0&&(s[u]=t[u]);if(t!=null&&Lh)for(var u of Lh(t))i.indexOf(u)<0&&M0.call(t,u)&&(s[u]=t[u]);return s};function lT(t,i,s={}){const u=s,{eventFilter:m}=u,v=aT(u,["eventFilter"]),{eventFilter:x,pause:l,resume:T,isActive:C}=XS(m);return{stop:tT(t,i,sT(oT({},v),{eventFilter:x})),pause:l,resume:T,isActive:C}}function cT(t){var i;const s=Us(t);return(i=s==null?void 0:s.$el)!=null?i:s}const Rh=Kc?window:void 0;Kc&&window.document;Kc&&window.navigator;Kc&&window.location;function uT(...t){let i,s,u,m;if(WS(t[0])?([s,u,m]=t,i=Rh):[i,s,u,m]=t,!i)return Cp;let v=Cp;const x=Ni(()=>cT(i),T=>{v(),T&&(T.addEventListener(s,u,m),v=()=>{T.removeEventListener(s,u,m),v=Cp})},{immediate:!0,flush:"post"}),l=()=>{x(),v()};return k0(l),l}function hT(t,i={}){const{window:s=Rh}=i,u=Boolean(s&&"matchMedia"in s);let m;const v=En(!1),x=()=>{!u||(m||(m=s.matchMedia(t)),v.value=m.matches)};return JS(()=>{x(),m&&("addEventListener"in m?m.addEventListener("change",x):m.addListener(x),k0(()=>{"removeEventListener"in m?m.removeEventListener("change",x):m.removeListener(x)}))}),v}const af=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},lf="__vueuse_ssr_handlers__";af[lf]=af[lf]||{};const dT=af[lf];function pT(t,i){return dT[t]||i}function fT(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"||Array.isArray(t)?"object":Number.isNaN(t)?"any":"number"}const mT={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}};function gT(t,i,s,u={}){var m;const{flush:v="pre",deep:x=!0,listenToStorageChanges:l=!0,writeDefaults:T=!0,shallow:C,window:A=Rh,eventFilter:F,onError:O=He=>{console.error(He)}}=u,K=(C?wv:En)(i);if(!s)try{s=pT("getDefaultStorage",()=>{var He;return(He=Rh)==null?void 0:He.localStorage})()}catch(He){O(He)}if(!s)return K;const oe=Us(i),de=fT(oe),te=(m=u.serializer)!=null?m:mT[de],{pause:se,resume:me}=lT(K,()=>_e(K.value),{flush:v,deep:x,eventFilter:F});return A&&l&&uT(A,"storage",Me),Me(),K;function _e(He){try{He==null?s.removeItem(t):s.setItem(t,te.write(He))}catch(De){O(De)}}function Ae(He){if(!(He&&He.key!==t)){se();try{const De=He?He.newValue:s.getItem(t);return De==null?(T&&oe!==null&&s.setItem(t,te.write(oe)),oe):typeof De!="string"?De:te.read(De)}catch(De){O(De)}finally{me()}}}function Me(He){He&&He.key!==t||(K.value=Ae(He))}}function _T(t){return hT("(prefers-color-scheme: dark)",t)}const O0=Symbol(""),B5=()=>{const t=gn(O0);if(!t)throw new Error("useDarkMode() is called without provider.");return t},yT=()=>{const t=F0(),i=_T(),s=gT("vuepress-color-scheme","auto"),u=Fr({get(){return t.value.darkMode?s.value==="auto"?i.value:s.value==="dark":!1},set(m){m===i.value?s.value="auto":s.value=m?"dark":"light"}});rs(O0,u),vT(u)},vT=t=>{const i=(s=t.value)=>{const u=window==null?void 0:window.document.querySelector("html");u==null||u.classList.toggle("dark",s)};Zi(()=>{Ni(t,i,{immediate:!0})}),Uf(()=>i())},L0=(...t)=>{const s=id().resolve(...t),u=s.matched[s.matched.length-1];if(!(u!=null&&u.redirect))return s;const{redirect:m}=u,v=Yt(m)?m(s):m,x=Rr(v)?{path:v}:v;return L0(fn({hash:s.hash,query:s.query,params:s.params},x))},xT=t=>{const i=L0(encodeURI(t));return{text:i.meta.title||t,link:i.name==="404"?t:i.fullPath}};let kp=null,pc=null;const bT={wait:()=>kp,pending:()=>{kp=new Promise(t=>pc=t)},resolve:()=>{pc==null||pc(),kp=null,pc=null}},wT=()=>bT,R0=Symbol("sidebarItems"),F5=()=>{const t=gn(R0);if(!t)throw new Error("useSidebarItems() is called without provider.");return t},ET=()=>{const t=F0(),i=yE(),s=Fr(()=>ST(i.value,t.value));rs(R0,s)},ST=(t,i)=>{var m,v,x,l;const s=(v=(m=t.sidebar)!=null?m:i.sidebar)!=null?v:"auto",u=(l=(x=t.sidebarDepth)!=null?x:i.sidebarDepth)!=null?l:2;return t.home||s===!1?[]:s==="auto"?IT(u):Ut(s)?B0(s,u):n0(s)?AT(s,u):[]},TT=(t,i)=>({text:t.title,link:`#${t.slug}`,children:Qf(t.children,i)}),Qf=(t,i)=>i>0?t.map(s=>TT(s,i-1)):[],IT=t=>{const i=al();return[{text:i.value.title,children:Qf(i.value.headers,t)}]},B0=(t,i)=>{const s=od(),u=al(),m=v=>{var l;let x;if(Rr(v)?x=xT(v):x=v,x.children)return qo(fn({},x),{children:x.children.map(T=>m(T))});if(x.link===s.path){const T=((l=u.value.headers[0])==null?void 0:l.level)===1?u.value.headers[0].children:u.value.headers;return qo(fn({},x),{children:Qf(T,i)})}return x};return t.map(v=>m(v))},AT=(t,i)=>{var v;const s=od(),u=i0(t,s.path),m=(v=t[u])!=null?v:[];return B0(m,i)},F0=()=>FS();var PT=yi({enhance({app:t,router:i}){t.component("Badge",US),t.component("CodeGroup",$S),t.component("CodeGroupItem",ZS),t.component("AutoLinkExternalIcon",()=>{const u=t.component("ExternalLinkIcon");return u?cr(u):null}),t.component("NavbarSearch",()=>{const u=t.component("Docsearch")||t.component("SearchBox");return u?cr(u):null});const s=i.options.scrollBehavior;i.options.scrollBehavior=async(...u)=>(await wT().wait(),s(...u))},setup(){yT(),ET()}});/*! @docsearch/js 3.0.0 | MIT License | © Algolia, Inc. and contributors | https://docsearch.algolia.com */function k_(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function wr(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?k_(Object(s),!0).forEach(function(u){CT(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):k_(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function jc(t){return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},jc(t)}function CT(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function cf(){return cf=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},cf.apply(this,arguments)}function kT(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}function Bh(t,i){return function(s){if(Array.isArray(s))return s}(t)||function(s,u){var m=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(m!=null){var v,x,l=[],T=!0,C=!1;try{for(m=m.call(s);!(T=(v=m.next()).done)&&(l.push(v.value),!u||l.length!==u);T=!0);}catch(A){C=!0,x=A}finally{try{T||m.return==null||m.return()}finally{if(C)throw x}}return l}}(t,i)||N0(t,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fh(t){return function(i){if(Array.isArray(i))return uf(i)}(t)||function(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(t)||N0(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function N0(t,i){if(t){if(typeof t=="string")return uf(t,i);var s=Object.prototype.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?uf(t,i):void 0}}function uf(t,i){(i==null||i>t.length)&&(i=t.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=t[s];return u}var Mt,Cc,j0,D_,V0,Nh={},em=[],DT=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function vo(t,i){for(var s in i)t[s]=i[s];return t}function U0(t){var i=t.parentNode;i&&i.removeChild(t)}function qi(t,i,s){var u,m,v,x=arguments,l={};for(v in i)v=="key"?u=i[v]:v=="ref"?m=i[v]:l[v]=i[v];if(arguments.length>3)for(s=[s],v=3;v<arguments.length;v++)s.push(x[v]);if(s!=null&&(l.children=s),typeof t=="function"&&t.defaultProps!=null)for(v in t.defaultProps)l[v]===void 0&&(l[v]=t.defaultProps[v]);return kc(t,l,u,m,null)}function kc(t,i,s,u,m){var v={type:t,props:i,key:s,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:m==null?++Mt.__v:m};return Mt.vnode!=null&&Mt.vnode(v),v}function is(t){return t.children}function Hi(t,i){this.props=t,this.context=i}function Vc(t,i){if(i==null)return t.__?Vc(t.__,t.__.__k.indexOf(t)+1):null;for(var s;i<t.__k.length;i++)if((s=t.__k[i])!=null&&s.__e!=null)return s.__e;return typeof t.type=="function"?Vc(t):null}function $0(t){var i,s;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,i=0;i<t.__k.length;i++)if((s=t.__k[i])!=null&&s.__e!=null){t.__e=t.__c.base=s.__e;break}return $0(t)}}function hf(t){(!t.__d&&(t.__d=!0)&&Cc.push(t)&&!jh.__r++||D_!==Mt.debounceRendering)&&((D_=Mt.debounceRendering)||j0)(jh)}function jh(){for(var t;jh.__r=Cc.length;)t=Cc.sort(function(i,s){return i.__v.__b-s.__v.__b}),Cc=[],t.some(function(i){var s,u,m,v,x,l;i.__d&&(x=(v=(s=i).__v).__e,(l=s.__P)&&(u=[],(m=vo({},v)).__v=v.__v+1,tm(l,v,m,s.__n,l.ownerSVGElement!==void 0,v.__h!=null?[x]:null,u,x==null?Vc(v):x,v.__h),Z0(u,v),v.__e!=x&&$0(v)))})}function q0(t,i,s,u,m,v,x,l,T,C){var A,F,O,K,oe,de,te,se=u&&u.__k||em,me=se.length;for(s.__k=[],A=0;A<i.length;A++)if((K=s.__k[A]=(K=i[A])==null||typeof K=="boolean"?null:typeof K=="string"||typeof K=="number"?kc(null,K,null,null,K):Array.isArray(K)?kc(is,{children:K},null,null,null):K.__b>0?kc(K.type,K.props,K.key,null,K.__v):K)!=null){if(K.__=s,K.__b=s.__b+1,(O=se[A])===null||O&&K.key==O.key&&K.type===O.type)se[A]=void 0;else for(F=0;F<me;F++){if((O=se[F])&&K.key==O.key&&K.type===O.type){se[F]=void 0;break}O=null}tm(t,K,O=O||Nh,m,v,x,l,T,C),oe=K.__e,(F=K.ref)&&O.ref!=F&&(te||(te=[]),O.ref&&te.push(O.ref,null,K),te.push(F,K.__c||oe,K)),oe!=null?(de==null&&(de=oe),typeof K.type=="function"&&K.__k!=null&&K.__k===O.__k?K.__d=T=H0(K,T,t):T=G0(t,K,O,se,oe,T),C||s.type!=="option"?typeof s.type=="function"&&(s.__d=T):t.value=""):T&&O.__e==T&&T.parentNode!=t&&(T=Vc(O))}for(s.__e=de,A=me;A--;)se[A]!=null&&(typeof s.type=="function"&&se[A].__e!=null&&se[A].__e==s.__d&&(s.__d=Vc(u,A+1)),K0(se[A],se[A]));if(te)for(A=0;A<te.length;A++)W0(te[A],te[++A],te[++A])}function H0(t,i,s){var u,m;for(u=0;u<t.__k.length;u++)(m=t.__k[u])&&(m.__=t,i=typeof m.type=="function"?H0(m,i,s):G0(s,m,m,t.__k,m.__e,i));return i}function xo(t,i){return i=i||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(s){xo(s,i)}):i.push(t)),i}function G0(t,i,s,u,m,v){var x,l,T;if(i.__d!==void 0)x=i.__d,i.__d=void 0;else if(s==null||m!=v||m.parentNode==null)e:if(v==null||v.parentNode!==t)t.appendChild(m),x=null;else{for(l=v,T=0;(l=l.nextSibling)&&T<u.length;T+=2)if(l==m)break e;t.insertBefore(m,v),x=v}return x!==void 0?x:m.nextSibling}function z_(t,i,s){i[0]==="-"?t.setProperty(i,s):t[i]=s==null?"":typeof s!="number"||DT.test(i)?s:s+"px"}function nh(t,i,s,u,m){var v;e:if(i==="style")if(typeof s=="string")t.style.cssText=s;else{if(typeof u=="string"&&(t.style.cssText=u=""),u)for(i in u)s&&i in s||z_(t.style,i,"");if(s)for(i in s)u&&s[i]===u[i]||z_(t.style,i,s[i])}else if(i[0]==="o"&&i[1]==="n")v=i!==(i=i.replace(/Capture$/,"")),i=i.toLowerCase()in t?i.toLowerCase().slice(2):i.slice(2),t.l||(t.l={}),t.l[i+v]=s,s?u||t.addEventListener(i,v?O_:M_,v):t.removeEventListener(i,v?O_:M_,v);else if(i!=="dangerouslySetInnerHTML"){if(m)i=i.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(i!=="href"&&i!=="list"&&i!=="form"&&i!=="download"&&i in t)try{t[i]=s==null?"":s;break e}catch{}typeof s=="function"||(s!=null&&(s!==!1||i[0]==="a"&&i[1]==="r")?t.setAttribute(i,s):t.removeAttribute(i))}}function M_(t){this.l[t.type+!1](Mt.event?Mt.event(t):t)}function O_(t){this.l[t.type+!0](Mt.event?Mt.event(t):t)}function tm(t,i,s,u,m,v,x,l,T){var C,A,F,O,K,oe,de,te,se,me,_e,Ae=i.type;if(i.constructor!==void 0)return null;s.__h!=null&&(T=s.__h,l=i.__e=s.__e,i.__h=null,v=[l]),(C=Mt.__b)&&C(i);try{e:if(typeof Ae=="function"){if(te=i.props,se=(C=Ae.contextType)&&u[C.__c],me=C?se?se.props.value:C.__:u,s.__c?de=(A=i.__c=s.__c).__=A.__E:("prototype"in Ae&&Ae.prototype.render?i.__c=A=new Ae(te,me):(i.__c=A=new Hi(te,me),A.constructor=Ae,A.render=MT),se&&se.sub(A),A.props=te,A.state||(A.state={}),A.context=me,A.__n=u,F=A.__d=!0,A.__h=[]),A.__s==null&&(A.__s=A.state),Ae.getDerivedStateFromProps!=null&&(A.__s==A.state&&(A.__s=vo({},A.__s)),vo(A.__s,Ae.getDerivedStateFromProps(te,A.__s))),O=A.props,K=A.state,F)Ae.getDerivedStateFromProps==null&&A.componentWillMount!=null&&A.componentWillMount(),A.componentDidMount!=null&&A.__h.push(A.componentDidMount);else{if(Ae.getDerivedStateFromProps==null&&te!==O&&A.componentWillReceiveProps!=null&&A.componentWillReceiveProps(te,me),!A.__e&&A.shouldComponentUpdate!=null&&A.shouldComponentUpdate(te,A.__s,me)===!1||i.__v===s.__v){A.props=te,A.state=A.__s,i.__v!==s.__v&&(A.__d=!1),A.__v=i,i.__e=s.__e,i.__k=s.__k,A.__h.length&&x.push(A);break e}A.componentWillUpdate!=null&&A.componentWillUpdate(te,A.__s,me),A.componentDidUpdate!=null&&A.__h.push(function(){A.componentDidUpdate(O,K,oe)})}A.context=me,A.props=te,A.state=A.__s,(C=Mt.__r)&&C(i),A.__d=!1,A.__v=i,A.__P=t,C=A.render(A.props,A.state,A.context),A.state=A.__s,A.getChildContext!=null&&(u=vo(vo({},u),A.getChildContext())),F||A.getSnapshotBeforeUpdate==null||(oe=A.getSnapshotBeforeUpdate(O,K)),_e=C!=null&&C.type===is&&C.key==null?C.props.children:C,q0(t,Array.isArray(_e)?_e:[_e],i,s,u,m,v,x,l,T),A.base=i.__e,i.__h=null,A.__h.length&&x.push(A),de&&(A.__E=A.__=null),A.__e=!1}else v==null&&i.__v===s.__v?(i.__k=s.__k,i.__e=s.__e):i.__e=zT(s.__e,i,s,u,m,v,x,T);(C=Mt.diffed)&&C(i)}catch(Me){i.__v=null,(T||v!=null)&&(i.__e=l,i.__h=!!T,v[v.indexOf(l)]=null),Mt.__e(Me,i,s)}}function Z0(t,i){Mt.__c&&Mt.__c(i,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(u){u.call(s)})}catch(u){Mt.__e(u,s.__v)}})}function zT(t,i,s,u,m,v,x,l){var T,C,A,F,O=s.props,K=i.props,oe=i.type,de=0;if(oe==="svg"&&(m=!0),v!=null){for(;de<v.length;de++)if((T=v[de])&&(T===t||(oe?T.localName==oe:T.nodeType==3))){t=T,v[de]=null;break}}if(t==null){if(oe===null)return document.createTextNode(K);t=m?document.createElementNS("http://www.w3.org/2000/svg",oe):document.createElement(oe,K.is&&K),v=null,l=!1}if(oe===null)O===K||l&&t.data===K||(t.data=K);else{if(v=v&&em.slice.call(t.childNodes),C=(O=s.props||Nh).dangerouslySetInnerHTML,A=K.dangerouslySetInnerHTML,!l){if(v!=null)for(O={},F=0;F<t.attributes.length;F++)O[t.attributes[F].name]=t.attributes[F].value;(A||C)&&(A&&(C&&A.__html==C.__html||A.__html===t.innerHTML)||(t.innerHTML=A&&A.__html||""))}if(function(te,se,me,_e,Ae){var Me;for(Me in me)Me==="children"||Me==="key"||Me in se||nh(te,Me,null,me[Me],_e);for(Me in se)Ae&&typeof se[Me]!="function"||Me==="children"||Me==="key"||Me==="value"||Me==="checked"||me[Me]===se[Me]||nh(te,Me,se[Me],me[Me],_e)}(t,K,O,m,l),A)i.__k=[];else if(de=i.props.children,q0(t,Array.isArray(de)?de:[de],i,s,u,m&&oe!=="foreignObject",v,x,t.firstChild,l),v!=null)for(de=v.length;de--;)v[de]!=null&&U0(v[de]);l||("value"in K&&(de=K.value)!==void 0&&(de!==t.value||oe==="progress"&&!de)&&nh(t,"value",de,O.value,!1),"checked"in K&&(de=K.checked)!==void 0&&de!==t.checked&&nh(t,"checked",de,O.checked,!1))}return t}function W0(t,i,s){try{typeof t=="function"?t(i):t.current=i}catch(u){Mt.__e(u,s)}}function K0(t,i,s){var u,m,v;if(Mt.unmount&&Mt.unmount(t),(u=t.ref)&&(u.current&&u.current!==t.__e||W0(u,null,i)),s||typeof t.type=="function"||(s=(m=t.__e)!=null),t.__e=t.__d=void 0,(u=t.__c)!=null){if(u.componentWillUnmount)try{u.componentWillUnmount()}catch(x){Mt.__e(x,i)}u.base=u.__P=null}if(u=t.__k)for(v=0;v<u.length;v++)u[v]&&K0(u[v],i,s);m!=null&&U0(m)}function MT(t,i,s){return this.constructor(t,s)}function Uc(t,i,s){var u,m,v;Mt.__&&Mt.__(t,i),m=(u=typeof s=="function")?null:s&&s.__k||i.__k,v=[],tm(i,t=(!u&&s||i).__k=qi(is,null,[t]),m||Nh,Nh,i.ownerSVGElement!==void 0,!u&&s?[s]:m?null:i.firstChild?em.slice.call(i.childNodes):null,v,!u&&s?s:m?m.__e:i.firstChild,u),Z0(v,t)}function X0(t,i){Uc(t,i,X0)}function OT(t,i,s){var u,m,v,x=arguments,l=vo({},t.props);for(v in i)v=="key"?u=i[v]:v=="ref"?m=i[v]:l[v]=i[v];if(arguments.length>3)for(s=[s],v=3;v<arguments.length;v++)s.push(x[v]);return s!=null&&(l.children=s),kc(t.type,l,u||t.key,m||t.ref,null)}Mt={__e:function(t,i){for(var s,u,m;i=i.__;)if((s=i.__c)&&!s.__)try{if((u=s.constructor)&&u.getDerivedStateFromError!=null&&(s.setState(u.getDerivedStateFromError(t)),m=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t),m=s.__d),m)return s.__E=s}catch(v){t=v}throw t},__v:0},Hi.prototype.setState=function(t,i){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=vo({},this.state),typeof t=="function"&&(t=t(vo({},s),this.props)),t&&vo(s,t),t!=null&&this.__v&&(i&&this.__h.push(i),hf(this))},Hi.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),hf(this))},Hi.prototype.render=is,Cc=[],j0=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,jh.__r=0,V0=0;var rl,Xn,L_,Ha=0,df=[],R_=Mt.__b,B_=Mt.__r,F_=Mt.diffed,N_=Mt.__c,j_=Mt.unmount;function $c(t,i){Mt.__h&&Mt.__h(Xn,t,Ha||i),Ha=0;var s=Xn.__H||(Xn.__H={__:[],__h:[]});return t>=s.__.length&&s.__.push({}),s.__[t]}function V_(t,i,s){var u=$c(rl++,2);return u.t=t,u.__c||(u.__=[s?s(i):J0(void 0,i),function(m){var v=u.t(u.__[0],m);u.__[0]!==v&&(u.__=[v,u.__[1]],u.__c.setState({}))}],u.__c=Xn),u.__}function U_(t,i){var s=$c(rl++,4);!Mt.__s&&rm(s.__H,i)&&(s.__=t,s.__H=i,Xn.__h.push(s))}function _h(t,i){var s=$c(rl++,7);return rm(s.__H,i)&&(s.__=t(),s.__H=i,s.__h=t),s.__}function LT(){df.forEach(function(t){if(t.__P)try{t.__H.__h.forEach(yh),t.__H.__h.forEach(pf),t.__H.__h=[]}catch(i){t.__H.__h=[],Mt.__e(i,t.__v)}}),df=[]}Mt.__b=function(t){Xn=null,R_&&R_(t)},Mt.__r=function(t){B_&&B_(t),rl=0;var i=(Xn=t.__c).__H;i&&(i.__h.forEach(yh),i.__h.forEach(pf),i.__h=[])},Mt.diffed=function(t){F_&&F_(t);var i=t.__c;i&&i.__H&&i.__H.__h.length&&(df.push(i)!==1&&L_===Mt.requestAnimationFrame||((L_=Mt.requestAnimationFrame)||function(s){var u,m=function(){clearTimeout(v),$_&&cancelAnimationFrame(u),setTimeout(s)},v=setTimeout(m,100);$_&&(u=requestAnimationFrame(m))})(LT)),Xn=void 0},Mt.__c=function(t,i){i.some(function(s){try{s.__h.forEach(yh),s.__h=s.__h.filter(function(u){return!u.__||pf(u)})}catch(u){i.some(function(m){m.__h&&(m.__h=[])}),i=[],Mt.__e(u,s.__v)}}),N_&&N_(t,i)},Mt.unmount=function(t){j_&&j_(t);var i=t.__c;if(i&&i.__H)try{i.__H.__.forEach(yh)}catch(s){Mt.__e(s,i.__v)}};var $_=typeof requestAnimationFrame=="function";function yh(t){var i=Xn;typeof t.__c=="function"&&t.__c(),Xn=i}function pf(t){var i=Xn;t.__c=t.__(),Xn=i}function rm(t,i){return!t||t.length!==i.length||i.some(function(s,u){return s!==t[u]})}function J0(t,i){return typeof i=="function"?i(t):i}function Y0(t,i){for(var s in i)t[s]=i[s];return t}function ff(t,i){for(var s in t)if(s!=="__source"&&!(s in i))return!0;for(var u in i)if(u!=="__source"&&t[u]!==i[u])return!0;return!1}function mf(t){this.props=t}(mf.prototype=new Hi).isPureReactComponent=!0,mf.prototype.shouldComponentUpdate=function(t,i){return ff(this.props,t)||ff(this.state,i)};var q_=Mt.__b;Mt.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),q_&&q_(t)};var RT=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911,H_=function(t,i){return t==null?null:xo(xo(t).map(i))},BT={map:H_,forEach:H_,count:function(t){return t?xo(t).length:0},only:function(t){var i=xo(t);if(i.length!==1)throw"Children.only";return i[0]},toArray:xo},FT=Mt.__e;function vh(){this.__u=0,this.t=null,this.__b=null}function Q0(t){var i=t.__.__c;return i&&i.__e&&i.__e(t)}function xc(){this.u=null,this.o=null}Mt.__e=function(t,i,s){if(t.then){for(var u,m=i;m=m.__;)if((u=m.__c)&&u.__c)return i.__e==null&&(i.__e=s.__e,i.__k=s.__k),u.__c(t,i)}FT(t,i,s)},(vh.prototype=new Hi).__c=function(t,i){var s=i.__c,u=this;u.t==null&&(u.t=[]),u.t.push(s);var m=Q0(u.__v),v=!1,x=function(){v||(v=!0,s.componentWillUnmount=s.__c,m?m(l):l())};s.__c=s.componentWillUnmount,s.componentWillUnmount=function(){x(),s.__c&&s.__c()};var l=function(){if(!--u.__u){if(u.state.__e){var C=u.state.__e;u.__v.__k[0]=function F(O,K,oe){return O&&(O.__v=null,O.__k=O.__k&&O.__k.map(function(de){return F(de,K,oe)}),O.__c&&O.__c.__P===K&&(O.__e&&oe.insertBefore(O.__e,O.__d),O.__c.__e=!0,O.__c.__P=oe)),O}(C,C.__c.__P,C.__c.__O)}var A;for(u.setState({__e:u.__b=null});A=u.t.pop();)A.forceUpdate()}},T=i.__h===!0;u.__u++||T||u.setState({__e:u.__b=u.__v.__k[0]}),t.then(x,x)},vh.prototype.componentWillUnmount=function(){this.t=[]},vh.prototype.render=function(t,i){if(this.__b){if(this.__v.__k){var s=document.createElement("div"),u=this.__v.__k[0].__c;this.__v.__k[0]=function v(x,l,T){return x&&(x.__c&&x.__c.__H&&(x.__c.__H.__.forEach(function(C){typeof C.__c=="function"&&C.__c()}),x.__c.__H=null),(x=Y0({},x)).__c!=null&&(x.__c.__P===T&&(x.__c.__P=l),x.__c=null),x.__k=x.__k&&x.__k.map(function(C){return v(C,l,T)})),x}(this.__b,s,u.__O=u.__P)}this.__b=null}var m=i.__e&&qi(is,null,t.fallback);return m&&(m.__h=null),[qi(is,null,i.__e?null:t.children),m]};var G_=function(t,i,s){if(++s[1]===s[0]&&t.o.delete(i),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(s=t.u;s;){for(;s.length>3;)s.pop()();if(s[1]<s[0])break;t.u=s=s[2]}};function NT(t){return this.getChildContext=function(){return t.context},t.children}function jT(t){var i=this,s=t.i;i.componentWillUnmount=function(){Uc(null,i.l),i.l=null,i.i=null},i.i&&i.i!==s&&i.componentWillUnmount(),t.__v?(i.l||(i.i=s,i.l={nodeType:1,parentNode:s,childNodes:[],appendChild:function(u){this.childNodes.push(u),i.i.appendChild(u)},insertBefore:function(u,m){this.childNodes.push(u),i.i.appendChild(u)},removeChild:function(u){this.childNodes.splice(this.childNodes.indexOf(u)>>>1,1),i.i.removeChild(u)}}),Uc(qi(NT,{context:i.context},t.__v),i.l)):i.l&&i.componentWillUnmount()}function ex(t,i){return qi(jT,{__v:t,i})}(xc.prototype=new Hi).__e=function(t){var i=this,s=Q0(i.__v),u=i.o.get(t);return u[0]++,function(m){var v=function(){i.props.revealOrder?(u.push(m),G_(i,t,u)):m()};s?s(v):v()}},xc.prototype.render=function(t){this.u=null,this.o=new Map;var i=xo(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&i.reverse();for(var s=i.length;s--;)this.o.set(i[s],this.u=[1,0,this.u]);return t.children},xc.prototype.componentDidUpdate=xc.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(i,s){G_(t,s,i)})};var tx=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,VT=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,UT=function(t){return(typeof Symbol!="undefined"&&jc(Symbol())=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function rx(t,i,s){return i.__k==null&&(i.textContent=""),Uc(t,i),typeof s=="function"&&s(),t?t.__c:null}Hi.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Hi.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(i){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:i})}})});var Z_=Mt.event;function $T(){}function qT(){return this.cancelBubble}function HT(){return this.defaultPrevented}Mt.event=function(t){return Z_&&(t=Z_(t)),t.persist=$T,t.isPropagationStopped=qT,t.isDefaultPrevented=HT,t.nativeEvent=t};var nx,W_={configurable:!0,get:function(){return this.class}},K_=Mt.vnode;Mt.vnode=function(t){var i=t.type,s=t.props,u=s;if(typeof i=="string"){for(var m in u={},s){var v=s[m];m==="value"&&"defaultValue"in s&&v==null||(m==="defaultValue"&&"value"in s&&s.value==null?m="value":m==="download"&&v===!0?v="":/ondoubleclick/i.test(m)?m="ondblclick":/^onchange(textarea|input)/i.test(m+i)&&!UT(s.type)?m="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(m)?m=m.toLowerCase():VT.test(m)?m=m.replace(/[A-Z0-9]/,"-$&").toLowerCase():v===null&&(v=void 0),u[m]=v)}i=="select"&&u.multiple&&Array.isArray(u.value)&&(u.value=xo(s.children).forEach(function(x){x.props.selected=u.value.indexOf(x.props.value)!=-1})),i=="select"&&u.defaultValue!=null&&(u.value=xo(s.children).forEach(function(x){x.props.selected=u.multiple?u.defaultValue.indexOf(x.props.value)!=-1:u.defaultValue==x.props.value})),t.props=u}i&&s.class!=s.className&&(W_.enumerable="className"in s,s.className!=null&&(u.class=s.className),Object.defineProperty(u,"className",W_)),t.$$typeof=tx,K_&&K_(t)};var X_=Mt.__r;Mt.__r=function(t){X_&&X_(t),nx=t.__c};var GT={ReactCurrentDispatcher:{current:{readContext:function(t){return nx.__n[t.__c].props.value}}}};(typeof performance=="undefined"?"undefined":jc(performance))=="object"&&typeof performance.now=="function"&&performance.now.bind(performance);function J_(t){return!!t&&t.$$typeof===tx}var ce={useState:function(t){return Ha=1,V_(J0,t)},useReducer:V_,useEffect:function(t,i){var s=$c(rl++,3);!Mt.__s&&rm(s.__H,i)&&(s.__=t,s.__H=i,Xn.__H.__h.push(s))},useLayoutEffect:U_,useRef:function(t){return Ha=5,_h(function(){return{current:t}},[])},useImperativeHandle:function(t,i,s){Ha=6,U_(function(){typeof t=="function"?t(i()):t&&(t.current=i())},s==null?s:s.concat(t))},useMemo:_h,useCallback:function(t,i){return Ha=8,_h(function(){return t},i)},useContext:function(t){var i=Xn.context[t.__c],s=$c(rl++,9);return s.__c=t,i?(s.__==null&&(s.__=!0,i.sub(Xn)),i.props.value):t.__},useDebugValue:function(t,i){Mt.useDebugValue&&Mt.useDebugValue(i?i(t):t)},version:"16.8.0",Children:BT,render:rx,hydrate:function(t,i,s){return X0(t,i),typeof s=="function"&&s(),t?t.__c:null},unmountComponentAtNode:function(t){return!!t.__k&&(Uc(null,t),!0)},createPortal:ex,createElement:qi,createContext:function(t,i){var s={__c:i="__cC"+V0++,__:t,Consumer:function(u,m){return u.children(m)},Provider:function(u){var m,v;return this.getChildContext||(m=[],(v={})[i]=this,this.getChildContext=function(){return v},this.shouldComponentUpdate=function(x){this.props.value!==x.value&&m.some(hf)},this.sub=function(x){m.push(x);var l=x.componentWillUnmount;x.componentWillUnmount=function(){m.splice(m.indexOf(x),1),l&&l.call(x)}}),u.children}};return s.Provider.__=s.Consumer.contextType=s},createFactory:function(t){return qi.bind(null,t)},cloneElement:function(t){return J_(t)?OT.apply(null,arguments):t},createRef:function(){return{current:null}},Fragment:is,isValidElement:J_,findDOMNode:function(t){return t&&(t.base||t.nodeType===1&&t)||null},Component:Hi,PureComponent:mf,memo:function(t,i){function s(m){var v=this.props.ref,x=v==m.ref;return!x&&v&&(v.call?v(null):v.current=null),i?!i(this.props,m)||!x:ff(this.props,m)}function u(m){return this.shouldComponentUpdate=s,qi(t,m)}return u.displayName="Memo("+(t.displayName||t.name)+")",u.prototype.isReactComponent=!0,u.__f=!0,u},forwardRef:function(t){function i(s,u){var m=Y0({},s);return delete m.ref,t(m,(u=s.ref||u)&&(jc(u)!="object"||"current"in u)?u:null)}return i.$$typeof=RT,i.render=i,i.prototype.isReactComponent=i.__f=!0,i.displayName="ForwardRef("+(t.displayName||t.name)+")",i},unstable_batchedUpdates:function(t,i){return t(i)},StrictMode:is,Suspense:vh,SuspenseList:xc,lazy:function(t){var i,s,u;function m(v){if(i||(i=t()).then(function(x){s=x.default||x},function(x){u=x}),u)throw u;if(!s)throw i;return qi(s,v)}return m.displayName="Lazy",m.__f=!0,m},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:GT};function ZT(){return ce.createElement("svg",{width:"15",height:"15",className:"DocSearch-Control-Key-Icon"},ce.createElement("path",{d:"M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953",strokeWidth:"1.2",stroke:"currentColor",fill:"none",strokeLinecap:"square"}))}function ix(){return ce.createElement("svg",{width:"20",height:"20",className:"DocSearch-Search-Icon",viewBox:"0 0 20 20"},ce.createElement("path",{d:"M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}var WT=["translations"];function gf(){return gf=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},gf.apply(this,arguments)}function KT(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}var XT=ce.forwardRef(function(t,i){var s=t.translations,u=s===void 0?{}:s,m=KT(t,WT),v=u.buttonText,x=v===void 0?"Search":v,l=u.buttonAriaLabel,T=l===void 0?"Search":l,C=_h(function(){return typeof navigator!="undefined"?/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?"\u2318":"Ctrl":null},[]);return ce.createElement("button",gf({type:"button",className:"DocSearch DocSearch-Button","aria-label":T},m,{ref:i}),ce.createElement("span",{className:"DocSearch-Button-Container"},ce.createElement(ix,null),ce.createElement("span",{className:"DocSearch-Button-Placeholder"},x)),ce.createElement("span",{className:"DocSearch-Button-Keys"},C!==null&&ce.createElement(ce.Fragment,null,ce.createElement("span",{className:"DocSearch-Button-Key"},C==="Ctrl"?ce.createElement(ZT,null):C),ce.createElement("span",{className:"DocSearch-Button-Key"},"K"))))});function qc(t){return t.reduce(function(i,s){return i.concat(s)},[])}var JT=0;function _f(t){return t.collections.length===0?0:t.collections.reduce(function(i,s){return i+s.items.length},0)}var YT=function(){},QT=[{segment:"autocomplete-core",version:"1.5.2"}];function xh(t,i){var s=i;return{then:function(u,m){return xh(t.then(ih(u,s,t),ih(m,s,t)),s)},catch:function(u){return xh(t.catch(ih(u,s,t)),s)},finally:function(u){return u&&s.onCancelList.push(u),xh(t.finally(ih(u&&function(){return s.onCancelList=[],u()},s,t)),s)},cancel:function(){s.isCanceled=!0;var u=s.onCancelList;s.onCancelList=[],u.forEach(function(m){m()})},isCanceled:function(){return s.isCanceled===!0}}}function Y_(t){return xh(t,{isCanceled:!1,onCancelList:[]})}function ih(t,i,s){return t?function(u){return i.isCanceled?u:t(u)}:s}function Q_(t,i,s,u){if(!s)return null;if(t<0&&(i===null||u!==null&&i===0))return s+t;var m=(i===null?-1:i)+t;return m<=-1||m>=s?u===null?null:0:m}function ey(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function eI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function tI(t,i){var s=[];return Promise.resolve(t(i)).then(function(u){return Promise.all(u.filter(function(m){return Boolean(m)}).map(function(m){if(m.sourceId,s.includes(m.sourceId))throw new Error("[Autocomplete] The `sourceId` ".concat(JSON.stringify(m.sourceId)," is not unique."));s.push(m.sourceId);var v=function(x){for(var l=1;l<arguments.length;l++){var T=arguments[l]!=null?arguments[l]:{};l%2?ey(Object(T),!0).forEach(function(C){eI(x,C,T[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(T)):ey(Object(T)).forEach(function(C){Object.defineProperty(x,C,Object.getOwnPropertyDescriptor(T,C))})}return x}({getItemInputValue:function(x){return x.state.query},getItemUrl:function(){},onSelect:function(x){(0,x.setIsOpen)(!1)},onActive:YT},m);return Promise.resolve(v)}))})}function Ga(t){var i=function(m){var v=m.collections.map(function(x){return x.items.length}).reduce(function(x,l,T){var C=(x[T-1]||0)+l;return x.push(C),x},[]).reduce(function(x,l){return l<=m.activeItemId?x+1:x},0);return m.collections[v]}(t);if(!i)return null;var s=i.items[function(m){for(var v=m.state,x=m.collection,l=!1,T=0,C=0;l===!1;){var A=v.collections[T];if(A===x){l=!0;break}C+=A.items.length,T++}return v.activeItemId-C}({state:t,collection:i})],u=i.source;return{item:s,itemInputValue:u.getItemInputValue({item:s,state:t}),itemUrl:u.getItemUrl({item:s,state:t}),source:u}}function ty(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function oh(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ty(Object(s),!0).forEach(function(u){rI(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ty(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function rI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function ry(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function nI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function iI(t,i,s){var u,m=i.initialState;return{getState:function(){return m},dispatch:function(v,x){var l=function(T){for(var C=1;C<arguments.length;C++){var A=arguments[C]!=null?arguments[C]:{};C%2?ry(Object(A),!0).forEach(function(F){nI(T,F,A[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(A)):ry(Object(A)).forEach(function(F){Object.defineProperty(T,F,Object.getOwnPropertyDescriptor(A,F))})}return T}({},m);m=t(m,{type:v,props:i,payload:x}),s({state:m,prevState:l})},pendingRequests:(u=[],{add:function(v){return u.push(v),v.finally(function(){u=u.filter(function(x){return x!==v})})},cancelAll:function(){u.forEach(function(v){return v.cancel()})},isEmpty:function(){return u.length===0}})}}function ny(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function sh(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ny(Object(s),!0).forEach(function(u){oI(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ny(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function oI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function sI(t){return function(i){if(Array.isArray(i))return Dp(i)}(t)||function(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(t)||function(i,s){if(!!i){if(typeof i=="string")return Dp(i,s);var u=Object.prototype.toString.call(i).slice(8,-1);if(u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set")return Array.from(i);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return Dp(i,s)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dp(t,i){(i==null||i>t.length)&&(i=t.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=t[s];return u}function iy(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function La(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?iy(Object(s),!0).forEach(function(u){aI(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):iy(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function aI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function oy(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function ah(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?oy(Object(s),!0).forEach(function(u){ox(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):oy(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function ox(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function lI(t){return function(i){if(Array.isArray(i))return zp(i)}(t)||function(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(t)||function(i,s){if(!!i){if(typeof i=="string")return zp(i,s);var u=Object.prototype.toString.call(i).slice(8,-1);if(u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set")return Array.from(i);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return zp(i,s)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zp(t,i){(i==null||i>t.length)&&(i=t.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=t[s];return u}function sy(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function ay(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?sy(Object(s),!0).forEach(function(u){cI(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):sy(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function cI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function lh(t){return Boolean(t.execute)}function uI(t,i){return s=t,Boolean(s==null?void 0:s.execute)?ay(ay({},t),{},{requests:t.queries.map(function(u){return{query:u,sourceId:i,transformResponse:t.transformResponse}})}):{items:t,sourceId:i};var s}function hI(t){var i=t.reduce(function(s,u){if(!lh(u))return s.push(u),s;var m=u.searchClient,v=u.execute,x=u.requests,l=s.find(function(A){return lh(u)&&lh(A)&&A.searchClient===m&&A.execute===v});if(l){var T;(T=l.items).push.apply(T,lI(x))}else{var C={execute:v,items:x,searchClient:m};s.push(C)}return s},[]).map(function(s){if(!lh(s))return Promise.resolve(s);var u=s,m=u.execute,v=u.items;return m({searchClient:u.searchClient,requests:v})});return Promise.all(i).then(function(s){return qc(s)})}function dI(t,i){return i.map(function(s){var u=t.filter(function(l){return l.sourceId===s.sourceId}),m=u.map(function(l){return l.items}),v=u[0].transformResponse,x=v?v(function(l){var T=l.map(function(C){var A;return oh(oh({},C),{},{hits:(A=C.hits)===null||A===void 0?void 0:A.map(function(F){return oh(oh({},F),{},{__autocomplete_indexName:C.index,__autocomplete_queryID:C.queryID})})})});return{results:T,hits:T.map(function(C){return C.hits}).filter(Boolean),facetHits:T.map(function(C){var A;return(A=C.facetHits)===null||A===void 0?void 0:A.map(function(F){return{label:F.value,count:F.count,_highlightResult:{label:{value:F.highlighted}}}})}).filter(Boolean)}}(m)):m;return x.every(Boolean),'The `getItems` function from source "'.concat(s.sourceId,'" must return an array of items but returned ').concat(JSON.stringify(void 0),`.

Did you forget to return items?

See: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems`),{source:s,items:x}})}var pI=["event","nextState","props","query","refresh","store"];function ly(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function fc(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ly(Object(s),!0).forEach(function(u){fI(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ly(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function fI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function mI(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}var cy,Mp,ch,mc=null,uy=(cy=-1,Mp=-1,ch=void 0,function(t){var i=++cy;return Promise.resolve(t).then(function(s){return ch&&i<Mp?ch:(Mp=i,ch=s,s)})});function $a(t){var i=t.event,s=t.nextState,u=s===void 0?{}:s,m=t.props,v=t.query,x=t.refresh,l=t.store,T=mI(t,pI);mc&&m.environment.clearTimeout(mc);var C=T.setCollections,A=T.setIsOpen,F=T.setQuery,O=T.setActiveItemId,K=T.setStatus;if(F(v),O(m.defaultActiveItemId),!v&&m.openOnFocus===!1){var oe,de=l.getState().collections.map(function(me){return fc(fc({},me),{},{items:[]})});K("idle"),C(de),A((oe=u.isOpen)!==null&&oe!==void 0?oe:m.shouldPanelOpen({state:l.getState()}));var te=Y_(uy(de).then(function(){return Promise.resolve()}));return l.pendingRequests.add(te)}K("loading"),mc=m.environment.setTimeout(function(){K("stalled")},m.stallThreshold);var se=Y_(uy(m.getSources(fc({query:v,refresh:x,state:l.getState()},T)).then(function(me){return Promise.all(me.map(function(_e){return Promise.resolve(_e.getItems(fc({query:v,refresh:x,state:l.getState()},T))).then(function(Ae){return uI(Ae,_e.sourceId)})})).then(hI).then(function(_e){return dI(_e,me)}).then(function(_e){return function(Ae){var Me=Ae.collections,He=Ae.props,De=Ae.state,Se=Me.reduce(function(rt,ot){return ah(ah({},rt),{},ox({},ot.source.sourceId,ah(ah({},ot.source),{},{getItems:function(){return qc(ot.items)}})))},{});return qc(He.reshape({sources:Object.values(Se),sourcesBySourceId:Se,state:De})).filter(Boolean).map(function(rt){return{source:rt,items:rt.getItems()}})}({collections:_e,props:m,state:l.getState()})})}))).then(function(me){var _e;K("idle"),C(me);var Ae=m.shouldPanelOpen({state:l.getState()});A((_e=u.isOpen)!==null&&_e!==void 0?_e:m.openOnFocus&&!v&&Ae||Ae);var Me=Ga(l.getState());if(l.getState().activeItemId!==null&&Me){var He=Me.item,De=Me.itemInputValue,Se=Me.itemUrl,rt=Me.source;rt.onActive(fc({event:i,item:He,itemInputValue:De,itemUrl:Se,refresh:x,source:rt,state:l.getState()},T))}}).finally(function(){K("idle"),mc&&m.environment.clearTimeout(mc)});return l.pendingRequests.add(se)}var gI=["event","props","refresh","store"];function hy(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function Ms(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?hy(Object(s),!0).forEach(function(u){_I(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):hy(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function _I(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function yI(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}var vI=["props","refresh","store"],xI=["inputElement","formElement","panelElement"],bI=["inputElement"],wI=["inputElement","maxLength"],EI=["item","source"];function dy(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function Fn(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?dy(Object(s),!0).forEach(function(u){SI(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):dy(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function SI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function gc(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}function TI(t){var i=t.props,s=t.refresh,u=t.store,m=gc(t,vI);return{getEnvironmentProps:function(v){var x=v.inputElement,l=v.formElement,T=v.panelElement;return Fn({onTouchStart:function(C){!u.getState().isOpen&&u.pendingRequests.isEmpty()||C.target===x||[l,T].some(function(A){return F=A,O=C.target,F===O||F.contains(O);var F,O})===!1&&(u.dispatch("blur",null),i.debug||u.pendingRequests.cancelAll())},onTouchMove:function(C){u.getState().isOpen!==!1&&x===i.environment.document.activeElement&&C.target!==x&&x.blur()}},gc(v,xI))},getRootProps:function(v){return Fn({role:"combobox","aria-expanded":u.getState().isOpen,"aria-haspopup":"listbox","aria-owns":u.getState().isOpen?"".concat(i.id,"-list"):void 0,"aria-labelledby":"".concat(i.id,"-label")},v)},getFormProps:function(v){return v.inputElement,Fn({action:"",noValidate:!0,role:"search",onSubmit:function(x){var l;x.preventDefault(),i.onSubmit(Fn({event:x,refresh:s,state:u.getState()},m)),u.dispatch("submit",null),(l=v.inputElement)===null||l===void 0||l.blur()},onReset:function(x){var l;x.preventDefault(),i.onReset(Fn({event:x,refresh:s,state:u.getState()},m)),u.dispatch("reset",null),(l=v.inputElement)===null||l===void 0||l.focus()}},gc(v,bI))},getLabelProps:function(v){return Fn({htmlFor:"".concat(i.id,"-input"),id:"".concat(i.id,"-label")},v)},getInputProps:function(v){function x(K){(i.openOnFocus||Boolean(u.getState().query))&&$a(Fn({event:K,props:i,query:u.getState().completion||u.getState().query,refresh:s,store:u},m)),u.dispatch("focus",null)}var l="ontouchstart"in i.environment,T=v||{},C=(T.inputElement,T.maxLength),A=C===void 0?512:C,F=gc(T,wI),O=Ga(u.getState());return Fn({"aria-autocomplete":"both","aria-activedescendant":u.getState().isOpen&&u.getState().activeItemId!==null?"".concat(i.id,"-item-").concat(u.getState().activeItemId):void 0,"aria-controls":u.getState().isOpen?"".concat(i.id,"-list"):void 0,"aria-labelledby":"".concat(i.id,"-label"),value:u.getState().completion||u.getState().query,id:"".concat(i.id,"-input"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",enterKeyHint:O!=null&&O.itemUrl?"go":"search",spellCheck:"false",autoFocus:i.autoFocus,placeholder:i.placeholder,maxLength:A,type:"search",onChange:function(K){$a(Fn({event:K,props:i,query:K.currentTarget.value.slice(0,A),refresh:s,store:u},m))},onKeyDown:function(K){(function(oe){var de=oe.event,te=oe.props,se=oe.refresh,me=oe.store,_e=yI(oe,gI);if(de.key==="ArrowUp"||de.key==="ArrowDown"){var Ae=function(){var ft=te.environment.document.getElementById("".concat(te.id,"-item-").concat(me.getState().activeItemId));ft&&(ft.scrollIntoViewIfNeeded?ft.scrollIntoViewIfNeeded(!1):ft.scrollIntoView(!1))},Me=function(){var ft=Ga(me.getState());if(me.getState().activeItemId!==null&&ft){var Te=ft.item,nt=ft.itemInputValue,St=ft.itemUrl,Ft=ft.source;Ft.onActive(Ms({event:de,item:Te,itemInputValue:nt,itemUrl:St,refresh:se,source:Ft,state:me.getState()},_e))}};de.preventDefault(),me.getState().isOpen===!1&&(te.openOnFocus||Boolean(me.getState().query))?$a(Ms({event:de,props:te,query:me.getState().query,refresh:se,store:me},_e)).then(function(){me.dispatch(de.key,{nextActiveItemId:te.defaultActiveItemId}),Me(),setTimeout(Ae,0)}):(me.dispatch(de.key,{}),Me(),Ae())}else if(de.key==="Escape")de.preventDefault(),me.dispatch(de.key,null),me.pendingRequests.cancelAll();else if(de.key==="Enter"){if(me.getState().activeItemId===null||me.getState().collections.every(function(ft){return ft.items.length===0}))return;de.preventDefault();var He=Ga(me.getState()),De=He.item,Se=He.itemInputValue,rt=He.itemUrl,ot=He.source;if(de.metaKey||de.ctrlKey)rt!==void 0&&(ot.onSelect(Ms({event:de,item:De,itemInputValue:Se,itemUrl:rt,refresh:se,source:ot,state:me.getState()},_e)),te.navigator.navigateNewTab({itemUrl:rt,item:De,state:me.getState()}));else if(de.shiftKey)rt!==void 0&&(ot.onSelect(Ms({event:de,item:De,itemInputValue:Se,itemUrl:rt,refresh:se,source:ot,state:me.getState()},_e)),te.navigator.navigateNewWindow({itemUrl:rt,item:De,state:me.getState()}));else if(!de.altKey){if(rt!==void 0)return ot.onSelect(Ms({event:de,item:De,itemInputValue:Se,itemUrl:rt,refresh:se,source:ot,state:me.getState()},_e)),void te.navigator.navigate({itemUrl:rt,item:De,state:me.getState()});$a(Ms({event:de,nextState:{isOpen:!1},props:te,query:Se,refresh:se,store:me},_e)).then(function(){ot.onSelect(Ms({event:de,item:De,itemInputValue:Se,itemUrl:rt,refresh:se,source:ot,state:me.getState()},_e))})}}})(Fn({event:K,props:i,refresh:s,store:u},m))},onFocus:x,onBlur:function(){l||(u.dispatch("blur",null),i.debug||u.pendingRequests.cancelAll())},onClick:function(K){v.inputElement!==i.environment.document.activeElement||u.getState().isOpen||x(K)}},F)},getPanelProps:function(v){return Fn({onMouseDown:function(x){x.preventDefault()},onMouseLeave:function(){u.dispatch("mouseleave",null)}},v)},getListProps:function(v){return Fn({role:"listbox","aria-labelledby":"".concat(i.id,"-label"),id:"".concat(i.id,"-list")},v)},getItemProps:function(v){var x=v.item,l=v.source,T=gc(v,EI);return Fn({id:"".concat(i.id,"-item-").concat(x.__autocomplete_id),role:"option","aria-selected":u.getState().activeItemId===x.__autocomplete_id,onMouseMove:function(C){if(x.__autocomplete_id!==u.getState().activeItemId){u.dispatch("mousemove",x.__autocomplete_id);var A=Ga(u.getState());if(u.getState().activeItemId!==null&&A){var F=A.item,O=A.itemInputValue,K=A.itemUrl,oe=A.source;oe.onActive(Fn({event:C,item:F,itemInputValue:O,itemUrl:K,refresh:s,source:oe,state:u.getState()},m))}}},onMouseDown:function(C){C.preventDefault()},onClick:function(C){var A=l.getItemInputValue({item:x,state:u.getState()}),F=l.getItemUrl({item:x,state:u.getState()});(F?Promise.resolve():$a(Fn({event:C,nextState:{isOpen:!1},props:i,query:A,refresh:s,store:u},m))).then(function(){l.onSelect(Fn({event:C,item:x,itemInputValue:A,itemUrl:F,refresh:s,source:l,state:u.getState()},m))})}},T)}}}function py(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function II(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?py(Object(s),!0).forEach(function(u){sx(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):py(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function sx(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function AI(t){var i,s,u,m,v=t.plugins,x=t.options,l=(i=(((s=x.__autocomplete_metadata)===null||s===void 0?void 0:s.userAgents)||[])[0])===null||i===void 0?void 0:i.segment,T=l?sx({},l,Object.keys(((u=x.__autocomplete_metadata)===null||u===void 0?void 0:u.options)||{})):{};return{plugins:v.map(function(C){return{name:C.name,options:Object.keys(C.__autocomplete_pluginOptions||[])}}),options:II({"autocomplete-core":Object.keys(x)},T),ua:QT.concat(((m=x.__autocomplete_metadata)===null||m===void 0?void 0:m.userAgents)||[])}}function fy(t){var i,s=t.state;return s.isOpen===!1||s.activeItemId===null?null:((i=Ga(s))===null||i===void 0?void 0:i.itemInputValue)||null}function my(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function lr(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?my(Object(s),!0).forEach(function(u){PI(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):my(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function PI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}var CI=function(t,i){switch(i.type){case"setActiveItemId":case"mousemove":return lr(lr({},t),{},{activeItemId:i.payload});case"setQuery":return lr(lr({},t),{},{query:i.payload,completion:null});case"setCollections":return lr(lr({},t),{},{collections:i.payload});case"setIsOpen":return lr(lr({},t),{},{isOpen:i.payload});case"setStatus":return lr(lr({},t),{},{status:i.payload});case"setContext":return lr(lr({},t),{},{context:lr(lr({},t.context),i.payload)});case"ArrowDown":var s=lr(lr({},t),{},{activeItemId:i.payload.hasOwnProperty("nextActiveItemId")?i.payload.nextActiveItemId:Q_(1,t.activeItemId,_f(t),i.props.defaultActiveItemId)});return lr(lr({},s),{},{completion:fy({state:s})});case"ArrowUp":var u=lr(lr({},t),{},{activeItemId:Q_(-1,t.activeItemId,_f(t),i.props.defaultActiveItemId)});return lr(lr({},u),{},{completion:fy({state:u})});case"Escape":return t.isOpen?lr(lr({},t),{},{activeItemId:null,isOpen:!1,completion:null}):lr(lr({},t),{},{activeItemId:null,query:"",status:"idle",collections:[]});case"submit":return lr(lr({},t),{},{activeItemId:null,isOpen:!1,status:"idle"});case"reset":return lr(lr({},t),{},{activeItemId:i.props.openOnFocus===!0?i.props.defaultActiveItemId:null,status:"idle",query:""});case"focus":return lr(lr({},t),{},{activeItemId:i.props.defaultActiveItemId,isOpen:(i.props.openOnFocus||Boolean(t.query))&&i.props.shouldPanelOpen({state:t})});case"blur":return i.props.debug?t:lr(lr({},t),{},{isOpen:!1,activeItemId:null});case"mouseleave":return lr(lr({},t),{},{activeItemId:i.props.defaultActiveItemId});default:return"The reducer action ".concat(JSON.stringify(i.type)," is not supported."),t}};function gy(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function Os(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?gy(Object(s),!0).forEach(function(u){kI(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):gy(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function kI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function DI(t){var i=[],s=function(l,T){var C,A=typeof window!="undefined"?window:{},F=l.plugins||[];return La(La({debug:!1,openOnFocus:!1,placeholder:"",autoFocus:!1,defaultActiveItemId:null,stallThreshold:300,environment:A,shouldPanelOpen:function(O){return _f(O.state)>0},reshape:function(O){return O.sources}},l),{},{id:(C=l.id)!==null&&C!==void 0?C:"autocomplete-".concat(JT++),plugins:F,initialState:La({activeItemId:null,query:"",completion:null,collections:[],isOpen:!1,status:"idle",context:{}},l.initialState),onStateChange:function(O){var K;(K=l.onStateChange)===null||K===void 0||K.call(l,O),F.forEach(function(oe){var de;return(de=oe.onStateChange)===null||de===void 0?void 0:de.call(oe,O)})},onSubmit:function(O){var K;(K=l.onSubmit)===null||K===void 0||K.call(l,O),F.forEach(function(oe){var de;return(de=oe.onSubmit)===null||de===void 0?void 0:de.call(oe,O)})},onReset:function(O){var K;(K=l.onReset)===null||K===void 0||K.call(l,O),F.forEach(function(oe){var de;return(de=oe.onReset)===null||de===void 0?void 0:de.call(oe,O)})},getSources:function(O){return Promise.all([].concat(sI(F.map(function(K){return K.getSources})),[l.getSources]).filter(Boolean).map(function(K){return tI(K,O)})).then(function(K){return qc(K)}).then(function(K){return K.map(function(oe){return La(La({},oe),{},{onSelect:function(de){oe.onSelect(de),T.forEach(function(te){var se;return(se=te.onSelect)===null||se===void 0?void 0:se.call(te,de)})},onActive:function(de){oe.onActive(de),T.forEach(function(te){var se;return(se=te.onActive)===null||se===void 0?void 0:se.call(te,de)})}})})})},navigator:La({navigate:function(O){var K=O.itemUrl;A.location.assign(K)},navigateNewTab:function(O){var K=O.itemUrl,oe=A.open(K,"_blank","noopener");oe==null||oe.focus()},navigateNewWindow:function(O){var K=O.itemUrl;A.open(K,"_blank","noopener")}},l.navigator)})}(t,i),u=iI(CI,s,function(l){var T=l.prevState,C=l.state;s.onStateChange(Os({prevState:T,state:C,refresh:x},m))}),m=function(l){var T=l.store;return{setActiveItemId:function(C){T.dispatch("setActiveItemId",C)},setQuery:function(C){T.dispatch("setQuery",C)},setCollections:function(C){var A=0,F=C.map(function(O){return sh(sh({},O),{},{items:qc(O.items).map(function(K){return sh(sh({},K),{},{__autocomplete_id:A++})})})});T.dispatch("setCollections",F)},setIsOpen:function(C){T.dispatch("setIsOpen",C)},setStatus:function(C){T.dispatch("setStatus",C)},setContext:function(C){T.dispatch("setContext",C)}}}({store:u}),v=TI(Os({props:s,refresh:x,store:u},m));function x(){return $a(Os({event:new Event("input"),nextState:{isOpen:u.getState().isOpen},props:s,query:u.getState().query,refresh:x,store:u},m))}return s.plugins.forEach(function(l){var T;return(T=l.subscribe)===null||T===void 0?void 0:T.call(l,Os(Os({},m),{},{refresh:x,onSelect:function(C){i.push({onSelect:C})},onActive:function(C){i.push({onActive:C})}}))}),function(l){var T,C=l.metadata,A=l.environment;if(!((T=A.navigator)===null||T===void 0)&&T.userAgent.includes("Algolia Crawler")){var F=A.document.createElement("meta"),O=A.document.querySelector("head");F.name="algolia:metadata",setTimeout(function(){F.content=JSON.stringify(C),O.appendChild(F)},0)}}({metadata:AI({plugins:s.plugins,options:t}),environment:s.environment}),Os(Os({refresh:x},v),m)}function zI(t){var i=t.translations,s=(i===void 0?{}:i).searchByText,u=s===void 0?"Search by":s;return ce.createElement("a",{href:"https://www.algolia.com/ref/docsearch/?utm_source=".concat(window.location.hostname,"&utm_medium=referral&utm_content=powered_by&utm_campaign=docsearch"),target:"_blank",rel:"noopener noreferrer"},ce.createElement("span",{className:"DocSearch-Label"},u),ce.createElement("svg",{width:"77",height:"19","aria-label":"Algolia",role:"img"},ce.createElement("path",{d:"M2.5067 0h14.0245c1.384.001 2.5058 1.1205 2.5068 2.5017V16.5c-.0014 1.3808-1.1232 2.4995-2.5068 2.5H2.5067C1.1232 18.9995.0014 17.8808 0 16.5V2.4958A2.495 2.495 0 01.735.7294 2.505 2.505 0 012.5068 0zM37.95 15.0695c-3.7068.0168-3.7068-2.986-3.7068-3.4634L34.2372.3576 36.498 0v11.1794c0 .2715 0 1.9889 1.452 1.994v1.8961zm-9.1666-1.8388c.694 0 1.2086-.0397 1.5678-.1088v-2.2934a5.3639 5.3639 0 00-1.3303-.1679 4.8283 4.8283 0 00-.758.0582 2.2845 2.2845 0 00-.688.2024c-.2029.0979-.371.2362-.4919.4142-.1268.1788-.185.2826-.185.5533 0 .5297.185.8359.5205 1.0375.3355.2016.7928.3053 1.365.3053v-.0008zm-.1969-8.1817c.7463 0 1.3768.092 1.8856.2767.5088.1838.9195.4428 1.2204.7717.3068.334.5147.7777.6423 1.251.1327.4723.196.991.196 1.5603v5.798c-.5235.1036-1.05.192-1.5787.2649-.7048.1037-1.4976.156-2.3774.156-.5832 0-1.1215-.0582-1.6016-.167a3.385 3.385 0 01-1.2432-.5364 2.6034 2.6034 0 01-.8037-.9565c-.191-.3922-.29-.9447-.29-1.5208 0-.5533.11-.905.3246-1.2863a2.7351 2.7351 0 01.8849-.9329c.376-.242.8029-.415 1.2948-.5187a7.4517 7.4517 0 011.5381-.156 7.1162 7.1162 0 011.6667.2024V8.886c0-.259-.0296-.5061-.093-.7372a1.5847 1.5847 0 00-.3245-.6158 1.5079 1.5079 0 00-.6119-.4158 2.6788 2.6788 0 00-.966-.173c-.5206 0-.9948.0634-1.4283.1384a6.5481 6.5481 0 00-1.065.259l-.2712-1.849c.2831-.0986.7048-.1964 1.2491-.2943a9.2979 9.2979 0 011.752-.1501v.0008zm44.6597 8.1193c.6947 0 1.2086-.0405 1.567-.1097v-2.2942a5.3743 5.3743 0 00-1.3303-.1679c-.2485 0-.503.0177-.7573.0582a2.2853 2.2853 0 00-.688.2024 1.2333 1.2333 0 00-.4918.4142c-.1268.1788-.1843.2826-.1843.5533 0 .5297.1843.8359.5198 1.0375.3414.2066.7927.3053 1.365.3053v.0009zm-.191-8.1767c.7463 0 1.3768.0912 1.8856.2759.5087.1847.9195.4436 1.2204.7717.3.329.5147.7786.6414 1.251a5.7248 5.7248 0 01.197 1.562v5.7972c-.3466.0742-.874.1602-1.5788.2648-.7049.1038-1.4976.1552-2.3774.1552-.5832 0-1.1215-.0573-1.6016-.167a3.385 3.385 0 01-1.2432-.5356 2.6034 2.6034 0 01-.8038-.9565c-.191-.3922-.2898-.9447-.2898-1.5216 0-.5533.1098-.905.3245-1.2854a2.7373 2.7373 0 01.8849-.9338c.376-.2412.8029-.4141 1.2947-.5178a7.4545 7.4545 0 012.325-.1097c.2781.0287.5672.081.879.156v-.3686a2.7781 2.7781 0 00-.092-.738 1.5788 1.5788 0 00-.3246-.6166 1.5079 1.5079 0 00-.612-.415 2.6797 2.6797 0 00-.966-.1729c-.5205 0-.9947.0633-1.4282.1384a6.5608 6.5608 0 00-1.065.259l-.2712-1.8498c.283-.0979.7048-.1957 1.2491-.2935a9.8597 9.8597 0 011.752-.1494zm-6.79-1.072c-.7576.001-1.373-.6103-1.3759-1.3664 0-.755.6128-1.3664 1.376-1.3664.764 0 1.3775.6115 1.3775 1.3664s-.6195 1.3664-1.3776 1.3664zm1.1393 11.1507h-2.2726V5.3409l2.2734-.3568v10.0845l-.0008.0017zm-3.984 0c-3.707.0168-3.707-2.986-3.707-3.4642L59.7069.3576 61.9685 0v11.1794c0 .2715 0 1.9889 1.452 1.994V15.0703zm-7.3512-4.979c0-.975-.2138-1.7873-.6305-2.3516-.4167-.571-.9998-.852-1.747-.852-.7454 0-1.3302.281-1.7452.852-.4166.5702-.6195 1.3765-.6195 2.3516 0 .9851.208 1.6473.6254 2.2183.4158.576.9998.8587 1.7461.8587.7454 0 1.3303-.2885 1.747-.8595.4158-.5761.6237-1.2315.6237-2.2184v.0009zm2.3132-.006c0 .7609-.1099 1.3361-.3356 1.9654a4.654 4.654 0 01-.9533 1.6076A4.214 4.214 0 0155.613 14.69c-.579.2412-1.4697.3795-1.9143.3795-.4462-.005-1.3303-.1324-1.9033-.3795a4.307 4.307 0 01-1.474-1.0316c-.4115-.4445-.7293-.9801-.9609-1.6076a5.3423 5.3423 0 01-.3465-1.9653c0-.7608.104-1.493.3356-2.1155a4.683 4.683 0 01.9719-1.5958 4.3383 4.3383 0 011.479-1.0257c.5739-.242 1.2043-.3567 1.8864-.3567.6829 0 1.3125.1197 1.8906.3567a4.1245 4.1245 0 011.4816 1.0257 4.7587 4.7587 0 01.9592 1.5958c.2426.6225.3643 1.3547.3643 2.1155zm-17.0198 0c0 .9448.208 1.9932.6238 2.431.4166.4386.955.6579 1.6142.6579.3584 0 .6998-.0523 1.0176-.1502.3186-.0978.5721-.2134.775-.3517V7.0784a8.8706 8.8706 0 00-1.4926-.1906c-.8206-.0236-1.4452.312-1.8847.8468-.4335.5365-.6533 1.476-.6533 2.3516v-.0008zm6.2863 4.4485c0 1.5385-.3938 2.662-1.1866 3.3773-.791.7136-2.0005 1.0712-3.6308 1.0712-.5958 0-1.834-.1156-2.8228-.334l.3643-1.7865c.8282.173 1.9202.2193 2.4932.2193.9077 0 1.555-.1847 1.943-.5533.388-.3686.578-.916.578-1.643v-.3687a6.8289 6.8289 0 01-.8848.3349c-.3634.1096-.786.167-1.261.167-.6246 0-1.1917-.0979-1.7055-.2944a3.5554 3.5554 0 01-1.3244-.8645c-.3642-.3796-.6541-.8579-.8561-1.4289-.2028-.571-.3068-1.59-.3068-2.339 0-.7034.1099-1.5856.3245-2.1735.2198-.5871.5316-1.0949.9542-1.515.4167-.42.9255-.743 1.5213-.98a5.5923 5.5923 0 012.052-.3855c.7353 0 1.4114.092 2.0707.2024.6592.1088 1.2204.2236 1.6776.35v8.945-.0008zM11.5026 4.2418v-.6511c-.0005-.4553-.3704-.8241-.8266-.8241H8.749c-.4561 0-.826.3688-.8265.824v.669c0 .0742.0693.1264.1445.1096a6.0346 6.0346 0 011.6768-.2362 6.125 6.125 0 011.6202.2185.1116.1116 0 00.1386-.1097zm-5.2806.852l-.3296-.3282a.8266.8266 0 00-1.168 0l-.393.3922a.8199.8199 0 000 1.164l.3237.323c.0524.0515.1268.0397.1733-.0117.191-.259.3989-.507.6305-.7372.2374-.2362.48-.4437.7462-.6335.0575-.0354.0634-.1155.017-.1687zm3.5159 2.069v2.818c0 .081.0879.1392.1622.0987l2.5102-1.2964c.0574-.0287.0752-.0987.0464-.1552a3.1237 3.1237 0 00-2.603-1.574c-.0575 0-.115.0456-.115.1097l-.0008-.0009zm.0008 6.789c-2.0933.0005-3.7915-1.6912-3.7947-3.7804C5.9468 8.0821 7.6452 6.39 9.7387 6.391c2.0932-.0005 3.7911 1.6914 3.794 3.7804a3.7783 3.7783 0 01-1.1124 2.675 3.7936 3.7936 0 01-2.6824 1.1054h.0008zM9.738 4.8002c-1.9218 0-3.6975 1.0232-4.6584 2.6841a5.359 5.359 0 000 5.3683c.9609 1.661 2.7366 2.6841 4.6584 2.6841a5.3891 5.3891 0 003.8073-1.5725 5.3675 5.3675 0 001.578-3.7987 5.3574 5.3574 0 00-1.5771-3.797A5.379 5.379 0 009.7387 4.801l-.0008-.0008z",fill:"currentColor",fillRule:"evenodd"})))}function uh(t){return ce.createElement("svg",{width:"15",height:"15","aria-label":t.ariaLabel,role:"img"},ce.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"},t.children))}function MI(t){var i=t.translations,s=i===void 0?{}:i,u=s.selectText,m=u===void 0?"to select":u,v=s.selectKeyAriaLabel,x=v===void 0?"Enter key":v,l=s.navigateText,T=l===void 0?"to navigate":l,C=s.navigateUpKeyAriaLabel,A=C===void 0?"Arrow up":C,F=s.navigateDownKeyAriaLabel,O=F===void 0?"Arrow down":F,K=s.closeText,oe=K===void 0?"to close":K,de=s.closeKeyAriaLabel,te=de===void 0?"Escape key":de,se=s.searchByText,me=se===void 0?"Search by":se;return ce.createElement(ce.Fragment,null,ce.createElement("div",{className:"DocSearch-Logo"},ce.createElement(zI,{translations:{searchByText:me}})),ce.createElement("ul",{className:"DocSearch-Commands"},ce.createElement("li",null,ce.createElement("span",{className:"DocSearch-Commands-Key"},ce.createElement(uh,{ariaLabel:x},ce.createElement("path",{d:"M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"}))),ce.createElement("span",{className:"DocSearch-Label"},m)),ce.createElement("li",null,ce.createElement("span",{className:"DocSearch-Commands-Key"},ce.createElement(uh,{ariaLabel:O},ce.createElement("path",{d:"M7.5 3.5v8M10.5 8.5l-3 3-3-3"}))),ce.createElement("span",{className:"DocSearch-Commands-Key"},ce.createElement(uh,{ariaLabel:A},ce.createElement("path",{d:"M7.5 11.5v-8M10.5 6.5l-3-3-3 3"}))),ce.createElement("span",{className:"DocSearch-Label"},T)),ce.createElement("li",null,ce.createElement("span",{className:"DocSearch-Commands-Key"},ce.createElement(uh,{ariaLabel:te},ce.createElement("path",{d:"M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"}))),ce.createElement("span",{className:"DocSearch-Label"},oe))))}function OI(t){var i=t.hit,s=t.children;return ce.createElement("a",{href:i.url},s)}function LI(){return ce.createElement("svg",{viewBox:"0 0 38 38",stroke:"currentColor",strokeOpacity:".5"},ce.createElement("g",{fill:"none",fillRule:"evenodd"},ce.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},ce.createElement("circle",{strokeOpacity:".3",cx:"18",cy:"18",r:"18"}),ce.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},ce.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))}function RI(){return ce.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},ce.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},ce.createElement("path",{d:"M3.18 6.6a8.23 8.23 0 1112.93 9.94h0a8.23 8.23 0 01-11.63 0"}),ce.createElement("path",{d:"M6.44 7.25H2.55V3.36M10.45 6v5.6M10.45 11.6L13 13"})))}function yf(){return ce.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},ce.createElement("path",{d:"M10 10l5.09-5.09L10 10l5.09 5.09L10 10zm0 0L4.91 4.91 10 10l-5.09 5.09L10 10z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}function BI(){return ce.createElement("svg",{className:"DocSearch-Hit-Select-Icon",width:"20",height:"20",viewBox:"0 0 20 20"},ce.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},ce.createElement("path",{d:"M18 3v4c0 2-2 4-4 4H2"}),ce.createElement("path",{d:"M8 17l-6-6 6-6"})))}var FI=function(){return ce.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},ce.createElement("path",{d:"M17 6v12c0 .52-.2 1-1 1H4c-.7 0-1-.33-1-1V2c0-.55.42-1 1-1h8l5 5zM14 8h-3.13c-.51 0-.87-.34-.87-.87V4",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))};function NI(t){switch(t.type){case"lvl1":return ce.createElement(FI,null);case"content":return ce.createElement(VI,null);default:return ce.createElement(jI,null)}}function jI(){return ce.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},ce.createElement("path",{d:"M13 13h4-4V8H7v5h6v4-4H7V8H3h4V3v5h6V3v5h4-4v5zm-6 0v4-4H3h4z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}function VI(){return ce.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},ce.createElement("path",{d:"M17 5H3h14zm0 5H3h14zm0 5H3h14z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function _y(){return ce.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},ce.createElement("path",{d:"M10 14.2L5 17l1-5.6-4-4 5.5-.7 2.5-5 2.5 5 5.6.8-4 4 .9 5.5z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function UI(){return ce.createElement("svg",{width:"40",height:"40",viewBox:"0 0 20 20",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},ce.createElement("path",{d:"M19 4.8a16 16 0 00-2-1.2m-3.3-1.2A16 16 0 001.1 4.7M16.7 8a12 12 0 00-2.8-1.4M10 6a12 12 0 00-6.7 2M12.3 14.7a4 4 0 00-4.5 0M14.5 11.4A8 8 0 0010 10M3 16L18 2M10 18h0"}))}function $I(){return ce.createElement("svg",{width:"40",height:"40",viewBox:"0 0 20 20",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},ce.createElement("path",{d:"M15.5 4.8c2 3 1.7 7-1 9.7h0l4.3 4.3-4.3-4.3a7.8 7.8 0 01-9.8 1m-2.2-2.2A7.8 7.8 0 0113.2 2.4M2 18L18 2"}))}function qI(t){var i=t.translations,s=i===void 0?{}:i,u=s.titleText,m=u===void 0?"Unable to fetch results":u,v=s.helpText,x=v===void 0?"You might want to check your network connection.":v;return ce.createElement("div",{className:"DocSearch-ErrorScreen"},ce.createElement("div",{className:"DocSearch-Screen-Icon"},ce.createElement(UI,null)),ce.createElement("p",{className:"DocSearch-Title"},m),ce.createElement("p",{className:"DocSearch-Help"},x))}var HI=["translations"];function GI(t){return function(i){if(Array.isArray(i))return Op(i)}(t)||function(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(t)||function(i,s){if(!!i){if(typeof i=="string")return Op(i,s);var u=Object.prototype.toString.call(i).slice(8,-1);if(u==="Object"&&i.constructor&&(u=i.constructor.name),u==="Map"||u==="Set")return Array.from(i);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return Op(i,s)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Op(t,i){(i==null||i>t.length)&&(i=t.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=t[s];return u}function ZI(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}function WI(t){var i=t.translations,s=i===void 0?{}:i,u=ZI(t,HI),m=s.noResultsText,v=m===void 0?"No results for":m,x=s.suggestedQueryText,l=x===void 0?"Try searching for":x,T=s.reportMissingResultsText,C=T===void 0?"Believe this query should return results?":T,A=s.reportMissingResultsLinkText,F=A===void 0?"Let us know.":A,O=u.state.context.searchSuggestions;return ce.createElement("div",{className:"DocSearch-NoResults"},ce.createElement("div",{className:"DocSearch-Screen-Icon"},ce.createElement($I,null)),ce.createElement("p",{className:"DocSearch-Title"},v,' "',ce.createElement("strong",null,u.state.query),'"'),O&&O.length>0&&ce.createElement("div",{className:"DocSearch-NoResults-Prefill-List"},ce.createElement("p",{className:"DocSearch-Help"},l,":"),ce.createElement("ul",null,O.slice(0,3).reduce(function(K,oe){return[].concat(GI(K),[ce.createElement("li",{key:oe},ce.createElement("button",{className:"DocSearch-Prefill",key:oe,type:"button",onClick:function(){u.setQuery(oe.toLowerCase()+" "),u.refresh(),u.inputRef.current.focus()}},oe))])},[]))),u.getMissingResultsUrl&&ce.createElement("p",{className:"DocSearch-Help"},"".concat(C," "),ce.createElement("a",{href:u.getMissingResultsUrl({query:u.state.query}),target:"_blank",rel:"noopener noreferrer"},F)))}var KI=["hit","attribute","tagName"];function yy(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function vy(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?yy(Object(s),!0).forEach(function(u){XI(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):yy(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function XI(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function JI(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}function xy(t,i){return i.split(".").reduce(function(s,u){return s!=null&&s[u]?s[u]:null},t)}function Ra(t){var i=t.hit,s=t.attribute,u=t.tagName;return qi(u===void 0?"span":u,vy(vy({},JI(t,KI)),{},{dangerouslySetInnerHTML:{__html:xy(i,"_snippetResult.".concat(s,".value"))||xy(i,s)}}))}function by(t,i){return function(s){if(Array.isArray(s))return s}(t)||function(s,u){var m=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(m!=null){var v,x,l=[],T=!0,C=!1;try{for(m=m.call(s);!(T=(v=m.next()).done)&&(l.push(v.value),!u||l.length!==u);T=!0);}catch(A){C=!0,x=A}finally{try{T||m.return==null||m.return()}finally{if(C)throw x}}return l}}(t,i)||function(s,u){if(!!s){if(typeof s=="string")return wy(s,u);var m=Object.prototype.toString.call(s).slice(8,-1);if(m==="Object"&&s.constructor&&(m=s.constructor.name),m==="Map"||m==="Set")return Array.from(s);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return wy(s,u)}}(t,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wy(t,i){(i==null||i>t.length)&&(i=t.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=t[s];return u}function Vh(){return Vh=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},Vh.apply(this,arguments)}function vf(t){return t.collection&&t.collection.items.length!==0?ce.createElement("section",{className:"DocSearch-Hits"},ce.createElement("div",{className:"DocSearch-Hit-source"},t.title),ce.createElement("ul",t.getListProps(),t.collection.items.map(function(i,s){return ce.createElement(YI,Vh({key:[t.title,i.objectID].join(":"),item:i,index:s},t))}))):null}function YI(t){var i=t.item,s=t.index,u=t.renderIcon,m=t.renderAction,v=t.getItemProps,x=t.onItemClick,l=t.collection,T=t.hitComponent,C=by(ce.useState(!1),2),A=C[0],F=C[1],O=by(ce.useState(!1),2),K=O[0],oe=O[1],de=ce.useRef(null),te=T;return ce.createElement("li",Vh({className:["DocSearch-Hit",i.__docsearch_parent&&"DocSearch-Hit--Child",A&&"DocSearch-Hit--deleting",K&&"DocSearch-Hit--favoriting"].filter(Boolean).join(" "),onTransitionEnd:function(){de.current&&de.current()}},v({item:i,source:l.source,onClick:function(){x(i)}})),ce.createElement(te,{hit:i},ce.createElement("div",{className:"DocSearch-Hit-Container"},u({item:i,index:s}),i.hierarchy[i.type]&&i.type==="lvl1"&&ce.createElement("div",{className:"DocSearch-Hit-content-wrapper"},ce.createElement(Ra,{className:"DocSearch-Hit-title",hit:i,attribute:"hierarchy.lvl1"}),i.content&&ce.createElement(Ra,{className:"DocSearch-Hit-path",hit:i,attribute:"content"})),i.hierarchy[i.type]&&(i.type==="lvl2"||i.type==="lvl3"||i.type==="lvl4"||i.type==="lvl5"||i.type==="lvl6")&&ce.createElement("div",{className:"DocSearch-Hit-content-wrapper"},ce.createElement(Ra,{className:"DocSearch-Hit-title",hit:i,attribute:"hierarchy.".concat(i.type)}),ce.createElement(Ra,{className:"DocSearch-Hit-path",hit:i,attribute:"hierarchy.lvl1"})),i.type==="content"&&ce.createElement("div",{className:"DocSearch-Hit-content-wrapper"},ce.createElement(Ra,{className:"DocSearch-Hit-title",hit:i,attribute:"content"}),ce.createElement(Ra,{className:"DocSearch-Hit-path",hit:i,attribute:"hierarchy.lvl1"})),m({item:i,runDeleteTransition:function(se){F(!0),de.current=se},runFavoriteTransition:function(se){oe(!0),de.current=se}}))))}function Ey(t,i){return t.reduce(function(s,u){var m=i(u);return s.hasOwnProperty(m)||(s[m]=[]),s[m].length<5&&s[m].push(u),s},{})}function Sy(t){return t}function QI(){}var ax=/(<mark>|<\/mark>)/g,eA=RegExp(ax.source);function lx(t){var i,s,u,m,v,x=t;if(!x.__docsearch_parent&&!t._highlightResult)return t.hierarchy.lvl0;var l=((x.__docsearch_parent?(i=x.__docsearch_parent)===null||i===void 0||(s=i._highlightResult)===null||s===void 0||(u=s.hierarchy)===null||u===void 0?void 0:u.lvl0:(m=t._highlightResult)===null||m===void 0||(v=m.hierarchy)===null||v===void 0?void 0:v.lvl0)||{}).value;return l&&eA.test(l)?l.replace(ax,""):l}function xf(){return xf=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},xf.apply(this,arguments)}function tA(t){return ce.createElement("div",{className:"DocSearch-Dropdown-Container"},t.state.collections.map(function(i){if(i.items.length===0)return null;var s=lx(i.items[0]);return ce.createElement(vf,xf({},t,{key:i.source.sourceId,title:s,collection:i,renderIcon:function(u){var m,v=u.item,x=u.index;return ce.createElement(ce.Fragment,null,v.__docsearch_parent&&ce.createElement("svg",{className:"DocSearch-Hit-Tree",viewBox:"0 0 24 54"},ce.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},v.__docsearch_parent!==((m=i.items[x+1])===null||m===void 0?void 0:m.__docsearch_parent)?ce.createElement("path",{d:"M8 6v21M20 27H8.3"}):ce.createElement("path",{d:"M8 6v42M20 27H8.3"}))),ce.createElement("div",{className:"DocSearch-Hit-icon"},ce.createElement(NI,{type:v.type})))},renderAction:function(){return ce.createElement("div",{className:"DocSearch-Hit-action"},ce.createElement(BI,null))}}))}),t.resultsFooterComponent&&ce.createElement("section",{className:"DocSearch-HitsFooter"},ce.createElement(t.resultsFooterComponent,{state:t.state})))}var rA=["translations"];function Uh(){return Uh=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},Uh.apply(this,arguments)}function nA(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}function iA(t){var i=t.translations,s=i===void 0?{}:i,u=nA(t,rA),m=s.recentSearchesTitle,v=m===void 0?"Recent":m,x=s.noRecentSearchesText,l=x===void 0?"No recent searches":x,T=s.saveRecentSearchButtonTitle,C=T===void 0?"Save this search":T,A=s.removeRecentSearchButtonTitle,F=A===void 0?"Remove this search from history":A,O=s.favoriteSearchesTitle,K=O===void 0?"Favorite":O,oe=s.removeFavoriteSearchButtonTitle,de=oe===void 0?"Remove this search from favorites":oe;return u.state.status==="idle"&&u.hasCollections===!1?u.disableUserPersonalization?null:ce.createElement("div",{className:"DocSearch-StartScreen"},ce.createElement("p",{className:"DocSearch-Help"},l)):u.hasCollections===!1?null:ce.createElement("div",{className:"DocSearch-Dropdown-Container"},ce.createElement(vf,Uh({},u,{title:v,collection:u.state.collections[0],renderIcon:function(){return ce.createElement("div",{className:"DocSearch-Hit-icon"},ce.createElement(RI,null))},renderAction:function(te){var se=te.item,me=te.runFavoriteTransition,_e=te.runDeleteTransition;return ce.createElement(ce.Fragment,null,ce.createElement("div",{className:"DocSearch-Hit-action"},ce.createElement("button",{className:"DocSearch-Hit-action-button",title:C,type:"submit",onClick:function(Ae){Ae.preventDefault(),Ae.stopPropagation(),me(function(){u.favoriteSearches.add(se),u.recentSearches.remove(se),u.refresh()})}},ce.createElement(_y,null))),ce.createElement("div",{className:"DocSearch-Hit-action"},ce.createElement("button",{className:"DocSearch-Hit-action-button",title:F,type:"submit",onClick:function(Ae){Ae.preventDefault(),Ae.stopPropagation(),_e(function(){u.recentSearches.remove(se),u.refresh()})}},ce.createElement(yf,null))))}})),ce.createElement(vf,Uh({},u,{title:K,collection:u.state.collections[1],renderIcon:function(){return ce.createElement("div",{className:"DocSearch-Hit-icon"},ce.createElement(_y,null))},renderAction:function(te){var se=te.item,me=te.runDeleteTransition;return ce.createElement("div",{className:"DocSearch-Hit-action"},ce.createElement("button",{className:"DocSearch-Hit-action-button",title:de,type:"submit",onClick:function(_e){_e.preventDefault(),_e.stopPropagation(),me(function(){u.favoriteSearches.remove(se),u.refresh()})}},ce.createElement(yf,null)))}})))}var oA=["translations"];function $h(){return $h=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},$h.apply(this,arguments)}function sA(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}var aA=ce.memo(function(t){var i=t.translations,s=i===void 0?{}:i,u=sA(t,oA);if(u.state.status==="error")return ce.createElement(qI,{translations:s==null?void 0:s.errorScreen});var m=u.state.collections.some(function(v){return v.items.length>0});return u.state.query?m===!1?ce.createElement(WI,$h({},u,{translations:s==null?void 0:s.noResultsScreen})):ce.createElement(tA,u):ce.createElement(iA,$h({},u,{hasCollections:m,translations:s==null?void 0:s.startScreen}))},function(t,i){return i.state.status==="loading"||i.state.status==="stalled"}),lA=["translations"];function qh(){return qh=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},qh.apply(this,arguments)}function cA(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}function uA(t){var i=t.translations,s=i===void 0?{}:i,u=cA(t,lA),m=s.resetButtonTitle,v=m===void 0?"Clear the query":m,x=s.resetButtonAriaLabel,l=x===void 0?"Clear the query":x,T=s.cancelButtonText,C=T===void 0?"Cancel":T,A=s.cancelButtonAriaLabel,F=A===void 0?"Cancel":A,O=u.getFormProps({inputElement:u.inputRef.current}).onReset;return ce.useEffect(function(){u.autoFocus&&u.inputRef.current&&u.inputRef.current.focus()},[u.autoFocus,u.inputRef]),ce.useEffect(function(){u.isFromSelection&&u.inputRef.current&&u.inputRef.current.select()},[u.isFromSelection,u.inputRef]),ce.createElement(ce.Fragment,null,ce.createElement("form",{className:"DocSearch-Form",onSubmit:function(K){K.preventDefault()},onReset:O},ce.createElement("label",qh({className:"DocSearch-MagnifierLabel"},u.getLabelProps()),ce.createElement(ix,null)),ce.createElement("div",{className:"DocSearch-LoadingIndicator"},ce.createElement(LI,null)),ce.createElement("input",qh({className:"DocSearch-Input",ref:u.inputRef},u.getInputProps({inputElement:u.inputRef.current,autoFocus:u.autoFocus,maxLength:64}))),ce.createElement("button",{type:"reset",title:v,className:"DocSearch-Reset","aria-label":l,hidden:!u.state.query},ce.createElement(yf,null))),ce.createElement("button",{className:"DocSearch-Cancel",type:"reset","aria-label":F,onClick:u.onClose},C))}var hA=["_highlightResult","_snippetResult"];function dA(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}function pA(t){return function(){var i="__TEST_KEY__";try{return localStorage.setItem(i,""),localStorage.removeItem(i),!0}catch{return!1}}()===!1?{setItem:function(){},getItem:function(){return[]}}:{setItem:function(i){return window.localStorage.setItem(t,JSON.stringify(i))},getItem:function(){var i=window.localStorage.getItem(t);return i?JSON.parse(i):[]}}}function Ty(t){var i=t.key,s=t.limit,u=s===void 0?5:s,m=pA(i),v=m.getItem().slice(0,u);return{add:function(x){var l=x,T=(l._highlightResult,l._snippetResult,dA(l,hA)),C=v.findIndex(function(A){return A.objectID===T.objectID});C>-1&&v.splice(C,1),v.unshift(T),v=v.slice(0,u),m.setItem(v)},remove:function(x){v=v.filter(function(l){return l.objectID!==x.objectID}),m.setItem(v)},getAll:function(){return v}}}var fA=["facetName","facetQuery"];function mA(t){var i,s="algoliasearch-client-js-".concat(t.key),u=function(){return i===void 0&&(i=t.localStorage||window.localStorage),i},m=function(){return JSON.parse(u().getItem(s)||"{}")};return{get:function(v,x){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){var T=JSON.stringify(v),C=m()[T];return Promise.all([C||x(),C!==void 0])}).then(function(T){var C=Bh(T,2),A=C[0],F=C[1];return Promise.all([A,F||l.miss(A)])}).then(function(T){return Bh(T,1)[0]})},set:function(v,x){return Promise.resolve().then(function(){var l=m();return l[JSON.stringify(v)]=x,u().setItem(s,JSON.stringify(l)),x})},delete:function(v){return Promise.resolve().then(function(){var x=m();delete x[JSON.stringify(v)],u().setItem(s,JSON.stringify(x))})},clear:function(){return Promise.resolve().then(function(){u().removeItem(s)})}}}function bc(t){var i=Fh(t.caches),s=i.shift();return s===void 0?{get:function(u,m){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return m().then(function(x){return Promise.all([x,v.miss(x)])}).then(function(x){return Bh(x,1)[0]})},set:function(u,m){return Promise.resolve(m)},delete:function(u){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(u,m){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return s.get(u,m,v).catch(function(){return bc({caches:i}).get(u,m,v)})},set:function(u,m){return s.set(u,m).catch(function(){return bc({caches:i}).set(u,m)})},delete:function(u){return s.delete(u).catch(function(){return bc({caches:i}).delete(u)})},clear:function(){return s.clear().catch(function(){return bc({caches:i}).clear()})}}}function Lp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},i={};return{get:function(s,u){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},v=JSON.stringify(s);if(v in i)return Promise.resolve(t.serializable?JSON.parse(i[v]):i[v]);var x=u(),l=m&&m.miss||function(){return Promise.resolve()};return x.then(function(T){return l(T)}).then(function(){return x})},set:function(s,u){return i[JSON.stringify(s)]=t.serializable?JSON.stringify(u):u,Promise.resolve(u)},delete:function(s){return delete i[JSON.stringify(s)],Promise.resolve()},clear:function(){return i={},Promise.resolve()}}}function gA(t){for(var i=t.length-1;i>0;i--){var s=Math.floor(Math.random()*(i+1)),u=t[i];t[i]=t[s],t[s]=u}return t}function cx(t,i){return i&&Object.keys(i).forEach(function(s){t[s]=i[s](t)}),t}function sd(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];var m=0;return t.replace(/%s/g,function(){return encodeURIComponent(s[m++])})}var bh={WithinQueryParameters:0,WithinHeaders:1};function Iy(t,i){var s=t||{},u=s.data||{};return Object.keys(s).forEach(function(m){["timeout","headers","queryParameters","data","cacheable"].indexOf(m)===-1&&(u[m]=s[m])}),{data:Object.entries(u).length>0?u:void 0,timeout:s.timeout||i,headers:s.headers||{},queryParameters:s.queryParameters||{},cacheable:s.cacheable}}var Za={Read:1,Write:2,Any:3},ux=1,_A=2,hx=3;function dx(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ux;return wr(wr({},t),{},{status:i,lastUpdate:Date.now()})}function px(t){return typeof t=="string"?{protocol:"https",url:t,accept:Za.Any}:{protocol:t.protocol||"https",url:t.url,accept:t.accept||Za.Any}}var Ay="GET",ad="POST";function yA(t,i){return Promise.all(i.map(function(s){return t.get(s,function(){return Promise.resolve(dx(s))})})).then(function(s){var u=s.filter(function(x){return function(l){return l.status===ux||Date.now()-l.lastUpdate>12e4}(x)}),m=s.filter(function(x){return function(l){return l.status===hx&&Date.now()-l.lastUpdate<=12e4}(x)}),v=[].concat(Fh(u),Fh(m));return{getTimeout:function(x,l){return(m.length===0&&x===0?1:m.length+3+x)*l},statelessHosts:v.length>0?v.map(function(x){return px(x)}):i}})}function Py(t,i,s,u){var m=[],v=function(O,K){if(!(O.method===Ay||O.data===void 0&&K.data===void 0)){var oe=Array.isArray(O.data)?O.data:wr(wr({},O.data),K.data);return JSON.stringify(oe)}}(s,u),x=function(O,K){var oe=wr(wr({},O.headers),K.headers),de={};return Object.keys(oe).forEach(function(te){var se=oe[te];de[te.toLowerCase()]=se}),de}(t,u),l=s.method,T=s.method!==Ay?{}:wr(wr({},s.data),u.data),C=wr(wr(wr({"x-algolia-agent":t.userAgent.value},t.queryParameters),T),u.queryParameters),A=0,F=function O(K,oe){var de=K.pop();if(de===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:Cy(m)};var te={data:v,headers:x,method:l,url:xA(de,s.path,C),connectTimeout:oe(A,t.timeouts.connect),responseTimeout:oe(A,u.timeout)},se=function(_e){var Ae={request:te,response:_e,host:de,triesLeft:K.length};return m.push(Ae),Ae},me={onSucess:function(_e){return function(Ae){try{return JSON.parse(Ae.content)}catch(Me){throw function(He,De){return{name:"DeserializationError",message:He,response:De}}(Me.message,Ae)}}(_e)},onRetry:function(_e){var Ae=se(_e);return _e.isTimedOut&&A++,Promise.all([t.logger.info("Retryable failure",mx(Ae)),t.hostsCache.set(de,dx(de,_e.isTimedOut?hx:_A))]).then(function(){return O(K,oe)})},onFail:function(_e){throw se(_e),function(Ae,Me){var He=Ae.content,De=Ae.status,Se=He;try{Se=JSON.parse(He).message}catch{}return function(rt,ot,ft){return{name:"ApiError",message:rt,status:ot,transporterStackTrace:ft}}(Se,De,Me)}(_e,Cy(m))}};return t.requester.send(te).then(function(_e){return function(Ae,Me){return function(He){var De=He.status;return He.isTimedOut||function(Se){var rt=Se.isTimedOut,ot=Se.status;return!rt&&~~ot==0}(He)||~~(De/100)!=2&&~~(De/100)!=4}(Ae)?Me.onRetry(Ae):~~(Ae.status/100)==2?Me.onSucess(Ae):Me.onFail(Ae)}(_e,me)})};return yA(t.hostsCache,i).then(function(O){return F(Fh(O.statelessHosts).reverse(),O.getTimeout)})}function vA(t){var i={value:"Algolia for JavaScript (".concat(t,")"),add:function(s){var u="; ".concat(s.segment).concat(s.version!==void 0?" (".concat(s.version,")"):"");return i.value.indexOf(u)===-1&&(i.value="".concat(i.value).concat(u)),i}};return i}function xA(t,i,s){var u=fx(s),m="".concat(t.protocol,"://").concat(t.url,"/").concat(i.charAt(0)==="/"?i.substr(1):i);return u.length&&(m+="?".concat(u)),m}function fx(t){return Object.keys(t).map(function(i){return sd("%s=%s",i,(s=t[i],Object.prototype.toString.call(s)==="[object Object]"||Object.prototype.toString.call(s)==="[object Array]"?JSON.stringify(t[i]):t[i]));var s}).join("&")}function Cy(t){return t.map(function(i){return mx(i)})}function mx(t){var i=t.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return wr(wr({},t),{},{request:wr(wr({},t.request),{},{headers:wr(wr({},t.request.headers),i)})})}var bA=function(t){var i=t.appId,s=function(v,x,l){var T={"x-algolia-api-key":l,"x-algolia-application-id":x};return{headers:function(){return v===bh.WithinHeaders?T:{}},queryParameters:function(){return v===bh.WithinQueryParameters?T:{}}}}(t.authMode!==void 0?t.authMode:bh.WithinHeaders,i,t.apiKey),u=function(v){var x=v.hostsCache,l=v.logger,T=v.requester,C=v.requestsCache,A=v.responsesCache,F=v.timeouts,O=v.userAgent,K=v.hosts,oe=v.queryParameters,de={hostsCache:x,logger:l,requester:T,requestsCache:C,responsesCache:A,timeouts:F,userAgent:O,headers:v.headers,queryParameters:oe,hosts:K.map(function(te){return px(te)}),read:function(te,se){var me=Iy(se,de.timeouts.read),_e=function(){return Py(de,de.hosts.filter(function(Me){return(Me.accept&Za.Read)!=0}),te,me)};if((me.cacheable!==void 0?me.cacheable:te.cacheable)!==!0)return _e();var Ae={request:te,mappedRequestOptions:me,transporter:{queryParameters:de.queryParameters,headers:de.headers}};return de.responsesCache.get(Ae,function(){return de.requestsCache.get(Ae,function(){return de.requestsCache.set(Ae,_e()).then(function(Me){return Promise.all([de.requestsCache.delete(Ae),Me])},function(Me){return Promise.all([de.requestsCache.delete(Ae),Promise.reject(Me)])}).then(function(Me){var He=Bh(Me,2);return He[0],He[1]})})},{miss:function(Me){return de.responsesCache.set(Ae,Me)}})},write:function(te,se){return Py(de,de.hosts.filter(function(me){return(me.accept&Za.Write)!=0}),te,Iy(se,de.timeouts.write))}};return de}(wr(wr({hosts:[{url:"".concat(i,"-dsn.algolia.net"),accept:Za.Read},{url:"".concat(i,".algolia.net"),accept:Za.Write}].concat(gA([{url:"".concat(i,"-1.algolianet.com")},{url:"".concat(i,"-2.algolianet.com")},{url:"".concat(i,"-3.algolianet.com")}]))},t),{},{headers:wr(wr(wr({},s.headers()),{"content-type":"application/x-www-form-urlencoded"}),t.headers),queryParameters:wr(wr({},s.queryParameters()),t.queryParameters)})),m={transporter:u,appId:i,addAlgoliaAgent:function(v,x){u.userAgent.add({segment:v,version:x})},clearCache:function(){return Promise.all([u.requestsCache.clear(),u.responsesCache.clear()]).then(function(){})}};return cx(m,t.methods)},gx=function(t){return function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={transporter:t.transporter,appId:t.appId,indexName:i};return cx(u,s.methods)}},ky=function(t){return function(i,s){var u=i.map(function(m){return wr(wr({},m),{},{params:fx(m.params||{})})});return t.transporter.read({method:ad,path:"1/indexes/*/queries",data:{requests:u},cacheable:!0},s)}},Dy=function(t){return function(i,s){return Promise.all(i.map(function(u){var m=u.params,v=m.facetName,x=m.facetQuery,l=kT(m,fA);return gx(t)(u.indexName,{methods:{searchForFacetValues:_x}}).searchForFacetValues(v,x,wr(wr({},s),l))}))}},wA=function(t){return function(i,s,u){return t.transporter.read({method:ad,path:sd("1/answers/%s/prediction",t.indexName),data:{query:i,queryLanguages:s},cacheable:!0},u)}},EA=function(t){return function(i,s){return t.transporter.read({method:ad,path:sd("1/indexes/%s/query",t.indexName),data:{query:i},cacheable:!0},s)}},_x=function(t){return function(i,s,u){return t.transporter.read({method:ad,path:sd("1/indexes/%s/facets/%s/query",t.indexName,i),data:{facetQuery:s},cacheable:!0},u)}},SA=1,TA=2,IA=3;function yx(t,i,s){var u,m={appId:t,apiKey:i,timeouts:{connect:1,read:2,write:30},requester:{send:function(v){return new Promise(function(x){var l=new XMLHttpRequest;l.open(v.method,v.url,!0),Object.keys(v.headers).forEach(function(F){return l.setRequestHeader(F,v.headers[F])});var T,C=function(F,O){return setTimeout(function(){l.abort(),x({status:0,content:O,isTimedOut:!0})},1e3*F)},A=C(v.connectTimeout,"Connection timeout");l.onreadystatechange=function(){l.readyState>l.OPENED&&T===void 0&&(clearTimeout(A),T=C(v.responseTimeout,"Socket timeout"))},l.onerror=function(){l.status===0&&(clearTimeout(A),clearTimeout(T),x({content:l.responseText||"Network request failed",status:l.status,isTimedOut:!1}))},l.onload=function(){clearTimeout(A),clearTimeout(T),x({content:l.responseText,status:l.status,isTimedOut:!1})},l.send(v.data)})}},logger:(u=IA,{debug:function(v,x){return SA>=u&&console.debug(v,x),Promise.resolve()},info:function(v,x){return TA>=u&&console.info(v,x),Promise.resolve()},error:function(v,x){return console.error(v,x),Promise.resolve()}}),responsesCache:Lp(),requestsCache:Lp({serializable:!1}),hostsCache:bc({caches:[mA({key:"".concat("4.8.5","-").concat(t)}),Lp()]}),userAgent:vA("4.8.5").add({segment:"Browser",version:"lite"}),authMode:bh.WithinQueryParameters};return bA(wr(wr(wr({},m),s),{},{methods:{search:ky,searchForFacetValues:Dy,multipleQueries:ky,multipleSearchForFacetValues:Dy,initIndex:function(v){return function(x){return gx(v)(x,{methods:{search:EA,searchForFacetValues:_x,findAnswers:wA}})}}}}))}yx.version="4.8.5";var AA=["footer","searchBox"];function Dc(){return Dc=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},Dc.apply(this,arguments)}function zy(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);i&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),s.push.apply(s,u)}return s}function Rp(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?zy(Object(s),!0).forEach(function(u){PA(t,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):zy(Object(s)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(s,u))})}return t}function PA(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function CA(t,i){return function(s){if(Array.isArray(s))return s}(t)||function(s,u){var m=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(m!=null){var v,x,l=[],T=!0,C=!1;try{for(m=m.call(s);!(T=(v=m.next()).done)&&(l.push(v.value),!u||l.length!==u);T=!0);}catch(A){C=!0,x=A}finally{try{T||m.return==null||m.return()}finally{if(C)throw x}}return l}}(t,i)||function(s,u){if(!!s){if(typeof s=="string")return My(s,u);var m=Object.prototype.toString.call(s).slice(8,-1);if(m==="Object"&&s.constructor&&(m=s.constructor.name),m==="Map"||m==="Set")return Array.from(s);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return My(s,u)}}(t,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function My(t,i){(i==null||i>t.length)&&(i=t.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=t[s];return u}function kA(t,i){if(t==null)return{};var s,u,m=function(x,l){if(x==null)return{};var T,C,A={},F=Object.keys(x);for(C=0;C<F.length;C++)T=F[C],l.indexOf(T)>=0||(A[T]=x[T]);return A}(t,i);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(t);for(u=0;u<v.length;u++)s=v[u],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(t,s)&&(m[s]=t[s])}return m}function DA(t){var i=t.appId,s=t.apiKey,u=t.indexName,m=t.placeholder,v=m===void 0?"Search docs":m,x=t.searchParameters,l=t.onClose,T=l===void 0?QI:l,C=t.transformItems,A=C===void 0?Sy:C,F=t.hitComponent,O=F===void 0?OI:F,K=t.resultsFooterComponent,oe=K===void 0?function(){return null}:K,de=t.navigator,te=t.initialScrollY,se=te===void 0?0:te,me=t.transformSearchClient,_e=me===void 0?Sy:me,Ae=t.disableUserPersonalization,Me=Ae!==void 0&&Ae,He=t.initialQuery,De=He===void 0?"":He,Se=t.translations,rt=Se===void 0?{}:Se,ot=t.getMissingResultsUrl,ft=rt.footer,Te=rt.searchBox,nt=kA(rt,AA),St=CA(ce.useState({query:"",collections:[],completion:null,context:{},isOpen:!1,activeItemId:null,status:"idle"}),2),Ft=St[0],Ve=St[1],Dt=ce.useRef(null),zt=ce.useRef(null),dr=ce.useRef(null),pr=ce.useRef(null),Ir=ce.useRef(null),vr=ce.useRef(10),Ar=ce.useRef(typeof window!="undefined"?window.getSelection().toString().slice(0,64):"").current,jr=ce.useRef(De||Ar).current,Fe=function(Z,ne,ye){return ce.useMemo(function(){var Le=yx(Z,ne);return Le.addAlgoliaAgent("docsearch","3.0.0"),/docsearch.js \(.*\)/.test(Le.transporter.userAgent.value)===!1&&Le.addAlgoliaAgent("docsearch-react","3.0.0"),ye(Le)},[Z,ne,ye])}(i,s,_e),at=ce.useRef(Ty({key:"__DOCSEARCH_FAVORITE_SEARCHES__".concat(u),limit:10})).current,Xe=ce.useRef(Ty({key:"__DOCSEARCH_RECENT_SEARCHES__".concat(u),limit:at.getAll().length===0?7:4})).current,dt=ce.useCallback(function(Z){if(!Me){var ne=Z.type==="content"?Z.__docsearch_parent:Z;ne&&at.getAll().findIndex(function(ye){return ye.objectID===ne.objectID})===-1&&Xe.add(ne)}},[at,Xe,Me]),Zt=ce.useMemo(function(){return DI({id:"docsearch",defaultActiveItemId:0,placeholder:v,openOnFocus:!0,initialState:{query:jr,context:{searchSuggestions:[]}},navigator:de,onStateChange:function(Z){Ve(Z.state)},getSources:function(Z){var ne=Z.query,ye=Z.state,Le=Z.setContext,Re=Z.setStatus;return ne?Fe.search([{query:ne,indexName:u,params:Rp({attributesToRetrieve:["hierarchy.lvl0","hierarchy.lvl1","hierarchy.lvl2","hierarchy.lvl3","hierarchy.lvl4","hierarchy.lvl5","hierarchy.lvl6","content","type","url"],attributesToSnippet:["hierarchy.lvl1:".concat(vr.current),"hierarchy.lvl2:".concat(vr.current),"hierarchy.lvl3:".concat(vr.current),"hierarchy.lvl4:".concat(vr.current),"hierarchy.lvl5:".concat(vr.current),"hierarchy.lvl6:".concat(vr.current),"content:".concat(vr.current)],snippetEllipsisText:"\u2026",highlightPreTag:"<mark>",highlightPostTag:"</mark>",hitsPerPage:20},x)}]).catch(function(Ue){throw Ue.name==="RetryError"&&Re("error"),Ue}).then(function(Ue){var Je=Ue.results[0],qe=Je.hits,Qe=Je.nbHits,Ze=Ey(qe,function(Ye){return lx(Ye)});return ye.context.searchSuggestions.length<Object.keys(Ze).length&&Le({searchSuggestions:Object.keys(Ze)}),Le({nbHits:Qe}),Object.values(Ze).map(function(Ye,vt){return{sourceId:"hits".concat(vt),onSelect:function(_t){var At=_t.item,jt=_t.event;dt(At),jt.shiftKey||jt.ctrlKey||jt.metaKey||T()},getItemUrl:function(_t){return _t.item.url},getItems:function(){return Object.values(Ey(Ye,function(_t){return _t.hierarchy.lvl1})).map(A).map(function(_t){return _t.map(function(At){return Rp(Rp({},At),{},{__docsearch_parent:At.type!=="lvl1"&&_t.find(function(jt){return jt.type==="lvl1"&&jt.hierarchy.lvl1===At.hierarchy.lvl1})})})}).flat()}}})}):Me?[]:[{sourceId:"recentSearches",onSelect:function(Ue){var Je=Ue.item,qe=Ue.event;dt(Je),qe.shiftKey||qe.ctrlKey||qe.metaKey||T()},getItemUrl:function(Ue){return Ue.item.url},getItems:function(){return Xe.getAll()}},{sourceId:"favoriteSearches",onSelect:function(Ue){var Je=Ue.item,qe=Ue.event;dt(Je),qe.shiftKey||qe.ctrlKey||qe.metaKey||T()},getItemUrl:function(Ue){return Ue.item.url},getItems:function(){return at.getAll()}}]}})},[u,x,Fe,T,Xe,at,dt,jr,v,de,A,Me]),nr=Zt.getEnvironmentProps,Rt=Zt.getRootProps,Ot=Zt.refresh;return function(Z){var ne=Z.getEnvironmentProps,ye=Z.panelElement,Le=Z.formElement,Re=Z.inputElement;ce.useEffect(function(){if(ye&&Le&&Re){var Ue=ne({panelElement:ye,formElement:Le,inputElement:Re}),Je=Ue.onTouchStart,qe=Ue.onTouchMove;return window.addEventListener("touchstart",Je),window.addEventListener("touchmove",qe),function(){window.removeEventListener("touchstart",Je),window.removeEventListener("touchmove",qe)}}},[ne,ye,Le,Re])}({getEnvironmentProps:nr,panelElement:pr.current,formElement:dr.current,inputElement:Ir.current}),function(Z){var ne=Z.container;ce.useEffect(function(){if(ne){var ye=ne.querySelectorAll("a[href]:not([disabled]), button:not([disabled]), input:not([disabled])"),Le=ye[0],Re=ye[ye.length-1];return ne.addEventListener("keydown",Ue),function(){ne.removeEventListener("keydown",Ue)}}function Ue(Je){Je.key==="Tab"&&(Je.shiftKey?document.activeElement===Le&&(Je.preventDefault(),Re.focus()):document.activeElement===Re&&(Je.preventDefault(),Le.focus()))}},[ne])}({container:Dt.current}),ce.useEffect(function(){return document.body.classList.add("DocSearch--active"),function(){var Z,ne;document.body.classList.remove("DocSearch--active"),(Z=(ne=window).scrollTo)===null||Z===void 0||Z.call(ne,0,se)}},[]),ce.useEffect(function(){window.matchMedia("(max-width: 750px)").matches&&(vr.current=5)},[]),ce.useEffect(function(){pr.current&&(pr.current.scrollTop=0)},[Ft.query]),ce.useEffect(function(){jr.length>0&&(Ot(),Ir.current&&Ir.current.focus())},[jr,Ot]),ce.useEffect(function(){function Z(){if(zt.current){var ne=.01*window.innerHeight;zt.current.style.setProperty("--docsearch-vh","".concat(ne,"px"))}}return Z(),window.addEventListener("resize",Z),function(){window.removeEventListener("resize",Z)}},[]),ce.createElement("div",Dc({ref:Dt},Rt({"aria-expanded":!0}),{className:["DocSearch","DocSearch-Container",Ft.status==="stalled"&&"DocSearch-Container--Stalled",Ft.status==="error"&&"DocSearch-Container--Errored"].filter(Boolean).join(" "),role:"button",tabIndex:0,onMouseDown:function(Z){Z.target===Z.currentTarget&&T()}}),ce.createElement("div",{className:"DocSearch-Modal",ref:zt},ce.createElement("header",{className:"DocSearch-SearchBar",ref:dr},ce.createElement(uA,Dc({},Zt,{state:Ft,autoFocus:jr.length===0,inputRef:Ir,isFromSelection:Boolean(jr)&&jr===Ar,translations:Te,onClose:T}))),ce.createElement("div",{className:"DocSearch-Dropdown",ref:pr},ce.createElement(aA,Dc({},Zt,{indexName:u,state:Ft,hitComponent:O,resultsFooterComponent:oe,disableUserPersonalization:Me,recentSearches:Xe,favoriteSearches:at,inputRef:Ir,translations:nt,getMissingResultsUrl:ot,onItemClick:function(Z){dt(Z),T()}}))),ce.createElement("footer",{className:"DocSearch-Footer"},ce.createElement(MI,{translations:ft}))))}function bf(){return bf=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},bf.apply(this,arguments)}function Oy(t,i){return function(s){if(Array.isArray(s))return s}(t)||function(s,u){var m=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(m!=null){var v,x,l=[],T=!0,C=!1;try{for(m=m.call(s);!(T=(v=m.next()).done)&&(l.push(v.value),!u||l.length!==u);T=!0);}catch(A){C=!0,x=A}finally{try{T||m.return==null||m.return()}finally{if(C)throw x}}return l}}(t,i)||function(s,u){if(!!s){if(typeof s=="string")return Ly(s,u);var m=Object.prototype.toString.call(s).slice(8,-1);if(m==="Object"&&s.constructor&&(m=s.constructor.name),m==="Map"||m==="Set")return Array.from(s);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Ly(s,u)}}(t,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ly(t,i){(i==null||i>t.length)&&(i=t.length);for(var s=0,u=new Array(i);s<i;s++)u[s]=t[s];return u}function zA(t){var i,s,u=ce.useRef(null),m=Oy(ce.useState(!1),2),v=m[0],x=m[1],l=Oy(ce.useState((t==null?void 0:t.initialQuery)||void 0),2),T=l[0],C=l[1],A=ce.useCallback(function(){x(!0)},[x]),F=ce.useCallback(function(){x(!1)},[x]);return function(O){var K=O.isOpen,oe=O.onOpen,de=O.onClose,te=O.onInput,se=O.searchButtonRef;ce.useEffect(function(){function me(_e){(_e.keyCode===27&&K||_e.key==="k"&&(_e.metaKey||_e.ctrlKey)||!function(Ae){var Me=Ae.target,He=Me.tagName;return Me.isContentEditable||He==="INPUT"||He==="SELECT"||He==="TEXTAREA"}(_e)&&_e.key==="/"&&!K)&&(_e.preventDefault(),K?de():document.body.classList.contains("DocSearch--active")||document.body.classList.contains("DocSearch--active")||oe()),se&&se.current===document.activeElement&&te&&/[a-zA-Z0-9]/.test(String.fromCharCode(_e.keyCode))&&te(_e)}return window.addEventListener("keydown",me),function(){window.removeEventListener("keydown",me)}},[K,oe,de,te,se])}({isOpen:v,onOpen:A,onClose:F,onInput:ce.useCallback(function(O){x(!0),C(O.key)},[x,C]),searchButtonRef:u}),ce.createElement(ce.Fragment,null,ce.createElement(XT,{ref:u,translations:t==null||(i=t.translations)===null||i===void 0?void 0:i.button,onClick:A}),v&&ex(ce.createElement(DA,bf({},t,{initialScrollY:window.scrollY,initialQuery:T,translations:t==null||(s=t.translations)===null||s===void 0?void 0:s.modal,onClose:F})),document.body))}function MA(t){rx(ce.createElement(zA,cf({},t,{transformSearchClient:function(i){return i.addAlgoliaAgent("docsearch.js","3.0.0"),t.transformSearchClient?t.transformSearchClient(i):i}})),function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return typeof i=="string"?s.document.querySelector(i):i}(t.container,t.environment))}const OA=t=>t.button===1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey,LA=()=>{const t=id(),i=d0();return{transformItems:s=>s.map(u=>qo(fn({},u),{url:gE(u.url,i.value.base)})),hitComponent:({hit:s,children:u})=>({type:"a",ref:void 0,constructor:void 0,key:void 0,props:{href:s.url,onClick:m=>{OA(m)||(m.preventDefault(),t.push(s.url))},children:u},__v:null}),navigator:{navigate:({itemUrl:s})=>{t.push(s)}},transformSearchClient:s=>{const u=Xf(s.search,500);return qo(fn({},s),{search:async(...m)=>u(...m)})}}};const RA=Jn({name:"Docsearch",props:{containerId:{type:String,required:!1,default:"docsearch-container"},options:{type:Object,required:!0}},setup(t){const i=Wf(),s=h0(),u=LA(),m=Fr(()=>{var l;return fn(fn({},t.options),(l=t.options.locales)==null?void 0:l[i.value])}),v=[],x=()=>{var T,C;const l=(C=(T=m.value.searchParameters)==null?void 0:T.facetFilters)!=null?C:[];v.splice(0,v.length,`lang:${s.value}`,...Ut(l)?l:[l]),MA(qo(fn(fn({},u),m.value),{container:`#${t.containerId}`,searchParameters:qo(fn({},m.value.searchParameters),{facetFilters:v})}))};return Zi(()=>{x(),Ni([i,m],([l,T],[C,A])=>{l!==C&&JSON.stringify(T)!==JSON.stringify(A)&&x()}),Ni(s,(l,T)=>{if(l!==T){const C=v.findIndex(A=>A===`lang:${T}`);C>-1&&v.splice(C,1,`lang:${l}`)}})}),()=>cr("div",{id:t.containerId})}}),BA={appId:"6KECEJUGJH",apiKey:"9a5c8aa7cb2d5d32ebd66790e1a84789",indexName:"sustech-online-keys",locales:{"/":{placeholder:"\u641C\u7D22\u624B\u518C",translations:{button:{buttonText:"\u641C\u7D22\u624B\u518C",buttonAriaLabel:"\u641C\u7D22\u624B\u518C"},modal:{searchBox:{resetButtonTitle:"\u6E05\u9664\u67E5\u8BE2\u6761\u4EF6",resetButtonAriaLabel:"\u6E05\u9664\u67E5\u8BE2\u6761\u4EF6",cancelButtonText:"\u53D6\u6D88",cancelButtonAriaLabel:"\u53D6\u6D88"},startScreen:{recentSearchesTitle:"\u641C\u7D22\u5386\u53F2",noRecentSearchesText:"\u6CA1\u6709\u641C\u7D22\u5386\u53F2",saveRecentSearchButtonTitle:"\u4FDD\u5B58\u81F3\u641C\u7D22\u5386\u53F2",removeRecentSearchButtonTitle:"\u4ECE\u641C\u7D22\u5386\u53F2\u4E2D\u79FB\u9664",favoriteSearchesTitle:"\u6536\u85CF",removeFavoriteSearchButtonTitle:"\u4ECE\u6536\u85CF\u4E2D\u79FB\u9664"},errorScreen:{titleText:"\u65E0\u6CD5\u83B7\u53D6\u7ED3\u679C",helpText:"\u4F60\u53EF\u80FD\u9700\u8981\u68C0\u67E5\u4F60\u7684\u7F51\u7EDC\u8FDE\u63A5"},footer:{selectText:"\u9009\u62E9",navigateText:"\u5207\u6362",closeText:"\u5173\u95ED",searchByText:"\u641C\u7D22\u63D0\u4F9B\u8005"},noResultsScreen:{noResultsText:"\u65E0\u6CD5\u627E\u5230\u76F8\u5173\u7ED3\u679C",suggestedQueryText:"\u4F60\u53EF\u4EE5\u5C1D\u8BD5\u67E5\u8BE2",reportMissingResultsText:"\u4F60\u8BA4\u4E3A\u8BE5\u67E5\u8BE2\u5E94\u8BE5\u6709\u7ED3\u679C\uFF1F",reportMissingResultsLinkText:"\u70B9\u51FB\u53CD\u9988"}}}}}};var FA=yi({enhance({app:t}){t.component("Docsearch",()=>cr(RA,{options:BA}))}});const NA=t=>{if(window.dataLayer&&window.gtag)return;const i=document.createElement("script");i.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,i.async=!0,document.head.appendChild(i),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",t)},jA="G-1BQBXDGY3R";var VA=yi({enhance(){NA(jA)}});function UA(t){return{all:t=t||new Map,on:function(i,s){var u=t.get(i);u?u.push(s):t.set(i,[s])},off:function(i,s){var u=t.get(i);u&&(s?u.splice(u.indexOf(s)>>>0,1):t.set(i,[]))},emit:function(i,s){var u=t.get(i);u&&u.slice().map(function(m){m(s)}),(u=t.get("*"))&&u.slice().map(function(m){m(i,s)})}}}const vx=Symbol("pwaEvent"),$A=()=>{const t=gn(vx);if(!t)throw new Error("usePwaEvent() is called without provider.");return t},qA=t=>{const i=t.waiting;if(!i)return;const s=new MessageChannel;i.postMessage({type:"SKIP_WAITING"},[s.port2])},HA="service-worker.js";var GA=yi({setup(){const t=(...s)=>console.log("[@vuepress/plugin-pwa]",...s),i=UA();rs(vx,i),Zi(async()=>{const{register:s}=await Ce(()=>import("./index.0e8935cb.js"),[]);s(f0(HA),{ready(u){t("Service worker is active."),i.emit("ready",u)},registered(u){t("Service worker has been registered."),i.emit("registered",u)},cached(u){t("Content has been cached for offline use."),i.emit("cached",u)},updatefound(u){t("New content is downloading."),i.emit("updatefound",u)},updated(u){t("New content is available, please refresh."),i.emit("updated",u)},offline(){t("No internet connection found. App is running in offline mode."),i.emit("offline")},error(u){t("Error during service worker registration:",u),i.emit("error",u)}})})}});const ZA=Jn({name:"PwaPopup",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(t){const i=$A(),s=Wf(),u=Fr(()=>{var l;return(l=t.locales[s.value])!=null?l:{message:"New content is available.",buttonText:"Refresh"}}),m=En(!1),v=En(null),x=()=>{m.value=!1,v.value&&(qA(v.value),location.reload(!0))};return i.on("updated",l=>{l&&(v.value=l,m.value=!0)}),()=>cr(td,{name:"pwa-popup"},()=>m.value?cr("div",{class:"pwa-popup"},[u.value.message,cr("br"),cr("button",{onClick:x},u.value.buttonText)]):null)}}),WA={"/":{message:"\u53D1\u73B0\u65B0\u5185\u5BB9\u53EF\u7528",buttonText:"\u5237\u65B0"}};var KA=yi({rootComponents:[Jn(()=>cr(ZA,{locales:WA}))]});/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */var Bs=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(t[u]=s[u])}return t},hh=function(i){return i.tagName==="IMG"},XA=function(i){return NodeList.prototype.isPrototypeOf(i)},wh=function(i){return i&&i.nodeType===1},Ry=function(i){var s=i.currentSrc||i.src;return s.substr(-4).toLowerCase()===".svg"},By=function(i){try{return Array.isArray(i)?i.filter(hh):XA(i)?[].slice.call(i).filter(hh):wh(i)?[i].filter(hh):typeof i=="string"?[].slice.call(document.querySelectorAll(i)).filter(hh):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},JA=function(i){var s=document.createElement("div");return s.classList.add("medium-zoom-overlay"),s.style.background=i,s},YA=function(i){var s=i.getBoundingClientRect(),u=s.top,m=s.left,v=s.width,x=s.height,l=i.cloneNode(),T=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,C=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return l.removeAttribute("id"),l.style.position="absolute",l.style.top=u+T+"px",l.style.left=m+C+"px",l.style.width=v+"px",l.style.height=x+"px",l.style.transform="",l},Ba=function(i,s){var u=Bs({bubbles:!1,cancelable:!1,detail:void 0},s);if(typeof window.CustomEvent=="function")return new CustomEvent(i,u);var m=document.createEvent("CustomEvent");return m.initCustomEvent(i,u.bubbles,u.cancelable,u.detail),m},QA=function t(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=window.Promise||function(Te){function nt(){}Te(nt,nt)},m=function(Te){var nt=Te.target;if(nt===rt){oe();return}_e.indexOf(nt)!==-1&&de({target:nt})},v=function(){if(!(Me||!Se.original)){var Te=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(He-Te)>De.scrollOffset&&setTimeout(oe,150)}},x=function(Te){var nt=Te.key||Te.keyCode;(nt==="Escape"||nt==="Esc"||nt===27)&&oe()},l=function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nt=Te;if(Te.background&&(rt.style.background=Te.background),Te.container&&Te.container instanceof Object&&(nt.container=Bs({},De.container,Te.container)),Te.template){var St=wh(Te.template)?Te.template:document.querySelector(Te.template);nt.template=St}return De=Bs({},De,nt),_e.forEach(function(Ft){Ft.dispatchEvent(Ba("medium-zoom:update",{detail:{zoom:ot}}))}),ot},T=function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t(Bs({},De,Te))},C=function(){for(var Te=arguments.length,nt=Array(Te),St=0;St<Te;St++)nt[St]=arguments[St];var Ft=nt.reduce(function(Ve,Dt){return[].concat(Ve,By(Dt))},[]);return Ft.filter(function(Ve){return _e.indexOf(Ve)===-1}).forEach(function(Ve){_e.push(Ve),Ve.classList.add("medium-zoom-image")}),Ae.forEach(function(Ve){var Dt=Ve.type,zt=Ve.listener,dr=Ve.options;Ft.forEach(function(pr){pr.addEventListener(Dt,zt,dr)})}),ot},A=function(){for(var Te=arguments.length,nt=Array(Te),St=0;St<Te;St++)nt[St]=arguments[St];Se.zoomed&&oe();var Ft=nt.length>0?nt.reduce(function(Ve,Dt){return[].concat(Ve,By(Dt))},[]):_e;return Ft.forEach(function(Ve){Ve.classList.remove("medium-zoom-image"),Ve.dispatchEvent(Ba("medium-zoom:detach",{detail:{zoom:ot}}))}),_e=_e.filter(function(Ve){return Ft.indexOf(Ve)===-1}),ot},F=function(Te,nt){var St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _e.forEach(function(Ft){Ft.addEventListener("medium-zoom:"+Te,nt,St)}),Ae.push({type:"medium-zoom:"+Te,listener:nt,options:St}),ot},O=function(Te,nt){var St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return _e.forEach(function(Ft){Ft.removeEventListener("medium-zoom:"+Te,nt,St)}),Ae=Ae.filter(function(Ft){return!(Ft.type==="medium-zoom:"+Te&&Ft.listener.toString()===nt.toString())}),ot},K=function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nt=Te.target,St=function(){var Ve={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},Dt=void 0,zt=void 0;if(De.container)if(De.container instanceof Object)Ve=Bs({},Ve,De.container),Dt=Ve.width-Ve.left-Ve.right-De.margin*2,zt=Ve.height-Ve.top-Ve.bottom-De.margin*2;else{var dr=wh(De.container)?De.container:document.querySelector(De.container),pr=dr.getBoundingClientRect(),Ir=pr.width,vr=pr.height,Ar=pr.left,jr=pr.top;Ve=Bs({},Ve,{width:Ir,height:vr,left:Ar,top:jr})}Dt=Dt||Ve.width-De.margin*2,zt=zt||Ve.height-De.margin*2;var Fe=Se.zoomedHd||Se.original,at=Ry(Fe)?Dt:Fe.naturalWidth||Dt,Xe=Ry(Fe)?zt:Fe.naturalHeight||zt,dt=Fe.getBoundingClientRect(),Zt=dt.top,nr=dt.left,Rt=dt.width,Ot=dt.height,Z=Math.min(at,Dt)/Rt,ne=Math.min(Xe,zt)/Ot,ye=Math.min(Z,ne),Le=(-nr+(Dt-Rt)/2+De.margin+Ve.left)/ye,Re=(-Zt+(zt-Ot)/2+De.margin+Ve.top)/ye,Ue="scale("+ye+") translate3d("+Le+"px, "+Re+"px, 0)";Se.zoomed.style.transform=Ue,Se.zoomedHd&&(Se.zoomedHd.style.transform=Ue)};return new u(function(Ft){if(nt&&_e.indexOf(nt)===-1){Ft(ot);return}var Ve=function Ir(){Me=!1,Se.zoomed.removeEventListener("transitionend",Ir),Se.original.dispatchEvent(Ba("medium-zoom:opened",{detail:{zoom:ot}})),Ft(ot)};if(Se.zoomed){Ft(ot);return}if(nt)Se.original=nt;else if(_e.length>0){var Dt=_e;Se.original=Dt[0]}else{Ft(ot);return}if(Se.original.dispatchEvent(Ba("medium-zoom:open",{detail:{zoom:ot}})),He=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,Me=!0,Se.zoomed=YA(Se.original),document.body.appendChild(rt),De.template){var zt=wh(De.template)?De.template:document.querySelector(De.template);Se.template=document.createElement("div"),Se.template.appendChild(zt.content.cloneNode(!0)),document.body.appendChild(Se.template)}if(document.body.appendChild(Se.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),Se.original.classList.add("medium-zoom-image--hidden"),Se.zoomed.classList.add("medium-zoom-image--opened"),Se.zoomed.addEventListener("click",oe),Se.zoomed.addEventListener("transitionend",Ve),Se.original.getAttribute("data-zoom-src")){Se.zoomedHd=Se.zoomed.cloneNode(),Se.zoomedHd.removeAttribute("srcset"),Se.zoomedHd.removeAttribute("sizes"),Se.zoomedHd.src=Se.zoomed.getAttribute("data-zoom-src"),Se.zoomedHd.onerror=function(){clearInterval(dr),console.warn("Unable to reach the zoom image target "+Se.zoomedHd.src),Se.zoomedHd=null,St()};var dr=setInterval(function(){Se.zoomedHd.complete&&(clearInterval(dr),Se.zoomedHd.classList.add("medium-zoom-image--opened"),Se.zoomedHd.addEventListener("click",oe),document.body.appendChild(Se.zoomedHd),St())},10)}else if(Se.original.hasAttribute("srcset")){Se.zoomedHd=Se.zoomed.cloneNode(),Se.zoomedHd.removeAttribute("sizes"),Se.zoomedHd.removeAttribute("loading");var pr=Se.zoomedHd.addEventListener("load",function(){Se.zoomedHd.removeEventListener("load",pr),Se.zoomedHd.classList.add("medium-zoom-image--opened"),Se.zoomedHd.addEventListener("click",oe),document.body.appendChild(Se.zoomedHd),St()})}else St()})},oe=function(){return new u(function(Te){if(Me||!Se.original){Te(ot);return}var nt=function St(){Se.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(Se.zoomed),Se.zoomedHd&&document.body.removeChild(Se.zoomedHd),document.body.removeChild(rt),Se.zoomed.classList.remove("medium-zoom-image--opened"),Se.template&&document.body.removeChild(Se.template),Me=!1,Se.zoomed.removeEventListener("transitionend",St),Se.original.dispatchEvent(Ba("medium-zoom:closed",{detail:{zoom:ot}})),Se.original=null,Se.zoomed=null,Se.zoomedHd=null,Se.template=null,Te(ot)};Me=!0,document.body.classList.remove("medium-zoom--opened"),Se.zoomed.style.transform="",Se.zoomedHd&&(Se.zoomedHd.style.transform=""),Se.template&&(Se.template.style.transition="opacity 150ms",Se.template.style.opacity=0),Se.original.dispatchEvent(Ba("medium-zoom:close",{detail:{zoom:ot}})),Se.zoomed.addEventListener("transitionend",nt)})},de=function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},nt=Te.target;return Se.original?oe():K({target:nt})},te=function(){return De},se=function(){return _e},me=function(){return Se.original},_e=[],Ae=[],Me=!1,He=0,De=s,Se={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(i)==="[object Object]"?De=i:(i||typeof i=="string")&&C(i),De=Bs({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},De);var rt=JA(De.background);document.addEventListener("click",m),document.addEventListener("keyup",x),document.addEventListener("scroll",v),window.addEventListener("resize",oe);var ot={open:K,close:oe,toggle:de,update:l,clone:T,attach:C,detach:A,on:F,off:O,getOptions:te,getImages:se,getZoomedImage:me};return ot};function eP(t,i){i===void 0&&(i={});var s=i.insertAt;if(!(!t||typeof document=="undefined")){var u=document.head||document.getElementsByTagName("head")[0],m=document.createElement("style");m.type="text/css",s==="top"&&u.firstChild?u.insertBefore(m,u.firstChild):u.appendChild(m),m.styleSheet?m.styleSheet.cssText=t:m.appendChild(document.createTextNode(t))}}var tP=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";eP(tP);var rP=QA;const nP=Symbol("mediumZoom");const iP=":not(a) > img",oP={},sP=500;var aP=yi({enhance({app:t,router:i}){const s=rP(oP);s.refresh=(u=iP)=>{s.detach(),s.attach(u)},t.provide(nP,s),i.afterEach(()=>{setTimeout(()=>s.refresh(),sP)})}});const yr={settings:{minimum:.08,easing:"ease",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,barSelector:'[role="bar"]',parent:"body",template:'<div class="bar" role="bar"></div>'},status:null,set:t=>{const i=yr.isStarted();t=Bp(t,yr.settings.minimum,1),yr.status=t===1?null:t;const s=yr.render(!i),u=s.querySelector(yr.settings.barSelector),m=yr.settings.speed,v=yr.settings.easing;return s.offsetWidth,lP(x=>{dh(u,{transform:"translate3d("+Fy(t)+"%,0,0)",transition:"all "+m+"ms "+v}),t===1?(dh(s,{transition:"none",opacity:"1"}),s.offsetWidth,setTimeout(function(){dh(s,{transition:"all "+m+"ms linear",opacity:"0"}),setTimeout(function(){yr.remove(),x()},m)},m)):setTimeout(()=>x(),m)}),yr},isStarted:()=>typeof yr.status=="number",start:()=>{yr.status||yr.set(0);const t=()=>{setTimeout(()=>{!yr.status||(yr.trickle(),t())},yr.settings.trickleSpeed)};return yr.settings.trickle&&t(),yr},done:t=>!t&&!yr.status?yr:yr.inc(.3+.5*Math.random()).set(1),inc:t=>{let i=yr.status;return i?(typeof t!="number"&&(t=(1-i)*Bp(Math.random()*i,.1,.95)),i=Bp(i+t,0,.994),yr.set(i)):yr.start()},trickle:()=>yr.inc(Math.random()*yr.settings.trickleRate),render:t=>{if(yr.isRendered())return document.getElementById("nprogress");Ny(document.documentElement,"nprogress-busy");const i=document.createElement("div");i.id="nprogress",i.innerHTML=yr.settings.template;const s=i.querySelector(yr.settings.barSelector),u=t?"-100":Fy(yr.status||0),m=document.querySelector(yr.settings.parent);return dh(s,{transition:"all 0 linear",transform:"translate3d("+u+"%,0,0)"}),m!==document.body&&Ny(m,"nprogress-custom-parent"),m==null||m.appendChild(i),i},remove:()=>{jy(document.documentElement,"nprogress-busy"),jy(document.querySelector(yr.settings.parent),"nprogress-custom-parent");const t=document.getElementById("nprogress");t&&cP(t)},isRendered:()=>!!document.getElementById("nprogress")},Bp=(t,i,s)=>t<i?i:t>s?s:t,Fy=t=>(-1+t)*100,lP=function(){const t=[];function i(){const s=t.shift();s&&s(i)}return function(s){t.push(s),t.length===1&&i()}}(),dh=function(){const t=["Webkit","O","Moz","ms"],i={};function s(x){return x.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(l,T){return T.toUpperCase()})}function u(x){const l=document.body.style;if(x in l)return x;let T=t.length;const C=x.charAt(0).toUpperCase()+x.slice(1);let A;for(;T--;)if(A=t[T]+C,A in l)return A;return x}function m(x){return x=s(x),i[x]||(i[x]=u(x))}function v(x,l,T){l=m(l),x.style[l]=T}return function(x,l){for(const T in l){const C=l[T];C!==void 0&&Object.prototype.hasOwnProperty.call(l,T)&&v(x,T,C)}}}(),xx=(t,i)=>(typeof t=="string"?t:nm(t)).indexOf(" "+i+" ")>=0,Ny=(t,i)=>{const s=nm(t),u=s+i;xx(s,i)||(t.className=u.substring(1))},jy=(t,i)=>{const s=nm(t);if(!xx(t,i))return;const u=s.replace(" "+i+" "," ");t.className=u.substring(1,u.length-1)},nm=t=>(" "+(t.className||"")+" ").replace(/\s+/gi," "),cP=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)};const uP=()=>{Zi(()=>{const t=id(),i=new Set;i.add(t.currentRoute.value.path),t.beforeEach(s=>{i.has(s.path)||yr.start()}),t.afterEach(s=>{i.add(s.path),yr.done()})})};var hP=yi({setup(){uP()}});const Vy=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,dP=()=>window.scrollTo({top:0,behavior:"smooth"});const pP=Jn({name:"BackToTop",setup(){const t=En(0),i=Fr(()=>t.value>300),s=Xf(()=>{t.value=Vy()},100);Zi(()=>{t.value=Vy(),window.addEventListener("scroll",()=>s())});const u=cr("div",{class:"back-to-top",onClick:dP});return()=>cr(td,{name:"back-to-top"},()=>i.value?u:null)}});var fP=yi({rootComponents:[pP]});const mP=(t,i,s)=>{const u=`#${t.slug}`,m=[i.linkClass];return i.linkActiveClass&&s.hash===u&&m.push(i.linkActiveClass),i.linkChildrenActiveClass&&t.children.some(v=>`#${v.slug}`===s.hash)&&m.push(i.linkChildrenActiveClass),i.linkTag==="RouterLink"?cr(I0,{to:u,class:m,ariaLabel:t.title},()=>t.title):cr("a",{href:u,class:m,ariaLabel:t.title},t.title)},bx=(t,i,s)=>t.length===0?[]:[cr("ul",{class:i.listClass},t.map(u=>cr("li",{class:i.itemClass},[mP(u,i,s),bx(u.children,i,s)])))],gP=Jn({name:"Toc",props:{headers:{type:Array,required:!1,default:null},options:{type:Object,required:!1,default:()=>({})}},setup(t){const{headers:i,options:s}=Iw(t),u=od(),m=al(),v=Fr(()=>{var T;const l=i.value||m.value.headers;return((T=l[0])==null?void 0:T.level)===1?l[0].children:l}),x=Fr(()=>fn({containerTag:"nav",containerClass:"vuepress-toc",listClass:"vuepress-toc-list",itemClass:"vuepress-toc-item",linkTag:"RouterLink",linkClass:"vuepress-toc-link",linkActiveClass:"active",linkChildrenActiveClass:"active"},s.value));return()=>{const l=bx(v.value,x.value,u);return x.value.containerTag?cr(x.value.containerTag,{class:x.value.containerClass},l):l}}}),_P={};var yP=yi({enhance({app:t}){t.component("Toc",i=>cr(gP,{headers:i.headers,options:fn(fn({},_P),i.options)}))}}),vP=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},im={exports:{}},wx=function(i,s){return function(){for(var m=new Array(arguments.length),v=0;v<m.length;v++)m[v]=arguments[v];return i.apply(s,m)}},xP=wx,ss=Object.prototype.toString;function om(t){return Array.isArray(t)}function wf(t){return typeof t=="undefined"}function bP(t){return t!==null&&!wf(t)&&t.constructor!==null&&!wf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Ex(t){return ss.call(t)==="[object ArrayBuffer]"}function wP(t){return ss.call(t)==="[object FormData]"}function EP(t){var i;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?i=ArrayBuffer.isView(t):i=t&&t.buffer&&Ex(t.buffer),i}function SP(t){return typeof t=="string"}function TP(t){return typeof t=="number"}function Sx(t){return t!==null&&typeof t=="object"}function Eh(t){if(ss.call(t)!=="[object Object]")return!1;var i=Object.getPrototypeOf(t);return i===null||i===Object.prototype}function IP(t){return ss.call(t)==="[object Date]"}function AP(t){return ss.call(t)==="[object File]"}function PP(t){return ss.call(t)==="[object Blob]"}function Tx(t){return ss.call(t)==="[object Function]"}function CP(t){return Sx(t)&&Tx(t.pipe)}function kP(t){return ss.call(t)==="[object URLSearchParams]"}function DP(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function zP(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function sm(t,i){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),om(t))for(var s=0,u=t.length;s<u;s++)i.call(null,t[s],s,t);else for(var m in t)Object.prototype.hasOwnProperty.call(t,m)&&i.call(null,t[m],m,t)}function Ef(){var t={};function i(m,v){Eh(t[v])&&Eh(m)?t[v]=Ef(t[v],m):Eh(m)?t[v]=Ef({},m):om(m)?t[v]=m.slice():t[v]=m}for(var s=0,u=arguments.length;s<u;s++)sm(arguments[s],i);return t}function MP(t,i,s){return sm(i,function(m,v){s&&typeof m=="function"?t[v]=xP(m,s):t[v]=m}),t}function OP(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var ii={isArray:om,isArrayBuffer:Ex,isBuffer:bP,isFormData:wP,isArrayBufferView:EP,isString:SP,isNumber:TP,isObject:Sx,isPlainObject:Eh,isUndefined:wf,isDate:IP,isFile:AP,isBlob:PP,isFunction:Tx,isStream:CP,isURLSearchParams:kP,isStandardBrowserEnv:zP,forEach:sm,merge:Ef,extend:MP,trim:DP,stripBOM:OP},Fa=ii;function Uy(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ix=function(i,s,u){if(!s)return i;var m;if(u)m=u(s);else if(Fa.isURLSearchParams(s))m=s.toString();else{var v=[];Fa.forEach(s,function(T,C){T===null||typeof T=="undefined"||(Fa.isArray(T)?C=C+"[]":T=[T],Fa.forEach(T,function(F){Fa.isDate(F)?F=F.toISOString():Fa.isObject(F)&&(F=JSON.stringify(F)),v.push(Uy(C)+"="+Uy(F))}))}),m=v.join("&")}if(m){var x=i.indexOf("#");x!==-1&&(i=i.slice(0,x)),i+=(i.indexOf("?")===-1?"?":"&")+m}return i},LP=ii;function ld(){this.handlers=[]}ld.prototype.use=function(i,s,u){return this.handlers.push({fulfilled:i,rejected:s,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1};ld.prototype.eject=function(i){this.handlers[i]&&(this.handlers[i]=null)};ld.prototype.forEach=function(i){LP.forEach(this.handlers,function(u){u!==null&&i(u)})};var RP=ld,BP=ii,FP=function(i,s){BP.forEach(i,function(m,v){v!==s&&v.toUpperCase()===s.toUpperCase()&&(i[s]=m,delete i[v])})},Ax=function(i,s,u,m,v){return i.config=s,u&&(i.code=u),i.request=m,i.response=v,i.isAxiosError=!0,i.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},i},Px={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},NP=Ax,Cx=function(i,s,u,m,v){var x=new Error(i);return NP(x,s,u,m,v)},jP=Cx,VP=function(i,s,u){var m=u.config.validateStatus;!u.status||!m||m(u.status)?i(u):s(jP("Request failed with status code "+u.status,u.config,null,u.request,u))},ph=ii,UP=ph.isStandardBrowserEnv()?function(){return{write:function(s,u,m,v,x,l){var T=[];T.push(s+"="+encodeURIComponent(u)),ph.isNumber(m)&&T.push("expires="+new Date(m).toGMTString()),ph.isString(v)&&T.push("path="+v),ph.isString(x)&&T.push("domain="+x),l===!0&&T.push("secure"),document.cookie=T.join("; ")},read:function(s){var u=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),$P=function(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)},qP=function(i,s){return s?i.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):i},HP=$P,GP=qP,ZP=function(i,s){return i&&!HP(s)?GP(i,s):s},Fp=ii,WP=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],KP=function(i){var s={},u,m,v;return i&&Fp.forEach(i.split(`
`),function(l){if(v=l.indexOf(":"),u=Fp.trim(l.substr(0,v)).toLowerCase(),m=Fp.trim(l.substr(v+1)),u){if(s[u]&&WP.indexOf(u)>=0)return;u==="set-cookie"?s[u]=(s[u]?s[u]:[]).concat([m]):s[u]=s[u]?s[u]+", "+m:m}}),s},$y=ii,XP=$y.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),u;function m(v){var x=v;return i&&(s.setAttribute("href",x),x=s.href),s.setAttribute("href",x),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return u=m(window.location.href),function(x){var l=$y.isString(x)?m(x):x;return l.protocol===u.protocol&&l.host===u.host}}():function(){return function(){return!0}}();function am(t){this.message=t}am.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};am.prototype.__CANCEL__=!0;var cd=am,fh=ii,JP=VP,YP=UP,QP=Ix,eC=ZP,tC=KP,rC=XP,Np=Cx,nC=Px,iC=cd,qy=function(i){return new Promise(function(u,m){var v=i.data,x=i.headers,l=i.responseType,T;function C(){i.cancelToken&&i.cancelToken.unsubscribe(T),i.signal&&i.signal.removeEventListener("abort",T)}fh.isFormData(v)&&delete x["Content-Type"];var A=new XMLHttpRequest;if(i.auth){var F=i.auth.username||"",O=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";x.Authorization="Basic "+btoa(F+":"+O)}var K=eC(i.baseURL,i.url);A.open(i.method.toUpperCase(),QP(K,i.params,i.paramsSerializer),!0),A.timeout=i.timeout;function oe(){if(!!A){var te="getAllResponseHeaders"in A?tC(A.getAllResponseHeaders()):null,se=!l||l==="text"||l==="json"?A.responseText:A.response,me={data:se,status:A.status,statusText:A.statusText,headers:te,config:i,request:A};JP(function(Ae){u(Ae),C()},function(Ae){m(Ae),C()},me),A=null}}if("onloadend"in A?A.onloadend=oe:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(oe)},A.onabort=function(){!A||(m(Np("Request aborted",i,"ECONNABORTED",A)),A=null)},A.onerror=function(){m(Np("Network Error",i,null,A)),A=null},A.ontimeout=function(){var se=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded",me=i.transitional||nC;i.timeoutErrorMessage&&(se=i.timeoutErrorMessage),m(Np(se,i,me.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",A)),A=null},fh.isStandardBrowserEnv()){var de=(i.withCredentials||rC(K))&&i.xsrfCookieName?YP.read(i.xsrfCookieName):void 0;de&&(x[i.xsrfHeaderName]=de)}"setRequestHeader"in A&&fh.forEach(x,function(se,me){typeof v=="undefined"&&me.toLowerCase()==="content-type"?delete x[me]:A.setRequestHeader(me,se)}),fh.isUndefined(i.withCredentials)||(A.withCredentials=!!i.withCredentials),l&&l!=="json"&&(A.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&A.addEventListener("progress",i.onDownloadProgress),typeof i.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",i.onUploadProgress),(i.cancelToken||i.signal)&&(T=function(te){!A||(m(!te||te&&te.type?new iC("canceled"):te),A.abort(),A=null)},i.cancelToken&&i.cancelToken.subscribe(T),i.signal&&(i.signal.aborted?T():i.signal.addEventListener("abort",T))),v||(v=null),A.send(v)})},kn=ii,Hy=FP,oC=Ax,sC=Px,aC={"Content-Type":"application/x-www-form-urlencoded"};function Gy(t,i){!kn.isUndefined(t)&&kn.isUndefined(t["Content-Type"])&&(t["Content-Type"]=i)}function lC(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=qy),t}function cC(t,i,s){if(kn.isString(t))try{return(i||JSON.parse)(t),kn.trim(t)}catch(u){if(u.name!=="SyntaxError")throw u}return(s||JSON.stringify)(t)}var ud={transitional:sC,adapter:lC(),transformRequest:[function(i,s){return Hy(s,"Accept"),Hy(s,"Content-Type"),kn.isFormData(i)||kn.isArrayBuffer(i)||kn.isBuffer(i)||kn.isStream(i)||kn.isFile(i)||kn.isBlob(i)?i:kn.isArrayBufferView(i)?i.buffer:kn.isURLSearchParams(i)?(Gy(s,"application/x-www-form-urlencoded;charset=utf-8"),i.toString()):kn.isObject(i)||s&&s["Content-Type"]==="application/json"?(Gy(s,"application/json"),cC(i)):i}],transformResponse:[function(i){var s=this.transitional||ud.transitional,u=s&&s.silentJSONParsing,m=s&&s.forcedJSONParsing,v=!u&&this.responseType==="json";if(v||m&&kn.isString(i)&&i.length)try{return JSON.parse(i)}catch(x){if(v)throw x.name==="SyntaxError"?oC(x,this,"E_JSON_PARSE"):x}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};kn.forEach(["delete","get","head"],function(i){ud.headers[i]={}});kn.forEach(["post","put","patch"],function(i){ud.headers[i]=kn.merge(aC)});var lm=ud,uC=ii,hC=lm,dC=function(i,s,u){var m=this||hC;return uC.forEach(u,function(x){i=x.call(m,i,s)}),i},kx=function(i){return!!(i&&i.__CANCEL__)},Zy=ii,jp=dC,pC=kx,fC=lm,mC=cd;function Vp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new mC("canceled")}var gC=function(i){Vp(i),i.headers=i.headers||{},i.data=jp.call(i,i.data,i.headers,i.transformRequest),i.headers=Zy.merge(i.headers.common||{},i.headers[i.method]||{},i.headers),Zy.forEach(["delete","get","head","post","put","patch","common"],function(m){delete i.headers[m]});var s=i.adapter||fC.adapter;return s(i).then(function(m){return Vp(i),m.data=jp.call(i,m.data,m.headers,i.transformResponse),m},function(m){return pC(m)||(Vp(i),m&&m.response&&(m.response.data=jp.call(i,m.response.data,m.response.headers,i.transformResponse))),Promise.reject(m)})},di=ii,Dx=function(i,s){s=s||{};var u={};function m(A,F){return di.isPlainObject(A)&&di.isPlainObject(F)?di.merge(A,F):di.isPlainObject(F)?di.merge({},F):di.isArray(F)?F.slice():F}function v(A){if(di.isUndefined(s[A])){if(!di.isUndefined(i[A]))return m(void 0,i[A])}else return m(i[A],s[A])}function x(A){if(!di.isUndefined(s[A]))return m(void 0,s[A])}function l(A){if(di.isUndefined(s[A])){if(!di.isUndefined(i[A]))return m(void 0,i[A])}else return m(void 0,s[A])}function T(A){if(A in s)return m(i[A],s[A]);if(A in i)return m(void 0,i[A])}var C={url:x,method:x,data:x,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:T};return di.forEach(Object.keys(i).concat(Object.keys(s)),function(F){var O=C[F]||v,K=O(F);di.isUndefined(K)&&O!==T||(u[F]=K)}),u},zx={version:"0.26.1"},_C=zx.version,cm={};["object","boolean","number","function","string","symbol"].forEach(function(t,i){cm[t]=function(u){return typeof u===t||"a"+(i<1?"n ":" ")+t}});var Wy={};cm.transitional=function(i,s,u){function m(v,x){return"[Axios v"+_C+"] Transitional option '"+v+"'"+x+(u?". "+u:"")}return function(v,x,l){if(i===!1)throw new Error(m(x," has been removed"+(s?" in "+s:"")));return s&&!Wy[x]&&(Wy[x]=!0,console.warn(m(x," has been deprecated since v"+s+" and will be removed in the near future"))),i?i(v,x,l):!0}};function yC(t,i,s){if(typeof t!="object")throw new TypeError("options must be an object");for(var u=Object.keys(t),m=u.length;m-- >0;){var v=u[m],x=i[v];if(x){var l=t[v],T=l===void 0||x(l,v,t);if(T!==!0)throw new TypeError("option "+v+" must be "+T);continue}if(s!==!0)throw Error("Unknown option "+v)}}var vC={assertOptions:yC,validators:cm},Mx=ii,xC=Ix,Ky=RP,Xy=gC,hd=Dx,Ox=vC,Na=Ox.validators;function Xc(t){this.defaults=t,this.interceptors={request:new Ky,response:new Ky}}Xc.prototype.request=function(i,s){typeof i=="string"?(s=s||{},s.url=i):s=i||{},s=hd(this.defaults,s),s.method?s.method=s.method.toLowerCase():this.defaults.method?s.method=this.defaults.method.toLowerCase():s.method="get";var u=s.transitional;u!==void 0&&Ox.assertOptions(u,{silentJSONParsing:Na.transitional(Na.boolean),forcedJSONParsing:Na.transitional(Na.boolean),clarifyTimeoutError:Na.transitional(Na.boolean)},!1);var m=[],v=!0;this.interceptors.request.forEach(function(K){typeof K.runWhen=="function"&&K.runWhen(s)===!1||(v=v&&K.synchronous,m.unshift(K.fulfilled,K.rejected))});var x=[];this.interceptors.response.forEach(function(K){x.push(K.fulfilled,K.rejected)});var l;if(!v){var T=[Xy,void 0];for(Array.prototype.unshift.apply(T,m),T=T.concat(x),l=Promise.resolve(s);T.length;)l=l.then(T.shift(),T.shift());return l}for(var C=s;m.length;){var A=m.shift(),F=m.shift();try{C=A(C)}catch(O){F(O);break}}try{l=Xy(C)}catch(O){return Promise.reject(O)}for(;x.length;)l=l.then(x.shift(),x.shift());return l};Xc.prototype.getUri=function(i){return i=hd(this.defaults,i),xC(i.url,i.params,i.paramsSerializer).replace(/^\?/,"")};Mx.forEach(["delete","get","head","options"],function(i){Xc.prototype[i]=function(s,u){return this.request(hd(u||{},{method:i,url:s,data:(u||{}).data}))}});Mx.forEach(["post","put","patch"],function(i){Xc.prototype[i]=function(s,u,m){return this.request(hd(m||{},{method:i,url:s,data:u}))}});var bC=Xc,wC=cd;function nl(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(m){i=m});var s=this;this.promise.then(function(u){if(!!s._listeners){var m,v=s._listeners.length;for(m=0;m<v;m++)s._listeners[m](u);s._listeners=null}}),this.promise.then=function(u){var m,v=new Promise(function(x){s.subscribe(x),m=x}).then(u);return v.cancel=function(){s.unsubscribe(m)},v},t(function(m){s.reason||(s.reason=new wC(m),i(s.reason))})}nl.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};nl.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]};nl.prototype.unsubscribe=function(i){if(!!this._listeners){var s=this._listeners.indexOf(i);s!==-1&&this._listeners.splice(s,1)}};nl.source=function(){var i,s=new nl(function(m){i=m});return{token:s,cancel:i}};var EC=nl,SC=function(i){return function(u){return i.apply(null,u)}},TC=ii,IC=function(i){return TC.isObject(i)&&i.isAxiosError===!0},Jy=ii,AC=wx,Sh=bC,PC=Dx,CC=lm;function Lx(t){var i=new Sh(t),s=AC(Sh.prototype.request,i);return Jy.extend(s,Sh.prototype,i),Jy.extend(s,i),s.create=function(m){return Lx(PC(t,m))},s}var Ki=Lx(CC);Ki.Axios=Sh;Ki.Cancel=cd;Ki.CancelToken=EC;Ki.isCancel=kx;Ki.VERSION=zx.version;Ki.all=function(i){return Promise.all(i)};Ki.spread=SC;Ki.isAxiosError=IC;im.exports=Ki;im.exports.default=Ki;var Rx=im.exports;function Yy(t){let i=Math.abs(t),s=Math.floor(i/3600);i-=s*3600;let u=Math.floor(i/60);return i-=u*60,[s,u,i]}function Qy(t){return t<10?"0"+t:t}const kC={props:{secondFromDispatch:{type:Number},stationEstimate:{type:String},startSecond:{type:Number}},computed:{timeToShow:function(){let t=Yy(this.secondFromDispatch),i=t[2]>=30;return t[1]>0?[t[0]>0?t[0]+"\u65F6":"",t[1],"\u5206",i?"\u534A":""].join(""):i?"\u534A\u5206\u949F":"\u4E0D\u5230\u534A\u5206"},startTime:function(){let t=Yy(this.startSecond);return["",Qy(t[0]),":",Qy(t[1])].join("")},isWaiting:function(){return this.secondFromDispatch<=0}}},DC={key:0};function zC(t,i,s,u,m,v){return s.secondFromDispatch?(tn(),Dn("tr",{key:0,class:os(v.isWaiting?"bus-waiting":"bus-running")},[mi("td",null,Ci(v.startTime),1),mi("td",null,Ci(v.isWaiting?"\u8DDD\u51FA\u53D1":"\u5DF2\u51FA\u53D1"),1),mi("td",null,Ci((v.isWaiting,""+v.timeToShow)),1),s.stationEstimate?(tn(),Dn("td",DC,Ci(s.stationEstimate),1)):Ja("",!0)],2)):Ja("",!0)}var MC=Wi(kC,[["render",zC],["__scopeId","data-v-5e065402"],["__file","BusItem.vue"]]);function Bx(t,i,s){return t*3600+i*60+s}function OC(t){let i=[];for(let s of t){let u=s.split(":"),m=Bx(Number(u[0].trim()),Number(u[1].trim()),0);i.push(m)}return i.sort((s,u)=>s-u)}const LC={data(){return{secondFromZero:0,second:0,minute:0,hour:0,timeRangeAfterReach:3}},props:{times:{},stations:{},minuteOnRoad:{type:Number,default:20},timeRangeBeforeDispatch:{type:Number,default:60}},components:{BusItem:MC},mounted(){setInterval(()=>{this.tick()},1e3)},methods:{tick:function(){var t=new Date;this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds(),this.secondFromZero=Bx(this.hour,this.minute,this.second)},formatNumber:function(t){return t<10?"0"+t:t},stationEstimate:function(t){if(!this.stationNames)return"null";if(t<=0)return this.stationNames[0];let i=this.stationNames.length;if(t>=this.minuteOnRoad*60)return this.stationNames[i-1];let s=t/60/this.minuteOnRoad,u="";for(let m in this.stationPositions)if(s<this.stationPositions[m]){u=this.stationNames[m];break}return u}},computed:{secondList:function(){return OC(this.times)},busToShow:function(){if(!this.secondList)return null;let t=[],i=[];for(let s of this.secondList){let u=this.secondFromZero-s;u<0&&u>-this.timeRangeBeforeDispatch*60&&i.push([u,s]),u>0&&u<(this.minuteOnRoad+this.timeRangeAfterReach)*60&&t.push([u,s])}return t.concat(i)},stationNames:function(){let t=[];for(let i of this.stations)t.push(i[0]);return t},stationPositions:function(){let t=[];for(let i of this.stations)t.push(i[1]);return t}}},RC=t=>(Bw("data-v-582397f1"),t=t(),Fw(),t),BC={key:0,class:"bus-timer-tb"},FC={colspan:"2"},NC={colspan:"2",style:{"text-align":"right"}},jC={key:0,colspan:"4"},VC=RC(()=>mi("p",{class:"plus-note"},"* \u7AD9\u70B9\u4F30\u8BA1\u4EC5\u4F9B\u53C2\u8003",-1));function UC(t,i,s,u,m,v){const x=qa("bus-item");return tn(),Dn("div",null,[v.busToShow?(tn(),Dn("table",BC,[mi("thead",null,[mi("tr",null,[mi("th",FC,Ci(s.stations[0][0])+" > "+Ci(s.stations[s.stations.length-1][0]),1),mi("th",NC,Ci(v.formatNumber(m.hour))+":"+Ci(v.formatNumber(m.minute))+":"+Ci(v.formatNumber(m.second)),1)]),(tn(!0),Dn(bn,null,Gf(v.busToShow,(l,T)=>(tn(),Fc(x,{secondFromDispatch:l[0],stationEstimate:v.stationEstimate(l[0]),startSecond:l[1],key:T},null,8,["secondFromDispatch","stationEstimate","startSecond"]))),128)),mi("tr",null,[Object.keys(v.busToShow).length==0?(tn(),Dn("td",jC," \u77ED\u65F6\u95F4\u5185\u6CA1\u6709\u73ED\u6B21\u4E86 ")):Ja("",!0)])])])):Ja("",!0),VC])}var $C=Wi(LC,[["render",UC],["__scopeId","data-v-582397f1"],["__file","BusTimer.vue"]]);const qC={data(){return{keySelected:null}},props:{objs:{},initPos:{type:Number,default:0}},mounted(){this.select(Object.keys(this.objs)[this.initPos])},watch:{objs(t){for(let i in this.objs){this.keySelected=i;break}}},computed:{},methods:{select:function(t){this.keySelected=t}}},HC=["onClick"];function GC(t,i,s,u,m,v){return tn(),Dn(bn,null,[(tn(!0),Dn(bn,null,Gf(s.objs,(x,l,T)=>(tn(),Dn("button",{key:T,onClick:C=>v.select(l),class:os(l==m.keySelected?"selected":"unselected")},Ci(l),11,HC))),128)),Qh(t.$slots,"default",{selected:s.objs[m.keySelected]})],64)}var ZC=Wi(qC,[["render",GC],["__file","ObjectSelector.vue"]]);function WC(t){return new Promise(function(i,s){let u=new XMLHttpRequest;u.open("GET",t),u.onload=function(){if(this.status==200&&this.status<300){let m=JSON.parse(u.response);i(m)}else s({status:this.status,statusText:u.statusText})},u.onerror=function(){s({status:this.status,statusText:u.statusText})},u.send()})}const KC={data(){return{data:null}},props:{path:{type:String}},watch:{path(t){if(t)return WC(t).then(i=>{this.data=i})}}};function XC(t,i,s,u,m,v){return Qh(t.$slots,"default",{data:m.data})}var JC=Wi(KC,[["render",XC],["__file","DataRequest.vue"]]);const YC={props:["data"]},QC={class:"cards"};function e5(t,i,s,u,m,v){return tn(),Dn("div",QC,[(tn(!0),Dn(bn,null,Gf(s.data,(x,l)=>(tn(),Dn("div",{key:l,class:"card"},Ci(x),1))),128))])}var t5=Wi(YC,[["render",e5],["__scopeId","data-v-34fd2926"],["__file","GridList.vue"]]);const r5={name:"BusTable",components:{BusTimer:$C,ObjectSelector:ZC,DataRequest:JC,GridList:t5},mounted(){function t(i){var s={};for(let F=0;F<i.days.length;F++)s[i.days[F].date]=i.days[F].isOffDay;var u=new Date,m=new Intl.DateTimeFormat("en",{year:"numeric"}).format(u),v=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(u),x=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(u),l=`${m}-${v}-${x}`,T;if(s[l]==null){console.log("Not in GOV declaration");var C=u.getDay(),A=C==6||C==0;T=A}else console.log("In GOV declaration"),T=s[l];T?(console.log("\u8282\u5047\u65E5"),document.getElementById("bustable").getElementsByTagName("button")[1].click()):(console.log("\u5DE5\u4F5C\u65E5"),document.getElementById("bustable").getElementsByTagName("button")[0].click())}Rx.get("/2022.json").then(i=>{t(i.data)})}},n5={id:"bustable"},i5=mi("br",null,null,-1);function o5(t,i,s,u,m,v){const x=qa("bus-timer"),l=qa("grid-list"),T=qa("data-request"),C=qa("object-selector");return tn(),Dn("div",n5,[qr(C,{objs:{"\u5DE5\u4F5C\u65E5 Workday":!0,"\u8282\u5047\u65E5 Holiday":!1}},{default:mh(A=>[i5,qr(C,{objs:A.selected?{"Line 1 \u53F7\u7EBF \u2502 \u5DE5\u5B66\u9662\u65B9\u5411 To COE":"/bus_times/one_down.json","Line 1 \u53F7\u7EBF \u2502 \u6B23\u56ED\u65B9\u5411 To Joy Highland":"/bus_times/one_up.json","Line 2 \u53F7\u7EBF \u2502 \u79D1\u7814\u697C\u65B9\u5411 To Research Building":"/bus_times/two_down.json","Line 2 \u53F7\u7EBF \u2502 \u6B23\u56ED\u65B9\u5411 To Joy Highland":"/bus_times/two_up.json"}:{"Line 1 \u53F7\u7EBF \u2502 \u5DE5\u5B66\u9662\u65B9\u5411  To COE":"/bus_times/one_down_holiday.json","Line 1 \u53F7\u7EBF \u2502 \u6B23\u56ED\u65B9\u5411 To Joy Highland":"/bus_times/one_up_holiday.json"}},{default:mh(F=>[qr(T,{path:F.selected},{default:mh(({data:O})=>[O?(tn(),Fc(x,jb(Xv({key:0},O)),null,16)):Ja("",!0),O?(tn(),Fc(l,{key:1,data:O.times},null,8,["data"])):Ja("",!0)]),_:2},1032,["path"])]),_:2},1032,["objs"])]),_:1})])}var s5=Wi(r5,[["render",o5],["__file","BusTable.vue"]]),Fx={exports:{}};(function(t,i){(function(s,u){t.exports=u()})(vP,function(){var s,u,m;function v(l,T){if(!s)s=T;else if(!u)u=T;else{var C="var sharedChunk = {}; ("+s+")(sharedChunk); ("+u+")(sharedChunk);",A={};s(A),m=T(A),typeof window!="undefined"&&(m.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}v(["exports"],function(l){var T=C;function C(n,e,o,c){this.cx=3*n,this.bx=3*(o-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(c-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=e,this.p2x=o,this.p2y=c}function A(n,e,o,c){const d=new T(n,e,o,c);return function(g){return d.solve(g)}}C.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,e){if(e===void 0&&(e=1e-6),n<0)return 0;if(n>1)return 1;for(var o=n,c=0;c<8;c++){var d=this.sampleCurveX(o)-n;if(Math.abs(d)<e)return o;var g=this.sampleCurveDerivativeX(o);if(Math.abs(g)<1e-6)break;o-=d/g}var _=0,b=1;for(o=n,c=0;c<20&&(d=this.sampleCurveX(o),!(Math.abs(d-n)<e));c++)n>d?_=o:b=o,o=.5*(b-_)+_;return o},solve:function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))}};const F=A(.25,.1,.25,1);function O(n,e,o){return Math.min(o,Math.max(e,n))}function K(n,e,o){const c=o-e,d=((n-e)%c+c)%c+e;return d===e?o:d}function oe(n,...e){for(const o of e)for(const c in o)n[c]=o[c];return n}let de=1;function te(n,e){n.forEach(o=>{e[o]&&(e[o]=e[o].bind(e))})}function se(n,e,o){const c={};for(const d in n)c[d]=e.call(o||this,n[d],d,n);return c}function me(n,e,o){const c={};for(const d in n)e.call(o||this,n[d],d,n)&&(c[d]=n[d]);return c}function _e(n){return Array.isArray(n)?n.map(_e):typeof n=="object"&&n?se(n,_e):n}const Ae={};function Me(n){Ae[n]||(typeof console!="undefined"&&console.warn(n),Ae[n]=!0)}function He(n,e,o){return(o.y-n.y)*(e.x-n.x)>(e.y-n.y)*(o.x-n.x)}function De(n){let e=0;for(let o,c,d=0,g=n.length,_=g-1;d<g;_=d++)o=n[d],c=n[_],e+=(c.x-o.x)*(o.y+c.y);return e}function Se(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function rt(n){const e={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,c,d,g)=>{const _=d||g;return e[c]=!_||_.toLowerCase(),""}),e["max-age"]){const o=parseInt(e["max-age"],10);isNaN(o)?delete e["max-age"]:e["max-age"]=o}return e}let ot,ft,Te=null;function nt(n){if(Te==null){const e=n.navigator?n.navigator.userAgent:null;Te=!!n.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Te}function St(n){return typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap}const Ft={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(n){const e=requestAnimationFrame(n);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(n,e=0){const o=window.document.createElement("canvas"),c=o.getContext("2d");if(!c)throw new Error("failed to create canvas 2d context");return o.width=n.width,o.height=n.height,c.drawImage(n,0,0,n.width,n.height),c.getImageData(-e,-e,n.width+2*e,n.height+2*e)},resolveURL:n=>(ot||(ot=document.createElement("a")),ot.href=n,ot.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ft==null&&(ft=matchMedia("(prefers-reduced-motion: reduce)")),ft.matches)}};var Ve=Dt;function Dt(n,e){this.x=n,this.y=e}Dt.prototype={clone:function(){return new Dt(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,e){return this.clone()._rotateAround(n,e)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var e=n.x-this.x,o=n.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,e){return Math.atan2(this.x*e-this.y*n,this.x*n+this.y*e)},_matMult:function(n){var e=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=e,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var e=Math.cos(n),o=Math.sin(n),c=o*this.x+e*this.y;return this.x=e*this.x-o*this.y,this.y=c,this},_rotateAround:function(n,e){var o=Math.cos(n),c=Math.sin(n),d=e.y+c*(this.x-e.x)+o*(this.y-e.y);return this.x=e.x+o*(this.x-e.x)-c*(this.y-e.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Dt.convert=function(n){return n instanceof Dt?n:Array.isArray(n)?new Dt(n[0],n[1]):n};const zt={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},dr="mapbox-tiles";let pr,Ir,vr=500,Ar=50;function jr(){typeof caches=="undefined"||pr||(pr=caches.open(dr))}let Fe=1/0;const at={supported:!1,testSupport:function(n){!Zt&&dt&&(nr?Rt(n):Xe=n)}};let Xe,dt,Zt=!1,nr=!1;function Rt(n){const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,dt),n.isContextLost())return;at.supported=!0}catch{}n.deleteTexture(e),Zt=!0}typeof document!="undefined"&&(dt=document.createElement("img"),dt.onload=function(){Xe&&Rt(Xe),Xe=null,nr=!0},dt.onerror=function(){Zt=!0,Xe=null},dt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ot={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ot);class Z extends Error{constructor(e,o,c,d){super(`AJAXError: ${o} (${e}): ${c}`),this.status=e,this.statusText=o,this.url=c,this.body=d}}const ne=Se()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ye(n,e){const o=new AbortController,c=new Request(n.url,{method:n.method||"GET",body:n.body,credentials:n.credentials,headers:n.headers,referrer:ne(),signal:o.signal});let d=!1,g=!1;return n.type==="json"&&c.headers.set("Accept","application/json"),((_,b,E)=>{if(g)return;const P=Date.now();fetch(c).then(z=>z.ok?((L,B,j)=>{(n.type==="arrayBuffer"?L.arrayBuffer():n.type==="json"?L.json():L.text()).then(V=>{g||(B&&j&&function(Q,ee,fe){if(jr(),!pr)return;const be={status:ee.status,statusText:ee.statusText,headers:new Headers};ee.headers.forEach((ke,je)=>be.headers.set(je,ke));const xe=rt(ee.headers.get("Cache-Control")||"");xe["no-store"]||(xe["max-age"]&&be.headers.set("Expires",new Date(fe+1e3*xe["max-age"]).toUTCString()),new Date(be.headers.get("Expires")).getTime()-fe<42e4||function(ke,je){if(Ir===void 0)try{new Response(new ReadableStream),Ir=!0}catch{Ir=!1}Ir?je(ke.body):ke.blob().then(je)}(ee,ke=>{const je=new Response(ke,be);jr(),pr&&pr.then(Be=>Be.put(function(gt){const Tt=gt.indexOf("?");return Tt<0?gt:gt.slice(0,Tt)}(Q.url),je)).catch(Be=>Me(Be.message))}))}(c,B,j),d=!0,e(null,V,L.headers.get("Cache-Control"),L.headers.get("Expires")))}).catch(V=>{g||e(new Error(V.message))})})(z,null,P):z.blob().then(L=>e(new Z(z.status,z.statusText,n.url,L)))).catch(z=>{z.code!==20&&e(new Error(z.message))})})(),{cancel:()=>{g=!0,d||o.abort()}}}const Le=function(n,e){if(/:\/\//.test(n.url)&&!/^https?:|^file:/.test(n.url)){if(Se()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,e);if(!Se()){const c=n.url.substring(0,n.url.indexOf("://"));return(zt.REGISTERED_PROTOCOLS[c]||ye)(n,e)}}if(!(/^file:/.test(o=n.url)||/^file:/.test(ne())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ye(n,e);if(Se()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,e,void 0,!0)}var o;return function(c,d){const g=new XMLHttpRequest;g.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const _ in c.headers)g.setRequestHeader(_,c.headers[_]);return c.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=c.credentials==="include",g.onerror=()=>{d(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let _=g.response;if(c.type==="json")try{_=JSON.parse(g.response)}catch(b){return d(b)}d(null,_,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else{const _=new Blob([g.response],{type:g.getResponseHeader("Content-Type")});d(new Z(g.status,g.statusText,c.url,_))}},g.send(c.body),{cancel:()=>g.abort()}}(n,e)},Re=function(n,e){return Le(oe(n,{type:"arrayBuffer"}),e)};function Ue(n){const e=window.document.createElement("a");return e.href=n,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const Je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let qe,Qe;qe=[],Qe=0;const Ze=function(n,e){if(at.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),Qe>=zt.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:n,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return qe.push(g),g}Qe++;let o=!1;const c=()=>{if(!o)for(o=!0,Qe--;qe.length&&Qe<zt.MAX_PARALLEL_IMAGE_REQUESTS;){const g=qe.shift(),{requestParameters:_,callback:b,cancelled:E}=g;E||(g.cancel=Ze(_,b).cancel)}},d=Re(n,(g,_,b,E)=>{c(),g?e(g):_&&function(P,z){typeof createImageBitmap=="function"?function(L,B){const j=new Blob([new Uint8Array(L)],{type:"image/png"});createImageBitmap(j).then(V=>{B(null,V)}).catch(V=>{B(new Error(`Could not load image because of ${V.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(P,z):function(L,B){const j=new Image;j.onload=()=>{B(null,j),URL.revokeObjectURL(j.src),j.onload=null,window.requestAnimationFrame(()=>{j.src=Je})},j.onerror=()=>B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const V=new Blob([new Uint8Array(L)],{type:"image/png"});j.src=L.byteLength?URL.createObjectURL(V):Je}(P,z)}(_,(P,z)=>{P!=null?e(P):z!=null&&e(null,z,{cacheControl:b,expires:E})})});return{cancel:()=>{d.cancel(),c()}}};function Ye(n,e,o){o[n]&&o[n].indexOf(e)!==-1||(o[n]=o[n]||[],o[n].push(e))}function vt(n,e,o){if(o&&o[n]){const c=o[n].indexOf(e);c!==-1&&o[n].splice(c,1)}}class _t{constructor(e,o={}){oe(this,o),this.type=e}}class At extends _t{constructor(e,o={}){super("error",oe({error:e},o))}}class jt{on(e,o){return this._listeners=this._listeners||{},Ye(e,o,this._listeners),this}off(e,o){return vt(e,o,this._listeners),vt(e,o,this._oneTimeListeners),this}once(e,o){return this._oneTimeListeners=this._oneTimeListeners||{},Ye(e,o,this._oneTimeListeners),this}fire(e,o){typeof e=="string"&&(e=new _t(e,o||{}));const c=e.type;if(this.listens(c)){e.target=this;const d=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const b of d)b.call(this,e);const g=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const b of g)vt(c,b,this._oneTimeListeners),b.call(this,e);const _=this._eventedParent;_&&(oe(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(e))}else e instanceof At&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,o){return this._eventedParent=e,this._eventedParentData=o,this}}var ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class $e{constructor(e,o,c,d){this.message=(e?`${e}: `:"")+c,d&&(this.identifier=d),o!=null&&o.__line__&&(this.line=o.__line__)}}function ur(n){const e=n.value;return e?[new $e(n.key,e,"constants have been deprecated as of v8")]:[]}function Hr(n,...e){for(const o of e)for(const c in o)n[c]=o[c];return n}function ir(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Sn(n){if(Array.isArray(n))return n.map(Sn);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const o in n)e[o]=Sn(n[o]);return e}return ir(n)}class Gr extends Error{constructor(e,o){super(o),this.message=o,this.key=e}}class vi{constructor(e,o=[]){this.parent=e,this.bindings={};for(const[c,d]of o)this.bindings[c]=d}concat(e){return new vi(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Xt={kind:"null"},Ke={kind:"number"},$t={kind:"string"},qt={kind:"boolean"},Tn={kind:"color"},oi={kind:"object"},Ht={kind:"value"},Xi={kind:"collator"},si={kind:"formatted"},Di={kind:"resolvedImage"};function Kr(n,e){return{kind:"array",itemType:n,N:e}}function Sr(n){if(n.kind==="array"){const e=Sr(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}return n.kind}const Yn=[Xt,Ke,$t,qt,Tn,si,oi,Kr(Ht),Di];function Ji(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Ji(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const o of Yn)if(!Ji(o,e))return null}}return`Expected ${Sr(n)} but found ${Sr(e)} instead.`}function rn(n,e){return e.some(o=>o.kind===n.kind)}function ai(n,e){return e.some(o=>o==="null"?n===null:o==="array"?Array.isArray(n):o==="object"?n&&!Array.isArray(n)&&typeof n=="object":o===typeof n)}var li,as={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Eo(n){return(n=Math.round(n))<0?0:n>255?255:n}function So(n){return Eo(n[n.length-1]==="%"?parseFloat(n)/100*255:parseInt(n))}function G(n){return(e=n[n.length-1]==="%"?parseFloat(n)/100:parseFloat(n))<0?0:e>1?1:e;var e}function k(n,e,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?n+(e-n)*o*6:2*o<1?e:3*o<2?n+(e-n)*(2/3-o)*6:n}try{li={}.parseCSSColor=function(n){var e,o=n.replace(/ /g,"").toLowerCase();if(o in as)return as[o].slice();if(o[0]==="#")return o.length===4?(e=parseInt(o.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:o.length===7&&(e=parseInt(o.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var c=o.indexOf("("),d=o.indexOf(")");if(c!==-1&&d+1===o.length){var g=o.substr(0,c),_=o.substr(c+1,d-(c+1)).split(","),b=1;switch(g){case"rgba":if(_.length!==4)return null;b=G(_.pop());case"rgb":return _.length!==3?null:[So(_[0]),So(_[1]),So(_[2]),b];case"hsla":if(_.length!==4)return null;b=G(_.pop());case"hsl":if(_.length!==3)return null;var E=(parseFloat(_[0])%360+360)%360/360,P=G(_[1]),z=G(_[2]),L=z<=.5?z*(P+1):z+P-z*P,B=2*z-L;return[Eo(255*k(B,L,E+1/3)),Eo(255*k(B,L,E)),Eo(255*k(B,L,E-1/3)),b];default:return null}}return null}}catch{}class M{constructor(e,o,c,d=1){this.r=e,this.g=o,this.b=c,this.a=d}static parse(e){if(!e)return;if(e instanceof M)return e;if(typeof e!="string")return;const o=li(e);return o?new M(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[e,o,c,d]=this.toArray();return`rgba(${Math.round(e)},${Math.round(o)},${Math.round(c)},${d})`}toArray(){const{r:e,g:o,b:c,a:d}=this;return d===0?[0,0,0,0]:[255*e/d,255*o/d,255*c/d,d]}}M.black=new M(0,0,0,1),M.white=new M(1,1,1,1),M.transparent=new M(0,0,0,0),M.red=new M(1,0,0,1);class U{constructor(e,o,c){this.sensitivity=e?o?"variant":"case":o?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,o){return this.collator.compare(e,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class W{constructor(e,o,c,d,g){this.text=e,this.image=o,this.scale=c,this.fontStack=d,this.textColor=g}}class X{constructor(e){this.sections=e}static fromString(e){return new X([new W(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof X?e:X.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const o of this.sections){if(o.image){e.push(["image",o.image.name]);continue}e.push(o.text);const c={};o.fontStack&&(c["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(c["font-scale"]=o.scale),o.textColor&&(c["text-color"]=["rgba"].concat(o.textColor.toArray())),e.push(c)}return e}}class ae{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ae({name:e,available:!1}):null}serialize(){return["image",this.name]}}function re(n,e,o,c){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof o=="number"&&o>=0&&o<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[n,e,o,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[n,e,o,c]:[n,e,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ie(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof M||n instanceof U||n instanceof X||n instanceof ae)return!0;if(Array.isArray(n)){for(const e of n)if(!ie(e))return!1;return!0}if(typeof n=="object"){for(const e in n)if(!ie(n[e]))return!1;return!0}return!1}function le(n){if(n===null)return Xt;if(typeof n=="string")return $t;if(typeof n=="boolean")return qt;if(typeof n=="number")return Ke;if(n instanceof M)return Tn;if(n instanceof U)return Xi;if(n instanceof X)return si;if(n instanceof ae)return Di;if(Array.isArray(n)){const e=n.length;let o;for(const c of n){const d=le(c);if(o){if(o===d)continue;o=Ht;break}o=d}return Kr(o||Ht,e)}return oi}function Ie(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof M||n instanceof X||n instanceof ae?n.toString():JSON.stringify(n)}class Ne{constructor(e,o){this.type=e,this.value=o}static parse(e,o){if(e.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!ie(e[1]))return o.error("invalid value");const c=e[1];let d=le(c);const g=o.expectedType;return d.kind!=="array"||d.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(d=g),new Ne(d,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof M?["rgba"].concat(this.value.toArray()):this.value instanceof X?this.value.serialize():this.value}}class we{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const xt={string:$t,number:Ke,boolean:qt,object:oi};class ht{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");let c,d=1;const g=e[0];if(g==="array"){let b,E;if(e.length>2){const P=e[1];if(typeof P!="string"||!(P in xt)||P==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);b=xt[P],d++}else b=Ht;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return o.error('The length argument to "array" must be a positive integer literal',2);E=e[2],d++}c=Kr(b,E)}else c=xt[g];const _=[];for(;d<e.length;d++){const b=o.parse(e[d],d,Ht);if(!b)return null;_.push(b)}return new ht(c,_)}evaluate(e){for(let o=0;o<this.args.length;o++){const c=this.args[o].evaluate(e);if(!Ji(this.type,le(c)))return c;if(o===this.args.length-1)throw new we(`Expected value to be of type ${Sr(this.type)}, but found ${Sr(le(c))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,o=[e.kind];if(e.kind==="array"){const c=e.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){o.push(c.kind);const d=e.N;(typeof d=="number"||this.args.length>1)&&o.push(d)}}return o.concat(this.args.map(c=>c.serialize()))}}class Et{constructor(e){this.type=si,this.sections=e}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const c=e[1];if(!Array.isArray(c)&&typeof c=="object")return o.error("First argument must be an image or text section.");const d=[];let g=!1;for(let _=1;_<=e.length-1;++_){const b=e[_];if(g&&typeof b=="object"&&!Array.isArray(b)){g=!1;let E=null;if(b["font-scale"]&&(E=o.parse(b["font-scale"],1,Ke),!E))return null;let P=null;if(b["text-font"]&&(P=o.parse(b["text-font"],1,Kr($t)),!P))return null;let z=null;if(b["text-color"]&&(z=o.parse(b["text-color"],1,Tn),!z))return null;const L=d[d.length-1];L.scale=E,L.font=P,L.textColor=z}else{const E=o.parse(e[_],1,Ht);if(!E)return null;const P=E.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,d.push({content:E,scale:null,font:null,textColor:null})}}return new Et(d)}evaluate(e){return new X(this.sections.map(o=>{const c=o.content.evaluate(e);return le(c)===Di?new W("",c,null,null,null):new W(Ie(c),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null)}))}eachChild(e){for(const o of this.sections)e(o.content),o.scale&&e(o.scale),o.font&&e(o.font),o.textColor&&e(o.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const o of this.sections){e.push(o.content.serialize());const c={};o.scale&&(c["font-scale"]=o.scale.serialize()),o.font&&(c["text-font"]=o.font.serialize()),o.textColor&&(c["text-color"]=o.textColor.serialize()),e.push(c)}return e}}class Pt{constructor(e){this.type=Di,this.input=e}static parse(e,o){if(e.length!==2)return o.error("Expected two arguments.");const c=o.parse(e[1],1,$t);return c?new Pt(c):o.error("No image name provided.")}evaluate(e){const o=this.input.evaluate(e),c=ae.fromString(o);return c&&e.availableImages&&(c.available=e.availableImages.indexOf(o)>-1),c}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const or={"to-boolean":qt,"to-color":Tn,"to-number":Ke,"to-string":$t};class Qt{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expected at least one argument.");const c=e[0];if((c==="to-boolean"||c==="to-string")&&e.length!==2)return o.error("Expected one argument.");const d=or[c],g=[];for(let _=1;_<e.length;_++){const b=o.parse(e[_],_,Ht);if(!b)return null;g.push(b)}return new Qt(d,g)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let o,c;for(const d of this.args){if(o=d.evaluate(e),c=null,o instanceof M)return o;if(typeof o=="string"){const g=e.parseColor(o);if(g)return g}else if(Array.isArray(o)&&(c=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:re(o[0],o[1],o[2],o[3]),!c))return new M(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new we(c||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const c of this.args){if(o=c.evaluate(e),o===null)return 0;const d=Number(o);if(!isNaN(d))return d}throw new we(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?X.fromString(Ie(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ae.fromString(Ie(this.args[0].evaluate(e))):Ie(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Et([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Pt(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(o=>{e.push(o.serialize())}),e}}const Wt=["Unknown","Point","LineString","Polygon"];class Gt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Wt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let o=this._parseColorCache[e];return o||(o=this._parseColorCache[e]=M.parse(e)),o}}class Vt{constructor(e,o,c,d){this.name=e,this.type=o,this._evaluate=c,this.args=d}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,o){const c=e[0],d=Vt.definitions[c];if(!d)return o.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(d)?d[0]:d.type,_=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,b=_.filter(([P])=>!Array.isArray(P)||P.length===e.length-1);let E=null;for(const[P,z]of b){E=new Ks(o.registry,o.path,null,o.scope);const L=[];let B=!1;for(let j=1;j<e.length;j++){const V=e[j],Q=Array.isArray(P)?P[j-1]:P.type,ee=E.parse(V,1+L.length,Q);if(!ee){B=!0;break}L.push(ee)}if(!B)if(Array.isArray(P)&&P.length!==L.length)E.error(`Expected ${P.length} arguments, but found ${L.length} instead.`);else{for(let j=0;j<L.length;j++){const V=Array.isArray(P)?P[j]:P.type,Q=L[j];E.concat(j+1).checkSubtype(V,Q.type)}if(E.errors.length===0)return new Vt(c,g,z,L)}}if(b.length===1)o.errors.push(...E.errors);else{const P=(b.length?b:_).map(([L])=>{return B=L,Array.isArray(B)?`(${B.map(Sr).join(", ")})`:`(${Sr(B.type)}...)`;var B}).join(" | "),z=[];for(let L=1;L<e.length;L++){const B=o.parse(e[L],1+z.length);if(!B)return null;z.push(Sr(B.type))}o.error(`Expected arguments of type ${P}, but found (${z.join(", ")}) instead.`)}return null}static register(e,o){Vt.definitions=o;for(const c in o)e[c]=Vt}}class Zr{constructor(e,o,c){this.type=Xi,this.locale=c,this.caseSensitive=e,this.diacriticSensitive=o}static parse(e,o){if(e.length!==2)return o.error("Expected one argument.");const c=e[1];if(typeof c!="object"||Array.isArray(c))return o.error("Collator options argument must be an object.");const d=o.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,qt);if(!d)return null;const g=o.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,qt);if(!g)return null;let _=null;return c.locale&&(_=o.parse(c.locale,1,$t),!_)?null:new Zr(d,g,_)}evaluate(e){return new U(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Vr=8192;function an(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function hn(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function cl(n,e){const o=(180+n[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,d=Math.pow(2,e.z);return[Math.round(o*d*Vr),Math.round(c*d*Vr)]}function ul(n,e,o){const c=n[0]-e[0],d=n[1]-e[1],g=n[0]-o[0],_=n[1]-o[1];return c*_-g*d==0&&c*g<=0&&d*_<=0}function Tr(n,e){let o=!1;for(let _=0,b=e.length;_<b;_++){const E=e[_];for(let P=0,z=E.length;P<z-1;P++){if(ul(n,E[P],E[P+1]))return!1;(d=E[P])[1]>(c=n)[1]!=(g=E[P+1])[1]>c[1]&&c[0]<(g[0]-d[0])*(c[1]-d[1])/(g[1]-d[1])+d[0]&&(o=!o)}}var c,d,g;return o}function dd(n,e){for(let o=0;o<e.length;o++)if(Tr(n,e[o]))return!0;return!1}function hl(n,e,o,c){const d=c[0]-o[0],g=c[1]-o[1],_=(n[0]-o[0])*g-d*(n[1]-o[1]),b=(e[0]-o[0])*g-d*(e[1]-o[1]);return _>0&&b<0||_<0&&b>0}function pd(n,e,o){for(const P of o)for(let z=0;z<P.length-1;++z)if((b=[(_=P[z+1])[0]-(g=P[z])[0],_[1]-g[1]])[0]*(E=[(d=e)[0]-(c=n)[0],d[1]-c[1]])[1]-b[1]*E[0]!=0&&hl(c,d,g,_)&&hl(g,_,c,d))return!0;var c,d,g,_,b,E;return!1}function dl(n,e){for(let o=0;o<n.length;++o)if(!Tr(n[o],e))return!1;for(let o=0;o<n.length-1;++o)if(pd(n[o],n[o+1],e))return!1;return!0}function Jc(n,e){for(let o=0;o<e.length;o++)if(dl(n,e[o]))return!0;return!1}function pl(n,e,o){const c=[];for(let d=0;d<n.length;d++){const g=[];for(let _=0;_<n[d].length;_++){const b=cl(n[d][_],o);an(e,b),g.push(b)}c.push(g)}return c}function fl(n,e,o){const c=[];for(let d=0;d<n.length;d++){const g=pl(n[d],e,o);c.push(g)}return c}function ml(n,e,o,c){if(n[0]<o[0]||n[0]>o[2]){const d=.5*c;let g=n[0]-o[0]>d?-c:o[0]-n[0]>d?c:0;g===0&&(g=n[0]-o[2]>d?-c:o[2]-n[0]>d?c:0),n[0]+=g}an(e,n)}function Yc(n,e,o,c){const d=Math.pow(2,c.z)*Vr,g=[c.x*Vr,c.y*Vr],_=[];for(const b of n)for(const E of b){const P=[E.x+g[0],E.y+g[1]];ml(P,e,o,d),_.push(P)}return _}function Qc(n,e,o,c){const d=Math.pow(2,c.z)*Vr,g=[c.x*Vr,c.y*Vr],_=[];for(const E of n){const P=[];for(const z of E){const L=[z.x+g[0],z.y+g[1]];an(e,L),P.push(L)}_.push(P)}if(e[2]-e[0]<=d/2){(b=e)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const E of _)for(const P of E)ml(P,e,o,d)}var b;return _}class Yi{constructor(e,o){this.type=qt,this.geojson=e,this.geometries=o}static parse(e,o){if(e.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(ie(e[1])){const c=e[1];if(c.type==="FeatureCollection")for(let d=0;d<c.features.length;++d){const g=c.features[d].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Yi(c,c.features[d].geometry)}else if(c.type==="Feature"){const d=c.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Yi(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new Yi(c,c)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(o,c){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(c.type==="Polygon"){const b=pl(c.coordinates,g,_),E=Yc(o.geometry(),d,g,_);if(!hn(d,g))return!1;for(const P of E)if(!Tr(P,b))return!1}if(c.type==="MultiPolygon"){const b=fl(c.coordinates,g,_),E=Yc(o.geometry(),d,g,_);if(!hn(d,g))return!1;for(const P of E)if(!dd(P,b))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(o,c){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(c.type==="Polygon"){const b=pl(c.coordinates,g,_),E=Qc(o.geometry(),d,g,_);if(!hn(d,g))return!1;for(const P of E)if(!dl(P,b))return!1}if(c.type==="MultiPolygon"){const b=fl(c.coordinates,g,_),E=Qc(o.geometry(),d,g,_);if(!hn(d,g))return!1;for(const P of E)if(!Jc(P,b))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Zs(n){if(n instanceof Vt&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof Yi)return!1;let e=!0;return n.eachChild(o=>{e&&!Zs(o)&&(e=!1)}),e}function To(n){if(n instanceof Vt&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(o=>{e&&!To(o)&&(e=!1)}),e}function ls(n,e){if(n instanceof Vt&&e.indexOf(n.name)>=0)return!1;let o=!0;return n.eachChild(c=>{o&&!ls(c,e)&&(o=!1)}),o}class Ws{constructor(e,o){this.type=o.type,this.name=e,this.boundExpression=o}static parse(e,o){if(e.length!==2||typeof e[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const c=e[1];return o.scope.has(c)?new Ws(c,o.scope.get(c)):o.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ks{constructor(e,o=[],c,d=new vi,g=[]){this.registry=e,this.path=o,this.key=o.map(_=>`[${_}]`).join(""),this.scope=d,this.errors=g,this.expectedType=c}parse(e,o,c,d,g={}){return o?this.concat(o,c,d)._parse(e,g):this._parse(e,g)}_parse(e,o){function c(d,g,_){return _==="assert"?new ht(g,[d]):_==="coerce"?new Qt(g,[d]):d}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=e[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[d];if(g){let _=g.parse(e,this);if(!_)return null;if(this.expectedType){const b=this.expectedType,E=_.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||E.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(b,E))return null}else _=c(_,b,o.typeAnnotation||"coerce");else _=c(_,b,o.typeAnnotation||"assert")}if(!(_ instanceof Ne)&&_.type.kind!=="resolvedImage"&&cs(_)){const b=new Gt;try{_=new Ne(_.type,_.evaluate(b))}catch(E){return this.error(E.message),null}}return _}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,o,c){const d=typeof e=="number"?this.path.concat(e):this.path,g=c?this.scope.concat(c):this.scope;return new Ks(this.registry,d,o||null,g,this.errors)}error(e,...o){const c=`${this.key}${o.map(d=>`[${d}]`).join("")}`;this.errors.push(new Gr(c,e))}checkSubtype(e,o){const c=Ji(e,o);return c&&this.error(c),c}}function cs(n){if(n instanceof Ws)return cs(n.boundExpression);if(n instanceof Vt&&n.name==="error"||n instanceof Zr||n instanceof Yi)return!1;const e=n instanceof Qt||n instanceof ht;let o=!0;return n.eachChild(c=>{o=e?o&&cs(c):o&&c instanceof Ne}),!!o&&Zs(n)&&ls(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Xs(n,e){const o=n.length-1;let c,d,g=0,_=o,b=0;for(;g<=_;)if(b=Math.floor((g+_)/2),c=n[b],d=n[b+1],c<=e){if(b===o||e<d)return b;g=b+1}else{if(!(c>e))throw new we("Input is not a number.");_=b-1}return 0}class us{constructor(e,o,c){this.type=e,this.input=o,this.labels=[],this.outputs=[];for(const[d,g]of c)this.labels.push(d),this.outputs.push(g)}static parse(e,o){if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");const c=o.parse(e[1],1,Ke);if(!c)return null;const d=[];let g=null;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);for(let _=1;_<e.length;_+=2){const b=_===1?-1/0:e[_],E=e[_+1],P=_,z=_+1;if(typeof b!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(d.length&&d[d.length-1][0]>=b)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const L=o.parse(E,z,g);if(!L)return null;g=g||L.type,d.push([b,L])}return new us(g,c,d)}evaluate(e){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(e);const d=this.input.evaluate(e);if(d<=o[0])return c[0].evaluate(e);const g=o.length;return d>=o[g-1]?c[g-1].evaluate(e):c[Xs(o,d)].evaluate(e)}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&e.push(this.labels[o]),e.push(this.outputs[o].serialize());return e}}function Xr(n,e,o){return n*(1-o)+e*o}var hs=Object.freeze({__proto__:null,number:Xr,color:function(n,e,o){return new M(Xr(n.r,e.r,o),Xr(n.g,e.g,o),Xr(n.b,e.b,o),Xr(n.a,e.a,o))},array:function(n,e,o){return n.map((c,d)=>Xr(c,e[d],o))}});const gl=.95047,eu=1.08883,tu=4/29,Js=6/29,_l=3*Js*Js,fd=Math.PI/180,md=180/Math.PI;function yl(n){return n>.008856451679035631?Math.pow(n,1/3):n/_l+tu}function vl(n){return n>Js?n*n*n:_l*(n-tu)}function xl(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function bl(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function ru(n){const e=bl(n.r),o=bl(n.g),c=bl(n.b),d=yl((.4124564*e+.3575761*o+.1804375*c)/gl),g=yl((.2126729*e+.7151522*o+.072175*c)/1);return{l:116*g-16,a:500*(d-g),b:200*(g-yl((.0193339*e+.119192*o+.9503041*c)/eu)),alpha:n.a}}function hr(n){let e=(n.l+16)/116,o=isNaN(n.a)?e:e+n.a/500,c=isNaN(n.b)?e:e-n.b/200;return e=1*vl(e),o=gl*vl(o),c=eu*vl(c),new M(xl(3.2404542*o-1.5371385*e-.4985314*c),xl(-.969266*o+1.8760108*e+.041556*c),xl(.0556434*o-.2040259*e+1.0572252*c),n.alpha)}function gd(n,e,o){const c=e-n;return n+o*(c>180||c<-180?c-360*Math.round(c/360):c)}const ds={forward:ru,reverse:hr,interpolate:function(n,e,o){return{l:Xr(n.l,e.l,o),a:Xr(n.a,e.a,o),b:Xr(n.b,e.b,o),alpha:Xr(n.alpha,e.alpha,o)}}},ps={forward:function(n){const{l:e,a:o,b:c}=ru(n),d=Math.atan2(c,o)*md;return{h:d<0?d+360:d,c:Math.sqrt(o*o+c*c),l:e,alpha:n.a}},reverse:function(n){const e=n.h*fd,o=n.c;return hr({l:n.l,a:Math.cos(e)*o,b:Math.sin(e)*o,alpha:n.alpha})},interpolate:function(n,e,o){return{h:gd(n.h,e.h,o),c:Xr(n.c,e.c,o),l:Xr(n.l,e.l,o),alpha:Xr(n.alpha,e.alpha,o)}}};var nu=Object.freeze({__proto__:null,lab:ds,hcl:ps});class jn{constructor(e,o,c,d,g){this.type=e,this.operator=o,this.interpolation=c,this.input=d,this.labels=[],this.outputs=[];for(const[_,b]of g)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(e,o,c,d){let g=0;if(e.name==="exponential")g=wl(o,e.base,c,d);else if(e.name==="linear")g=wl(o,1,c,d);else if(e.name==="cubic-bezier"){const _=e.controlPoints;g=new T(_[0],_[1],_[2],_[3]).solve(wl(o,1,c,d))}return g}static parse(e,o){let[c,d,g,..._]=e;if(!Array.isArray(d)||d.length===0)return o.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const P=d[1];if(typeof P!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:P}}else{if(d[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const P=d.slice(1);if(P.length!==4||P.some(z=>typeof z!="number"||z<0||z>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:P}}}if(e.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(g=o.parse(g,2,Ke),!g)return null;const b=[];let E=null;c==="interpolate-hcl"||c==="interpolate-lab"?E=Tn:o.expectedType&&o.expectedType.kind!=="value"&&(E=o.expectedType);for(let P=0;P<_.length;P+=2){const z=_[P],L=_[P+1],B=P+3,j=P+4;if(typeof z!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(b.length&&b[b.length-1][0]>=z)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);const V=o.parse(L,j,E);if(!V)return null;E=E||V.type,b.push([z,V])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new jn(E,c,d,g,b):o.error(`Type ${Sr(E)} is not interpolatable.`)}evaluate(e){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(e);const d=this.input.evaluate(e);if(d<=o[0])return c[0].evaluate(e);const g=o.length;if(d>=o[g-1])return c[g-1].evaluate(e);const _=Xs(o,d),b=jn.interpolationFactor(this.interpolation,d,o[_],o[_+1]),E=c[_].evaluate(e),P=c[_+1].evaluate(e);return this.operator==="interpolate"?hs[this.type.kind.toLowerCase()](E,P,b):this.operator==="interpolate-hcl"?ps.reverse(ps.interpolate(ps.forward(E),ps.forward(P),b)):ds.reverse(ds.interpolate(ds.forward(E),ds.forward(P),b))}eachChild(e){e(this.input);for(const o of this.outputs)e(o)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,e,this.input.serialize()];for(let c=0;c<this.labels.length;c++)o.push(this.labels[c],this.outputs[c].serialize());return o}}function wl(n,e,o,c){const d=c-o,g=n-o;return d===0?0:e===1?g/d:(Math.pow(e,g)-1)/(Math.pow(e,d)-1)}class Ys{constructor(e,o){this.type=e,this.args=o}static parse(e,o){if(e.length<2)return o.error("Expectected at least one argument.");let c=null;const d=o.expectedType;d&&d.kind!=="value"&&(c=d);const g=[];for(const b of e.slice(1)){const E=o.parse(b,1+g.length,c,void 0,{typeAnnotation:"omit"});if(!E)return null;c=c||E.type,g.push(E)}const _=d&&g.some(b=>Ji(d,b.type));return new Ys(_?Ht:c,g)}evaluate(e){let o,c=null,d=0;for(const g of this.args)if(d++,c=g.evaluate(e),c&&c instanceof ae&&!c.available&&(o||(o=c.name),c=null,d===this.args.length&&(c=o)),c!==null)break;return c}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(o=>{e.push(o.serialize())}),e}}class Qs{constructor(e,o){this.type=o.type,this.bindings=[].concat(e),this.result=o}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const o of this.bindings)e(o[1]);e(this.result)}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const c=[];for(let g=1;g<e.length-1;g+=2){const _=e[g];if(typeof _!="string")return o.error(`Expected string, but found ${typeof _} instead.`,g);if(/[^a-zA-Z0-9_]/.test(_))return o.error("Variable names must contain only alphanumeric characters or '_'.",g);const b=o.parse(e[g+1],g+1);if(!b)return null;c.push([_,b])}const d=o.parse(e[e.length-1],e.length-1,o.expectedType,c);return d?new Qs(c,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[o,c]of this.bindings)e.push(o,c.serialize());return e.push(this.result.serialize()),e}}class El{constructor(e,o,c){this.type=e,this.index=o,this.input=c}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const c=o.parse(e[1],1,Ke),d=o.parse(e[2],2,Kr(o.expectedType||Ht));return c&&d?new El(d.type.itemType,c,d):null}evaluate(e){const o=this.index.evaluate(e),c=this.input.evaluate(e);if(o<0)throw new we(`Array index out of bounds: ${o} < 0.`);if(o>=c.length)throw new we(`Array index out of bounds: ${o} > ${c.length-1}.`);if(o!==Math.floor(o))throw new we(`Array index must be an integer, but found ${o} instead.`);return c[o]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Sl{constructor(e,o){this.type=qt,this.needle=e,this.haystack=o}static parse(e,o){if(e.length!==3)return o.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const c=o.parse(e[1],1,Ht),d=o.parse(e[2],2,Ht);return c&&d?rn(c.type,[qt,$t,Ke,Xt,Ht])?new Sl(c,d):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(c.type)} instead`):null}evaluate(e){const o=this.needle.evaluate(e),c=this.haystack.evaluate(e);if(!c)return!1;if(!ai(o,["boolean","string","number","null"]))throw new we(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(le(o))} instead.`);if(!ai(c,["string","array"]))throw new we(`Expected second argument to be of type array or string, but found ${Sr(le(c))} instead.`);return c.indexOf(o)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class ea{constructor(e,o,c){this.type=Ke,this.needle=e,this.haystack=o,this.fromIndex=c}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const c=o.parse(e[1],1,Ht),d=o.parse(e[2],2,Ht);if(!c||!d)return null;if(!rn(c.type,[qt,$t,Ke,Xt,Ht]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(c.type)} instead`);if(e.length===4){const g=o.parse(e[3],3,Ke);return g?new ea(c,d,g):null}return new ea(c,d)}evaluate(e){const o=this.needle.evaluate(e),c=this.haystack.evaluate(e);if(!ai(o,["boolean","string","number","null"]))throw new we(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(le(o))} instead.`);if(!ai(c,["string","array"]))throw new we(`Expected second argument to be of type array or string, but found ${Sr(le(c))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(e);return c.indexOf(o,d)}return c.indexOf(o)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Tl{constructor(e,o,c,d,g,_){this.inputType=e,this.type=o,this.input=c,this.cases=d,this.outputs=g,this.otherwise=_}static parse(e,o){if(e.length<5)return o.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return o.error("Expected an even number of arguments.");let c,d;o.expectedType&&o.expectedType.kind!=="value"&&(d=o.expectedType);const g={},_=[];for(let P=2;P<e.length-1;P+=2){let z=e[P];const L=e[P+1];Array.isArray(z)||(z=[z]);const B=o.concat(P);if(z.length===0)return B.error("Expected at least one branch label.");for(const V of z){if(typeof V!="number"&&typeof V!="string")return B.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return B.error("Numeric branch labels must be integer values.");if(c){if(B.checkSubtype(c,le(V)))return null}else c=le(V);if(g[String(V)]!==void 0)return B.error("Branch labels must be unique.");g[String(V)]=_.length}const j=o.parse(L,P,d);if(!j)return null;d=d||j.type,_.push(j)}const b=o.parse(e[1],1,Ht);if(!b)return null;const E=o.parse(e[e.length-1],e.length-1,d);return E?b.type.kind!=="value"&&o.concat(1).checkSubtype(c,b.type)?null:new Tl(c,d,b,g,_,E):null}evaluate(e){const o=this.input.evaluate(e);return(le(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),c=[],d={};for(const _ of o){const b=d[this.cases[_]];b===void 0?(d[this.cases[_]]=c.length,c.push([this.cases[_],[_]])):c[b][1].push(_)}const g=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,b]of c)e.push(b.length===1?g(b[0]):b.map(g)),e.push(this.outputs[_].serialize());return e.push(this.otherwise.serialize()),e}}class Il{constructor(e,o,c){this.type=e,this.branches=o,this.otherwise=c}static parse(e,o){if(e.length<4)return o.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return o.error("Expected an odd number of arguments.");let c;o.expectedType&&o.expectedType.kind!=="value"&&(c=o.expectedType);const d=[];for(let _=1;_<e.length-1;_+=2){const b=o.parse(e[_],_,qt);if(!b)return null;const E=o.parse(e[_+1],_+1,c);if(!E)return null;d.push([b,E]),c=c||E.type}const g=o.parse(e[e.length-1],e.length-1,c);return g?new Il(c,d,g):null}evaluate(e){for(const[o,c]of this.branches)if(o.evaluate(e))return c.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[o,c]of this.branches)e(o),e(c);e(this.otherwise)}outputDefined(){return this.branches.every(([e,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(o=>{e.push(o.serialize())}),e}}class ta{constructor(e,o,c,d){this.type=e,this.input=o,this.beginIndex=c,this.endIndex=d}static parse(e,o){if(e.length<=2||e.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const c=o.parse(e[1],1,Ht),d=o.parse(e[2],2,Ke);if(!c||!d)return null;if(!rn(c.type,[Kr(Ht),$t,Ht]))return o.error(`Expected first argument to be of type array or string, but found ${Sr(c.type)} instead`);if(e.length===4){const g=o.parse(e[3],3,Ke);return g?new ta(c.type,c,d,g):null}return new ta(c.type,c,d)}evaluate(e){const o=this.input.evaluate(e),c=this.beginIndex.evaluate(e);if(!ai(o,["string","array"]))throw new we(`Expected first argument to be of type array or string, but found ${Sr(le(o))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(e);return o.slice(c,d)}return o.slice(c)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function iu(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function ou(n,e,o,c){return c.compare(e,o)===0}function Io(n,e,o){const c=n!=="=="&&n!=="!=";return class Nx{constructor(g,_,b){this.type=qt,this.lhs=g,this.rhs=_,this.collator=b,this.hasUntypedArgument=g.type.kind==="value"||_.type.kind==="value"}static parse(g,_){if(g.length!==3&&g.length!==4)return _.error("Expected two or three arguments.");const b=g[0];let E=_.parse(g[1],1,Ht);if(!E)return null;if(!iu(b,E.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${Sr(E.type)}'.`);let P=_.parse(g[2],2,Ht);if(!P)return null;if(!iu(b,P.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${Sr(P.type)}'.`);if(E.type.kind!==P.type.kind&&E.type.kind!=="value"&&P.type.kind!=="value")return _.error(`Cannot compare types '${Sr(E.type)}' and '${Sr(P.type)}'.`);c&&(E.type.kind==="value"&&P.type.kind!=="value"?E=new ht(P.type,[E]):E.type.kind!=="value"&&P.type.kind==="value"&&(P=new ht(E.type,[P])));let z=null;if(g.length===4){if(E.type.kind!=="string"&&P.type.kind!=="string"&&E.type.kind!=="value"&&P.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(z=_.parse(g[3],3,Xi),!z)return null}return new Nx(E,P,z)}evaluate(g){const _=this.lhs.evaluate(g),b=this.rhs.evaluate(g);if(c&&this.hasUntypedArgument){const E=le(_),P=le(b);if(E.kind!==P.kind||E.kind!=="string"&&E.kind!=="number")throw new we(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${E.kind}, ${P.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const E=le(_),P=le(b);if(E.kind!=="string"||P.kind!=="string")return e(g,_,b)}return this.collator?o(g,_,b,this.collator.evaluate(g)):e(g,_,b)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[n];return this.eachChild(_=>{g.push(_.serialize())}),g}}}const _d=Io("==",function(n,e,o){return e===o},ou),yd=Io("!=",function(n,e,o){return e!==o},function(n,e,o,c){return!ou(0,e,o,c)}),vd=Io("<",function(n,e,o){return e<o},function(n,e,o,c){return c.compare(e,o)<0}),xd=Io(">",function(n,e,o){return e>o},function(n,e,o,c){return c.compare(e,o)>0}),bd=Io("<=",function(n,e,o){return e<=o},function(n,e,o,c){return c.compare(e,o)<=0}),wd=Io(">=",function(n,e,o){return e>=o},function(n,e,o,c){return c.compare(e,o)>=0});class Al{constructor(e,o,c,d,g){this.type=$t,this.number=e,this.locale=o,this.currency=c,this.minFractionDigits=d,this.maxFractionDigits=g}static parse(e,o){if(e.length!==3)return o.error("Expected two arguments.");const c=o.parse(e[1],1,Ke);if(!c)return null;const d=e[2];if(typeof d!="object"||Array.isArray(d))return o.error("NumberFormat options argument must be an object.");let g=null;if(d.locale&&(g=o.parse(d.locale,1,$t),!g))return null;let _=null;if(d.currency&&(_=o.parse(d.currency,1,$t),!_))return null;let b=null;if(d["min-fraction-digits"]&&(b=o.parse(d["min-fraction-digits"],1,Ke),!b))return null;let E=null;return d["max-fraction-digits"]&&(E=o.parse(d["max-fraction-digits"],1,Ke),!E)?null:new Al(c,g,_,b,E)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Pl{constructor(e){this.type=Ke,this.input=e}static parse(e,o){if(e.length!==2)return o.error(`Expected 1 argument, but found ${e.length-1} instead.`);const c=o.parse(e[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Sr(c.type)} instead.`):new Pl(c):null}evaluate(e){const o=this.input.evaluate(e);if(typeof o=="string"||Array.isArray(o))return o.length;throw new we(`Expected value to be of type string or array, but found ${Sr(le(o))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(o=>{e.push(o.serialize())}),e}}const Ao={"==":_d,"!=":yd,">":xd,"<":vd,">=":wd,"<=":bd,array:ht,at:El,boolean:ht,case:Il,coalesce:Ys,collator:Zr,format:Et,image:Pt,in:Sl,"index-of":ea,interpolate:jn,"interpolate-hcl":jn,"interpolate-lab":jn,length:Pl,let:Qs,literal:Ne,match:Tl,number:ht,"number-format":Al,object:ht,slice:ta,step:us,string:ht,"to-boolean":Qt,"to-color":Qt,"to-number":Qt,"to-string":Qt,var:Ws,within:Yi};function su(n,[e,o,c,d]){e=e.evaluate(n),o=o.evaluate(n),c=c.evaluate(n);const g=d?d.evaluate(n):1,_=re(e,o,c,g);if(_)throw new we(_);return new M(e/255*g,o/255*g,c/255*g,g)}function au(n,e){return n in e}function Cl(n,e){const o=e[n];return o===void 0?null:o}function Qi(n){return{type:n}}function lu(n){return{result:"success",value:n}}function eo(n){return{result:"error",value:n}}function Po(n){return n["property-type"]==="data-driven"||n["property-type"]==="cross-faded-data-driven"}function cu(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function kl(n){return!!n.expression&&n.expression.interpolated}function Nt(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function ra(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function _r(n){return n}function na(n,e){const o=e.type==="color",c=n.stops&&typeof n.stops[0][0]=="object",d=c||!(c||n.property!==void 0),g=n.type||(kl(e)?"exponential":"interval");if(o&&((n=Hr({},n)).stops&&(n.stops=n.stops.map(P=>[P[0],M.parse(P[1])])),n.default=M.parse(n.default?n.default:e.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!nu[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let _,b,E;if(g==="exponential")_=Dl;else if(g==="interval")_=ia;else if(g==="categorical"){_=Ur,b=Object.create(null);for(const P of n.stops)b[P[0]]=P[1];E=typeof n.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);_=Ed}if(c){const P={},z=[];for(let j=0;j<n.stops.length;j++){const V=n.stops[j],Q=V[0].zoom;P[Q]===void 0&&(P[Q]={zoom:Q,type:n.type,property:n.property,default:n.default,stops:[]},z.push(Q)),P[Q].stops.push([V[0].value,V[1]])}const L=[];for(const j of z)L.push([P[j].zoom,na(P[j],e)]);const B={name:"linear"};return{kind:"composite",interpolationType:B,interpolationFactor:jn.interpolationFactor.bind(void 0,B),zoomStops:L.map(j=>j[0]),evaluate:({zoom:j},V)=>Dl({stops:L,base:n.base},e,j).evaluate(j,V)}}if(d){const P=g==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:jn.interpolationFactor.bind(void 0,P),zoomStops:n.stops.map(z=>z[0]),evaluate:({zoom:z})=>_(n,e,z,b,E)}}return{kind:"source",evaluate(P,z){const L=z&&z.properties?z.properties[n.property]:void 0;return L===void 0?Cr(n.default,e.default):_(n,e,L,b,E)}}}function Cr(n,e,o){return n!==void 0?n:e!==void 0?e:o!==void 0?o:void 0}function Ur(n,e,o,c,d){return Cr(typeof o===d?c[o]:void 0,n.default,e.default)}function ia(n,e,o){if(Nt(o)!=="number")return Cr(n.default,e.default);const c=n.stops.length;if(c===1||o<=n.stops[0][0])return n.stops[0][1];if(o>=n.stops[c-1][0])return n.stops[c-1][1];const d=Xs(n.stops.map(g=>g[0]),o);return n.stops[d][1]}function Dl(n,e,o){const c=n.base!==void 0?n.base:1;if(Nt(o)!=="number")return Cr(n.default,e.default);const d=n.stops.length;if(d===1||o<=n.stops[0][0])return n.stops[0][1];if(o>=n.stops[d-1][0])return n.stops[d-1][1];const g=Xs(n.stops.map(z=>z[0]),o),_=function(z,L,B,j){const V=j-B,Q=z-B;return V===0?0:L===1?Q/V:(Math.pow(L,Q)-1)/(Math.pow(L,V)-1)}(o,c,n.stops[g][0],n.stops[g+1][0]),b=n.stops[g][1],E=n.stops[g+1][1];let P=hs[e.type]||_r;if(n.colorSpace&&n.colorSpace!=="rgb"){const z=nu[n.colorSpace];P=(L,B)=>z.reverse(z.interpolate(z.forward(L),z.forward(B),_))}return typeof b.evaluate=="function"?{evaluate(...z){const L=b.evaluate.apply(void 0,z),B=E.evaluate.apply(void 0,z);if(L!==void 0&&B!==void 0)return P(L,B,_)}}:P(b,E,_)}function Ed(n,e,o){return e.type==="color"?o=M.parse(o):e.type==="formatted"?o=X.fromString(o.toString()):e.type==="resolvedImage"?o=ae.fromString(o.toString()):Nt(o)===e.type||e.type==="enum"&&e.values[o]||(o=void 0),Cr(o,n.default,e.default)}Vt.register(Ao,{error:[{kind:"error"},[$t],(n,[e])=>{throw new we(e.evaluate(n))}],typeof:[$t,[Ht],(n,[e])=>Sr(le(e.evaluate(n)))],"to-rgba":[Kr(Ke,4),[Tn],(n,[e])=>e.evaluate(n).toArray()],rgb:[Tn,[Ke,Ke,Ke],su],rgba:[Tn,[Ke,Ke,Ke,Ke],su],has:{type:qt,overloads:[[[$t],(n,[e])=>au(e.evaluate(n),n.properties())],[[$t,oi],(n,[e,o])=>au(e.evaluate(n),o.evaluate(n))]]},get:{type:Ht,overloads:[[[$t],(n,[e])=>Cl(e.evaluate(n),n.properties())],[[$t,oi],(n,[e,o])=>Cl(e.evaluate(n),o.evaluate(n))]]},"feature-state":[Ht,[$t],(n,[e])=>Cl(e.evaluate(n),n.featureState||{})],properties:[oi,[],n=>n.properties()],"geometry-type":[$t,[],n=>n.geometryType()],id:[Ht,[],n=>n.id()],zoom:[Ke,[],n=>n.globals.zoom],"heatmap-density":[Ke,[],n=>n.globals.heatmapDensity||0],"line-progress":[Ke,[],n=>n.globals.lineProgress||0],accumulated:[Ht,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Ke,Qi(Ke),(n,e)=>{let o=0;for(const c of e)o+=c.evaluate(n);return o}],"*":[Ke,Qi(Ke),(n,e)=>{let o=1;for(const c of e)o*=c.evaluate(n);return o}],"-":{type:Ke,overloads:[[[Ke,Ke],(n,[e,o])=>e.evaluate(n)-o.evaluate(n)],[[Ke],(n,[e])=>-e.evaluate(n)]]},"/":[Ke,[Ke,Ke],(n,[e,o])=>e.evaluate(n)/o.evaluate(n)],"%":[Ke,[Ke,Ke],(n,[e,o])=>e.evaluate(n)%o.evaluate(n)],ln2:[Ke,[],()=>Math.LN2],pi:[Ke,[],()=>Math.PI],e:[Ke,[],()=>Math.E],"^":[Ke,[Ke,Ke],(n,[e,o])=>Math.pow(e.evaluate(n),o.evaluate(n))],sqrt:[Ke,[Ke],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Ke,[Ke],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Ke,[Ke],(n,[e])=>Math.log(e.evaluate(n))],log2:[Ke,[Ke],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Ke,[Ke],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Ke,[Ke],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Ke,[Ke],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Ke,[Ke],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Ke,[Ke],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Ke,[Ke],(n,[e])=>Math.atan(e.evaluate(n))],min:[Ke,Qi(Ke),(n,e)=>Math.min(...e.map(o=>o.evaluate(n)))],max:[Ke,Qi(Ke),(n,e)=>Math.max(...e.map(o=>o.evaluate(n)))],abs:[Ke,[Ke],(n,[e])=>Math.abs(e.evaluate(n))],round:[Ke,[Ke],(n,[e])=>{const o=e.evaluate(n);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ke,[Ke],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Ke,[Ke],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[qt,[$t,Ht],(n,[e,o])=>n.properties()[e.value]===o.value],"filter-id-==":[qt,[Ht],(n,[e])=>n.id()===e.value],"filter-type-==":[qt,[$t],(n,[e])=>n.geometryType()===e.value],"filter-<":[qt,[$t,Ht],(n,[e,o])=>{const c=n.properties()[e.value],d=o.value;return typeof c==typeof d&&c<d}],"filter-id-<":[qt,[Ht],(n,[e])=>{const o=n.id(),c=e.value;return typeof o==typeof c&&o<c}],"filter->":[qt,[$t,Ht],(n,[e,o])=>{const c=n.properties()[e.value],d=o.value;return typeof c==typeof d&&c>d}],"filter-id->":[qt,[Ht],(n,[e])=>{const o=n.id(),c=e.value;return typeof o==typeof c&&o>c}],"filter-<=":[qt,[$t,Ht],(n,[e,o])=>{const c=n.properties()[e.value],d=o.value;return typeof c==typeof d&&c<=d}],"filter-id-<=":[qt,[Ht],(n,[e])=>{const o=n.id(),c=e.value;return typeof o==typeof c&&o<=c}],"filter->=":[qt,[$t,Ht],(n,[e,o])=>{const c=n.properties()[e.value],d=o.value;return typeof c==typeof d&&c>=d}],"filter-id->=":[qt,[Ht],(n,[e])=>{const o=n.id(),c=e.value;return typeof o==typeof c&&o>=c}],"filter-has":[qt,[Ht],(n,[e])=>e.value in n.properties()],"filter-has-id":[qt,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[qt,[Kr($t)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[qt,[Kr(Ht)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[qt,[$t,Kr(Ht)],(n,[e,o])=>o.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[qt,[$t,Kr(Ht)],(n,[e,o])=>function(c,d,g,_){for(;g<=_;){const b=g+_>>1;if(d[b]===c)return!0;d[b]>c?_=b-1:g=b+1}return!1}(n.properties()[e.value],o.value,0,o.value.length-1)],all:{type:qt,overloads:[[[qt,qt],(n,[e,o])=>e.evaluate(n)&&o.evaluate(n)],[Qi(qt),(n,e)=>{for(const o of e)if(!o.evaluate(n))return!1;return!0}]]},any:{type:qt,overloads:[[[qt,qt],(n,[e,o])=>e.evaluate(n)||o.evaluate(n)],[Qi(qt),(n,e)=>{for(const o of e)if(o.evaluate(n))return!0;return!1}]]},"!":[qt,[qt],(n,[e])=>!e.evaluate(n)],"is-supported-script":[qt,[$t],(n,[e])=>{const o=n.globals&&n.globals.isSupportedScript;return!o||o(e.evaluate(n))}],upcase:[$t,[$t],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[$t,[$t],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[$t,Qi(Ht),(n,e)=>e.map(o=>Ie(o.evaluate(n))).join("")],"resolved-locale":[$t,[Xi],(n,[e])=>e.evaluate(n).resolvedLocale()]});class zl{constructor(e,o){this.expression=e,this._warningHistory={},this._evaluator=new Gt,this._defaultValue=o?function(c){return c.type==="color"&&ra(c.default)?new M(0,0,0,0):c.type==="color"?M.parse(c.default)||null:c.default===void 0?null:c.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(e,o,c,d,g,_){return this._evaluator.globals=e,this._evaluator.feature=o,this._evaluator.featureState=c,this._evaluator.canonical=d,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(e,o,c,d,g,_){this._evaluator.globals=e,this._evaluator.feature=o||null,this._evaluator.featureState=c||null,this._evaluator.canonical=d,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=_||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new we(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console!="undefined"&&console.warn(b.message)),this._defaultValue}}}function oa(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Ao}function sa(n,e){const o=new Ks(Ao,[],e?function(d){const g={color:Tn,string:$t,number:Ke,enum:$t,boolean:qt,formatted:si,resolvedImage:Di};return d.type==="array"?Kr(g[d.value]||Ht,d.length):g[d.type]}(e):void 0),c=o.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?lu(new zl(c,e)):eo(o.errors)}class aa{constructor(e,o){this.kind=e,this._styleExpression=o,this.isStateDependent=e!=="constant"&&!To(o.expression)}evaluateWithoutErrorHandling(e,o,c,d,g,_){return this._styleExpression.evaluateWithoutErrorHandling(e,o,c,d,g,_)}evaluate(e,o,c,d,g,_){return this._styleExpression.evaluate(e,o,c,d,g,_)}}class la{constructor(e,o,c,d){this.kind=e,this.zoomStops=c,this._styleExpression=o,this.isStateDependent=e!=="camera"&&!To(o.expression),this.interpolationType=d}evaluateWithoutErrorHandling(e,o,c,d,g,_){return this._styleExpression.evaluateWithoutErrorHandling(e,o,c,d,g,_)}evaluate(e,o,c,d,g,_){return this._styleExpression.evaluate(e,o,c,d,g,_)}interpolationFactor(e,o,c){return this.interpolationType?jn.interpolationFactor(this.interpolationType,e,o,c):0}}function Ml(n,e){const o=sa(n,e);if(o.result==="error")return o;const c=o.value.expression,d=Zs(c);if(!d&&!Po(e))return eo([new Gr("","data expressions not supported")]);const g=ls(c,["zoom"]);if(!g&&!cu(e))return eo([new Gr("","zoom expressions not supported")]);const _=ca(c);return _||g?_ instanceof Gr?eo([_]):_ instanceof jn&&!kl(e)?eo([new Gr("",'"interpolate" expressions cannot be used with this property')]):lu(_?new la(d?"camera":"composite",o.value,_.labels,_ instanceof jn?_.interpolation:void 0):new aa(d?"constant":"source",o.value)):eo([new Gr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Co{constructor(e,o){this._parameters=e,this._specification=o,Hr(this,na(this._parameters,this._specification))}static deserialize(e){return new Co(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ca(n){let e=null;if(n instanceof Qs)e=ca(n.result);else if(n instanceof Ys){for(const o of n.args)if(e=ca(o),e)break}else(n instanceof us||n instanceof jn)&&n.input instanceof Vt&&n.input.name==="zoom"&&(e=n);return e instanceof Gr||n.eachChild(o=>{const c=ca(o);c instanceof Gr?e=c:!e&&c?e=new Gr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&c&&e!==c&&(e=new Gr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function ci(n){const e=n.key,o=n.value,c=n.valueSpec||{},d=n.objectElementValidators||{},g=n.style,_=n.styleSpec;let b=[];const E=Nt(o);if(E!=="object")return[new $e(e,o,`object expected, ${E} found`)];for(const P in o){const z=P.split(".")[0],L=c[z]||c["*"];let B;if(d[z])B=d[z];else if(c[z])B=Mn;else if(d["*"])B=d["*"];else{if(!c["*"]){b.push(new $e(e,o[P],`unknown property "${P}"`));continue}B=Mn}b=b.concat(B({key:(e&&`${e}.`)+P,value:o[P],valueSpec:L,style:g,styleSpec:_,object:o,objectKey:P},o))}for(const P in c)d[P]||c[P].required&&c[P].default===void 0&&o[P]===void 0&&b.push(new $e(e,o,`missing required property "${P}"`));return b}function uu(n){const e=n.value,o=n.valueSpec,c=n.style,d=n.styleSpec,g=n.key,_=n.arrayElementValidator||Mn;if(Nt(e)!=="array")return[new $e(g,e,`array expected, ${Nt(e)} found`)];if(o.length&&e.length!==o.length)return[new $e(g,e,`array length ${o.length} expected, length ${e.length} found`)];if(o["min-length"]&&e.length<o["min-length"])return[new $e(g,e,`array length at least ${o["min-length"]} expected, length ${e.length} found`)];let b={type:o.value,values:o.values};d.$version<7&&(b.function=o.function),Nt(o.value)==="object"&&(b=o.value);let E=[];for(let P=0;P<e.length;P++)E=E.concat(_({array:e,arrayIndex:P,value:e[P],valueSpec:b,style:c,styleSpec:d,key:`${g}[${P}]`}));return E}function hu(n){const e=n.key,o=n.value,c=n.valueSpec;let d=Nt(o);return d==="number"&&o!=o&&(d="NaN"),d!=="number"?[new $e(e,o,`number expected, ${d} found`)]:"minimum"in c&&o<c.minimum?[new $e(e,o,`${o} is less than the minimum value ${c.minimum}`)]:"maximum"in c&&o>c.maximum?[new $e(e,o,`${o} is greater than the maximum value ${c.maximum}`)]:[]}function du(n){const e=n.valueSpec,o=ir(n.value.type);let c,d,g,_={};const b=o!=="categorical"&&n.value.property===void 0,E=!b,P=Nt(n.value.stops)==="array"&&Nt(n.value.stops[0])==="array"&&Nt(n.value.stops[0][0])==="object",z=ci({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(j){if(o==="identity")return[new $e(j.key,j.value,'identity function may not have a "stops" property')];let V=[];const Q=j.value;return V=V.concat(uu({key:j.key,value:Q,valueSpec:j.valueSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:L})),Nt(Q)==="array"&&Q.length===0&&V.push(new $e(j.key,Q,"array must have at least one stop")),V},default:function(j){return Mn({key:j.key,value:j.value,valueSpec:e,style:j.style,styleSpec:j.styleSpec})}}});return o==="identity"&&b&&z.push(new $e(n.key,n.value,'missing required property "property"')),o==="identity"||n.value.stops||z.push(new $e(n.key,n.value,'missing required property "stops"')),o==="exponential"&&n.valueSpec.expression&&!kl(n.valueSpec)&&z.push(new $e(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(E&&!Po(n.valueSpec)?z.push(new $e(n.key,n.value,"property functions not supported")):b&&!cu(n.valueSpec)&&z.push(new $e(n.key,n.value,"zoom functions not supported"))),o!=="categorical"&&!P||n.value.property!==void 0||z.push(new $e(n.key,n.value,'"property" property is required')),z;function L(j){let V=[];const Q=j.value,ee=j.key;if(Nt(Q)!=="array")return[new $e(ee,Q,`array expected, ${Nt(Q)} found`)];if(Q.length!==2)return[new $e(ee,Q,`array length 2 expected, length ${Q.length} found`)];if(P){if(Nt(Q[0])!=="object")return[new $e(ee,Q,`object expected, ${Nt(Q[0])} found`)];if(Q[0].zoom===void 0)return[new $e(ee,Q,"object stop key must have zoom")];if(Q[0].value===void 0)return[new $e(ee,Q,"object stop key must have value")];if(g&&g>ir(Q[0].zoom))return[new $e(ee,Q[0].zoom,"stop zoom values must appear in ascending order")];ir(Q[0].zoom)!==g&&(g=ir(Q[0].zoom),d=void 0,_={}),V=V.concat(ci({key:`${ee}[0]`,value:Q[0],valueSpec:{zoom:{}},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:hu,value:B}}))}else V=V.concat(B({key:`${ee}[0]`,value:Q[0],valueSpec:{},style:j.style,styleSpec:j.styleSpec},Q));return oa(Sn(Q[1]))?V.concat([new $e(`${ee}[1]`,Q[1],"expressions are not allowed in function stops.")]):V.concat(Mn({key:`${ee}[1]`,value:Q[1],valueSpec:e,style:j.style,styleSpec:j.styleSpec}))}function B(j,V){const Q=Nt(j.value),ee=ir(j.value),fe=j.value!==null?j.value:V;if(c){if(Q!==c)return[new $e(j.key,fe,`${Q} stop domain type must match previous stop domain type ${c}`)]}else c=Q;if(Q!=="number"&&Q!=="string"&&Q!=="boolean")return[new $e(j.key,fe,"stop domain value must be a number, string, or boolean")];if(Q!=="number"&&o!=="categorical"){let be=`number expected, ${Q} found`;return Po(e)&&o===void 0&&(be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new $e(j.key,fe,be)]}return o!=="categorical"||Q!=="number"||isFinite(ee)&&Math.floor(ee)===ee?o!=="categorical"&&Q==="number"&&d!==void 0&&ee<d?[new $e(j.key,fe,"stop domain values must appear in ascending order")]:(d=ee,o==="categorical"&&ee in _?[new $e(j.key,fe,"stop domain values must be unique")]:(_[ee]=!0,[])):[new $e(j.key,fe,`integer expected, found ${ee}`)]}}function ko(n){const e=(n.expressionContext==="property"?Ml:sa)(Sn(n.value),n.valueSpec);if(e.result==="error")return e.value.map(c=>new $e(`${n.key}${c.key}`,n.value,c.message));const o=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!o.outputDefined())return[new $e(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!To(o))return[new $e(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter"&&!To(o))return[new $e(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!ls(o,["zoom","feature-state"]))return[new $e(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Zs(o))return[new $e(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ua(n){const e=n.key,o=n.value,c=n.valueSpec,d=[];return Array.isArray(c.values)?c.values.indexOf(ir(o))===-1&&d.push(new $e(e,o,`expected one of [${c.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(c.values).indexOf(ir(o))===-1&&d.push(new $e(e,o,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(o)} found`)),d}function Ol(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!Ol(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const pu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ha(n){if(n==null)return{filter:()=>!0,needGeometry:!1};Ol(n)||(n=fs(n));const e=sa(n,pu);if(e.result==="error")throw new Error(e.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,c,d)=>e.value.evaluate(o,c,{},d),needGeometry:fu(n)}}function da(n,e){return n<e?-1:n>e?1:0}function fu(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let e=1;e<n.length;e++)if(fu(n[e]))return!0;return!1}function fs(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?Ll(n[1],n[2],"=="):e==="!="?Do(Ll(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Ll(n[1],n[2],e):e==="any"?(o=n.slice(1),["any"].concat(o.map(fs))):e==="all"?["all"].concat(n.slice(1).map(fs)):e==="none"?["all"].concat(n.slice(1).map(fs).map(Do)):e==="in"?pa(n[1],n.slice(2)):e==="!in"?Do(pa(n[1],n.slice(2))):e==="has"?fa(n[1]):e==="!has"?Do(fa(n[1])):e!=="within"||n;var o}function Ll(n,e,o){switch(n){case"$type":return[`filter-type-${o}`,e];case"$id":return[`filter-id-${o}`,e];default:return[`filter-${o}`,n,e]}}function pa(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(o=>typeof o!=typeof e[0])?["filter-in-large",n,["literal",e.sort(da)]]:["filter-in-small",n,["literal",e]]}}function fa(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Do(n){return["!",n]}function ms(n){return Ol(Sn(n.value))?ko(Hr({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):mu(n)}function mu(n){const e=n.value,o=n.key;if(Nt(e)!=="array")return[new $e(o,e,`array expected, ${Nt(e)} found`)];const c=n.styleSpec;let d,g=[];if(e.length<1)return[new $e(o,e,"filter array must have at least 1 element")];switch(g=g.concat(ua({key:`${o}[0]`,value:e[0],valueSpec:c.filter_operator,style:n.style,styleSpec:n.styleSpec})),ir(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&ir(e[1])==="$type"&&g.push(new $e(o,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&g.push(new $e(o,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(d=Nt(e[1]),d!=="string"&&g.push(new $e(`${o}[1]`,e[1],`string expected, ${d} found`)));for(let _=2;_<e.length;_++)d=Nt(e[_]),ir(e[1])==="$type"?g=g.concat(ua({key:`${o}[${_}]`,value:e[_],valueSpec:c.geometry_type,style:n.style,styleSpec:n.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&g.push(new $e(`${o}[${_}]`,e[_],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let _=1;_<e.length;_++)g=g.concat(mu({key:`${o}[${_}]`,value:e[_],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":d=Nt(e[1]),e.length!==2?g.push(new $e(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):d!=="string"&&g.push(new $e(`${o}[1]`,e[1],`string expected, ${d} found`));break;case"within":d=Nt(e[1]),e.length!==2?g.push(new $e(o,e,`filter array for "${e[0]}" operator must have 2 elements`)):d!=="object"&&g.push(new $e(`${o}[1]`,e[1],`object expected, ${d} found`))}return g}function gs(n,e){const o=n.key,c=n.style,d=n.styleSpec,g=n.value,_=n.objectKey,b=d[`${e}_${n.layerType}`];if(!b)return[];const E=_.match(/^(.*)-transition$/);if(e==="paint"&&E&&b[E[1]]&&b[E[1]].transition)return Mn({key:o,value:g,valueSpec:d.transition,style:c,styleSpec:d});const P=n.valueSpec||b[_];if(!P)return[new $e(o,g,`unknown property "${_}"`)];let z;if(Nt(g)==="string"&&Po(P)&&!P.tokens&&(z=/^{([^}]+)}$/.exec(g)))return[new $e(o,g,`"${_}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];const L=[];return n.layerType==="symbol"&&(_==="text-field"&&c&&!c.glyphs&&L.push(new $e(o,g,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&ra(Sn(g))&&ir(g.type)==="identity"&&L.push(new $e(o,g,'"text-font" does not support identity functions'))),L.concat(Mn({key:n.key,value:g,valueSpec:P,style:c,styleSpec:d,expressionContext:"property",propertyType:e,propertyKey:_}))}function gu(n){return gs(n,"paint")}function _u(n){return gs(n,"layout")}function yu(n){let e=[];const o=n.value,c=n.key,d=n.style,g=n.styleSpec;o.type||o.ref||e.push(new $e(c,o,'either "type" or "ref" is required'));let _=ir(o.type);const b=ir(o.ref);if(o.id){const E=ir(o.id);for(let P=0;P<n.arrayIndex;P++){const z=d.layers[P];ir(z.id)===E&&e.push(new $e(c,o.id,`duplicate layer id "${o.id}", previously used at line ${z.id.__line__}`))}}if("ref"in o){let E;["type","source","source-layer","filter","layout"].forEach(P=>{P in o&&e.push(new $e(c,o[P],`"${P}" is prohibited for ref layers`))}),d.layers.forEach(P=>{ir(P.id)===b&&(E=P)}),E?E.ref?e.push(new $e(c,o.ref,"ref cannot reference another ref layer")):_=ir(E.type):e.push(new $e(c,o.ref,`ref layer "${b}" not found`))}else if(_!=="background")if(o.source){const E=d.sources&&d.sources[o.source],P=E&&ir(E.type);E?P==="vector"&&_==="raster"?e.push(new $e(c,o.source,`layer "${o.id}" requires a raster source`)):P==="raster"&&_!=="raster"?e.push(new $e(c,o.source,`layer "${o.id}" requires a vector source`)):P!=="vector"||o["source-layer"]?P==="raster-dem"&&_!=="hillshade"?e.push(new $e(c,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!o.paint||!o.paint["line-gradient"]||P==="geojson"&&E.lineMetrics||e.push(new $e(c,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new $e(c,o,`layer "${o.id}" must specify a "source-layer"`)):e.push(new $e(c,o.source,`source "${o.source}" not found`))}else e.push(new $e(c,o,'missing required property "source"'));return e=e.concat(ci({key:c,value:o,valueSpec:g.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Mn({key:`${c}.type`,value:o.type,valueSpec:g.layer.type,style:n.style,styleSpec:n.styleSpec,object:o,objectKey:"type"}),filter:ms,layout:E=>ci({layer:o,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":P=>_u(Hr({layerType:_},P))}}),paint:E=>ci({layer:o,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":P=>gu(Hr({layerType:_},P))}})}})),e}function zo(n){const e=n.value,o=n.key,c=Nt(e);return c!=="string"?[new $e(o,e,`string expected, ${c} found`)]:[]}const vu={promoteId:function({key:n,value:e}){if(Nt(e)==="string")return zo({key:n,value:e});{const o=[];for(const c in e)o.push(...zo({key:`${n}.${c}`,value:e[c]}));return o}}};function _s(n){const e=n.value,o=n.key,c=n.styleSpec,d=n.style;if(!e.type)return[new $e(o,e,'"type" is required')];const g=ir(e.type);let _;switch(g){case"vector":case"raster":case"raster-dem":return _=ci({key:o,value:e,valueSpec:c[`source_${g.replace("-","_")}`],style:n.style,styleSpec:c,objectElementValidators:vu}),_;case"geojson":if(_=ci({key:o,value:e,valueSpec:c.source_geojson,style:d,styleSpec:c,objectElementValidators:vu}),e.cluster)for(const b in e.clusterProperties){const[E,P]=e.clusterProperties[b],z=typeof E=="string"?[E,["accumulated"],["get",b]]:E;_.push(...ko({key:`${o}.${b}.map`,value:P,expressionContext:"cluster-map"})),_.push(...ko({key:`${o}.${b}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return _;case"video":return ci({key:o,value:e,valueSpec:c.source_video,style:d,styleSpec:c});case"image":return ci({key:o,value:e,valueSpec:c.source_image,style:d,styleSpec:c});case"canvas":return[new $e(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ua({key:`${o}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:d,styleSpec:c})}}function ys(n){const e=n.value,o=n.styleSpec,c=o.light,d=n.style;let g=[];const _=Nt(e);if(e===void 0)return g;if(_!=="object")return g=g.concat([new $e("light",e,`object expected, ${_} found`)]),g;for(const b in e){const E=b.match(/^(.*)-transition$/);g=g.concat(E&&c[E[1]]&&c[E[1]].transition?Mn({key:b,value:e[b],valueSpec:o.transition,style:d,styleSpec:o}):c[b]?Mn({key:b,value:e[b],valueSpec:c[b],style:d,styleSpec:o}):[new $e(b,e[b],`unknown property "${b}"`)])}return g}const Vn={"*":()=>[],array:uu,boolean:function(n){const e=n.value,o=n.key,c=Nt(e);return c!=="boolean"?[new $e(o,e,`boolean expected, ${c} found`)]:[]},number:hu,color:function(n){const e=n.key,o=n.value,c=Nt(o);return c!=="string"?[new $e(e,o,`color expected, ${c} found`)]:li(o)===null?[new $e(e,o,`color expected, "${o}" found`)]:[]},constants:ur,enum:ua,filter:ms,function:du,layer:yu,object:ci,source:_s,light:ys,string:zo,formatted:function(n){return zo(n).length===0?[]:ko(n)},resolvedImage:function(n){return zo(n).length===0?[]:ko(n)}};function Mn(n){const e=n.value,o=n.valueSpec,c=n.styleSpec;return o.expression&&ra(ir(e))?du(n):o.expression&&oa(Sn(e))?ko(n):o.type&&Vn[o.type]?Vn[o.type](n):ci(Hr({},n,{valueSpec:o.type?c[o.type]:o}))}function Sd(n){const e=n.value,o=n.key,c=zo(n);return c.length||(e.indexOf("{fontstack}")===-1&&c.push(new $e(o,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&c.push(new $e(o,e,'"glyphs" url must include a "{range}" token'))),c}function to(n,e=ve){let o=[];return o=o.concat(Mn({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,objectElementValidators:{glyphs:Sd,"*":()=>[]}})),n.constants&&(o=o.concat(ur({key:"constants",value:n.constants,style:n,styleSpec:e}))),xu(o)}function xu(n){return[].concat(n).sort((e,o)=>e.line-o.line)}function Mo(n){return function(...e){return xu(n.apply(this,e))}}to.source=Mo(_s),to.light=Mo(ys),to.layer=Mo(yu),to.filter=Mo(ms),to.paintProperty=Mo(gu),to.layoutProperty=Mo(_u);const ro=to,Td=ro.light,Rl=ro.paintProperty,Id=ro.layoutProperty;function bu(n,e){let o=!1;if(e&&e.length)for(const c of e)n.fire(new At(new Error(c.message))),o=!0;return o}class no{constructor(e,o,c){const d=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const _=new Int32Array(this.arrayBuffer);e=_[0],this.d=(o=_[1])+2*(c=_[2]);for(let E=0;E<this.d*this.d;E++){const P=_[3+E],z=_[3+E+1];d.push(P===z?null:_.subarray(P,z))}const b=_[3+d.length+1];this.keys=_.subarray(_[3+d.length],b),this.bboxes=_.subarray(b),this.insert=this._insertReadonly}else{this.d=o+2*c;for(let _=0;_<this.d*this.d;_++)d.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=e,this.padding=c,this.scale=o/e,this.uid=0;const g=c/o*e;this.min=-g,this.max=e+g}insert(e,o,c,d,g){this._forEachCell(o,c,d,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,o,c,d,g,_){this.cells[g].push(_)}query(e,o,c,d,g){const _=this.min,b=this.max;if(e<=_&&o<=_&&b<=c&&b<=d&&!g)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(e,o,c,d,this._queryCell,E,{},g),E}}_queryCell(e,o,c,d,g,_,b,E){const P=this.cells[g];if(P!==null){const z=this.keys,L=this.bboxes;for(let B=0;B<P.length;B++){const j=P[B];if(b[j]===void 0){const V=4*j;(E?E(L[V+0],L[V+1],L[V+2],L[V+3]):e<=L[V+2]&&o<=L[V+3]&&c>=L[V+0]&&d>=L[V+1])?(b[j]=!0,_.push(z[j])):b[j]=!1}}}}_forEachCell(e,o,c,d,g,_,b,E){const P=this._convertToCellCoord(e),z=this._convertToCellCoord(o),L=this._convertToCellCoord(c),B=this._convertToCellCoord(d);for(let j=P;j<=L;j++)for(let V=z;V<=B;V++){const Q=this.d*V+j;if((!E||E(this._convertFromCellCoord(j),this._convertFromCellCoord(V),this._convertFromCellCoord(j+1),this._convertFromCellCoord(V+1)))&&g.call(this,e,o,c,d,Q,_,b,E))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,o=3+this.cells.length+1+1;let c=0;for(let _=0;_<this.cells.length;_++)c+=this.cells[_].length;const d=new Int32Array(o+c+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;let g=o;for(let _=0;_<e.length;_++){const b=e[_];d[3+_]=g,d.set(b,g),g+=b.length}return d[3+e.length]=g,d.set(this.keys,g),g+=this.keys.length,d[3+e.length+1]=g,d.set(this.bboxes,g),g+=this.bboxes.length,d.buffer}static serialize(e,o){const c=e.toArrayBuffer();return o&&o.push(c),{buffer:c}}static deserialize(e){return new no(e.buffer)}}const Oo={};function mt(n,e,o={}){Object.defineProperty(e,"_classRegistryKey",{value:n,writeable:!1}),Oo[n]={klass:e,omit:o.omit||[],shallow:o.shallow||[]}}mt("Object",Object),mt("TransferableGridIndex",no),mt("Color",M),mt("Error",Error),mt("AJAXError",Z),mt("ResolvedImage",ae),mt("StylePropertyFunction",Co),mt("StyleExpression",zl,{omit:["_evaluator"]}),mt("ZoomDependentExpression",la),mt("ZoomConstantExpression",aa),mt("CompoundExpression",Vt,{omit:["_evaluate"]});for(const n in Ao)Ao[n]._classRegistryKey||mt(`Expression_${n}`,Ao[n]);function Bl(n){return n&&typeof ArrayBuffer!="undefined"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function vs(n,e){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||n instanceof Blob)return n;if(Bl(n)||St(n))return e&&e.push(n),n;if(ArrayBuffer.isView(n)){const o=n;return e&&e.push(o.buffer),o}if(n instanceof ImageData)return e&&e.push(n.data.buffer),n;if(Array.isArray(n)){const o=[];for(const c of n)o.push(vs(c,e));return o}if(typeof n=="object"){const o=n.constructor,c=o._classRegistryKey;if(!c)throw new Error("can't serialize object of unregistered class");const d=o.serialize?o.serialize(n,e):{};if(!o.serialize){for(const g in n){if(!n.hasOwnProperty(g)||Oo[c].omit.indexOf(g)>=0)continue;const _=n[g];d[g]=Oo[c].shallow.indexOf(g)>=0?_:vs(_,e)}n instanceof Error&&(d.message=n.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(d.$name=c),d}throw new Error("can't serialize object of type "+typeof n)}function io(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||n instanceof Blob||Bl(n)||St(n)||ArrayBuffer.isView(n)||n instanceof ImageData)return n;if(Array.isArray(n))return n.map(io);if(typeof n=="object"){const e=n.$name||"Object";if(!Oo[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:o}=Oo[e];if(!o)throw new Error(`can't deserialize unregistered class ${e}`);if(o.deserialize)return o.deserialize(n);const c=Object.create(o.prototype);for(const d of Object.keys(n)){if(d==="$name")continue;const g=n[d];c[d]=Oo[e].shallow.indexOf(d)>=0?g:io(g)}return c}throw new Error("can't deserialize object of type "+typeof n)}class xs{constructor(){this.first=!0}update(e,o){const c=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=o),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=c,!0))}}const it={"Latin-1 Supplement":n=>n>=128&&n<=255,Arabic:n=>n>=1536&&n<=1791,"Arabic Supplement":n=>n>=1872&&n<=1919,"Arabic Extended-A":n=>n>=2208&&n<=2303,"Hangul Jamo":n=>n>=4352&&n<=4607,"Unified Canadian Aboriginal Syllabics":n=>n>=5120&&n<=5759,Khmer:n=>n>=6016&&n<=6143,"Unified Canadian Aboriginal Syllabics Extended":n=>n>=6320&&n<=6399,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"CJK Radicals Supplement":n=>n>=11904&&n<=12031,"Kangxi Radicals":n=>n>=12032&&n<=12255,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Hiragana:n=>n>=12352&&n<=12447,Katakana:n=>n>=12448&&n<=12543,Bopomofo:n=>n>=12544&&n<=12591,"Hangul Compatibility Jamo":n=>n>=12592&&n<=12687,Kanbun:n=>n>=12688&&n<=12703,"Bopomofo Extended":n=>n>=12704&&n<=12735,"CJK Strokes":n=>n>=12736&&n<=12783,"Katakana Phonetic Extensions":n=>n>=12784&&n<=12799,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"CJK Unified Ideographs Extension A":n=>n>=13312&&n<=19903,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"CJK Unified Ideographs":n=>n>=19968&&n<=40959,"Yi Syllables":n=>n>=40960&&n<=42127,"Yi Radicals":n=>n>=42128&&n<=42191,"Hangul Jamo Extended-A":n=>n>=43360&&n<=43391,"Hangul Syllables":n=>n>=44032&&n<=55215,"Hangul Jamo Extended-B":n=>n>=55216&&n<=55295,"Private Use Area":n=>n>=57344&&n<=63743,"CJK Compatibility Ideographs":n=>n>=63744&&n<=64255,"Arabic Presentation Forms-A":n=>n>=64336&&n<=65023,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Arabic Presentation Forms-B":n=>n>=65136&&n<=65279,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function Fl(n){for(const e of n)if(bs(e.charCodeAt(0)))return!0;return!1}function wu(n){for(const e of n)if(!Ad(e.charCodeAt(0)))return!1;return!0}function Ad(n){return!(it.Arabic(n)||it["Arabic Supplement"](n)||it["Arabic Extended-A"](n)||it["Arabic Presentation Forms-A"](n)||it["Arabic Presentation Forms-B"](n))}function bs(n){return!(n!==746&&n!==747&&(n<4352||!(it["Bopomofo Extended"](n)||it.Bopomofo(n)||it["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||it["CJK Compatibility Ideographs"](n)||it["CJK Compatibility"](n)||it["CJK Radicals Supplement"](n)||it["CJK Strokes"](n)||!(!it["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||it["CJK Unified Ideographs Extension A"](n)||it["CJK Unified Ideographs"](n)||it["Enclosed CJK Letters and Months"](n)||it["Hangul Compatibility Jamo"](n)||it["Hangul Jamo Extended-A"](n)||it["Hangul Jamo Extended-B"](n)||it["Hangul Jamo"](n)||it["Hangul Syllables"](n)||it.Hiragana(n)||it["Ideographic Description Characters"](n)||it.Kanbun(n)||it["Kangxi Radicals"](n)||it["Katakana Phonetic Extensions"](n)||it.Katakana(n)&&n!==12540||!(!it["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!it["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||it["Unified Canadian Aboriginal Syllabics"](n)||it["Unified Canadian Aboriginal Syllabics Extended"](n)||it["Vertical Forms"](n)||it["Yijing Hexagram Symbols"](n)||it["Yi Syllables"](n)||it["Yi Radicals"](n))))}function Eu(n){return!(bs(n)||function(e){return!!(it["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||it["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||it["Letterlike Symbols"](e)||it["Number Forms"](e)||it["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||it["Control Pictures"](e)&&e!==9251||it["Optical Character Recognition"](e)||it["Enclosed Alphanumerics"](e)||it["Geometric Shapes"](e)||it["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||it["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||it["CJK Symbols and Punctuation"](e)||it.Katakana(e)||it["Private Use Area"](e)||it["CJK Compatibility Forms"](e)||it["Small Form Variants"](e)||it["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(n))}function Su(n){return n>=1424&&n<=2303||it["Arabic Presentation Forms-A"](n)||it["Arabic Presentation Forms-B"](n)}function Pd(n,e){return!(!e&&Su(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||it.Khmer(n))}function Cd(n){for(const e of n)if(Su(e.charCodeAt(0)))return!0;return!1}const ma="deferred",Nl="loading",jl="loaded";let Vl=null,On="unavailable",ji=null;const Tu=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(On="error"),Vl&&Vl(n)};function Ul(){Lo.fire(new _t("pluginStateChange",{pluginStatus:On,pluginURL:ji}))}const Lo=new jt,$l=function(){return On},ga=function(){if(On!==ma||!ji)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");On=Nl,Ul(),ji&&Re({url:ji},n=>{n?Tu(n):(On=jl,Ul())})},Qn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>On===jl||Qn.applyArabicShaping!=null,isLoading:()=>On===Nl,setState(n){On=n.pluginStatus,ji=n.pluginURL},isParsed:()=>Qn.applyArabicShaping!=null&&Qn.processBidirectionalText!=null&&Qn.processStyledBidirectionalText!=null,getPluginURL:()=>ji};class kr{constructor(e,o){this.zoom=e,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xs,this.transition={})}isSupportedScript(e){return function(o,c){for(const d of o)if(!Pd(d.charCodeAt(0),c))return!1;return!0}(e,Qn.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,o=e-Math.floor(e),c=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*o}}}class _a{constructor(e,o){this.property=e,this.value=o,this.expression=function(c,d){if(ra(c))return new Co(c,d);if(oa(c)){const g=Ml(c,d);if(g.result==="error")throw new Error(g.value.map(_=>`${_.key}: ${_.message}`).join(", "));return g.value}{let g=c;return typeof c=="string"&&d.type==="color"&&(g=M.parse(c)),{kind:"constant",evaluate:()=>g}}}(o===void 0?e.specification.default:o,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,o,c){return this.property.possiblyEvaluate(this,e,o,c)}}class ya{constructor(e){this.property=e,this.value=new _a(e,void 0)}transitioned(e,o){return new Iu(this.property,this.value,o,oe({},e.transition,this.transition),e.now)}untransitioned(){return new Iu(this.property,this.value,null,{},0)}}class ql{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return _e(this._values[e].value.value)}setValue(e,o){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ya(this._values[e].property)),this._values[e].value=new _a(this._values[e].property,o===null?void 0:_e(o))}getTransition(e){return _e(this._values[e].transition)}setTransition(e,o){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ya(this._values[e].property)),this._values[e].transition=_e(o)||void 0}serialize(){const e={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(e[o]=c);const d=this.getTransition(o);d!==void 0&&(e[`${o}-transition`]=d)}return e}transitioned(e,o){const c=new Au(this._properties);for(const d of Object.keys(this._values))c._values[d]=this._values[d].transitioned(e,o._values[d]);return c}untransitioned(){const e=new Au(this._properties);for(const o of Object.keys(this._values))e._values[o]=this._values[o].untransitioned();return e}}class Iu{constructor(e,o,c,d,g){this.property=e,this.value=o,this.begin=g+d.delay||0,this.end=this.begin+d.duration||0,e.specification.transition&&(d.delay||d.duration)&&(this.prior=c)}possiblyEvaluate(e,o,c){const d=e.now||0,g=this.value.possiblyEvaluate(e,o,c),_=this.prior;if(_){if(d>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(d<this.begin)return _.possiblyEvaluate(e,o,c);{const b=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(e,o,c),g,function(E){if(E<=0)return 0;if(E>=1)return 1;const P=E*E,z=P*E;return 4*(E<.5?z:3*(E-P)+z-.75)}(b))}}return g}}class Au{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,o,c){const d=new va(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(e,o,c);return d}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class kd{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return _e(this._values[e].value)}setValue(e,o){this._values[e]=new _a(this._values[e].property,o===null?void 0:_e(o))}serialize(){const e={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(e[o]=c)}return e}possiblyEvaluate(e,o,c){const d=new va(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(e,o,c);return d}}class xi{constructor(e,o,c){this.property=e,this.value=o,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,o,c,d){return this.property.evaluate(this.value,this.parameters,e,o,c,d)}}class va{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class wt{constructor(e){this.specification=e}possiblyEvaluate(e,o){return e.expression.evaluate(o)}interpolate(e,o,c){const d=hs[this.specification.type];return d?d(e,o,c):e}}class Ct{constructor(e,o){this.specification=e,this.overrides=o}possiblyEvaluate(e,o,c,d){return new xi(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(o,null,{},c,d)}:e.expression,o)}interpolate(e,o,c){if(e.value.kind!=="constant"||o.value.kind!=="constant")return e;if(e.value.value===void 0||o.value.value===void 0)return new xi(this,{kind:"constant",value:void 0},e.parameters);const d=hs[this.specification.type];return d?new xi(this,{kind:"constant",value:d(e.value.value,o.value.value,c)},e.parameters):e}evaluate(e,o,c,d,g,_){return e.kind==="constant"?e.value:e.evaluate(o,c,d,g,_)}}class ws extends Ct{possiblyEvaluate(e,o,c,d){if(e.value===void 0)return new xi(this,{kind:"constant",value:void 0},o);if(e.expression.kind==="constant"){const g=e.expression.evaluate(o,null,{},c,d),_=e.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,b=this._calculate(_,_,_,o);return new xi(this,{kind:"constant",value:b},o)}if(e.expression.kind==="camera"){const g=this._calculate(e.expression.evaluate({zoom:o.zoom-1}),e.expression.evaluate({zoom:o.zoom}),e.expression.evaluate({zoom:o.zoom+1}),o);return new xi(this,{kind:"constant",value:g},o)}return new xi(this,e.expression,o)}evaluate(e,o,c,d,g,_){if(e.kind==="source"){const b=e.evaluate(o,c,d,g,_);return this._calculate(b,b,b,o)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(o.zoom)-1},c,d),e.evaluate({zoom:Math.floor(o.zoom)},c,d),e.evaluate({zoom:Math.floor(o.zoom)+1},c,d),o):e.value}_calculate(e,o,c,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:c,to:o}}interpolate(e){return e}}class Es{constructor(e){this.specification=e}possiblyEvaluate(e,o,c,d){if(e.value!==void 0){if(e.expression.kind==="constant"){const g=e.expression.evaluate(o,null,{},c,d);return this._calculate(g,g,g,o)}return this._calculate(e.expression.evaluate(new kr(Math.floor(o.zoom-1),o)),e.expression.evaluate(new kr(Math.floor(o.zoom),o)),e.expression.evaluate(new kr(Math.floor(o.zoom+1),o)),o)}}_calculate(e,o,c,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:e,to:o}:{from:c,to:o}}interpolate(e){return e}}class Hl{constructor(e){this.specification=e}possiblyEvaluate(e,o,c,d){return!!e.expression.evaluate(o,null,{},c,d)}interpolate(){return!1}}class nn{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in e){const c=e[o];c.specification.overridable&&this.overridableProperties.push(o);const d=this.defaultPropertyValues[o]=new _a(c,void 0),g=this.defaultTransitionablePropertyValues[o]=new ya(c);this.defaultTransitioningPropertyValues[o]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=d.possiblyEvaluate({})}}}mt("DataDrivenProperty",Ct),mt("DataConstantProperty",wt),mt("CrossFadedDataDrivenProperty",ws),mt("CrossFadedProperty",Es),mt("ColorRampProperty",Hl);const oo="-transition";class Ln extends jt{constructor(e,o){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},e.type!=="custom"&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),o.layout&&(this._unevaluatedLayout=new kd(o.layout)),o.paint)){this._transitionablePaint=new ql(o.paint);for(const c in e.paint)this.setPaintProperty(c,e.paint[c],{validate:!1});for(const c in e.layout)this.setLayoutProperty(c,e.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new va(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,o,c={}){o!=null&&this._validate(Id,`layers.${this.id}.layout.${e}`,e,o,c)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,o):this.visibility=o)}getPaintProperty(e){return e.endsWith(oo)?this._transitionablePaint.getTransition(e.slice(0,-oo.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,o,c={}){if(o!=null&&this._validate(Rl,`layers.${this.id}.paint.${e}`,e,o,c))return!1;if(e.endsWith(oo))return this._transitionablePaint.setTransition(e.slice(0,-oo.length),o||void 0),!1;{const d=this._transitionablePaint._values[e],g=d.property.specification["property-type"]==="cross-faded-data-driven",_=d.value.isDataDriven(),b=d.value;this._transitionablePaint.setValue(e,o),this._handleSpecialPaintPropertyUpdate(e);const E=this._transitionablePaint._values[e].value;return E.isDataDriven()||_||g||this._handleOverridablePaintPropertyUpdate(e,b,E)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,o,c){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,o){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,o)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),me(e,(o,c)=>!(o===void 0||c==="layout"&&!Object.keys(o).length||c==="paint"&&!Object.keys(o).length))}_validate(e,o,c,d,g={}){return(!g||g.validate!==!1)&&bu(this,e.call(ro,{key:o,layerType:this.type,objectKey:c,value:d,styleSpec:ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const o=this.paint.get(e);if(o instanceof xi&&Po(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const Dd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ss{constructor(e,o){this._structArray=e,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Pr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,o){return e._trim(),o&&(e.isTransferred=!0,o.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const o=Object.create(this.prototype);return o.arrayBuffer=e.arrayBuffer,o.length=e.length,o.capacity=e.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function on(n,e=1){let o=0,c=0;return{members:n.map(d=>{const g=Dd[d.type].BYTES_PER_ELEMENT,_=o=Pu(o,Math.max(e,g)),b=d.components||1;return c=Math.max(c,g),o+=g*b,{name:d.name,type:d.type,components:b,offset:_}}),size:Pu(o,Math.max(c,e)),alignment:e}}function Pu(n,e){return Math.ceil(n/e)*e}class Ro extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o){const c=this.length;return this.resize(c+1),this.emplace(c,e,o)}emplace(e,o,c){const d=2*e;return this.int16[d+0]=o,this.int16[d+1]=c,e}}Ro.prototype.bytesPerElement=4,mt("StructArrayLayout2i4",Ro);class Ts extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,e,o,c,d)}emplace(e,o,c,d,g){const _=4*e;return this.int16[_+0]=o,this.int16[_+1]=c,this.int16[_+2]=d,this.int16[_+3]=g,e}}Ts.prototype.bytesPerElement=8,mt("StructArrayLayout4i8",Ts);class p extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,c,d,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,e,o,c,d,g,_)}emplace(e,o,c,d,g,_,b){const E=6*e;return this.int16[E+0]=o,this.int16[E+1]=c,this.int16[E+2]=d,this.int16[E+3]=g,this.int16[E+4]=_,this.int16[E+5]=b,e}}p.prototype.bytesPerElement=12,mt("StructArrayLayout2i4i12",p);class r extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,c,d,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,e,o,c,d,g,_)}emplace(e,o,c,d,g,_,b){const E=4*e,P=8*e;return this.int16[E+0]=o,this.int16[E+1]=c,this.uint8[P+4]=d,this.uint8[P+5]=g,this.uint8[P+6]=_,this.uint8[P+7]=b,e}}r.prototype.bytesPerElement=8,mt("StructArrayLayout2i4ub8",r);class a extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o){const c=this.length;return this.resize(c+1),this.emplace(c,e,o)}emplace(e,o,c){const d=2*e;return this.float32[d+0]=o,this.float32[d+1]=c,e}}a.prototype.bytesPerElement=8,mt("StructArrayLayout2f8",a);class h extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,c,d,g,_,b,E,P,z){const L=this.length;return this.resize(L+1),this.emplace(L,e,o,c,d,g,_,b,E,P,z)}emplace(e,o,c,d,g,_,b,E,P,z,L){const B=10*e;return this.uint16[B+0]=o,this.uint16[B+1]=c,this.uint16[B+2]=d,this.uint16[B+3]=g,this.uint16[B+4]=_,this.uint16[B+5]=b,this.uint16[B+6]=E,this.uint16[B+7]=P,this.uint16[B+8]=z,this.uint16[B+9]=L,e}}h.prototype.bytesPerElement=20,mt("StructArrayLayout10ui20",h);class f extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,c,d,g,_,b,E,P,z,L,B){const j=this.length;return this.resize(j+1),this.emplace(j,e,o,c,d,g,_,b,E,P,z,L,B)}emplace(e,o,c,d,g,_,b,E,P,z,L,B,j){const V=12*e;return this.int16[V+0]=o,this.int16[V+1]=c,this.int16[V+2]=d,this.int16[V+3]=g,this.uint16[V+4]=_,this.uint16[V+5]=b,this.uint16[V+6]=E,this.uint16[V+7]=P,this.int16[V+8]=z,this.int16[V+9]=L,this.int16[V+10]=B,this.int16[V+11]=j,e}}f.prototype.bytesPerElement=24,mt("StructArrayLayout4i4ui4i24",f);class y extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,c){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,c)}emplace(e,o,c,d){const g=3*e;return this.float32[g+0]=o,this.float32[g+1]=c,this.float32[g+2]=d,e}}y.prototype.bytesPerElement=12,mt("StructArrayLayout3f12",y);class w extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint32[1*e+0]=o,e}}w.prototype.bytesPerElement=4,mt("StructArrayLayout1ul4",w);class S extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,c,d,g,_,b,E,P){const z=this.length;return this.resize(z+1),this.emplace(z,e,o,c,d,g,_,b,E,P)}emplace(e,o,c,d,g,_,b,E,P,z){const L=10*e,B=5*e;return this.int16[L+0]=o,this.int16[L+1]=c,this.int16[L+2]=d,this.int16[L+3]=g,this.int16[L+4]=_,this.int16[L+5]=b,this.uint32[B+3]=E,this.uint16[L+8]=P,this.uint16[L+9]=z,e}}S.prototype.bytesPerElement=20,mt("StructArrayLayout6i1ul2ui20",S);class I extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,c,d,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,e,o,c,d,g,_)}emplace(e,o,c,d,g,_,b){const E=6*e;return this.int16[E+0]=o,this.int16[E+1]=c,this.int16[E+2]=d,this.int16[E+3]=g,this.int16[E+4]=_,this.int16[E+5]=b,e}}I.prototype.bytesPerElement=12,mt("StructArrayLayout2i2i2i12",I);class D extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,c,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,e,o,c,d,g)}emplace(e,o,c,d,g,_){const b=4*e,E=8*e;return this.float32[b+0]=o,this.float32[b+1]=c,this.float32[b+2]=d,this.int16[E+6]=g,this.int16[E+7]=_,e}}D.prototype.bytesPerElement=16,mt("StructArrayLayout2f1f2i16",D);class R extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,e,o,c,d)}emplace(e,o,c,d,g){const _=12*e,b=3*e;return this.uint8[_+0]=o,this.uint8[_+1]=c,this.float32[b+1]=d,this.float32[b+2]=g,e}}R.prototype.bytesPerElement=12,mt("StructArrayLayout2ub2f12",R);class N extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,c){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,c)}emplace(e,o,c,d){const g=3*e;return this.uint16[g+0]=o,this.uint16[g+1]=c,this.uint16[g+2]=d,e}}N.prototype.bytesPerElement=6,mt("StructArrayLayout3ui6",N);class q extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,c,d,g,_,b,E,P,z,L,B,j,V,Q,ee,fe){const be=this.length;return this.resize(be+1),this.emplace(be,e,o,c,d,g,_,b,E,P,z,L,B,j,V,Q,ee,fe)}emplace(e,o,c,d,g,_,b,E,P,z,L,B,j,V,Q,ee,fe,be){const xe=24*e,ke=12*e,je=48*e;return this.int16[xe+0]=o,this.int16[xe+1]=c,this.uint16[xe+2]=d,this.uint16[xe+3]=g,this.uint32[ke+2]=_,this.uint32[ke+3]=b,this.uint32[ke+4]=E,this.uint16[xe+10]=P,this.uint16[xe+11]=z,this.uint16[xe+12]=L,this.float32[ke+7]=B,this.float32[ke+8]=j,this.uint8[je+36]=V,this.uint8[je+37]=Q,this.uint8[je+38]=ee,this.uint32[ke+10]=fe,this.int16[xe+22]=be,e}}q.prototype.bytesPerElement=48,mt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",q);class Y extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,c,d,g,_,b,E,P,z,L,B,j,V,Q,ee,fe,be,xe,ke,je,Be,gt,Tt,lt,ct,tt,pt){const ut=this.length;return this.resize(ut+1),this.emplace(ut,e,o,c,d,g,_,b,E,P,z,L,B,j,V,Q,ee,fe,be,xe,ke,je,Be,gt,Tt,lt,ct,tt,pt)}emplace(e,o,c,d,g,_,b,E,P,z,L,B,j,V,Q,ee,fe,be,xe,ke,je,Be,gt,Tt,lt,ct,tt,pt,ut){const We=34*e,kt=17*e;return this.int16[We+0]=o,this.int16[We+1]=c,this.int16[We+2]=d,this.int16[We+3]=g,this.int16[We+4]=_,this.int16[We+5]=b,this.int16[We+6]=E,this.int16[We+7]=P,this.uint16[We+8]=z,this.uint16[We+9]=L,this.uint16[We+10]=B,this.uint16[We+11]=j,this.uint16[We+12]=V,this.uint16[We+13]=Q,this.uint16[We+14]=ee,this.uint16[We+15]=fe,this.uint16[We+16]=be,this.uint16[We+17]=xe,this.uint16[We+18]=ke,this.uint16[We+19]=je,this.uint16[We+20]=Be,this.uint16[We+21]=gt,this.uint16[We+22]=Tt,this.uint32[kt+12]=lt,this.float32[kt+13]=ct,this.float32[kt+14]=tt,this.float32[kt+15]=pt,this.float32[kt+16]=ut,e}}Y.prototype.bytesPerElement=68,mt("StructArrayLayout8i15ui1ul4f68",Y);class H extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.float32[1*e+0]=o,e}}H.prototype.bytesPerElement=4,mt("StructArrayLayout1f4",H);class J extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,o,c){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,c)}emplace(e,o,c,d){const g=3*e;return this.int16[g+0]=o,this.int16[g+1]=c,this.int16[g+2]=d,e}}J.prototype.bytesPerElement=6,mt("StructArrayLayout3i6",J);class ue extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o,c){const d=this.length;return this.resize(d+1),this.emplace(d,e,o,c)}emplace(e,o,c,d){const g=4*e;return this.uint32[2*e+0]=o,this.uint16[g+2]=c,this.uint16[g+3]=d,e}}ue.prototype.bytesPerElement=8,mt("StructArrayLayout1ul2ui8",ue);class he extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,o){const c=this.length;return this.resize(c+1),this.emplace(c,e,o)}emplace(e,o,c){const d=2*e;return this.uint16[d+0]=o,this.uint16[d+1]=c,e}}he.prototype.bytesPerElement=4,mt("StructArrayLayout2ui4",he);class ge extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const o=this.length;return this.resize(o+1),this.emplace(o,e)}emplace(e,o){return this.uint16[1*e+0]=o,e}}ge.prototype.bytesPerElement=2,mt("StructArrayLayout1ui2",ge);class pe extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,e,o,c,d)}emplace(e,o,c,d,g){const _=4*e;return this.float32[_+0]=o,this.float32[_+1]=c,this.float32[_+2]=d,this.float32[_+3]=g,e}}pe.prototype.bytesPerElement=16,mt("StructArrayLayout4f16",pe);class Oe extends Ss{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ve(this.anchorPointX,this.anchorPointY)}}Oe.prototype.size=20;class Ee extends S{get(e){return new Oe(this,e)}}mt("CollisionBoxArray",Ee);class Pe extends Ss{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Pe.prototype.size=48;class Ge extends q{get(e){return new Pe(this,e)}}mt("PlacedSymbolArray",Ge);class et extends Ss{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}et.prototype.size=68;class ze extends Y{get(e){return new et(this,e)}}mt("SymbolInstanceArray",ze);class yt extends H{getoffsetX(e){return this.float32[1*e+0]}}mt("GlyphOffsetArray",yt);class st extends J{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}mt("SymbolLineVertexArray",st);class Lt extends Ss{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Lt.prototype.size=8;class rr extends ue{get(e){return new Lt(this,e)}}mt("FeatureIndexArray",rr);class Kt extends Ro{}class er extends Ro{}class Nr extends p{}class Bt extends r{}class sr extends a{}class xr extends h{}class dn extends f{}class Un extends y{}class ei extends w{}class ti extends I{}class Vi extends R{}class Rn extends N{}class bi extends he{}const so=on([{name:"a_pos",components:2,type:"Int16"}],4),{members:$n}=so;class ar{constructor(e=[]){this.segments=e}prepareSegment(e,o,c,d){let g=this.segments[this.segments.length-1];return e>ar.MAX_VERTEX_ARRAY_LENGTH&&Me(`Max vertices per segment is ${ar.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!g||g.vertexLength+e>ar.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==d)&&(g={vertexOffset:o.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},d!==void 0&&(g.sortKey=d),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const e of this.segments)for(const o in e.vaos)e.vaos[o].destroy()}static simpleSegment(e,o,c,d){return new ar([{vertexOffset:e,primitiveOffset:o,vertexLength:c,primitiveLength:d,vaos:{},sortKey:0}])}}function fr(n,e){return 256*(n=O(Math.floor(n),0,255))+O(Math.floor(e),0,255)}ar.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,mt("SegmentVector",ar);const Jr=on([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var In={exports:{}},Dr={exports:{}};Dr.exports=function(n,e){var o,c,d,g,_,b,E,P;for(c=n.length-(o=3&n.length),d=e,_=3432918353,b=461845907,P=0;P<c;)E=255&n.charCodeAt(P)|(255&n.charCodeAt(++P))<<8|(255&n.charCodeAt(++P))<<16|(255&n.charCodeAt(++P))<<24,++P,d=27492+(65535&(g=5*(65535&(d=(d^=E=(65535&(E=(E=(65535&E)*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(E=0,o){case 3:E^=(255&n.charCodeAt(P+2))<<16;case 2:E^=(255&n.charCodeAt(P+1))<<8;case 1:d^=E=(65535&(E=(E=(65535&(E^=255&n.charCodeAt(P)))*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295}return d^=n.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0};var ao={exports:{}};ao.exports=function(n,e){for(var o,c=n.length,d=e^c,g=0;c>=4;)o=1540483477*(65535&(o=255&n.charCodeAt(g)|(255&n.charCodeAt(++g))<<8|(255&n.charCodeAt(++g))<<16|(255&n.charCodeAt(++g))<<24))+((1540483477*(o>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),c-=4,++g;switch(c){case 3:d^=(255&n.charCodeAt(g+2))<<16;case 2:d^=(255&n.charCodeAt(g+1))<<8;case 1:d=1540483477*(65535&(d^=255&n.charCodeAt(g)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0};var wi=Dr.exports,xa=ao.exports;In.exports=wi,In.exports.murmur3=wi,In.exports.murmur2=xa;var Gl=In.exports;class ba{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,o,c,d){this.ids.push(Cu(e)),this.positions.push(o,c,d)}getPositions(e){const o=Cu(e);let c=0,d=this.ids.length-1;for(;c<d;){const _=c+d>>1;this.ids[_]>=o?d=_:c=_+1}const g=[];for(;this.ids[c]===o;)g.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return g}static serialize(e,o){const c=new Float64Array(e.ids),d=new Uint32Array(e.positions);return lo(c,d,0,c.length-1),o&&o.push(c.buffer,d.buffer),{ids:c,positions:d}}static deserialize(e){const o=new ba;return o.ids=e.ids,o.positions=e.positions,o.indexed=!0,o}}function Cu(n){const e=+n;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Gl(String(n))}function lo(n,e,o,c){for(;o<c;){const d=n[o+c>>1];let g=o-1,_=c+1;for(;;){do g++;while(n[g]<d);do _--;while(n[_]>d);if(g>=_)break;wa(n,g,_),wa(e,3*g,3*_),wa(e,3*g+1,3*_+1),wa(e,3*g+2,3*_+2)}_-o<c-_?(lo(n,e,o,_),o=_+1):(lo(n,e,_+1,c),c=_)}}function wa(n,e,o){const c=n[e];n[e]=n[o],n[o]=c}mt("FeaturePositionMap",ba);class Ei{constructor(e,o){this.gl=e.gl,this.location=o}}class Bo extends Ei{constructor(e,o){super(e,o),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class hm extends Ei{constructor(e,o){super(e,o),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class dm extends Ei{constructor(e,o){super(e,o),this.current=M.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const jx=new Float32Array(16);function zd(n){return[fr(255*n.r,255*n.g),fr(255*n.b,255*n.a)]}class Zl{constructor(e,o,c){this.value=e,this.uniformNames=o.map(d=>`u_${d}`),this.type=c}setUniform(e,o,c){e.set(c.constantOr(this.value))}getBinding(e,o,c){return this.type==="color"?new dm(e,o):new Bo(e,o)}}class Ea{constructor(e,o){this.uniformNames=o.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=e.tlbr}setUniform(e,o,c,d){const g=d==="u_pattern_to"?this.patternTo:d==="u_pattern_from"?this.patternFrom:d==="u_pixel_ratio_to"?this.pixelRatioTo:d==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&e.set(g)}getBinding(e,o,c){return c.substr(0,9)==="u_pattern"?new hm(e,o):new Bo(e,o)}}class co{constructor(e,o,c,d){this.expression=e,this.type=c,this.maxValue=0,this.paintVertexAttributes=o.map(g=>({name:`a_${g}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(e,o,c,d,g){const _=this.paintVertexArray.length,b=this.expression.evaluate(new kr(0),o,{},d,[],g);this.paintVertexArray.resize(e),this._setPaintValue(_,e,b)}updatePaintArray(e,o,c,d){const g=this.expression.evaluate({zoom:0},c,d);this._setPaintValue(e,o,g)}_setPaintValue(e,o,c){if(this.type==="color"){const d=zd(c);for(let g=e;g<o;g++)this.paintVertexArray.emplace(g,d[0],d[1])}else{for(let d=e;d<o;d++)this.paintVertexArray.emplace(d,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zi{constructor(e,o,c,d,g,_){this.expression=e,this.uniformNames=o.map(b=>`u_${b}_t`),this.type=c,this.useIntegerZoom=d,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=o.map(b=>({name:`a_${b}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(e,o,c,d,g){const _=this.expression.evaluate(new kr(this.zoom),o,{},d,[],g),b=this.expression.evaluate(new kr(this.zoom+1),o,{},d,[],g),E=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(E,e,_,b)}updatePaintArray(e,o,c,d){const g=this.expression.evaluate({zoom:this.zoom},c,d),_=this.expression.evaluate({zoom:this.zoom+1},c,d);this._setPaintValue(e,o,g,_)}_setPaintValue(e,o,c,d){if(this.type==="color"){const g=zd(c),_=zd(d);for(let b=e;b<o;b++)this.paintVertexArray.emplace(b,g[0],g[1],_[0],_[1])}else{for(let g=e;g<o;g++)this.paintVertexArray.emplace(g,c,d);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(d))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,o){const c=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,d=O(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);e.set(d)}getBinding(e,o,c){return new Bo(e,o)}}class Fo{constructor(e,o,c,d,g,_){this.expression=e,this.type=o,this.useIntegerZoom=c,this.zoom=d,this.layerId=_,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(e,o,c){const d=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(d,e,o.patterns&&o.patterns[this.layerId],c)}updatePaintArray(e,o,c,d,g){this._setPaintValues(e,o,c.patterns&&c.patterns[this.layerId],g)}_setPaintValues(e,o,c,d){if(!d||!c)return;const{min:g,mid:_,max:b}=c,E=d[g],P=d[_],z=d[b];if(E&&P&&z)for(let L=e;L<o;L++)this.zoomInPaintVertexArray.emplace(L,P.tl[0],P.tl[1],P.br[0],P.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],P.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(L,P.tl[0],P.tl[1],P.br[0],P.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],P.pixelRatio,z.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Jr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Jr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class pm{constructor(e,o,c){this.binders={},this._buffers=[];const d=[];for(const g in e.paint._values){if(!c(g))continue;const _=e.paint.get(g);if(!(_ instanceof xi&&Po(_.property.specification)))continue;const b=Vx(g,e.type),E=_.value,P=_.property.specification.type,z=_.property.useIntegerZoom,L=_.property.specification["property-type"],B=L==="cross-faded"||L==="cross-faded-data-driven";if(E.kind==="constant")this.binders[g]=B?new Ea(E.value,b):new Zl(E.value,b,P),d.push(`/u_${g}`);else if(E.kind==="source"||B){const j=fm(g,P,"source");this.binders[g]=B?new Fo(E,P,z,o,j,e.id):new co(E,b,P,j),d.push(`/a_${g}`)}else{const j=fm(g,P,"composite");this.binders[g]=new zi(E,b,P,z,o,j),d.push(`/z_${g}`)}}this.cacheKey=d.sort().join("")}getMaxValue(e){const o=this.binders[e];return o instanceof co||o instanceof zi?o.maxValue:0}populatePaintArrays(e,o,c,d,g){for(const _ in this.binders){const b=this.binders[_];(b instanceof co||b instanceof zi||b instanceof Fo)&&b.populatePaintArray(e,o,c,d,g)}}setConstantPatternPositions(e,o){for(const c in this.binders){const d=this.binders[c];d instanceof Ea&&d.setConstantPatternPositions(e,o)}}updatePaintArrays(e,o,c,d,g){let _=!1;for(const b in e){const E=o.getPositions(b);for(const P of E){const z=c.feature(P.index);for(const L in this.binders){const B=this.binders[L];if((B instanceof co||B instanceof zi||B instanceof Fo)&&B.expression.isStateDependent===!0){const j=d.paint.get(L);B.expression=j.value,B.updatePaintArray(P.start,P.end,z,e[b],g),_=!0}}}}return _}defines(){const e=[];for(const o in this.binders){const c=this.binders[o];(c instanceof Zl||c instanceof Ea)&&e.push(...c.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return e}getBinderAttributes(){const e=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof co||c instanceof zi)for(let d=0;d<c.paintVertexAttributes.length;d++)e.push(c.paintVertexAttributes[d].name);else if(c instanceof Fo)for(let d=0;d<Jr.members.length;d++)e.push(Jr.members[d].name)}return e}getBinderUniforms(){const e=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof Zl||c instanceof Ea||c instanceof zi)for(const d of c.uniformNames)e.push(d)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,o){const c=[];for(const d in this.binders){const g=this.binders[d];if(g instanceof Zl||g instanceof Ea||g instanceof zi){for(const _ of g.uniformNames)if(o[_]){const b=g.getBinding(e,o[_],_);c.push({name:_,property:d,binding:b})}}}return c}setUniforms(e,o,c,d){for(const{name:g,property:_,binding:b}of o)this.binders[_].setUniform(b,d,c.get(_),g)}updatePaintBuffers(e){this._buffers=[];for(const o in this.binders){const c=this.binders[o];if(e&&c instanceof Fo){const d=e.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;d&&this._buffers.push(d)}else(c instanceof co||c instanceof zi)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(e){for(const o in this.binders){const c=this.binders[o];(c instanceof co||c instanceof zi||c instanceof Fo)&&c.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const o=this.binders[e];(o instanceof co||o instanceof zi||o instanceof Fo)&&o.destroy()}}}class Is{constructor(e,o,c=()=>!0){this.programConfigurations={};for(const d of e)this.programConfigurations[d.id]=new pm(d,o,c);this.needsUpload=!1,this._featureMap=new ba,this._bufferOffset=0}populatePaintArrays(e,o,c,d,g,_){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(e,o,d,g,_);o.id!==void 0&&this._featureMap.add(o.id,c,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,o,c,d){for(const g of c)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(e,this._featureMap,o,g,d)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Vx(n,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[n]||[n.replace(`${e}-`,"").replace(/-/g,"_")]}function fm(n,e,o){const c={color:{source:a,composite:pe},number:{source:H,composite:a}},d=function(g){return{"line-pattern":{source:xr,composite:xr},"fill-pattern":{source:xr,composite:xr},"fill-extrusion-pattern":{source:xr,composite:xr}}[g]}(n);return d&&d[o]||c[e][o]}mt("ConstantBinder",Zl),mt("CrossFadedConstantBinder",Ea),mt("SourceExpressionBinder",co),mt("CrossFadedCompositeBinder",Fo),mt("CompositeExpressionBinder",zi),mt("ProgramConfiguration",pm,{omit:["_buffers"]}),mt("ProgramConfigurationSet",Is);var sn=8192;const Md=Math.pow(2,14)-1,mm=-Md-1;function As(n){const e=sn/n.extent,o=n.loadGeometry();for(let c=0;c<o.length;c++){const d=o[c];for(let g=0;g<d.length;g++){const _=d[g],b=Math.round(_.x*e),E=Math.round(_.y*e);_.x=O(b,mm,Md),_.y=O(E,mm,Md),(b<_.x||b>_.x+1||E<_.y||E>_.y+1)&&Me("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Ps(n,e){return{type:n.type,id:n.id,properties:n.properties,geometry:e?As(n):[]}}function ku(n,e,o,c,d){n.emplaceBack(2*e+(c+1)/2,2*o+(d+1)/2)}class Od{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Kt,this.indexArray=new Rn,this.segments=new ar,this.programConfigurations=new Is(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,c){const d=this.layers[0],g=[];let _=null,b=!1;d.type==="circle"&&(_=d.layout.get("circle-sort-key"),b=!_.isConstant());for(const{feature:E,id:P,index:z,sourceLayerIndex:L}of e){const B=this.layers[0]._featureFilter.needGeometry,j=Ps(E,B);if(!this.layers[0]._featureFilter.filter(new kr(this.zoom),j,c))continue;const V=b?_.evaluate(j,{},c):void 0,Q={id:P,properties:E.properties,type:E.type,sourceLayerIndex:L,index:z,geometry:B?j.geometry:As(E),patterns:{},sortKey:V};g.push(Q)}b&&g.sort((E,P)=>E.sortKey-P.sortKey);for(const E of g){const{geometry:P,index:z,sourceLayerIndex:L}=E,B=e[z].feature;this.addFeature(E,P,z,c),o.featureIndex.insert(B,P,z,L,this.index)}}update(e,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$n),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,c,d){for(const g of o)for(const _ of g){const b=_.x,E=_.y;if(b<0||b>=sn||E<0||E>=sn)continue;const P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),z=P.vertexLength;ku(this.layoutVertexArray,b,E,-1,-1),ku(this.layoutVertexArray,b,E,1,-1),ku(this.layoutVertexArray,b,E,1,1),ku(this.layoutVertexArray,b,E,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+3,z+2),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,{},d)}}function gm(n,e){for(let o=0;o<n.length;o++)if(Sa(e,n[o]))return!0;for(let o=0;o<e.length;o++)if(Sa(n,e[o]))return!0;return!!Ld(n,e)}function Ux(n,e,o){return!!Sa(n,e)||!!Rd(e,n,o)}function _m(n,e){if(n.length===1)return vm(e,n[0]);for(let o=0;o<e.length;o++){const c=e[o];for(let d=0;d<c.length;d++)if(Sa(n,c[d]))return!0}for(let o=0;o<n.length;o++)if(vm(e,n[o]))return!0;for(let o=0;o<e.length;o++)if(Ld(n,e[o]))return!0;return!1}function $x(n,e,o){if(n.length>1){if(Ld(n,e))return!0;for(let c=0;c<e.length;c++)if(Rd(e[c],n,o))return!0}for(let c=0;c<n.length;c++)if(Rd(n[c],e,o))return!0;return!1}function Ld(n,e){if(n.length===0||e.length===0)return!1;for(let o=0;o<n.length-1;o++){const c=n[o],d=n[o+1];for(let g=0;g<e.length-1;g++)if(qx(c,d,e[g],e[g+1]))return!0}return!1}function qx(n,e,o,c){return He(n,o,c)!==He(e,o,c)&&He(n,e,o)!==He(n,e,c)}function Rd(n,e,o){const c=o*o;if(e.length===1)return n.distSqr(e[0])<c;for(let d=1;d<e.length;d++)if(ym(n,e[d-1],e[d])<c)return!0;return!1}function ym(n,e,o){const c=e.distSqr(o);if(c===0)return n.distSqr(e);const d=((n.x-e.x)*(o.x-e.x)+(n.y-e.y)*(o.y-e.y))/c;return n.distSqr(d<0?e:d>1?o:o.sub(e)._mult(d)._add(e))}function vm(n,e){let o,c,d,g=!1;for(let _=0;_<n.length;_++){o=n[_];for(let b=0,E=o.length-1;b<o.length;E=b++)c=o[b],d=o[E],c.y>e.y!=d.y>e.y&&e.x<(d.x-c.x)*(e.y-c.y)/(d.y-c.y)+c.x&&(g=!g)}return g}function Sa(n,e){let o=!1;for(let c=0,d=n.length-1;c<n.length;d=c++){const g=n[c],_=n[d];g.y>e.y!=_.y>e.y&&e.x<(_.x-g.x)*(e.y-g.y)/(_.y-g.y)+g.x&&(o=!o)}return o}function Hx(n,e,o){const c=o[0],d=o[2];if(n.x<c.x&&e.x<c.x||n.x>d.x&&e.x>d.x||n.y<c.y&&e.y<c.y||n.y>d.y&&e.y>d.y)return!1;const g=He(n,e,o[0]);return g!==He(n,e,o[1])||g!==He(n,e,o[2])||g!==He(n,e,o[3])}function Wl(n,e,o){const c=e.paint.get(n).value;return c.kind==="constant"?c.value:o.programConfigurations.get(e.id).getMaxValue(n)}function Du(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function zu(n,e,o,c,d){if(!e[0]&&!e[1])return n;const g=Ve.convert(e)._mult(d);o==="viewport"&&g._rotate(-c);const _=[];for(let b=0;b<n.length;b++)_.push(n[b].sub(g));return _}mt("CircleBucket",Od,{omit:["layers"]});const Gx=new nn({"circle-sort-key":new Ct(ve.layout_circle["circle-sort-key"])});var Zx={paint:new nn({"circle-radius":new Ct(ve.paint_circle["circle-radius"]),"circle-color":new Ct(ve.paint_circle["circle-color"]),"circle-blur":new Ct(ve.paint_circle["circle-blur"]),"circle-opacity":new Ct(ve.paint_circle["circle-opacity"]),"circle-translate":new wt(ve.paint_circle["circle-translate"]),"circle-translate-anchor":new wt(ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wt(ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wt(ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ct(ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ct(ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ct(ve.paint_circle["circle-stroke-opacity"])}),layout:Gx},Ta=typeof Float32Array!="undefined"?Float32Array:Array;function Bd(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function xm(n,e,o){var c=e[0],d=e[1],g=e[2],_=e[3],b=e[4],E=e[5],P=e[6],z=e[7],L=e[8],B=e[9],j=e[10],V=e[11],Q=e[12],ee=e[13],fe=e[14],be=e[15],xe=o[0],ke=o[1],je=o[2],Be=o[3];return n[0]=xe*c+ke*b+je*L+Be*Q,n[1]=xe*d+ke*E+je*B+Be*ee,n[2]=xe*g+ke*P+je*j+Be*fe,n[3]=xe*_+ke*z+je*V+Be*be,n[4]=(xe=o[4])*c+(ke=o[5])*b+(je=o[6])*L+(Be=o[7])*Q,n[5]=xe*d+ke*E+je*B+Be*ee,n[6]=xe*g+ke*P+je*j+Be*fe,n[7]=xe*_+ke*z+je*V+Be*be,n[8]=(xe=o[8])*c+(ke=o[9])*b+(je=o[10])*L+(Be=o[11])*Q,n[9]=xe*d+ke*E+je*B+Be*ee,n[10]=xe*g+ke*P+je*j+Be*fe,n[11]=xe*_+ke*z+je*V+Be*be,n[12]=(xe=o[12])*c+(ke=o[13])*b+(je=o[14])*L+(Be=o[15])*Q,n[13]=xe*d+ke*E+je*B+Be*ee,n[14]=xe*g+ke*P+je*j+Be*fe,n[15]=xe*_+ke*z+je*V+Be*be,n}Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});var Kl,Wx=xm;function Mu(n,e,o){var c=e[0],d=e[1],g=e[2],_=e[3];return n[0]=o[0]*c+o[4]*d+o[8]*g+o[12]*_,n[1]=o[1]*c+o[5]*d+o[9]*g+o[13]*_,n[2]=o[2]*c+o[6]*d+o[10]*g+o[14]*_,n[3]=o[3]*c+o[7]*d+o[11]*g+o[15]*_,n}function bm(n,e){const o=Mu([],[n.x,n.y,0,1],e);return new Ve(o[0]/o[3],o[1]/o[3])}Kl=new Ta(4),Ta!=Float32Array&&(Kl[0]=0,Kl[1]=0,Kl[2]=0,Kl[3]=0);class wm extends Od{}mt("HeatmapBucket",wm,{omit:["layers"]});var Kx={paint:new nn({"heatmap-radius":new Ct(ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ct(ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wt(ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Hl(ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wt(ve.paint_heatmap["heatmap-opacity"])})};function Fd(n,{width:e,height:o},c,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==e*o*c)throw new RangeError(`mismatched image size. expected: ${d.length} but got: ${e*o*c}`)}else d=new Uint8Array(e*o*c);return n.width=e,n.height=o,n.data=d,n}function Em(n,{width:e,height:o},c){if(e===n.width&&o===n.height)return;const d=Fd({},{width:e,height:o},c);Nd(n,d,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,e),height:Math.min(n.height,o)},c),n.width=e,n.height=o,n.data=d.data}function Nd(n,e,o,c,d,g){if(d.width===0||d.height===0)return e;if(d.width>n.width||d.height>n.height||o.x>n.width-d.width||o.y>n.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>e.width||d.height>e.height||c.x>e.width-d.width||c.y>e.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const _=n.data,b=e.data;for(let E=0;E<d.height;E++){const P=((o.y+E)*n.width+o.x)*g,z=((c.y+E)*e.width+c.x)*g;for(let L=0;L<d.width*g;L++)b[z+L]=_[P+L]}return e}class Xl{constructor(e,o){Fd(this,e,1,o)}resize(e){Em(this,e,1)}clone(){return new Xl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,c,d,g){Nd(e,o,c,d,g,1)}}class ui{constructor(e,o){Fd(this,e,4,o)}resize(e){Em(this,e,4)}replace(e,o){o?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new ui({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,o,c,d,g){Nd(e,o,c,d,g,4)}}function Sm(n){const e={},o=n.resolution||256,c=n.clips?n.clips.length:1,d=n.image||new ui({width:o,height:c}),g=(_,b,E)=>{e[n.evaluationKey]=E;const P=n.expression.evaluate(e);d.data[_+b+0]=Math.floor(255*P.r/P.a),d.data[_+b+1]=Math.floor(255*P.g/P.a),d.data[_+b+2]=Math.floor(255*P.b/P.a),d.data[_+b+3]=Math.floor(255*P.a)};if(n.clips)for(let _=0,b=0;_<c;++_,b+=4*o)for(let E=0,P=0;E<o;E++,P+=4){const z=E/(o-1),{start:L,end:B}=n.clips[_];g(b,P,L*(1-z)+B*z)}else for(let _=0,b=0;_<o;_++,b+=4)g(0,b,_/(o-1));return d}mt("AlphaImage",Xl),mt("RGBAImage",ui);var Xx={paint:new nn({"hillshade-illumination-direction":new wt(ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new wt(ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wt(ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wt(ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wt(ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wt(ve.paint_hillshade["hillshade-accent-color"])})};const Jx=on([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yx}=Jx;var jd={exports:{}};function Ou(n,e,o){o=o||2;var c,d,g,_,b,E,P,z=e&&e.length,L=z?e[0]*o:n.length,B=Tm(n,0,L,o,!0),j=[];if(!B||B.next===B.prev)return j;if(z&&(B=function(Q,ee,fe,be){var xe,ke,je,Be=[];for(xe=0,ke=ee.length;xe<ke;xe++)(je=Tm(Q,ee[xe]*be,xe<ke-1?ee[xe+1]*be:Q.length,be,!1))===je.next&&(je.steiner=!0),Be.push(s1(je));for(Be.sort(n1),xe=0;xe<Be.length;xe++)fe=No(fe=i1(Be[xe],fe),fe.next);return fe}(n,e,B,o)),n.length>80*o){c=g=n[0],d=_=n[1];for(var V=o;V<L;V+=o)(b=n[V])<c&&(c=b),(E=n[V+1])<d&&(d=E),b>g&&(g=b),E>_&&(_=E);P=(P=Math.max(g-c,_-d))!==0?1/P:0}return Jl(B,j,o,c,d,P),j}function Tm(n,e,o,c,d){var g,_;if(d===$d(n,e,o,c)>0)for(g=e;g<o;g+=c)_=Pm(g,n[g],n[g+1],_);else for(g=o-c;g>=e;g-=c)_=Pm(g,n[g],n[g+1],_);return _&&Lu(_,_.next)&&(Ql(_),_=_.next),_}function No(n,e){if(!n)return n;e||(e=n);var o,c=n;do if(o=!1,c.steiner||!Lu(c,c.next)&&Wr(c.prev,c,c.next)!==0)c=c.next;else{if(Ql(c),(c=e=c.prev)===c.next)break;o=!0}while(o||c!==e);return e}function Jl(n,e,o,c,d,g,_){if(n){!_&&g&&function(z,L,B,j){var V=z;do V.z===null&&(V.z=Vd(V.x,V.y,L,B,j)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==z);V.prevZ.nextZ=null,V.prevZ=null,function(Q){var ee,fe,be,xe,ke,je,Be,gt,Tt=1;do{for(fe=Q,Q=null,ke=null,je=0;fe;){for(je++,be=fe,Be=0,ee=0;ee<Tt&&(Be++,be=be.nextZ);ee++);for(gt=Tt;Be>0||gt>0&&be;)Be!==0&&(gt===0||!be||fe.z<=be.z)?(xe=fe,fe=fe.nextZ,Be--):(xe=be,be=be.nextZ,gt--),ke?ke.nextZ=xe:Q=xe,xe.prevZ=ke,ke=xe;fe=be}ke.nextZ=null,Tt*=2}while(je>1)}(V)}(n,c,d,g);for(var b,E,P=n;n.prev!==n.next;)if(b=n.prev,E=n.next,g?e1(n,c,d,g):Qx(n))e.push(b.i/o),e.push(n.i/o),e.push(E.i/o),Ql(n),n=E.next,P=E.next;else if((n=E)===P){_?_===1?Jl(n=t1(No(n),e,o),e,o,c,d,g,2):_===2&&r1(n,e,o,c,d,g):Jl(No(n),e,o,c,d,g,1);break}}}function Qx(n){var e=n.prev,o=n,c=n.next;if(Wr(e,o,c)>=0)return!1;for(var d=n.next.next;d!==n.prev;){if(Ia(e.x,e.y,o.x,o.y,c.x,c.y,d.x,d.y)&&Wr(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function e1(n,e,o,c){var d=n.prev,g=n,_=n.next;if(Wr(d,g,_)>=0)return!1;for(var b=d.x>g.x?d.x>_.x?d.x:_.x:g.x>_.x?g.x:_.x,E=d.y>g.y?d.y>_.y?d.y:_.y:g.y>_.y?g.y:_.y,P=Vd(d.x<g.x?d.x<_.x?d.x:_.x:g.x<_.x?g.x:_.x,d.y<g.y?d.y<_.y?d.y:_.y:g.y<_.y?g.y:_.y,e,o,c),z=Vd(b,E,e,o,c),L=n.prevZ,B=n.nextZ;L&&L.z>=P&&B&&B.z<=z;){if(L!==n.prev&&L!==n.next&&Ia(d.x,d.y,g.x,g.y,_.x,_.y,L.x,L.y)&&Wr(L.prev,L,L.next)>=0||(L=L.prevZ,B!==n.prev&&B!==n.next&&Ia(d.x,d.y,g.x,g.y,_.x,_.y,B.x,B.y)&&Wr(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;L&&L.z>=P;){if(L!==n.prev&&L!==n.next&&Ia(d.x,d.y,g.x,g.y,_.x,_.y,L.x,L.y)&&Wr(L.prev,L,L.next)>=0)return!1;L=L.prevZ}for(;B&&B.z<=z;){if(B!==n.prev&&B!==n.next&&Ia(d.x,d.y,g.x,g.y,_.x,_.y,B.x,B.y)&&Wr(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function t1(n,e,o){var c=n;do{var d=c.prev,g=c.next.next;!Lu(d,g)&&Im(d,c,c.next,g)&&Yl(d,g)&&Yl(g,d)&&(e.push(d.i/o),e.push(c.i/o),e.push(g.i/o),Ql(c),Ql(c.next),c=n=g),c=c.next}while(c!==n);return No(c)}function r1(n,e,o,c,d,g){var _=n;do{for(var b=_.next.next;b!==_.prev;){if(_.i!==b.i&&a1(_,b)){var E=Am(_,b);return _=No(_,_.next),E=No(E,E.next),Jl(_,e,o,c,d,g),void Jl(E,e,o,c,d,g)}b=b.next}_=_.next}while(_!==n)}function n1(n,e){return n.x-e.x}function i1(n,e){var o=function(g,_){var b,E=_,P=g.x,z=g.y,L=-1/0;do{if(z<=E.y&&z>=E.next.y&&E.next.y!==E.y){var B=E.x+(z-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(B<=P&&B>L){if(L=B,B===P){if(z===E.y)return E;if(z===E.next.y)return E.next}b=E.x<E.next.x?E:E.next}}E=E.next}while(E!==_);if(!b)return null;if(P===L)return b;var j,V=b,Q=b.x,ee=b.y,fe=1/0;E=b;do P>=E.x&&E.x>=Q&&P!==E.x&&Ia(z<ee?P:L,z,Q,ee,z<ee?L:P,z,E.x,E.y)&&(j=Math.abs(z-E.y)/(P-E.x),Yl(E,g)&&(j<fe||j===fe&&(E.x>b.x||E.x===b.x&&o1(b,E)))&&(b=E,fe=j)),E=E.next;while(E!==V);return b}(n,e);if(!o)return e;var c=Am(o,n),d=No(o,o.next);return No(c,c.next),e===o?d:e}function o1(n,e){return Wr(n.prev,n,e.prev)<0&&Wr(e.next,n,n.next)<0}function Vd(n,e,o,c,d){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-o)*d)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-c)*d)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function s1(n){var e=n,o=n;do(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next;while(e!==n);return o}function Ia(n,e,o,c,d,g,_,b){return(d-_)*(e-b)-(n-_)*(g-b)>=0&&(n-_)*(c-b)-(o-_)*(e-b)>=0&&(o-_)*(g-b)-(d-_)*(c-b)>=0}function a1(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(o,c){var d=o;do{if(d.i!==o.i&&d.next.i!==o.i&&d.i!==c.i&&d.next.i!==c.i&&Im(d,d.next,o,c))return!0;d=d.next}while(d!==o);return!1}(n,e)&&(Yl(n,e)&&Yl(e,n)&&function(o,c){var d=o,g=!1,_=(o.x+c.x)/2,b=(o.y+c.y)/2;do d.y>b!=d.next.y>b&&d.next.y!==d.y&&_<(d.next.x-d.x)*(b-d.y)/(d.next.y-d.y)+d.x&&(g=!g),d=d.next;while(d!==o);return g}(n,e)&&(Wr(n.prev,n,e.prev)||Wr(n,e.prev,e))||Lu(n,e)&&Wr(n.prev,n,n.next)>0&&Wr(e.prev,e,e.next)>0)}function Wr(n,e,o){return(e.y-n.y)*(o.x-e.x)-(e.x-n.x)*(o.y-e.y)}function Lu(n,e){return n.x===e.x&&n.y===e.y}function Im(n,e,o,c){var d=Bu(Wr(n,e,o)),g=Bu(Wr(n,e,c)),_=Bu(Wr(o,c,n)),b=Bu(Wr(o,c,e));return d!==g&&_!==b||!(d!==0||!Ru(n,o,e))||!(g!==0||!Ru(n,c,e))||!(_!==0||!Ru(o,n,c))||!(b!==0||!Ru(o,e,c))}function Ru(n,e,o){return e.x<=Math.max(n.x,o.x)&&e.x>=Math.min(n.x,o.x)&&e.y<=Math.max(n.y,o.y)&&e.y>=Math.min(n.y,o.y)}function Bu(n){return n>0?1:n<0?-1:0}function Yl(n,e){return Wr(n.prev,n,n.next)<0?Wr(n,e,n.next)>=0&&Wr(n,n.prev,e)>=0:Wr(n,e,n.prev)<0||Wr(n,n.next,e)<0}function Am(n,e){var o=new Ud(n.i,n.x,n.y),c=new Ud(e.i,e.x,e.y),d=n.next,g=e.prev;return n.next=e,e.prev=n,o.next=d,d.prev=o,c.next=o,o.prev=c,g.next=c,c.prev=g,c}function Pm(n,e,o,c){var d=new Ud(n,e,o);return c?(d.next=c.next,d.prev=c,c.next.prev=d,c.next=d):(d.prev=d,d.next=d),d}function Ql(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Ud(n,e,o){this.i=n,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $d(n,e,o,c){for(var d=0,g=e,_=o-c;g<o;g+=c)d+=(n[_]-n[g])*(n[g+1]+n[_+1]),_=g;return d}jd.exports=Ou,jd.exports.default=Ou,Ou.deviation=function(n,e,o,c){var d=e&&e.length,g=Math.abs($d(n,0,d?e[0]*o:n.length,o));if(d)for(var _=0,b=e.length;_<b;_++)g-=Math.abs($d(n,e[_]*o,_<b-1?e[_+1]*o:n.length,o));var E=0;for(_=0;_<c.length;_+=3){var P=c[_]*o,z=c[_+1]*o,L=c[_+2]*o;E+=Math.abs((n[P]-n[L])*(n[z+1]-n[P+1])-(n[P]-n[z])*(n[L+1]-n[P+1]))}return g===0&&E===0?0:Math.abs((E-g)/g)},Ou.flatten=function(n){for(var e=n[0][0].length,o={vertices:[],holes:[],dimensions:e},c=0,d=0;d<n.length;d++){for(var g=0;g<n[d].length;g++)for(var _=0;_<e;_++)o.vertices.push(n[d][g][_]);d>0&&o.holes.push(c+=n[d-1].length)}return o};var Cm=jd.exports;function l1(n,e,o,c,d){km(n,e,o||0,c||n.length-1,d||c1)}function km(n,e,o,c,d){for(;c>o;){if(c-o>600){var g=c-o+1,_=e-o+1,b=Math.log(g),E=.5*Math.exp(2*b/3),P=.5*Math.sqrt(b*E*(g-E)/g)*(_-g/2<0?-1:1);km(n,e,Math.max(o,Math.floor(e-_*E/g+P)),Math.min(c,Math.floor(e+(g-_)*E/g+P)),d)}var z=n[e],L=o,B=c;for(ec(n,o,e),d(n[c],z)>0&&ec(n,o,c);L<B;){for(ec(n,L,B),L++,B--;d(n[L],z)<0;)L++;for(;d(n[B],z)>0;)B--}d(n[o],z)===0?ec(n,o,B):ec(n,++B,c),B<=e&&(o=B+1),e<=B&&(c=B-1)}}function ec(n,e,o){var c=n[e];n[e]=n[o],n[o]=c}function c1(n,e){return n<e?-1:n>e?1:0}function qd(n,e){const o=n.length;if(o<=1)return[n];const c=[];let d,g;for(let _=0;_<o;_++){const b=De(n[_]);b!==0&&(n[_].area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(d&&c.push(d),d=[n[_]]):d.push(n[_]))}if(d&&c.push(d),e>1)for(let _=0;_<c.length;_++)c[_].length<=e||(l1(c[_],e,1,c[_].length-1,u1),c[_]=c[_].slice(0,e));return c}function u1(n,e){return e.area-n.area}function Hd(n,e,o){const c=o.patternDependencies;let d=!1;for(const g of e){const _=g.paint.get(`${n}-pattern`);_.isConstant()||(d=!0);const b=_.constantOr(null);b&&(d=!0,c[b.to]=!0,c[b.from]=!0)}return d}function Gd(n,e,o,c,d){const g=d.patternDependencies;for(const _ of e){const b=_.paint.get(`${n}-pattern`).value;if(b.kind!=="constant"){let E=b.evaluate({zoom:c-1},o,{},d.availableImages),P=b.evaluate({zoom:c},o,{},d.availableImages),z=b.evaluate({zoom:c+1},o,{},d.availableImages);E=E&&E.name?E.name:E,P=P&&P.name?P.name:P,z=z&&z.name?z.name:z,g[E]=!0,g[P]=!0,g[z]=!0,o.patterns[_.id]={min:E,mid:P,max:z}}}return o}class Zd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new er,this.indexArray=new Rn,this.indexArray2=new bi,this.programConfigurations=new Is(e.layers,e.zoom),this.segments=new ar,this.segments2=new ar,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,c){this.hasPattern=Hd("fill",this.layers,o);const d=this.layers[0].layout.get("fill-sort-key"),g=!d.isConstant(),_=[];for(const{feature:b,id:E,index:P,sourceLayerIndex:z}of e){const L=this.layers[0]._featureFilter.needGeometry,B=Ps(b,L);if(!this.layers[0]._featureFilter.filter(new kr(this.zoom),B,c))continue;const j=g?d.evaluate(B,{},c,o.availableImages):void 0,V={id:E,properties:b.properties,type:b.type,sourceLayerIndex:z,index:P,geometry:L?B.geometry:As(b),patterns:{},sortKey:j};_.push(V)}g&&_.sort((b,E)=>b.sortKey-E.sortKey);for(const b of _){const{geometry:E,index:P,sourceLayerIndex:z}=b;if(this.hasPattern){const L=Gd("fill",this.layers,b,this.zoom,o);this.patternFeatures.push(L)}else this.addFeature(b,E,P,c,{});o.featureIndex.insert(e[P].feature,E,P,z,this.index)}}update(e,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,c)}addFeatures(e,o,c){for(const d of this.patternFeatures)this.addFeature(d,d.geometry,d.index,o,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yx),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,o,c,d,g){for(const _ of qd(o,500)){let b=0;for(const j of _)b+=j.length;const E=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),P=E.vertexLength,z=[],L=[];for(const j of _){if(j.length===0)continue;j!==_[0]&&L.push(z.length/2);const V=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),Q=V.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(Q+j.length-1,Q),z.push(j[0].x),z.push(j[0].y);for(let ee=1;ee<j.length;ee++)this.layoutVertexArray.emplaceBack(j[ee].x,j[ee].y),this.indexArray2.emplaceBack(Q+ee-1,Q+ee),z.push(j[ee].x),z.push(j[ee].y);V.vertexLength+=j.length,V.primitiveLength+=j.length}const B=Cm(z,L);for(let j=0;j<B.length;j+=3)this.indexArray.emplaceBack(P+B[j],P+B[j+1],P+B[j+2]);E.vertexLength+=b,E.primitiveLength+=B.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,g,d)}}mt("FillBucket",Zd,{omit:["layers","patternFeatures"]});const h1=new nn({"fill-sort-key":new Ct(ve.layout_fill["fill-sort-key"])});var d1={paint:new nn({"fill-antialias":new wt(ve.paint_fill["fill-antialias"]),"fill-opacity":new Ct(ve.paint_fill["fill-opacity"]),"fill-color":new Ct(ve.paint_fill["fill-color"]),"fill-outline-color":new Ct(ve.paint_fill["fill-outline-color"]),"fill-translate":new wt(ve.paint_fill["fill-translate"]),"fill-translate-anchor":new wt(ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new ws(ve.paint_fill["fill-pattern"])}),layout:h1};const p1=on([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:f1}=p1;var jo={},m1=Ve,Dm=Aa;function Aa(n,e,o,c,d){this.properties={},this.extent=o,this.type=0,this._pbf=n,this._geometry=-1,this._keys=c,this._values=d,n.readFields(g1,this,e)}function g1(n,e,o){n==1?e.id=o.readVarint():n==2?function(c,d){for(var g=c.readVarint()+c.pos;c.pos<g;){var _=d._keys[c.readVarint()],b=d._values[c.readVarint()];d.properties[_]=b}}(o,e):n==3?e.type=o.readVarint():n==4&&(e._geometry=o.pos)}function _1(n){for(var e,o,c=0,d=0,g=n.length,_=g-1;d<g;_=d++)c+=((o=n[_]).x-(e=n[d]).x)*(e.y+o.y);return c}Aa.types=["Unknown","Point","LineString","Polygon"],Aa.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var e,o=n.readVarint()+n.pos,c=1,d=0,g=0,_=0,b=[];n.pos<o;){if(d<=0){var E=n.readVarint();c=7&E,d=E>>3}if(d--,c===1||c===2)g+=n.readSVarint(),_+=n.readSVarint(),c===1&&(e&&b.push(e),e=[]),e.push(new m1(g,_));else{if(c!==7)throw new Error("unknown command "+c);e&&e.push(e[0].clone())}}return e&&b.push(e),b},Aa.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var e=n.readVarint()+n.pos,o=1,c=0,d=0,g=0,_=1/0,b=-1/0,E=1/0,P=-1/0;n.pos<e;){if(c<=0){var z=n.readVarint();o=7&z,c=z>>3}if(c--,o===1||o===2)(d+=n.readSVarint())<_&&(_=d),d>b&&(b=d),(g+=n.readSVarint())<E&&(E=g),g>P&&(P=g);else if(o!==7)throw new Error("unknown command "+o)}return[_,E,b,P]},Aa.prototype.toGeoJSON=function(n,e,o){var c,d,g=this.extent*Math.pow(2,o),_=this.extent*n,b=this.extent*e,E=this.loadGeometry(),P=Aa.types[this.type];function z(j){for(var V=0;V<j.length;V++){var Q=j[V];j[V]=[360*(Q.x+_)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(Q.y+b)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var L=[];for(c=0;c<E.length;c++)L[c]=E[c][0];z(E=L);break;case 2:for(c=0;c<E.length;c++)z(E[c]);break;case 3:for(E=function(j){var V=j.length;if(V<=1)return[j];for(var Q,ee,fe=[],be=0;be<V;be++){var xe=_1(j[be]);xe!==0&&(ee===void 0&&(ee=xe<0),ee===xe<0?(Q&&fe.push(Q),Q=[j[be]]):Q.push(j[be]))}return Q&&fe.push(Q),fe}(E),c=0;c<E.length;c++)for(d=0;d<E[c].length;d++)z(E[c][d])}E.length===1?E=E[0]:P="Multi"+P;var B={type:"Feature",geometry:{type:P,coordinates:E},properties:this.properties};return"id"in this&&(B.id=this.id),B};var y1=Dm,zm=Mm;function Mm(n,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(v1,this,e),this.length=this._features.length}function v1(n,e,o){n===15?e.version=o.readVarint():n===1?e.name=o.readString():n===5?e.extent=o.readVarint():n===2?e._features.push(o.pos):n===3?e._keys.push(o.readString()):n===4&&e._values.push(function(c){for(var d=null,g=c.readVarint()+c.pos;c.pos<g;){var _=c.readVarint()>>3;d=_===1?c.readString():_===2?c.readFloat():_===3?c.readDouble():_===4?c.readVarint64():_===5?c.readVarint():_===6?c.readSVarint():_===7?c.readBoolean():null}return d}(o))}Mm.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var e=this._pbf.readVarint()+this._pbf.pos;return new y1(this._pbf,e,this.extent,this._keys,this._values)};var x1=zm;function b1(n,e,o){if(n===3){var c=new x1(o,o.readVarint()+o.pos);c.length&&(e[c.name]=c)}}jo.VectorTile=function(n,e){this.layers=n.readFields(b1,{},e)},jo.VectorTileFeature=Dm,jo.VectorTileLayer=zm;const w1=jo.VectorTileFeature.types,Wd=Math.pow(2,13);function tc(n,e,o,c,d,g,_,b){n.emplaceBack(e,o,2*Math.floor(c*Wd)+_,d*Wd*2,g*Wd*2,Math.round(b))}class Kd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Nr,this.indexArray=new Rn,this.programConfigurations=new Is(e.layers,e.zoom),this.segments=new ar,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,c){this.features=[],this.hasPattern=Hd("fill-extrusion",this.layers,o);for(const{feature:d,id:g,index:_,sourceLayerIndex:b}of e){const E=this.layers[0]._featureFilter.needGeometry,P=Ps(d,E);if(!this.layers[0]._featureFilter.filter(new kr(this.zoom),P,c))continue;const z={id:g,sourceLayerIndex:b,index:_,geometry:E?P.geometry:As(d),properties:d.properties,type:d.type,patterns:{}};this.hasPattern?this.features.push(Gd("fill-extrusion",this.layers,z,this.zoom,o)):this.addFeature(z,z.geometry,_,c,{}),o.featureIndex.insert(d,z.geometry,_,b,this.index,!0)}}addFeatures(e,o,c){for(const d of this.features){const{geometry:g}=d;this.addFeature(d,g,d.index,o,c)}}update(e,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,f1),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,o,c,d,g){for(const _ of qd(o,500)){let b=0;for(const j of _)b+=j.length;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const j of _){if(j.length===0||S1(j))continue;let V=0;for(let Q=0;Q<j.length;Q++){const ee=j[Q];if(Q>=1){const fe=j[Q-1];if(!E1(ee,fe)){E.vertexLength+4>ar.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const be=ee.sub(fe)._perp()._unit(),xe=fe.dist(ee);V+xe>32768&&(V=0),tc(this.layoutVertexArray,ee.x,ee.y,be.x,be.y,0,0,V),tc(this.layoutVertexArray,ee.x,ee.y,be.x,be.y,0,1,V),V+=xe,tc(this.layoutVertexArray,fe.x,fe.y,be.x,be.y,0,0,V),tc(this.layoutVertexArray,fe.x,fe.y,be.x,be.y,0,1,V);const ke=E.vertexLength;this.indexArray.emplaceBack(ke,ke+2,ke+1),this.indexArray.emplaceBack(ke+1,ke+2,ke+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+b>ar.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray)),w1[e.type]!=="Polygon")continue;const P=[],z=[],L=E.vertexLength;for(const j of _)if(j.length!==0){j!==_[0]&&z.push(P.length/2);for(let V=0;V<j.length;V++){const Q=j[V];tc(this.layoutVertexArray,Q.x,Q.y,0,0,1,1,0),P.push(Q.x),P.push(Q.y)}}const B=Cm(P,z);for(let j=0;j<B.length;j+=3)this.indexArray.emplaceBack(L+B[j],L+B[j+2],L+B[j+1]);E.primitiveLength+=B.length/3,E.vertexLength+=b}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,g,d)}}function E1(n,e){return n.x===e.x&&(n.x<0||n.x>sn)||n.y===e.y&&(n.y<0||n.y>sn)}function S1(n){return n.every(e=>e.x<0)||n.every(e=>e.x>sn)||n.every(e=>e.y<0)||n.every(e=>e.y>sn)}mt("FillExtrusionBucket",Kd,{omit:["layers","features"]});var T1={paint:new nn({"fill-extrusion-opacity":new wt(ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ct(ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wt(ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wt(ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ws(ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ct(ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ct(ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wt(ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function rc(n,e){return n.x*e.x+n.y*e.y}function Om(n,e){if(n.length===1){let o=0;const c=e[o++];let d;for(;!d||c.equals(d);)if(d=e[o++],!d)return 1/0;for(;o<e.length;o++){const g=e[o],_=n[0],b=d.sub(c),E=g.sub(c),P=_.sub(c),z=rc(b,b),L=rc(b,E),B=rc(E,E),j=rc(P,b),V=rc(P,E),Q=z*B-L*L,ee=(B*j-L*V)/Q,fe=(z*V-L*j)/Q,be=c.z*(1-ee-fe)+d.z*ee+g.z*fe;if(isFinite(be))return be}return 1/0}{let o=1/0;for(const c of e)o=Math.min(o,c.z);return o}}const I1=on([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:A1}=I1,P1=on([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:C1}=P1,k1=jo.VectorTileFeature.types,D1=Math.cos(Math.PI/180*37.5),Lm=Math.pow(2,14)/.5;class Xd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(o=>o.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Bt,this.layoutVertexArray2=new sr,this.indexArray=new Rn,this.programConfigurations=new Is(e.layers,e.zoom),this.segments=new ar,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(e,o,c){this.hasPattern=Hd("line",this.layers,o);const d=this.layers[0].layout.get("line-sort-key"),g=!d.isConstant(),_=[];for(const{feature:b,id:E,index:P,sourceLayerIndex:z}of e){const L=this.layers[0]._featureFilter.needGeometry,B=Ps(b,L);if(!this.layers[0]._featureFilter.filter(new kr(this.zoom),B,c))continue;const j=g?d.evaluate(B,{},c):void 0,V={id:E,properties:b.properties,type:b.type,sourceLayerIndex:z,index:P,geometry:L?B.geometry:As(b),patterns:{},sortKey:j};_.push(V)}g&&_.sort((b,E)=>b.sortKey-E.sortKey);for(const b of _){const{geometry:E,index:P,sourceLayerIndex:z}=b;if(this.hasPattern){const L=Gd("line",this.layers,b,this.zoom,o);this.patternFeatures.push(L)}else this.addFeature(b,E,P,c,{});o.featureIndex.insert(e[P].feature,E,P,z,this.index)}}update(e,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,o,this.stateDependentLayers,c)}addFeatures(e,o,c){for(const d of this.patternFeatures)this.addFeature(d,d.geometry,d.index,o,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,C1)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,A1),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,o,c,d,g){const _=this.layers[0].layout,b=_.get("line-join").evaluate(e,{}),E=_.get("line-cap"),P=_.get("line-miter-limit"),z=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const L of o)this.addLine(L,e,b,E,P,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,g,d)}addLine(e,o,c,d,g,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<e.length-1;fe++)this.totalDistance+=e[fe].dist(e[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=k1[o.type]==="Polygon";let E=e.length;for(;E>=2&&e[E-1].equals(e[E-2]);)E--;let P=0;for(;P<E-1&&e[P].equals(e[P+1]);)P++;if(E<(b?3:2))return;c==="bevel"&&(g=1.05);const z=this.overscaling<=16?122880/(512*this.overscaling):0,L=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let B,j,V,Q,ee;this.e1=this.e2=-1,b&&(B=e[E-2],ee=e[P].sub(B)._unit()._perp());for(let fe=P;fe<E;fe++){if(V=fe===E-1?b?e[P+1]:void 0:e[fe+1],V&&e[fe].equals(V))continue;ee&&(Q=ee),B&&(j=B),B=e[fe],ee=V?V.sub(B)._unit()._perp():Q,Q=Q||ee;let be=Q.add(ee);be.x===0&&be.y===0||be._unit();const xe=Q.x*ee.x+Q.y*ee.y,ke=be.x*ee.x+be.y*ee.y,je=ke!==0?1/ke:1/0,Be=2*Math.sqrt(2-2*ke),gt=ke<D1&&j&&V,Tt=Q.x*ee.y-Q.y*ee.x>0;if(gt&&fe>P){const tt=B.dist(j);if(tt>2*z){const pt=B.sub(B.sub(j)._mult(z/tt)._round());this.updateDistance(j,pt),this.addCurrentVertex(pt,Q,0,0,L),j=pt}}const lt=j&&V;let ct=lt?c:b?"butt":d;if(lt&&ct==="round"&&(je<_?ct="miter":je<=2&&(ct="fakeround")),ct==="miter"&&je>g&&(ct="bevel"),ct==="bevel"&&(je>2&&(ct="flipbevel"),je<g&&(ct="miter")),j&&this.updateDistance(j,B),ct==="miter")be._mult(je),this.addCurrentVertex(B,be,0,0,L);else if(ct==="flipbevel"){if(je>100)be=ee.mult(-1);else{const tt=je*Q.add(ee).mag()/Q.sub(ee).mag();be._perp()._mult(tt*(Tt?-1:1))}this.addCurrentVertex(B,be,0,0,L),this.addCurrentVertex(B,be.mult(-1),0,0,L)}else if(ct==="bevel"||ct==="fakeround"){const tt=-Math.sqrt(je*je-1),pt=Tt?tt:0,ut=Tt?0:tt;if(j&&this.addCurrentVertex(B,Q,pt,ut,L),ct==="fakeround"){const We=Math.round(180*Be/Math.PI/20);for(let kt=1;kt<We;kt++){let It=kt/We;if(It!==.5){const mr=It-.5;It+=It*mr*(It-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*mr*mr+(.848013+xe*(.215638*xe-1.06021)))}const tr=ee.sub(Q)._mult(It)._add(Q)._unit()._mult(Tt?-1:1);this.addHalfVertex(B,tr.x,tr.y,!1,Tt,0,L)}}V&&this.addCurrentVertex(B,ee,-pt,-ut,L)}else if(ct==="butt")this.addCurrentVertex(B,be,0,0,L);else if(ct==="square"){const tt=j?1:-1;this.addCurrentVertex(B,be,tt,tt,L)}else ct==="round"&&(j&&(this.addCurrentVertex(B,Q,0,0,L),this.addCurrentVertex(B,Q,1,1,L,!0)),V&&(this.addCurrentVertex(B,ee,-1,-1,L,!0),this.addCurrentVertex(B,ee,0,0,L)));if(gt&&fe<E-1){const tt=B.dist(V);if(tt>2*z){const pt=B.add(V.sub(B)._mult(z/tt)._round());this.updateDistance(B,pt),this.addCurrentVertex(pt,ee,0,0,L),B=pt}}}}addCurrentVertex(e,o,c,d,g,_=!1){const b=o.y*d-o.x,E=-o.y-o.x*d;this.addHalfVertex(e,o.x+o.y*c,o.y-o.x*c,_,!1,c,g),this.addHalfVertex(e,b,E,_,!0,-d,g),this.distance>Lm/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,o,c,d,g,_))}addHalfVertex({x:e,y:o},c,d,g,_,b,E){const P=.5*(this.lineClips?this.scaledDistance*(Lm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(g?1:0),(o<<1)+(_?1:0),Math.round(63*c)+128,Math.round(63*d)+128,1+(b===0?0:b<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const z=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),E.primitiveLength++),_?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,o){this.distance+=e.dist(o),this.updateScaledDistance()}}mt("LineBucket",Xd,{omit:["layers","patternFeatures"]});const z1=new nn({"line-cap":new wt(ve.layout_line["line-cap"]),"line-join":new Ct(ve.layout_line["line-join"]),"line-miter-limit":new wt(ve.layout_line["line-miter-limit"]),"line-round-limit":new wt(ve.layout_line["line-round-limit"]),"line-sort-key":new Ct(ve.layout_line["line-sort-key"])});var Rm={paint:new nn({"line-opacity":new Ct(ve.paint_line["line-opacity"]),"line-color":new Ct(ve.paint_line["line-color"]),"line-translate":new wt(ve.paint_line["line-translate"]),"line-translate-anchor":new wt(ve.paint_line["line-translate-anchor"]),"line-width":new Ct(ve.paint_line["line-width"]),"line-gap-width":new Ct(ve.paint_line["line-gap-width"]),"line-offset":new Ct(ve.paint_line["line-offset"]),"line-blur":new Ct(ve.paint_line["line-blur"]),"line-dasharray":new Es(ve.paint_line["line-dasharray"]),"line-pattern":new ws(ve.paint_line["line-pattern"]),"line-gradient":new Hl(ve.paint_line["line-gradient"])}),layout:z1};const Bm=new class extends Ct{possiblyEvaluate(n,e){return e=new kr(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(n,e)}evaluate(n,e,o,c){return e=oe({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(n,e,o,c)}}(Rm.paint.properties["line-width"].specification);function Fm(n,e){return e>0?e+2*n:n}Bm.useIntegerZoom=!0;const M1=on([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),O1=on([{name:"a_projected_pos",components:3,type:"Float32"}],4);on([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const L1=on([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);on([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Nm=on([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),R1=on([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function B1(n,e,o){return n.sections.forEach(c=>{c.text=function(d,g,_){const b=g.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?d=d.toLocaleUpperCase():b==="lowercase"&&(d=d.toLocaleLowerCase()),Qn.applyArabicShaping&&(d=Qn.applyArabicShaping(d)),d}(c.text,e,o)}),n}on([{name:"triangle",components:3,type:"Uint16"}]),on([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),on([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),on([{type:"Float32",name:"offsetX"}]),on([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const nc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var pn=24,Jd=br,jm=function(n,e,o,c,d){var g,_,b=8*d-c-1,E=(1<<b)-1,P=E>>1,z=-7,L=o?d-1:0,B=o?-1:1,j=n[e+L];for(L+=B,g=j&(1<<-z)-1,j>>=-z,z+=b;z>0;g=256*g+n[e+L],L+=B,z-=8);for(_=g&(1<<-z)-1,g>>=-z,z+=c;z>0;_=256*_+n[e+L],L+=B,z-=8);if(g===0)g=1-P;else{if(g===E)return _?NaN:1/0*(j?-1:1);_+=Math.pow(2,c),g-=P}return(j?-1:1)*_*Math.pow(2,g-c)},Vm=function(n,e,o,c,d,g){var _,b,E,P=8*g-d-1,z=(1<<P)-1,L=z>>1,B=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=c?0:g-1,V=c?1:-1,Q=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(b=isNaN(e)?1:0,_=z):(_=Math.floor(Math.log(e)/Math.LN2),e*(E=Math.pow(2,-_))<1&&(_--,E*=2),(e+=_+L>=1?B/E:B*Math.pow(2,1-L))*E>=2&&(_++,E/=2),_+L>=z?(b=0,_=z):_+L>=1?(b=(e*E-1)*Math.pow(2,d),_+=L):(b=e*Math.pow(2,L-1)*Math.pow(2,d),_=0));d>=8;n[o+j]=255&b,j+=V,b/=256,d-=8);for(_=_<<d|b,P+=d;P>0;n[o+j]=255&_,j+=V,_/=256,P-=8);n[o+j-V]|=128*Q};function br(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}br.Varint=0,br.Fixed64=1,br.Bytes=2,br.Fixed32=5;var Vo,Yd=4294967296,Um=1/Yd,$m=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function uo(n){return n.type===br.Bytes?n.readVarint()+n.pos:n.pos+1}function Pa(n,e,o){return o?4294967296*e+(n>>>0):4294967296*(e>>>0)+(n>>>0)}function qm(n,e,o){var c=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));o.realloc(c);for(var d=o.pos-1;d>=n;d--)o.buf[d+c]=o.buf[d]}function F1(n,e){for(var o=0;o<n.length;o++)e.writeVarint(n[o])}function N1(n,e){for(var o=0;o<n.length;o++)e.writeSVarint(n[o])}function j1(n,e){for(var o=0;o<n.length;o++)e.writeFloat(n[o])}function V1(n,e){for(var o=0;o<n.length;o++)e.writeDouble(n[o])}function U1(n,e){for(var o=0;o<n.length;o++)e.writeBoolean(n[o])}function $1(n,e){for(var o=0;o<n.length;o++)e.writeFixed32(n[o])}function q1(n,e){for(var o=0;o<n.length;o++)e.writeSFixed32(n[o])}function H1(n,e){for(var o=0;o<n.length;o++)e.writeFixed64(n[o])}function G1(n,e){for(var o=0;o<n.length;o++)e.writeSFixed64(n[o])}function Fu(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+16777216*n[e+3]}function Ca(n,e,o){n[o]=e,n[o+1]=e>>>8,n[o+2]=e>>>16,n[o+3]=e>>>24}function Hm(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+(n[e+3]<<24)}function Z1(n,e,o){n===1&&o.readMessage(W1,e)}function W1(n,e,o){if(n===3){const{id:c,bitmap:d,width:g,height:_,left:b,top:E,advance:P}=o.readMessage(K1,{});e.push({id:c,bitmap:new Xl({width:g+6,height:_+6},d),metrics:{width:g,height:_,left:b,top:E,advance:P}})}}function K1(n,e,o){n===1?e.id=o.readVarint():n===2?e.bitmap=o.readBytes():n===3?e.width=o.readVarint():n===4?e.height=o.readVarint():n===5?e.left=o.readSVarint():n===6?e.top=o.readSVarint():n===7&&(e.advance=o.readVarint())}function Gm(n){let e=0,o=0;for(const _ of n)e+=_.w*_.h,o=Math.max(o,_.w);n.sort((_,b)=>b.h-_.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),o),h:1/0}];let d=0,g=0;for(const _ of n)for(let b=c.length-1;b>=0;b--){const E=c[b];if(!(_.w>E.w||_.h>E.h)){if(_.x=E.x,_.y=E.y,g=Math.max(g,_.y+_.h),d=Math.max(d,_.x+_.w),_.w===E.w&&_.h===E.h){const P=c.pop();b<c.length&&(c[b]=P)}else _.h===E.h?(E.x+=_.w,E.w-=_.w):_.w===E.w?(E.y+=_.h,E.h-=_.h):(c.push({x:E.x+_.w,y:E.y,w:E.w-_.w,h:_.h}),E.y+=_.h,E.h-=_.h);break}}return{w:d,h:g,fill:e/(d*g)||0}}br.prototype={destroy:function(){this.buf=null},readFields:function(n,e,o){for(o=o||this.length;this.pos<o;){var c=this.readVarint(),d=c>>3,g=this.pos;this.type=7&c,n(d,e,this),this.pos===g&&this.skip(c)}return e},readMessage:function(n,e){return this.readFields(n,e,this.readVarint()+this.pos)},readFixed32:function(){var n=Fu(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Hm(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=Fu(this.buf,this.pos)+Fu(this.buf,this.pos+4)*Yd;return this.pos+=8,n},readSFixed64:function(){var n=Fu(this.buf,this.pos)+Hm(this.buf,this.pos+4)*Yd;return this.pos+=8,n},readFloat:function(){var n=jm(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=jm(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var e,o,c=this.buf;return e=127&(o=c[this.pos++]),o<128?e:(e|=(127&(o=c[this.pos++]))<<7,o<128?e:(e|=(127&(o=c[this.pos++]))<<14,o<128?e:(e|=(127&(o=c[this.pos++]))<<21,o<128?e:function(d,g,_){var b,E,P=_.buf;if(b=(112&(E=P[_.pos++]))>>4,E<128||(b|=(127&(E=P[_.pos++]))<<3,E<128)||(b|=(127&(E=P[_.pos++]))<<10,E<128)||(b|=(127&(E=P[_.pos++]))<<17,E<128)||(b|=(127&(E=P[_.pos++]))<<24,E<128)||(b|=(1&(E=P[_.pos++]))<<31,E<128))return Pa(d,b,g);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(o=c[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var n=this.readVarint()+this.pos,e=this.pos;return this.pos=n,n-e>=12&&$m?function(o,c,d){return $m.decode(o.subarray(c,d))}(this.buf,e,n):function(o,c,d){for(var g="",_=c;_<d;){var b,E,P,z=o[_],L=null,B=z>239?4:z>223?3:z>191?2:1;if(_+B>d)break;B===1?z<128&&(L=z):B===2?(192&(b=o[_+1]))==128&&(L=(31&z)<<6|63&b)<=127&&(L=null):B===3?(E=o[_+2],(192&(b=o[_+1]))==128&&(192&E)==128&&((L=(15&z)<<12|(63&b)<<6|63&E)<=2047||L>=55296&&L<=57343)&&(L=null)):B===4&&(E=o[_+2],P=o[_+3],(192&(b=o[_+1]))==128&&(192&E)==128&&(192&P)==128&&((L=(15&z)<<18|(63&b)<<12|(63&E)<<6|63&P)<=65535||L>=1114112)&&(L=null)),L===null?(L=65533,B=1):L>65535&&(L-=65536,g+=String.fromCharCode(L>>>10&1023|55296),L=56320|1023&L),g+=String.fromCharCode(L),_+=B}return g}(this.buf,e,n)},readBytes:function(){var n=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,n);return this.pos=n,e},readPackedVarint:function(n,e){if(this.type!==br.Bytes)return n.push(this.readVarint(e));var o=uo(this);for(n=n||[];this.pos<o;)n.push(this.readVarint(e));return n},readPackedSVarint:function(n){if(this.type!==br.Bytes)return n.push(this.readSVarint());var e=uo(this);for(n=n||[];this.pos<e;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==br.Bytes)return n.push(this.readBoolean());var e=uo(this);for(n=n||[];this.pos<e;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==br.Bytes)return n.push(this.readFloat());var e=uo(this);for(n=n||[];this.pos<e;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==br.Bytes)return n.push(this.readDouble());var e=uo(this);for(n=n||[];this.pos<e;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==br.Bytes)return n.push(this.readFixed32());var e=uo(this);for(n=n||[];this.pos<e;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==br.Bytes)return n.push(this.readSFixed32());var e=uo(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==br.Bytes)return n.push(this.readFixed64());var e=uo(this);for(n=n||[];this.pos<e;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==br.Bytes)return n.push(this.readSFixed64());var e=uo(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed64());return n},skip:function(n){var e=7&n;if(e===br.Varint)for(;this.buf[this.pos++]>127;);else if(e===br.Bytes)this.pos=this.readVarint()+this.pos;else if(e===br.Fixed32)this.pos+=4;else{if(e!==br.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(n,e){this.writeVarint(n<<3|e)},realloc:function(n){for(var e=this.length||16;e<this.pos+n;)e*=2;if(e!==this.length){var o=new Uint8Array(e);o.set(this.buf),this.buf=o,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Ca(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Ca(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Ca(this.buf,-1&n,this.pos),Ca(this.buf,Math.floor(n*Um),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Ca(this.buf,-1&n,this.pos),Ca(this.buf,Math.floor(n*Um),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(e,o){var c,d;if(e>=0?(c=e%4294967296|0,d=e/4294967296|0):(d=~(-e/4294967296),4294967295^(c=~(-e%4294967296))?c=c+1|0:(c=0,d=d+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(g,_,b){b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,b.buf[b.pos]=127&(g>>>=7)}(c,0,o),function(g,_){var b=(7&g)<<4;_.buf[_.pos++]|=b|((g>>>=3)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g)))))}(d,o)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(Boolean(n))},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var e=this.pos;this.pos=function(c,d,g){for(var _,b,E=0;E<d.length;E++){if((_=d.charCodeAt(E))>55295&&_<57344){if(!b){_>56319||E+1===d.length?(c[g++]=239,c[g++]=191,c[g++]=189):b=_;continue}if(_<56320){c[g++]=239,c[g++]=191,c[g++]=189,b=_;continue}_=b-55296<<10|_-56320|65536,b=null}else b&&(c[g++]=239,c[g++]=191,c[g++]=189,b=null);_<128?c[g++]=_:(_<2048?c[g++]=_>>6|192:(_<65536?c[g++]=_>>12|224:(c[g++]=_>>18|240,c[g++]=_>>12&63|128),c[g++]=_>>6&63|128),c[g++]=63&_|128)}return g}(this.buf,n,this.pos);var o=this.pos-e;o>=128&&qm(e,o,this),this.pos=e-1,this.writeVarint(o),this.pos+=o},writeFloat:function(n){this.realloc(4),Vm(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),Vm(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var e=n.length;this.writeVarint(e),this.realloc(e);for(var o=0;o<e;o++)this.buf[this.pos++]=n[o]},writeRawMessage:function(n,e){this.pos++;var o=this.pos;n(e,this);var c=this.pos-o;c>=128&&qm(o,c,this),this.pos=o-1,this.writeVarint(c),this.pos+=c},writeMessage:function(n,e,o){this.writeTag(n,br.Bytes),this.writeRawMessage(e,o)},writePackedVarint:function(n,e){e.length&&this.writeMessage(n,F1,e)},writePackedSVarint:function(n,e){e.length&&this.writeMessage(n,N1,e)},writePackedBoolean:function(n,e){e.length&&this.writeMessage(n,U1,e)},writePackedFloat:function(n,e){e.length&&this.writeMessage(n,j1,e)},writePackedDouble:function(n,e){e.length&&this.writeMessage(n,V1,e)},writePackedFixed32:function(n,e){e.length&&this.writeMessage(n,$1,e)},writePackedSFixed32:function(n,e){e.length&&this.writeMessage(n,q1,e)},writePackedFixed64:function(n,e){e.length&&this.writeMessage(n,H1,e)},writePackedSFixed64:function(n,e){e.length&&this.writeMessage(n,G1,e)},writeBytesField:function(n,e){this.writeTag(n,br.Bytes),this.writeBytes(e)},writeFixed32Field:function(n,e){this.writeTag(n,br.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(n,e){this.writeTag(n,br.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(n,e){this.writeTag(n,br.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(n,e){this.writeTag(n,br.Fixed64),this.writeSFixed64(e)},writeVarintField:function(n,e){this.writeTag(n,br.Varint),this.writeVarint(e)},writeSVarintField:function(n,e){this.writeTag(n,br.Varint),this.writeSVarint(e)},writeStringField:function(n,e){this.writeTag(n,br.Bytes),this.writeString(e)},writeFloatField:function(n,e){this.writeTag(n,br.Fixed32),this.writeFloat(e)},writeDoubleField:function(n,e){this.writeTag(n,br.Fixed64),this.writeDouble(e)},writeBooleanField:function(n,e){this.writeVarintField(n,Boolean(e))}};class Qd{constructor(e,{pixelRatio:o,version:c,stretchX:d,stretchY:g,content:_}){this.paddedRect=e,this.pixelRatio=o,this.stretchX=d,this.stretchY=g,this.content=_,this.version=c}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Zm{constructor(e,o){const c={},d={};this.haveRenderCallbacks=[];const g=[];this.addImages(e,c,g),this.addImages(o,d,g);const{w:_,h:b}=Gm(g),E=new ui({width:_||1,height:b||1});for(const P in e){const z=e[P],L=c[P].paddedRect;ui.copy(z.data,E,{x:0,y:0},{x:L.x+1,y:L.y+1},z.data)}for(const P in o){const z=o[P],L=d[P].paddedRect,B=L.x+1,j=L.y+1,V=z.data.width,Q=z.data.height;ui.copy(z.data,E,{x:0,y:0},{x:B,y:j},z.data),ui.copy(z.data,E,{x:0,y:Q-1},{x:B,y:j-1},{width:V,height:1}),ui.copy(z.data,E,{x:0,y:0},{x:B,y:j+Q},{width:V,height:1}),ui.copy(z.data,E,{x:V-1,y:0},{x:B-1,y:j},{width:1,height:Q}),ui.copy(z.data,E,{x:0,y:0},{x:B+V,y:j},{width:1,height:Q})}this.image=E,this.iconPositions=c,this.patternPositions=d}addImages(e,o,c){for(const d in e){const g=e[d],_={x:0,y:0,w:g.data.width+2,h:g.data.height+2};c.push(_),o[d]=new Qd(_,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(e,o){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in e.updatedImages)this.patchUpdatedImage(this.iconPositions[c],e.getImage(c),o),this.patchUpdatedImage(this.patternPositions[c],e.getImage(c),o)}patchUpdatedImage(e,o,c){if(!e||!o||e.version===o.version)return;e.version=o.version;const[d,g]=e.tl;c.update(o.data,void 0,{x:d,y:g})}}mt("ImagePosition",Qd),mt("ImageAtlas",Zm),l.WritingMode=void 0,(Vo=l.WritingMode||(l.WritingMode={}))[Vo.none=0]="none",Vo[Vo.horizontal=1]="horizontal",Vo[Vo.vertical=2]="vertical",Vo[Vo.horizontalOnly=3]="horizontalOnly";const Nu=-17;class ic{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,o){const c=new ic;return c.scale=e||1,c.fontStack=o,c}static forImage(e){const o=new ic;return o.imageName=e,o}}class ka{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,o){const c=new ka;for(let d=0;d<e.sections.length;d++){const g=e.sections[d];g.image?c.addImageSection(g):c.addTextSection(g,o)}return c}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let o="";for(let c=0;c<e.length;c++){const d=e.charCodeAt(c+1)||null,g=e.charCodeAt(c-1)||null;o+=d&&Eu(d)&&!nc[e[c+1]]||g&&Eu(g)&&!nc[e[c-1]]||!nc[e[c]]?e[c]:nc[e[c]]}return o}(this.text)}trim(){let e=0;for(let c=0;c<this.text.length&&Vu[this.text.charCodeAt(c)];c++)e++;let o=this.text.length;for(let c=this.text.length-1;c>=0&&c>=e&&Vu[this.text.charCodeAt(c)];c--)o--;this.text=this.text.substring(e,o),this.sectionIndex=this.sectionIndex.slice(e,o)}substring(e,o){const c=new ka;return c.text=this.text.substring(e,o),c.sectionIndex=this.sectionIndex.slice(e,o),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,o)=>Math.max(e,this.sections[o].scale),0)}addTextSection(e,o){this.text+=e.text,this.sections.push(ic.forText(e.scale,e.fontStack||o));const c=this.sections.length-1;for(let d=0;d<e.text.length;++d)this.sectionIndex.push(c)}addImageSection(e){const o=e.image?e.image.name:"";if(o.length===0)return void Me("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(ic.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Me("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ju(n,e,o,c,d,g,_,b,E,P,z,L,B,j,V,Q){const ee=ka.fromFeature(n,d);let fe;L===l.WritingMode.vertical&&ee.verticalizePunctuation();const{processBidirectionalText:be,processStyledBidirectionalText:xe}=Qn;if(be&&ee.sections.length===1){fe=[];const Be=be(ee.toString(),ep(ee,P,g,e,c,j,V));for(const gt of Be){const Tt=new ka;Tt.text=gt,Tt.sections=ee.sections;for(let lt=0;lt<gt.length;lt++)Tt.sectionIndex.push(0);fe.push(Tt)}}else if(xe){fe=[];const Be=xe(ee.text,ee.sectionIndex,ep(ee,P,g,e,c,j,V));for(const gt of Be){const Tt=new ka;Tt.text=gt[0],Tt.sectionIndex=gt[1],Tt.sections=ee.sections,fe.push(Tt)}}else fe=function(Be,gt){const Tt=[],lt=Be.text;let ct=0;for(const tt of gt)Tt.push(Be.substring(ct,tt)),ct=tt;return ct<lt.length&&Tt.push(Be.substring(ct,lt.length)),Tt}(ee,ep(ee,P,g,e,c,j,V));const ke=[],je={positionedLines:ke,text:ee.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:L,iconsInText:!1,verticalizable:!1};return function(Be,gt,Tt,lt,ct,tt,pt,ut,We,kt,It,tr){let mr=0,zr=Nu,Mr=0,_n=0;const Yr=ut==="right"?1:ut==="left"?0:.5;let Qr=0;for(const en of ct){en.trim();const vn=en.getMaxScale(),Pn=(vn-1)*pn,Bn={positionedGlyphs:[],lineOffset:0};Be.positionedLines[Qr]=Bn;const Hn=Bn.positionedGlyphs;let Gn=0;if(!en.length()){zr+=tt,++Qr;continue}for(let cn=0;cn<en.length();cn++){const Jt=en.getSection(cn),ri=en.getSectionIndex(cn),xn=en.getCharCode(cn);let Cn=0,Ti=null,Mi=null,Oi=null,po=pn;const Ii=!(We===l.WritingMode.horizontal||!It&&!bs(xn)||It&&(Vu[xn]||(ln=xn,it.Arabic(ln)||it["Arabic Supplement"](ln)||it["Arabic Extended-A"](ln)||it["Arabic Presentation Forms-A"](ln)||it["Arabic Presentation Forms-B"](ln))));if(Jt.imageName){const hi=lt[Jt.imageName];if(!hi)continue;Oi=Jt.imageName,Be.iconsInText=Be.iconsInText||!0,Mi=hi.paddedRect;const Zn=hi.displaySize;Jt.scale=Jt.scale*pn/tr,Ti={width:Zn[0],height:Zn[1],left:1,top:-3,advance:Ii?Zn[1]:Zn[0]},Cn=Pn+(pn-Zn[1]*Jt.scale),po=Ti.advance;const fo=Ii?Zn[0]*Jt.scale-pn*vn:Zn[1]*Jt.scale-pn*vn;fo>0&&fo>Gn&&(Gn=fo)}else{const hi=Tt[Jt.fontStack],Zn=hi&&hi[xn];if(Zn&&Zn.rect)Mi=Zn.rect,Ti=Zn.metrics;else{const fo=gt[Jt.fontStack],ac=fo&&fo[xn];if(!ac)continue;Ti=ac.metrics}Cn=(vn-Jt.scale)*pn}Ii?(Be.verticalizable=!0,Hn.push({glyph:xn,imageName:Oi,x:mr,y:zr+Cn,vertical:Ii,scale:Jt.scale,fontStack:Jt.fontStack,sectionIndex:ri,metrics:Ti,rect:Mi}),mr+=po*Jt.scale+kt):(Hn.push({glyph:xn,imageName:Oi,x:mr,y:zr+Cn,vertical:Ii,scale:Jt.scale,fontStack:Jt.fontStack,sectionIndex:ri,metrics:Ti,rect:Mi}),mr+=Ti.advance*Jt.scale+kt)}Hn.length!==0&&(Mr=Math.max(mr-kt,Mr),Y1(Hn,0,Hn.length-1,Yr,Gn)),mr=0;const Br=tt*vn+Gn;Bn.lineOffset=Math.max(Gn,Pn),zr+=Br,_n=Math.max(Br,_n),++Qr}var ln;const yn=zr-Nu,{horizontalAlign:An,verticalAlign:qn}=tp(pt);(function(en,vn,Pn,Bn,Hn,Gn,Br,cn,Jt){const ri=(vn-Pn)*Hn;let xn=0;xn=Gn!==Br?-cn*Bn-Nu:(-Bn*Jt+.5)*Br;for(const Cn of en)for(const Ti of Cn.positionedGlyphs)Ti.x+=ri,Ti.y+=xn})(Be.positionedLines,Yr,An,qn,Mr,_n,tt,yn,ct.length),Be.top+=-qn*yn,Be.bottom=Be.top+yn,Be.left+=-An*Mr,Be.right=Be.left+Mr}(je,e,o,c,fe,_,b,E,L,P,B,Q),!function(Be){for(const gt of Be)if(gt.positionedGlyphs.length!==0)return!1;return!0}(ke)&&je}const Vu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},X1={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Wm(n,e,o,c,d,g){if(e.imageName){const _=c[e.imageName];return _?_.displaySize[0]*e.scale*pn/g+d:0}{const _=o[e.fontStack],b=_&&_[n];return b?b.metrics.advance*e.scale+d:0}}function Km(n,e,o,c){const d=Math.pow(n-e,2);return c?n<e?d/2:2*d:d+Math.abs(o)*o}function J1(n,e,o){let c=0;return n===10&&(c-=1e4),o&&(c+=150),n!==40&&n!==65288||(c+=50),e!==41&&e!==65289||(c+=50),c}function Xm(n,e,o,c,d,g){let _=null,b=Km(e,o,d,g);for(const E of c){const P=Km(e-E.x,o,d,g)+E.badness;P<=b&&(_=E,b=P)}return{index:n,x:e,priorBreak:_,badness:b}}function Jm(n){return n?Jm(n.priorBreak).concat(n.index):[]}function ep(n,e,o,c,d,g,_){if(g!=="point")return[];if(!n)return[];const b=[],E=function(B,j,V,Q,ee,fe){let be=0;for(let xe=0;xe<B.length();xe++){const ke=B.getSection(xe);be+=Wm(B.getCharCode(xe),ke,Q,ee,j,fe)}return be/Math.max(1,Math.ceil(be/V))}(n,e,o,c,d,_),P=n.text.indexOf("\u200B")>=0;let z=0;for(let B=0;B<n.length();B++){const j=n.getSection(B),V=n.getCharCode(B);if(Vu[V]||(z+=Wm(V,j,c,d,e,_)),B<n.length()-1){const Q=!((L=V)<11904||!(it["Bopomofo Extended"](L)||it.Bopomofo(L)||it["CJK Compatibility Forms"](L)||it["CJK Compatibility Ideographs"](L)||it["CJK Compatibility"](L)||it["CJK Radicals Supplement"](L)||it["CJK Strokes"](L)||it["CJK Symbols and Punctuation"](L)||it["CJK Unified Ideographs Extension A"](L)||it["CJK Unified Ideographs"](L)||it["Enclosed CJK Letters and Months"](L)||it["Halfwidth and Fullwidth Forms"](L)||it.Hiragana(L)||it["Ideographic Description Characters"](L)||it["Kangxi Radicals"](L)||it["Katakana Phonetic Extensions"](L)||it.Katakana(L)||it["Vertical Forms"](L)||it["Yi Radicals"](L)||it["Yi Syllables"](L)));(X1[V]||Q||j.imageName)&&b.push(Xm(B+1,z,E,b,J1(V,n.getCharCode(B+1),Q&&P),!1))}}var L;return Jm(Xm(n.length(),z,E,b,0,!0))}function tp(n){let e=.5,o=.5;switch(n){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:e,verticalAlign:o}}function Y1(n,e,o,c,d){if(!c&&!d)return;const g=n[o],_=(n[o].x+g.metrics.advance*g.scale)*c;for(let b=e;b<=o;b++)n[b].x-=_,n[b].y+=d}function Q1(n,e,o){const{horizontalAlign:c,verticalAlign:d}=tp(o),g=e[0]-n.displaySize[0]*c,_=e[1]-n.displaySize[1]*d;return{image:n,top:_,bottom:_+n.displaySize[1],left:g,right:g+n.displaySize[0]}}function Ym(n,e,o,c,d,g){const _=n.image;let b;if(_.content){const ee=_.content,fe=_.pixelRatio||1;b=[ee[0]/fe,ee[1]/fe,_.displaySize[0]-ee[2]/fe,_.displaySize[1]-ee[3]/fe]}const E=e.left*g,P=e.right*g;let z,L,B,j;o==="width"||o==="both"?(j=d[0]+E-c[3],L=d[0]+P+c[1]):(j=d[0]+(E+P-_.displaySize[0])/2,L=j+_.displaySize[0]);const V=e.top*g,Q=e.bottom*g;return o==="height"||o==="both"?(z=d[1]+V-c[0],B=d[1]+Q+c[2]):(z=d[1]+(V+Q-_.displaySize[1])/2,B=z+_.displaySize[1]),{image:_,top:z,right:L,bottom:B,left:j,collisionPadding:b}}const ho=128;function Qm(n,e){const{expression:o}=e;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new kr(n+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:d}=o;let g=0;for(;g<c.length&&c[g]<=n;)g++;g=Math.max(0,g-1);let _=g;for(;_<c.length&&c[_]<n+1;)_++;_=Math.min(c.length-1,_);const b=c[g],E=c[_];return o.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:E,interpolationType:d}:{kind:"camera",minZoom:b,maxZoom:E,minSize:o.evaluate(new kr(b)),maxSize:o.evaluate(new kr(E)),interpolationType:d}}}class Uo extends Ve{constructor(e,o,c,d){super(e,o),this.angle=c,d!==void 0&&(this.segment=d)}clone(){return new Uo(this.x,this.y,this.angle,this.segment)}}function eg(n,e,o,c,d){if(e.segment===void 0)return!0;let g=e,_=e.segment+1,b=0;for(;b>-o/2;){if(_--,_<0)return!1;b-=n[_].dist(g),g=n[_]}b+=n[_].dist(n[_+1]),_++;const E=[];let P=0;for(;b<o/2;){const z=n[_],L=n[_+1];if(!L)return!1;let B=n[_-1].angleTo(z)-z.angleTo(L);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:b,angleDelta:B}),P+=B;b-E[0].distance>c;)P-=E.shift().angleDelta;if(P>d)return!1;_++,b+=z.dist(L)}return!0}function tg(n){let e=0;for(let o=0;o<n.length-1;o++)e+=n[o].dist(n[o+1]);return e}function rg(n,e,o){return n?.6*e*o:0}function ng(n,e){return Math.max(n?n.right-n.left:0,e?e.right-e.left:0)}function eb(n,e,o,c,d,g){const _=rg(o,d,g),b=ng(o,c)*g;let E=0;const P=tg(n)/2;for(let z=0;z<n.length-1;z++){const L=n[z],B=n[z+1],j=L.dist(B);if(E+j>P){const V=(P-E)/j,Q=Xr(L.x,B.x,V),ee=Xr(L.y,B.y,V),fe=new Uo(Q,ee,B.angleTo(L),z);return fe._round(),!_||eg(n,fe,b,_,e)?fe:void 0}E+=j}}function tb(n,e,o,c,d,g,_,b,E){const P=rg(c,g,_),z=ng(c,d),L=z*_,B=n[0].x===0||n[0].x===E||n[0].y===0||n[0].y===E;return e-L<e/4&&(e=L+e/4),ig(n,B?e/2*b%e:(z/2+2*g)*_*b%e,e,P,o,L,B,!1,E)}function ig(n,e,o,c,d,g,_,b,E){const P=g/2,z=tg(n);let L=0,B=e-o,j=[];for(let V=0;V<n.length-1;V++){const Q=n[V],ee=n[V+1],fe=Q.dist(ee),be=ee.angleTo(Q);for(;B+o<L+fe;){B+=o;const xe=(B-L)/fe,ke=Xr(Q.x,ee.x,xe),je=Xr(Q.y,ee.y,xe);if(ke>=0&&ke<E&&je>=0&&je<E&&B-P>=0&&B+P<=z){const Be=new Uo(ke,je,be,V);Be._round(),c&&!eg(n,Be,g,c,d)||j.push(Be)}}L+=fe}return b||j.length||_||(j=ig(n,L/2,o,c,d,g,_,!0,E)),j}function og(n,e,o,c,d){const g=[];for(let _=0;_<n.length;_++){const b=n[_];let E;for(let P=0;P<b.length-1;P++){let z=b[P],L=b[P+1];z.x<e&&L.x<e||(z.x<e?z=new Ve(e,z.y+(e-z.x)/(L.x-z.x)*(L.y-z.y))._round():L.x<e&&(L=new Ve(e,z.y+(e-z.x)/(L.x-z.x)*(L.y-z.y))._round()),z.y<o&&L.y<o||(z.y<o?z=new Ve(z.x+(o-z.y)/(L.y-z.y)*(L.x-z.x),o)._round():L.y<o&&(L=new Ve(z.x+(o-z.y)/(L.y-z.y)*(L.x-z.x),o)._round()),z.x>=c&&L.x>=c||(z.x>=c?z=new Ve(c,z.y+(c-z.x)/(L.x-z.x)*(L.y-z.y))._round():L.x>=c&&(L=new Ve(c,z.y+(c-z.x)/(L.x-z.x)*(L.y-z.y))._round()),z.y>=d&&L.y>=d||(z.y>=d?z=new Ve(z.x+(d-z.y)/(L.y-z.y)*(L.x-z.x),d)._round():L.y>=d&&(L=new Ve(z.x+(d-z.y)/(L.y-z.y)*(L.x-z.x),d)._round()),E&&z.equals(E[E.length-1])||(E=[z],g.push(E)),E.push(L)))))}}return g}function sg(n,e,o,c){const d=[],g=n.image,_=g.pixelRatio,b=g.paddedRect.w-2,E=g.paddedRect.h-2,P=n.right-n.left,z=n.bottom-n.top,L=g.stretchX||[[0,b]],B=g.stretchY||[[0,E]],j=(tt,pt)=>tt+pt[1]-pt[0],V=L.reduce(j,0),Q=B.reduce(j,0),ee=b-V,fe=E-Q;let be=0,xe=V,ke=0,je=Q,Be=0,gt=ee,Tt=0,lt=fe;if(g.content&&c){const tt=g.content;be=Uu(L,0,tt[0]),ke=Uu(B,0,tt[1]),xe=Uu(L,tt[0],tt[2]),je=Uu(B,tt[1],tt[3]),Be=tt[0]-be,Tt=tt[1]-ke,gt=tt[2]-tt[0]-xe,lt=tt[3]-tt[1]-je}const ct=(tt,pt,ut,We)=>{const kt=$u(tt.stretch-be,xe,P,n.left),It=qu(tt.fixed-Be,gt,tt.stretch,V),tr=$u(pt.stretch-ke,je,z,n.top),mr=qu(pt.fixed-Tt,lt,pt.stretch,Q),zr=$u(ut.stretch-be,xe,P,n.left),Mr=qu(ut.fixed-Be,gt,ut.stretch,V),_n=$u(We.stretch-ke,je,z,n.top),Yr=qu(We.fixed-Tt,lt,We.stretch,Q),Qr=new Ve(kt,tr),ln=new Ve(zr,tr),yn=new Ve(zr,_n),An=new Ve(kt,_n),qn=new Ve(It/_,mr/_),en=new Ve(Mr/_,Yr/_),vn=e*Math.PI/180;if(vn){const Hn=Math.sin(vn),Gn=Math.cos(vn),Br=[Gn,-Hn,Hn,Gn];Qr._matMult(Br),ln._matMult(Br),An._matMult(Br),yn._matMult(Br)}const Pn=tt.stretch+tt.fixed,Bn=pt.stretch+pt.fixed;return{tl:Qr,tr:ln,bl:An,br:yn,tex:{x:g.paddedRect.x+1+Pn,y:g.paddedRect.y+1+Bn,w:ut.stretch+ut.fixed-Pn,h:We.stretch+We.fixed-Bn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:qn,pixelOffsetBR:en,minFontScaleX:gt/_/P,minFontScaleY:lt/_/z,isSDF:o}};if(c&&(g.stretchX||g.stretchY)){const tt=ag(L,ee,V),pt=ag(B,fe,Q);for(let ut=0;ut<tt.length-1;ut++){const We=tt[ut],kt=tt[ut+1];for(let It=0;It<pt.length-1;It++)d.push(ct(We,pt[It],kt,pt[It+1]))}}else d.push(ct({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:E+1}));return d}function Uu(n,e,o){let c=0;for(const d of n)c+=Math.max(e,Math.min(o,d[1]))-Math.max(e,Math.min(o,d[0]));return c}function ag(n,e,o){const c=[{fixed:-1,stretch:0}];for(const[d,g]of n){const _=c[c.length-1];c.push({fixed:d-_.stretch,stretch:_.stretch}),c.push({fixed:d-_.stretch,stretch:_.stretch+(g-d)})}return c.push({fixed:e+1,stretch:o}),c}function $u(n,e,o,c){return n/e*o+c}function qu(n,e,o,c){return n-e*o/c}mt("Anchor",Uo);class Hu{constructor(e,o,c,d,g,_,b,E,P,z){if(this.boxStartIndex=e.length,P){let L=_.top,B=_.bottom;const j=_.collisionPadding;j&&(L-=j[1],B+=j[3]);let V=B-L;V>0&&(V=Math.max(10,V),this.circleDiameter=V)}else{let L=_.top*b-E,B=_.bottom*b+E,j=_.left*b-E,V=_.right*b+E;const Q=_.collisionPadding;if(Q&&(j-=Q[0]*b,L-=Q[1]*b,V+=Q[2]*b,B+=Q[3]*b),z){const ee=new Ve(j,L),fe=new Ve(V,L),be=new Ve(j,B),xe=new Ve(V,B),ke=z*Math.PI/180;ee._rotate(ke),fe._rotate(ke),be._rotate(ke),xe._rotate(ke),j=Math.min(ee.x,fe.x,be.x,xe.x),V=Math.max(ee.x,fe.x,be.x,xe.x),L=Math.min(ee.y,fe.y,be.y,xe.y),B=Math.max(ee.y,fe.y,be.y,xe.y)}e.emplaceBack(o.x,o.y,j,L,V,B,c,d,g)}this.boxEndIndex=e.length}}class rb{constructor(e=[],o=nb){if(this.data=e,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:o,compare:c}=this,d=o[e];for(;e>0;){const g=e-1>>1,_=o[g];if(c(d,_)>=0)break;o[e]=_,e=g}o[e]=d}_down(e){const{data:o,compare:c}=this,d=this.length>>1,g=o[e];for(;e<d;){let _=1+(e<<1),b=o[_];const E=_+1;if(E<this.length&&c(o[E],b)<0&&(_=E,b=o[E]),c(b,g)>=0)break;o[e]=b,e=_}o[e]=g}}function nb(n,e){return n<e?-1:n>e?1:0}function ib(n,e=1,o=!1){let c=1/0,d=1/0,g=-1/0,_=-1/0;const b=n[0];for(let j=0;j<b.length;j++){const V=b[j];(!j||V.x<c)&&(c=V.x),(!j||V.y<d)&&(d=V.y),(!j||V.x>g)&&(g=V.x),(!j||V.y>_)&&(_=V.y)}const E=Math.min(g-c,_-d);let P=E/2;const z=new rb([],ob);if(E===0)return new Ve(c,d);for(let j=c;j<g;j+=E)for(let V=d;V<_;V+=E)z.push(new Da(j+P,V+P,P,n));let L=function(j){let V=0,Q=0,ee=0;const fe=j[0];for(let be=0,xe=fe.length,ke=xe-1;be<xe;ke=be++){const je=fe[be],Be=fe[ke],gt=je.x*Be.y-Be.x*je.y;Q+=(je.x+Be.x)*gt,ee+=(je.y+Be.y)*gt,V+=3*gt}return new Da(Q/V,ee/V,0,j)}(n),B=z.length;for(;z.length;){const j=z.pop();(j.d>L.d||!L.d)&&(L=j,o&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,B)),j.max-L.d<=e||(P=j.h/2,z.push(new Da(j.p.x-P,j.p.y-P,P,n)),z.push(new Da(j.p.x+P,j.p.y-P,P,n)),z.push(new Da(j.p.x-P,j.p.y+P,P,n)),z.push(new Da(j.p.x+P,j.p.y+P,P,n)),B+=4)}return o&&(console.log(`num probes: ${B}`),console.log(`best distance: ${L.d}`)),L.p}function ob(n,e){return e.max-n.max}function Da(n,e,o,c){this.p=new Ve(n,e),this.h=o,this.d=function(d,g){let _=!1,b=1/0;for(let E=0;E<g.length;E++){const P=g[E];for(let z=0,L=P.length,B=L-1;z<L;B=z++){const j=P[z],V=P[B];j.y>d.y!=V.y>d.y&&d.x<(V.x-j.x)*(d.y-j.y)/(V.y-j.y)+j.x&&(_=!_),b=Math.min(b,ym(d,j,V))}}return(_?1:-1)*Math.sqrt(b)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}const rp=Number.POSITIVE_INFINITY;function lg(n,e){return e[1]!==rp?function(o,c,d){let g=0,_=0;switch(c=Math.abs(c),d=Math.abs(d),o){case"top-right":case"top-left":case"top":_=d-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-d}switch(o){case"top-right":case"bottom-right":case"right":g=-c;break;case"top-left":case"bottom-left":case"left":g=c}return[g,_]}(n,e[0],e[1]):function(o,c){let d=0,g=0;c<0&&(c=0);const _=c/Math.sqrt(2);switch(o){case"top-right":case"top-left":g=_-7;break;case"bottom-right":case"bottom-left":g=7-_;break;case"bottom":g=7-c;break;case"top":g=c-7}switch(o){case"top-right":case"bottom-right":d=-_;break;case"top-left":case"bottom-left":d=_;break;case"left":d=c;break;case"right":d=-c}return[d,g]}(n,e[0])}function np(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sb(n,e,o,c,d,g,_,b,E,P,z){let L=g.textMaxSize.evaluate(e,{});L===void 0&&(L=_);const B=n.layers[0].layout,j=B.get("icon-offset").evaluate(e,{},z),V=ug(o.horizontal),Q=_/24,ee=n.tilePixelRatio*Q,fe=n.tilePixelRatio*L/24,be=n.tilePixelRatio*b,xe=n.tilePixelRatio*B.get("symbol-spacing"),ke=B.get("text-padding")*n.tilePixelRatio,je=B.get("icon-padding")*n.tilePixelRatio,Be=B.get("text-max-angle")/180*Math.PI,gt=B.get("text-rotation-alignment")!=="viewport"&&B.get("symbol-placement")!=="point",Tt=B.get("icon-rotation-alignment")==="map"&&B.get("symbol-placement")!=="point",lt=B.get("symbol-placement"),ct=xe/2,tt=B.get("icon-text-fit");let pt;c&&tt!=="none"&&(n.allowVerticalPlacement&&o.vertical&&(pt=Ym(c,o.vertical,tt,B.get("icon-text-fit-padding"),j,Q)),V&&(c=Ym(c,V,tt,B.get("icon-text-fit-padding"),j,Q)));const ut=(We,kt)=>{kt.x<0||kt.x>=sn||kt.y<0||kt.y>=sn||function(It,tr,mr,zr,Mr,_n,Yr,Qr,ln,yn,An,qn,en,vn,Pn,Bn,Hn,Gn,Br,cn,Jt,ri,xn,Cn,Ti){const Mi=It.addToLineVertexArray(tr,mr);let Oi,po,Ii,hi,Zn=0,fo=0,ac=0,Ig=0,pp=-1,fp=-1;const mo={};let Ag=Gl(""),mp=0,gp=0;if(Qr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[mp,gp]=Qr.layout.get("text-offset").evaluate(Jt,{},Cn).map(Wn=>Wn*pn):(mp=Qr.layout.get("text-radial-offset").evaluate(Jt,{},Cn)*pn,gp=rp),It.allowVerticalPlacement&&zr.vertical){const Wn=Qr.layout.get("text-rotate").evaluate(Jt,{},Cn)+90;Ii=new Hu(ln,tr,yn,An,qn,zr.vertical,en,vn,Pn,Wn),Yr&&(hi=new Hu(ln,tr,yn,An,qn,Yr,Hn,Gn,Pn,Wn))}if(Mr){const Wn=Qr.layout.get("icon-rotate").evaluate(Jt,{}),Ui=Qr.layout.get("icon-text-fit")!=="none",lc=sg(Mr,Wn,xn,Ui),cc=Yr?sg(Yr,Wn,xn,Ui):void 0;po=new Hu(ln,tr,yn,An,qn,Mr,Hn,Gn,!1,Wn),Zn=4*lc.length;const kg=It.iconSizeData;let ks=null;kg.kind==="source"?(ks=[ho*Qr.layout.get("icon-size").evaluate(Jt,{})],ks[0]>$o&&Me(`${It.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):kg.kind==="composite"&&(ks=[ho*ri.compositeIconSizes[0].evaluate(Jt,{},Cn),ho*ri.compositeIconSizes[1].evaluate(Jt,{},Cn)],(ks[0]>$o||ks[1]>$o)&&Me(`${It.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),It.addSymbols(It.icon,lc,ks,cn,Br,Jt,l.WritingMode.none,tr,Mi.lineStartIndex,Mi.lineLength,-1,Cn),pp=It.icon.placedSymbolArray.length-1,cc&&(fo=4*cc.length,It.addSymbols(It.icon,cc,ks,cn,Br,Jt,l.WritingMode.vertical,tr,Mi.lineStartIndex,Mi.lineLength,-1,Cn),fp=It.icon.placedSymbolArray.length-1)}const Pg=Object.keys(zr.horizontal);for(const Wn of Pg){const Ui=zr.horizontal[Wn];if(!Oi){Ag=Gl(Ui.text);const cc=Qr.layout.get("text-rotate").evaluate(Jt,{},Cn);Oi=new Hu(ln,tr,yn,An,qn,Ui,en,vn,Pn,cc)}const lc=Ui.positionedLines.length===1;if(ac+=cg(It,tr,Ui,_n,Qr,Pn,Jt,Bn,Mi,zr.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,lc?Pg:[Wn],mo,pp,ri,Cn),lc)break}zr.vertical&&(Ig+=cg(It,tr,zr.vertical,_n,Qr,Pn,Jt,Bn,Mi,l.WritingMode.vertical,["vertical"],mo,fp,ri,Cn));const vb=Oi?Oi.boxStartIndex:It.collisionBoxArray.length,xb=Oi?Oi.boxEndIndex:It.collisionBoxArray.length,bb=Ii?Ii.boxStartIndex:It.collisionBoxArray.length,wb=Ii?Ii.boxEndIndex:It.collisionBoxArray.length,Eb=po?po.boxStartIndex:It.collisionBoxArray.length,Sb=po?po.boxEndIndex:It.collisionBoxArray.length,Tb=hi?hi.boxStartIndex:It.collisionBoxArray.length,Ib=hi?hi.boxEndIndex:It.collisionBoxArray.length;let Li=-1;const Xu=(Wn,Ui)=>Wn&&Wn.circleDiameter?Math.max(Wn.circleDiameter,Ui):Ui;Li=Xu(Oi,Li),Li=Xu(Ii,Li),Li=Xu(po,Li),Li=Xu(hi,Li);const Cg=Li>-1?1:0;Cg&&(Li*=Ti/pn),It.glyphOffsetArray.length>=za.MAX_GLYPHS&&Me("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jt.sortKey!==void 0&&It.addToSortKeyRanges(It.symbolInstances.length,Jt.sortKey),It.symbolInstances.emplaceBack(tr.x,tr.y,mo.right>=0?mo.right:-1,mo.center>=0?mo.center:-1,mo.left>=0?mo.left:-1,mo.vertical||-1,pp,fp,Ag,vb,xb,bb,wb,Eb,Sb,Tb,Ib,yn,ac,Ig,Zn,fo,Cg,0,en,mp,gp,Li)}(n,kt,We,o,c,d,pt,n.layers[0],n.collisionBoxArray,e.index,e.sourceLayerIndex,n.index,ee,ke,gt,E,be,je,Tt,j,e,g,P,z,_)};if(lt==="line")for(const We of og(e.geometry,0,0,sn,sn)){const kt=tb(We,xe,Be,o.vertical||V,c,24,fe,n.overscaling,sn);for(const It of kt){const tr=V;tr&&ab(n,tr.text,ct,It)||ut(We,It)}}else if(lt==="line-center"){for(const We of e.geometry)if(We.length>1){const kt=eb(We,Be,o.vertical||V,c,24,fe);kt&&ut(We,kt)}}else if(e.type==="Polygon")for(const We of qd(e.geometry,0)){const kt=ib(We,16);ut(We[0],new Uo(kt.x,kt.y,0))}else if(e.type==="LineString")for(const We of e.geometry)ut(We,new Uo(We[0].x,We[0].y,0));else if(e.type==="Point")for(const We of e.geometry)for(const kt of We)ut([kt],new Uo(kt.x,kt.y,0))}const $o=32640;function cg(n,e,o,c,d,g,_,b,E,P,z,L,B,j,V){const Q=function(be,xe,ke,je,Be,gt,Tt,lt){const ct=je.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,tt=[];for(const pt of xe.positionedLines)for(const ut of pt.positionedGlyphs){if(!ut.rect)continue;const We=ut.rect||{};let kt=4,It=!0,tr=1,mr=0;const zr=(Be||lt)&&ut.vertical,Mr=ut.metrics.advance*ut.scale/2;if(lt&&xe.verticalizable){const Br=(ut.scale-1)*pn,cn=(pn-ut.metrics.width*ut.scale)/2;mr=pt.lineOffset/2-(ut.imageName?-cn:Br)}if(ut.imageName){const Br=Tt[ut.imageName];It=Br.sdf,tr=Br.pixelRatio,kt=1/tr}const _n=Be?[ut.x+Mr,ut.y]:[0,0];let Yr=Be?[0,0]:[ut.x+Mr+ke[0],ut.y+ke[1]-mr],Qr=[0,0];zr&&(Qr=Yr,Yr=[0,0]);const ln=(ut.metrics.left-kt)*ut.scale-Mr+Yr[0],yn=(-ut.metrics.top-kt)*ut.scale+Yr[1],An=ln+We.w*ut.scale/tr,qn=yn+We.h*ut.scale/tr,en=new Ve(ln,yn),vn=new Ve(An,yn),Pn=new Ve(ln,qn),Bn=new Ve(An,qn);if(zr){const Br=new Ve(-Mr,Mr-Nu),cn=-Math.PI/2,Jt=12-Mr,ri=new Ve(22-Jt,-(ut.imageName?Jt:0)),xn=new Ve(...Qr);en._rotateAround(cn,Br)._add(ri)._add(xn),vn._rotateAround(cn,Br)._add(ri)._add(xn),Pn._rotateAround(cn,Br)._add(ri)._add(xn),Bn._rotateAround(cn,Br)._add(ri)._add(xn)}if(ct){const Br=Math.sin(ct),cn=Math.cos(ct),Jt=[cn,-Br,Br,cn];en._matMult(Jt),vn._matMult(Jt),Pn._matMult(Jt),Bn._matMult(Jt)}const Hn=new Ve(0,0),Gn=new Ve(0,0);tt.push({tl:en,tr:vn,bl:Pn,br:Bn,tex:We,writingMode:xe.writingMode,glyphOffset:_n,sectionIndex:ut.sectionIndex,isSDF:It,pixelOffsetTL:Hn,pixelOffsetBR:Gn,minFontScaleX:0,minFontScaleY:0})}return tt}(0,o,b,d,g,_,c,n.allowVerticalPlacement),ee=n.textSizeData;let fe=null;ee.kind==="source"?(fe=[ho*d.layout.get("text-size").evaluate(_,{})],fe[0]>$o&&Me(`${n.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ee.kind==="composite"&&(fe=[ho*j.compositeTextSizes[0].evaluate(_,{},V),ho*j.compositeTextSizes[1].evaluate(_,{},V)],(fe[0]>$o||fe[1]>$o)&&Me(`${n.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),n.addSymbols(n.text,Q,fe,b,g,_,P,e,E.lineStartIndex,E.lineLength,B,V);for(const be of z)L[be]=n.text.placedSymbolArray.length-1;return 4*Q.length}function ug(n){for(const e in n)return n[e];return null}function ab(n,e,o,c){const d=n.compareText;if(e in d){const g=d[e];for(let _=g.length-1;_>=0;_--)if(c.dist(g[_])<o)return!0}else d[e]=[];return d[e].push(c),!1}const lb=jo.VectorTileFeature.types,cb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gu(n,e,o,c,d,g,_,b,E,P,z,L,B){const j=b?Math.min($o,Math.round(b[0])):0,V=b?Math.min($o,Math.round(b[1])):0;n.emplaceBack(e,o,Math.round(32*c),Math.round(32*d),g,_,(j<<1)+(E?1:0),V,16*P,16*z,256*L,256*B)}function ip(n,e,o){n.emplaceBack(e.x,e.y,o),n.emplaceBack(e.x,e.y,o),n.emplaceBack(e.x,e.y,o),n.emplaceBack(e.x,e.y,o)}function ub(n){for(const e of n.sections)if(Cd(e.text))return!0;return!1}class op{constructor(e){this.layoutVertexArray=new dn,this.indexArray=new Rn,this.programConfigurations=e,this.segments=new ar,this.dynamicLayoutVertexArray=new Un,this.opacityVertexArray=new ei,this.placedSymbolArray=new Ge}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,o,c,d){this.isEmpty()||(c&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,M1.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,O1.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,cb,!0),this.opacityVertexBuffer.itemSize=1),(c||d)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}mt("SymbolBuffers",op);class sp{constructor(e,o,c){this.layoutVertexArray=new e,this.layoutAttributes=o,this.indexArray=new c,this.segments=new ar,this.collisionVertexArray=new Vi}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,L1.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}mt("CollisionBuffers",sp);class za{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(_=>_.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Bd([]),this.placementViewportMatrix=Bd([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Qm(this.zoom,o["text-size"]),this.iconSizeData=Qm(this.zoom,o["icon-size"]);const c=this.layers[0].layout,d=c.get("symbol-sort-key"),g=c.get("symbol-z-order");this.canOverlap=lp(c,"text-overlap","text-allow-overlap")!=="never"||lp(c,"icon-overlap","icon-allow-overlap")!=="never"||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!d.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(_=>l.WritingMode[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=e.sourceID}createArrays(){this.text=new op(new Is(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new op(new Is(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new yt,this.lineVertexArray=new st,this.symbolInstances=new ze}calculateGlyphDependencies(e,o,c,d,g){for(let _=0;_<e.length;_++)if(o[e.charCodeAt(_)]=!0,(c||d)&&g){const b=nc[e.charAt(_)];b&&(o[b.charCodeAt(0)]=!0)}}populate(e,o,c){const d=this.layers[0],g=d.layout,_=g.get("text-font"),b=g.get("text-field"),E=g.get("icon-image"),P=(b.value.kind!=="constant"||b.value.value instanceof X&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),z=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,L=g.get("symbol-sort-key");if(this.features=[],!P&&!z)return;const B=o.iconDependencies,j=o.glyphDependencies,V=o.availableImages,Q=new kr(this.zoom);for(const{feature:ee,id:fe,index:be,sourceLayerIndex:xe}of e){const ke=d._featureFilter.needGeometry,je=Ps(ee,ke);if(!d._featureFilter.filter(Q,je,c))continue;let Be,gt;if(ke||(je.geometry=As(ee)),P){const lt=d.getValueAndResolveTokens("text-field",je,c,V),ct=X.factory(lt);ub(ct)&&(this.hasRTLText=!0),(!this.hasRTLText||$l()==="unavailable"||this.hasRTLText&&Qn.isParsed())&&(Be=B1(ct,d,je))}if(z){const lt=d.getValueAndResolveTokens("icon-image",je,c,V);gt=lt instanceof ae?lt:ae.fromString(lt)}if(!Be&&!gt)continue;const Tt=this.sortFeaturesByKey?L.evaluate(je,{},c):void 0;if(this.features.push({id:fe,text:Be,icon:gt,index:be,sourceLayerIndex:xe,geometry:je.geometry,properties:ee.properties,type:lb[ee.type],sortKey:Tt}),gt&&(B[gt.name]=!0),Be){const lt=_.evaluate(je,{},c).join(","),ct=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const tt of Be.sections)if(tt.image)B[tt.image.name]=!0;else{const pt=Fl(Be.toString()),ut=tt.fontStack||lt,We=j[ut]=j[ut]||{};this.calculateGlyphDependencies(tt.text,We,ct,this.allowVerticalPlacement,pt)}}}g.get("symbol-placement")==="line"&&(this.features=function(ee){const fe={},be={},xe=[];let ke=0;function je(lt){xe.push(ee[lt]),ke++}function Be(lt,ct,tt){const pt=be[lt];return delete be[lt],be[ct]=pt,xe[pt].geometry[0].pop(),xe[pt].geometry[0]=xe[pt].geometry[0].concat(tt[0]),pt}function gt(lt,ct,tt){const pt=fe[ct];return delete fe[ct],fe[lt]=pt,xe[pt].geometry[0].shift(),xe[pt].geometry[0]=tt[0].concat(xe[pt].geometry[0]),pt}function Tt(lt,ct,tt){const pt=tt?ct[0][ct[0].length-1]:ct[0][0];return`${lt}:${pt.x}:${pt.y}`}for(let lt=0;lt<ee.length;lt++){const ct=ee[lt],tt=ct.geometry,pt=ct.text?ct.text.toString():null;if(!pt){je(lt);continue}const ut=Tt(pt,tt),We=Tt(pt,tt,!0);if(ut in be&&We in fe&&be[ut]!==fe[We]){const kt=gt(ut,We,tt),It=Be(ut,We,xe[kt].geometry);delete fe[ut],delete be[We],be[Tt(pt,xe[It].geometry,!0)]=It,xe[kt].geometry=null}else ut in be?Be(ut,We,tt):We in fe?gt(ut,We,tt):(je(lt),fe[ut]=ke-1,be[We]=ke-1)}return xe.filter(lt=>lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ee,fe)=>ee.sortKey-fe.sortKey)}update(e,o,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,o,this.layers,c),this.icon.programConfigurations.updatePaintArrays(e,o,this.layers,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,o){const c=this.lineVertexArray.length;if(e.segment!==void 0){let d=e.dist(o[e.segment+1]),g=e.dist(o[e.segment]);const _={};for(let b=e.segment+1;b<o.length;b++)_[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:d},b<o.length-1&&(d+=o[b+1].dist(o[b]));for(let b=e.segment||0;b>=0;b--)_[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:g},b>0&&(g+=o[b-1].dist(o[b]));for(let b=0;b<o.length;b++){const E=_[b];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(e,o,c,d,g,_,b,E,P,z,L,B){const j=e.indexArray,V=e.layoutVertexArray,Q=e.segments.prepareSegment(4*o.length,V,j,this.canOverlap?_.sortKey:void 0),ee=this.glyphOffsetArray.length,fe=Q.vertexLength,be=this.allowVerticalPlacement&&b===l.WritingMode.vertical?Math.PI/2:0,xe=_.text&&_.text.sections;for(let ke=0;ke<o.length;ke++){const{tl:je,tr:Be,bl:gt,br:Tt,tex:lt,pixelOffsetTL:ct,pixelOffsetBR:tt,minFontScaleX:pt,minFontScaleY:ut,glyphOffset:We,isSDF:kt,sectionIndex:It}=o[ke],tr=Q.vertexLength,mr=We[1];Gu(V,E.x,E.y,je.x,mr+je.y,lt.x,lt.y,c,kt,ct.x,ct.y,pt,ut),Gu(V,E.x,E.y,Be.x,mr+Be.y,lt.x+lt.w,lt.y,c,kt,tt.x,ct.y,pt,ut),Gu(V,E.x,E.y,gt.x,mr+gt.y,lt.x,lt.y+lt.h,c,kt,ct.x,tt.y,pt,ut),Gu(V,E.x,E.y,Tt.x,mr+Tt.y,lt.x+lt.w,lt.y+lt.h,c,kt,tt.x,tt.y,pt,ut),ip(e.dynamicLayoutVertexArray,E,be),j.emplaceBack(tr,tr+1,tr+2),j.emplaceBack(tr+1,tr+2,tr+3),Q.vertexLength+=4,Q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(We[0]),ke!==o.length-1&&It===o[ke+1].sectionIndex||e.programConfigurations.populatePaintArrays(V.length,_,_.index,{},B,xe&&xe[It])}e.placedSymbolArray.emplaceBack(E.x,E.y,ee,this.glyphOffsetArray.length-ee,fe,P,z,E.segment,c?c[0]:0,c?c[1]:0,d[0],d[1],b,0,!1,0,L)}_addCollisionDebugVertex(e,o,c,d,g,_){return o.emplaceBack(0,0),e.emplaceBack(c.x,c.y,d,g,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(e,o,c,d,g,_,b){const E=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),P=E.vertexLength,z=g.layoutVertexArray,L=g.collisionVertexArray,B=b.anchorX,j=b.anchorY;this._addCollisionDebugVertex(z,L,_,B,j,new Ve(e,o)),this._addCollisionDebugVertex(z,L,_,B,j,new Ve(c,o)),this._addCollisionDebugVertex(z,L,_,B,j,new Ve(c,d)),this._addCollisionDebugVertex(z,L,_,B,j,new Ve(e,d)),E.vertexLength+=4;const V=g.indexArray;V.emplaceBack(P,P+1),V.emplaceBack(P+1,P+2),V.emplaceBack(P+2,P+3),V.emplaceBack(P+3,P),E.primitiveLength+=4}addDebugCollisionBoxes(e,o,c,d){for(let g=e;g<o;g++){const _=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,d?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,c)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sp(ti,Nm.members,bi),this.iconCollisionBox=new sp(ti,Nm.members,bi);for(let e=0;e<this.symbolInstances.length;e++){const o=this.symbolInstances.get(e);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(e,o,c,d,g,_,b,E,P){const z={};for(let L=o;L<c;L++){const B=e.get(L);z.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},z.textFeatureIndex=B.featureIndex;break}for(let L=d;L<g;L++){const B=e.get(L);z.verticalTextBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},z.verticalTextFeatureIndex=B.featureIndex;break}for(let L=_;L<b;L++){const B=e.get(L);z.iconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},z.iconFeatureIndex=B.featureIndex;break}for(let L=E;L<P;L++){const B=e.get(L);z.verticalIconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},z.verticalIconFeatureIndex=B.featureIndex;break}return z}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,o){const c=e.placedSymbolArray.get(o),d=c.vertexStartIndex+4*c.numGlyphs;for(let g=c.vertexStartIndex;g<d;g+=4)e.indexArray.emplaceBack(g,g+1,g+2),e.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(e),c=Math.cos(e),d=[],g=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const E=this.symbolInstances.get(b);d.push(0|Math.round(o*E.anchorX+c*E.anchorY)),g.push(E.featureIndex)}return _.sort((b,E)=>d[b]-d[E]||g[E]-g[b]),_}addToSortKeyRanges(e,o){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===o?c.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const c=this.symbolInstances.get(o);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((d,g,_)=>{d>=0&&_.indexOf(d)===g&&this.addIndicesForPlacedSymbol(this.text,d)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}mt("SymbolBucket",za,{omit:["layers","collisionBoxArray","features","compareText"]}),za.MAX_GLYPHS=65535,za.addDynamicAttributes=ip;const hb=new nn({"symbol-placement":new wt(ve.layout_symbol["symbol-placement"]),"symbol-spacing":new wt(ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wt(ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ct(ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wt(ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wt(ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new wt(ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new wt(ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new wt(ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wt(ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ct(ve.layout_symbol["icon-size"]),"icon-text-fit":new wt(ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wt(ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ct(ve.layout_symbol["icon-image"]),"icon-rotate":new Ct(ve.layout_symbol["icon-rotate"]),"icon-padding":new wt(ve.layout_symbol["icon-padding"]),"icon-keep-upright":new wt(ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Ct(ve.layout_symbol["icon-offset"]),"icon-anchor":new Ct(ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wt(ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wt(ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wt(ve.layout_symbol["text-rotation-alignment"]),"text-field":new Ct(ve.layout_symbol["text-field"]),"text-font":new Ct(ve.layout_symbol["text-font"]),"text-size":new Ct(ve.layout_symbol["text-size"]),"text-max-width":new Ct(ve.layout_symbol["text-max-width"]),"text-line-height":new wt(ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Ct(ve.layout_symbol["text-letter-spacing"]),"text-justify":new Ct(ve.layout_symbol["text-justify"]),"text-radial-offset":new Ct(ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new wt(ve.layout_symbol["text-variable-anchor"]),"text-anchor":new Ct(ve.layout_symbol["text-anchor"]),"text-max-angle":new wt(ve.layout_symbol["text-max-angle"]),"text-writing-mode":new wt(ve.layout_symbol["text-writing-mode"]),"text-rotate":new Ct(ve.layout_symbol["text-rotate"]),"text-padding":new wt(ve.layout_symbol["text-padding"]),"text-keep-upright":new wt(ve.layout_symbol["text-keep-upright"]),"text-transform":new Ct(ve.layout_symbol["text-transform"]),"text-offset":new Ct(ve.layout_symbol["text-offset"]),"text-allow-overlap":new wt(ve.layout_symbol["text-allow-overlap"]),"text-overlap":new wt(ve.layout_symbol["text-overlap"]),"text-ignore-placement":new wt(ve.layout_symbol["text-ignore-placement"]),"text-optional":new wt(ve.layout_symbol["text-optional"])});var ap={paint:new nn({"icon-opacity":new Ct(ve.paint_symbol["icon-opacity"]),"icon-color":new Ct(ve.paint_symbol["icon-color"]),"icon-halo-color":new Ct(ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ct(ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ct(ve.paint_symbol["icon-halo-blur"]),"icon-translate":new wt(ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new wt(ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ct(ve.paint_symbol["text-opacity"]),"text-color":new Ct(ve.paint_symbol["text-color"],{runtimeType:Tn,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new Ct(ve.paint_symbol["text-halo-color"]),"text-halo-width":new Ct(ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Ct(ve.paint_symbol["text-halo-blur"]),"text-translate":new wt(ve.paint_symbol["text-translate"]),"text-translate-anchor":new wt(ve.paint_symbol["text-translate-anchor"])}),layout:hb};class hg{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Xt,this.defaultValue=e}evaluate(e){if(e.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(e.formattedSection))return o.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}mt("FormatSectionOverride",hg,{omit:["defaultValue"]});class Zu extends Ln{constructor(e){super(e,ap)}recalculate(e,o){if(super.recalculate(e,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const c=this.layout.get("text-writing-mode");if(c){const d=[];for(const g of c)d.indexOf(g)<0&&d.push(g);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,o,c,d){const g=this.layout.get(e).evaluate(o,{},c,d),_=this._unevaluatedLayout._values[e];return _.isDataDriven()||oa(_.value)||!g?g:function(b,E){return E.replace(/{([^{}]+)}/g,(P,z)=>z in b?String(b[z]):"")}(o.properties,g)}createBucket(e){return new za(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of ap.paint.overridableProperties){if(!Zu.hasPaintOverride(this.layout,e))continue;const o=this.paint.get(e),c=new hg(o),d=new zl(c,o.property.specification);let g=null;g=o.value.kind==="constant"||o.value.kind==="source"?new aa("source",d):new la("composite",d,o.value.zoomStops,o.value._interpolationType),this.paint._values[e]=new xi(o.property,g,o.parameters)}}_handleOverridablePaintPropertyUpdate(e,o,c){return!(!this.layout||o.isDataDriven()||c.isDataDriven())&&Zu.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,o){const c=e.get("text-field"),d=ap.paint.properties[o];let g=!1;const _=b=>{for(const E of b)if(d.overrides&&d.overrides.hasOverride(E))return void(g=!0)};if(c.value.kind==="constant"&&c.value.value instanceof X)_(c.value.value.sections);else if(c.value.kind==="source"){const b=P=>{g||(P instanceof Ne&&le(P.value)===si?_(P.value.sections):P instanceof Et?_(P.sections):P.eachChild(b))},E=c.value;E._styleExpression&&b(E._styleExpression.expression)}return g}}function lp(n,e,o){let c="never";const d=n.get(e);return d?c=d:n.get(o)&&(c="always"),c}var db={paint:new nn({"background-color":new wt(ve.paint_background["background-color"]),"background-pattern":new Es(ve.paint_background["background-pattern"]),"background-opacity":new wt(ve.paint_background["background-opacity"])})},pb={paint:new nn({"raster-opacity":new wt(ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new wt(ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wt(ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wt(ve.paint_raster["raster-brightness-max"]),"raster-saturation":new wt(ve.paint_raster["raster-saturation"]),"raster-contrast":new wt(ve.paint_raster["raster-contrast"]),"raster-resampling":new wt(ve.paint_raster["raster-resampling"]),"raster-fade-duration":new wt(ve.paint_raster["raster-fade-duration"])})};class fb extends Ln{constructor(e){super(e,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const mb={circle:class extends Ln{constructor(n){super(n,Zx)}createBucket(n){return new Od(n)}queryRadius(n){const e=n;return Wl("circle-radius",this,e)+Wl("circle-stroke-width",this,e)+Du(this.paint.get("circle-translate"))}queryIntersectsFeature(n,e,o,c,d,g,_,b){const E=zu(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,_),P=this.paint.get("circle-radius").evaluate(e,o)+this.paint.get("circle-stroke-width").evaluate(e,o),z=this.paint.get("circle-pitch-alignment")==="map",L=z?E:function(j,V){return j.map(Q=>bm(Q,V))}(E,b),B=z?P*_:P;for(const j of c)for(const V of j){const Q=z?V:bm(V,b);let ee=B;const fe=Mu([],[V.x,V.y,0,1],b);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ee*=fe[3]/g.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ee*=g.cameraToCenterDistance/fe[3]),Ux(L,Q,ee))return!0}return!1}},heatmap:class extends Ln{constructor(n){super(n,Kx),this._updateColorRamp()}createBucket(n){return new wm(n)}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Sm({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Ln{constructor(n){super(n,Xx)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Ln{constructor(n){super(n,d1)}recalculate(n,e){super.recalculate(n,e);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Zd(n)}queryRadius(){return Du(this.paint.get("fill-translate"))}queryIntersectsFeature(n,e,o,c,d,g,_){return _m(zu(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,_),c)}isTileClipped(){return!0}},"fill-extrusion":class extends Ln{constructor(n){super(n,T1)}createBucket(n){return new Kd(n)}queryRadius(){return Du(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,e,o,c,d,g,_,b){const E=zu(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,_),P=this.paint.get("fill-extrusion-height").evaluate(e,o),z=this.paint.get("fill-extrusion-base").evaluate(e,o),L=function(j,V,Q,ee){const fe=[];for(const be of j){const xe=[be.x,be.y,0,1];Mu(xe,xe,V),fe.push(new Ve(xe[0]/xe[3],xe[1]/xe[3]))}return fe}(E,b),B=function(j,V,Q,ee){const fe=[],be=[],xe=ee[8]*V,ke=ee[9]*V,je=ee[10]*V,Be=ee[11]*V,gt=ee[8]*Q,Tt=ee[9]*Q,lt=ee[10]*Q,ct=ee[11]*Q;for(const tt of j){const pt=[],ut=[];for(const We of tt){const kt=We.x,It=We.y,tr=ee[0]*kt+ee[4]*It+ee[12],mr=ee[1]*kt+ee[5]*It+ee[13],zr=ee[2]*kt+ee[6]*It+ee[14],Mr=ee[3]*kt+ee[7]*It+ee[15],_n=zr+je,Yr=Mr+Be,Qr=tr+gt,ln=mr+Tt,yn=zr+lt,An=Mr+ct,qn=new Ve((tr+xe)/Yr,(mr+ke)/Yr);qn.z=_n/Yr,pt.push(qn);const en=new Ve(Qr/An,ln/An);en.z=yn/An,ut.push(en)}fe.push(pt),be.push(ut)}return[fe,be]}(c,z,P,b);return function(j,V,Q){let ee=1/0;_m(Q,V)&&(ee=Om(Q,V[0]));for(let fe=0;fe<V.length;fe++){const be=V[fe],xe=j[fe];for(let ke=0;ke<be.length-1;ke++){const je=be[ke],Be=[je,be[ke+1],xe[ke+1],xe[ke],je];gm(Q,Be)&&(ee=Math.min(ee,Om(Q,Be)))}}return ee!==1/0&&ee}(B[0],B[1],L)}},line:class extends Ln{constructor(n){super(n,Rm),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(n){n==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof us,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,e){super.recalculate(n,e),this.paint._values["line-floorwidth"]=Bm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Xd(n)}queryRadius(n){const e=n,o=Fm(Wl("line-width",this,e),Wl("line-gap-width",this,e)),c=Wl("line-offset",this,e);return o/2+Math.abs(c)+Du(this.paint.get("line-translate"))}queryIntersectsFeature(n,e,o,c,d,g,_){const b=zu(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,_),E=_/2*Fm(this.paint.get("line-width").evaluate(e,o),this.paint.get("line-gap-width").evaluate(e,o)),P=this.paint.get("line-offset").evaluate(e,o);return P&&(c=function(z,L){const B=[];for(let j=0;j<z.length;j++){const V=z[j],Q=[];for(let ee=0;ee<V.length;ee++){const fe=V[ee-1],be=V[ee],xe=V[ee+1],ke=ee===0?new Ve(0,0):be.sub(fe)._unit()._perp(),je=ee===V.length-1?new Ve(0,0):xe.sub(be)._unit()._perp(),Be=ke._add(je)._unit(),gt=Be.x*je.x+Be.y*je.y;gt!==0&&Be._mult(1/gt),Q.push(Be._mult(L)._add(be))}B.push(Q)}return B}(c,P*_)),function(z,L,B){for(let j=0;j<L.length;j++){const V=L[j];if(z.length>=3){for(let Q=0;Q<V.length;Q++)if(Sa(z,V[Q]))return!0}if($x(z,V,B))return!0}return!1}(b,c,E)}isTileClipped(){return!0}},symbol:Zu,background:class extends Ln{constructor(n){super(n,db)}},raster:class extends Ln{constructor(n){super(n,pb)}}};class gb{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const dg=63710088e-1;class $r{constructor(e,o){if(isNaN(e)||isNaN(o))throw new Error(`Invalid LngLat object: (${e}, ${o})`);if(this.lng=+e,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new $r(K(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const o=Math.PI/180,c=this.lat*o,d=e.lat*o,g=Math.sin(c)*Math.sin(d)+Math.cos(c)*Math.cos(d)*Math.cos((e.lng-this.lng)*o);return dg*Math.acos(Math.min(g,1))}toBounds(e=0){const o=360*e/40075017,c=o/Math.cos(Math.PI/180*this.lat);return new Cs(new $r(this.lng-c,this.lat-o),new $r(this.lng+c,this.lat+o))}static convert(e){if(e instanceof $r)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new $r(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new $r(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Cs{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof $r?new $r(e.lng,e.lat):$r.convert(e),this}setSouthWest(e){return this._sw=e instanceof $r?new $r(e.lng,e.lat):$r.convert(e),this}extend(e){const o=this._sw,c=this._ne;let d,g;if(e instanceof $r)d=e,g=e;else{if(!(e instanceof Cs))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Cs.convert(e)):this.extend($r.convert(e)):this;if(d=e._sw,g=e._ne,!d||!g)return this}return o||c?(o.lng=Math.min(d.lng,o.lng),o.lat=Math.min(d.lat,o.lat),c.lng=Math.max(g.lng,c.lng),c.lat=Math.max(g.lat,c.lat)):(this._sw=new $r(d.lng,d.lat),this._ne=new $r(g.lng,g.lat)),this}getCenter(){return new $r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new $r(this.getWest(),this.getNorth())}getSouthEast(){return new $r(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:c}=$r.convert(e);let d=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&d}static convert(e){return e instanceof Cs?e:e&&new Cs(e)}}const pg=2*Math.PI*dg;function fg(n){return pg*Math.cos(n*Math.PI/180)}function mg(n){return(180+n)/360}function gg(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function _g(n,e){return n/fg(e)}function cp(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}class Wu{constructor(e,o,c=0){this.x=+e,this.y=+o,this.z=+c}static fromLngLat(e,o=0){const c=$r.convert(e);return new Wu(mg(c.lng),gg(c.lat),_g(o,c.lat))}toLngLat(){return new $r(360*this.x-180,cp(this.y))}toAltitude(){return this.z*fg(cp(this.y))}meterInMercatorCoordinateUnits(){return 1/pg*(e=cp(this.y),1/Math.cos(e*Math.PI/180));var e}}function yg(n,e,o){var c=2*Math.PI*6378137/256/Math.pow(2,o);return[n*c-2*Math.PI*6378137/2,e*c-2*Math.PI*6378137/2]}class up{constructor(e,o,c){this.z=e,this.x=o,this.y=c,this.key=oc(0,e,e,o,c)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,o,c){const d=(_=this.y,b=this.z,E=yg(256*(g=this.x),256*(_=Math.pow(2,b)-_-1),b),P=yg(256*(g+1),256*(_+1),b),E[0]+","+E[1]+","+P[0]+","+P[1]);var g,_,b,E,P;const z=function(L,B,j){let V,Q="";for(let ee=L;ee>0;ee--)V=1<<ee-1,Q+=(B&V?1:0)+(j&V?2:0);return Q}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,d)}getTilePoint(e){const o=Math.pow(2,this.z);return new Ve((e.x*o-this.x)*sn,(e.y*o-this.y)*sn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vg{constructor(e,o){this.wrap=e,this.canonical=o,this.key=oc(e,o.z,o.z,o.x,o.y)}}class Si{constructor(e,o,c,d,g){this.overscaledZ=e,this.wrap=o,this.canonical=new up(c,+d,+g),this.key=oc(o,e,c,d,g)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const o=this.canonical.z-e;return e>this.canonical.z?new Si(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Si(e,this.wrap,e,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(e,o){const c=this.canonical.z-e;return e>this.canonical.z?oc(this.wrap*+o,e,this.canonical.z,this.canonical.x,this.canonical.y):oc(this.wrap*+o,e,e,this.canonical.x>>c,this.canonical.y>>c)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const o=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>o&&e.canonical.y===this.canonical.y>>o}children(e){if(this.overscaledZ>=e)return[new Si(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,c=2*this.canonical.x,d=2*this.canonical.y;return[new Si(o,this.wrap,o,c,d),new Si(o,this.wrap,o,c+1,d),new Si(o,this.wrap,o,c,d+1),new Si(o,this.wrap,o,c+1,d+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Si(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Si(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Wu(e.x-this.wrap,e.y))}}function oc(n,e,o,c,d){(n*=2)<0&&(n=-1*n-1);const g=1<<o;return(g*g*n+g*d+c).toString(36)+o.toString(36)+e.toString(36)}mt("CanonicalTileID",up),mt("OverscaledTileID",Si,{omit:["posMatrix"]});class xg{constructor(e,o,c){if(this.uid=e,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return void Me(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const d=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=c||"mapbox";for(let g=0;g<d;g++)this.data[this._idx(-1,g)]=this.data[this._idx(0,g)],this.data[this._idx(d,g)]=this.data[this._idx(d-1,g)],this.data[this._idx(g,-1)]=this.data[this._idx(g,0)],this.data[this._idx(g,d)]=this.data[this._idx(g,d-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(d,-1)]=this.data[this._idx(d-1,0)],this.data[this._idx(-1,d)]=this.data[this._idx(0,d-1)],this.data[this._idx(d,d)]=this.data[this._idx(d-1,d-1)]}get(e,o){const c=new Uint8Array(this.data.buffer),d=4*this._idx(e,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(c[d],c[d+1],c[d+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,o){if(e<-1||e>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(e+1)}_unpackMapbox(e,o,c){return(256*e*256+256*o+c)/10-1e4}_unpackTerrarium(e,o,c){return 256*e+o+c/256-32768}getPixels(){return new ui({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,o,c){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let d=o*this.dim,g=o*this.dim+this.dim,_=c*this.dim,b=c*this.dim+this.dim;switch(o){case-1:d=g-1;break;case 1:g=d+1}switch(c){case-1:_=b-1;break;case 1:b=_+1}const E=-o*this.dim,P=-c*this.dim;for(let z=_;z<b;z++)for(let L=d;L<g;L++)this.data[this._idx(L,z)]=e.data[this._idx(L+E,z+P)]}}mt("DEMData",xg);class bg{constructor(e){this._stringToNumber={},this._numberToString=[];for(let o=0;o<e.length;o++){const c=e[o];this._stringToNumber[c]=o,this._numberToString[o]=c}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class wg{constructor(e,o,c,d,g){this.type="Feature",this._vectorTileFeature=e,e._z=o,e._x=c,e._y=d,this.properties=e.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(e[o]=this[o]);return e}}class Eg{constructor(e,o){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new no(sn,16,0),this.grid3D=new no(sn,16,0),this.featureIndexArray=new rr,this.promoteId=o}insert(e,o,c,d,g,_){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,d,g);const E=_?this.grid3D:this.grid;for(let P=0;P<o.length;P++){const z=o[P],L=[1/0,1/0,-1/0,-1/0];for(let B=0;B<z.length;B++){const j=z[B];L[0]=Math.min(L[0],j.x),L[1]=Math.min(L[1],j.y),L[2]=Math.max(L[2],j.x),L[3]=Math.max(L[3],j.y)}L[0]<sn&&L[1]<sn&&L[2]>=0&&L[3]>=0&&E.insert(b,L[0],L[1],L[2],L[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new jo.VectorTile(new Jd(this.rawTileData)).layers,this.sourceLayerCoder=new bg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,o,c,d){this.loadVTLayers();const g=e.params||{},_=sn/e.tileSize/e.scale,b=ha(g.filter),E=e.queryGeometry,P=e.queryPadding*_,z=Tg(E),L=this.grid.query(z.minX-P,z.minY-P,z.maxX+P,z.maxY+P),B=Tg(e.cameraQueryGeometry),j=this.grid3D.query(B.minX-P,B.minY-P,B.maxX+P,B.maxY+P,(ee,fe,be,xe)=>function(ke,je,Be,gt,Tt){for(const ct of ke)if(je<=ct.x&&Be<=ct.y&&gt>=ct.x&&Tt>=ct.y)return!0;const lt=[new Ve(je,Be),new Ve(je,Tt),new Ve(gt,Tt),new Ve(gt,Be)];if(ke.length>2){for(const ct of lt)if(Sa(ke,ct))return!0}for(let ct=0;ct<ke.length-1;ct++)if(Hx(ke[ct],ke[ct+1],lt))return!0;return!1}(e.cameraQueryGeometry,ee-P,fe-P,be+P,xe+P));for(const ee of j)L.push(ee);L.sort(_b);const V={};let Q;for(let ee=0;ee<L.length;ee++){const fe=L[ee];if(fe===Q)continue;Q=fe;const be=this.featureIndexArray.get(fe);let xe=null;this.loadMatchingFeature(V,be.bucketIndex,be.sourceLayerIndex,be.featureIndex,b,g.layers,g.availableImages,o,c,d,(ke,je,Be)=>(xe||(xe=As(ke)),je.queryIntersectsFeature(E,ke,Be,xe,this.z,e.transform,_,e.pixelPosMatrix)))}return V}loadMatchingFeature(e,o,c,d,g,_,b,E,P,z,L){const B=this.bucketLayerIDs[o];if(_&&!function(ee,fe){for(let be=0;be<ee.length;be++)if(fe.indexOf(ee[be])>=0)return!0;return!1}(_,B))return;const j=this.sourceLayerCoder.decode(c),V=this.vtLayers[j].feature(d);if(g.needGeometry){const ee=Ps(V,!0);if(!g.filter(new kr(this.tileID.overscaledZ),ee,this.tileID.canonical))return}else if(!g.filter(new kr(this.tileID.overscaledZ),V))return;const Q=this.getId(V,j);for(let ee=0;ee<B.length;ee++){const fe=B[ee];if(_&&_.indexOf(fe)<0)continue;const be=E[fe];if(!be)continue;let xe={};Q&&z&&(xe=z.getState(be.sourceLayer||"_geojsonTileLayer",Q));const ke=oe({},P[fe]);ke.paint=Sg(ke.paint,be.paint,V,xe,b),ke.layout=Sg(ke.layout,be.layout,V,xe,b);const je=!L||L(V,be,xe);if(!je)continue;const Be=new wg(V,this.z,this.x,this.y,Q);Be.layer=ke;let gt=e[fe];gt===void 0&&(gt=e[fe]=[]),gt.push({featureIndex:d,feature:Be,intersectionZ:je})}}lookupSymbolFeatures(e,o,c,d,g,_,b,E){const P={};this.loadVTLayers();const z=ha(g);for(const L of e)this.loadMatchingFeature(P,c,d,L,z,_,b,E,o);return P}hasLayer(e){for(const o of this.bucketLayerIDs)for(const c of o)if(e===c)return!0;return!1}getId(e,o){let c=e.id;return this.promoteId&&(c=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof c=="boolean"&&(c=Number(c))),c}}function Sg(n,e,o,c,d){return se(n,(g,_)=>{const b=e instanceof va?e.get(_):null;return b&&b.evaluate?b.evaluate(o,c,d):b})}function Tg(n){let e=1/0,o=1/0,c=-1/0,d=-1/0;for(const g of n)e=Math.min(e,g.x),o=Math.min(o,g.y),c=Math.max(c,g.x),d=Math.max(d,g.y);return{minX:e,minY:o,maxX:c,maxY:d}}function _b(n,e){return e-n}var hp;mt("FeatureIndex",Eg,{omit:["rawTileData","sourceLayerCoder"]}),l.PerformanceMarkers=void 0,(hp=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",hp.load="load",hp.fullLoad="fullLoad";let Ku=null,sc=[];const dp=1e3/30,yb={mark(n){performance.mark(n)},frame(n){const e=n;Ku!=null&&sc.push(e-Ku),Ku=e},clearMetrics(){Ku=null,sc=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const n in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[n])},getPerformanceMetrics(){performance.measure("loadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure("fullLoadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const n=performance.getEntriesByName("loadTime")[0].duration,e=performance.getEntriesByName("fullLoadTime")[0].duration,o=sc.length,c=1/(sc.reduce((g,_)=>g+_,0)/o/1e3),d=sc.filter(g=>g>dp).reduce((g,_)=>g+(_-dp)/dp,0);return{loadTime:n,fullLoadTime:e,fps:c,percentDroppedFrames:d/(o+d)*100}}};l.AJAXError=Z,l.ARRAY_TYPE=Ta,l.Actor=class{constructor(n,e,o){this.target=n,this.parent=e,this.mapId=o,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},te(["receive","process"],this),this.invoker=new gb(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Se()?n:window}send(n,e,o,c,d=!1){const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(this.callbacks[g]=o);const _=nt(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:n,hasCallback:!!o,targetMapId:c,mustQueue:d,sourceMapId:this.mapId,data:vs(e,_)},_),{cancel:()=>{o&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(n){const e=n.data,o=e.id;if(o&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){delete this.tasks[o];const c=this.cancelCallbacks[o];delete this.cancelCallbacks[o],c&&c()}else Se()||e.mustQueue?(this.tasks[o]=e,this.taskQueue.push(o),this.invoker.trigger()):this.processTask(o,e)}process(){if(!this.taskQueue.length)return;const n=this.taskQueue.shift(),e=this.tasks[n];delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(n,e)}processTask(n,e){if(e.type==="<response>"){const o=this.callbacks[n];delete this.callbacks[n],o&&(e.error?o(io(e.error)):o(null,io(e.data)))}else{let o=!1;const c=nt(this.globalScope)?void 0:[],d=e.hasCallback?(b,E)=>{o=!0,delete this.cancelCallbacks[n],this.target.postMessage({id:n,type:"<response>",sourceMapId:this.mapId,error:b?vs(b):null,data:vs(E,c)},c)}:b=>{o=!0};let g=null;const _=io(e.data);if(this.parent[e.type])g=this.parent[e.type](e.sourceMapId,_,d);else if(this.parent.getWorkerSource){const b=e.type.split(".");g=this.parent.getWorkerSource(e.sourceMapId,b[0],_.source)[b[1]](_,d)}else d(new Error(`Could not find function ${e.type}`));!o&&g&&g.cancel&&(this.cancelCallbacks[n]=g.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=Xl,l.CanonicalTileID=up,l.CollisionBoxArray=Ee,l.CollisionCircleLayoutArray=class extends D{},l.Color=M,l.DEMData=xg,l.DataConstantProperty=wt,l.DictionaryCoder=bg,l.EXTENT=sn,l.ErrorEvent=At,l.EvaluationParameters=kr,l.Event=_t,l.Evented=jt,l.FeatureIndex=Eg,l.FillBucket=Zd,l.FillExtrusionBucket=Kd,l.GeoJSONFeature=wg,l.ImageAtlas=Zm,l.ImagePosition=Qd,l.LineBucket=Xd,l.LineStripIndexArray=class extends ge{},l.LngLat=$r,l.LngLatBounds=Cs,l.MercatorCoordinate=Wu,l.ONE_EM=pn,l.OverscaledTileID=Si,l.PerformanceUtils=yb,l.PosArray=class extends Ro{},l.Properties=nn,l.QuadTriangleArray=class extends N{},l.RGBAImage=ui,l.RasterBoundsArray=class extends Ts{},l.RequestPerformance=class{constructor(n){this._marks={start:[n.url,"start"].join("#"),end:[n.url,"end"].join("#"),measure:n.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let n=performance.getEntriesByName(this._marks.measure);return n.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),n=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),n}},l.ResourceType=Ot,l.SegmentVector=ar,l.SymbolBucket=za,l.Transitionable=ql,l.TriangleIndexArray=Rn,l.Uniform1f=Bo,l.Uniform1i=class extends Ei{constructor(n,e){super(n,e),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},l.Uniform2f=class extends Ei{constructor(n,e){super(n,e),this.current=[0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))}},l.Uniform3f=class extends Ei{constructor(n,e){super(n,e),this.current=[0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))}},l.Uniform4f=hm,l.UniformColor=dm,l.UniformMatrix4f=class extends Ei{constructor(n,e){super(n,e),this.current=jx}set(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let e=1;e<16;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}},l.UnwrappedTileID=vg,l.ValidationError=$e,l.ZoomHistory=xs,l.addDynamicAttributes=ip,l.asyncAll=function(n,e,o){if(!n.length)return o(null,[]);let c=n.length;const d=new Array(n.length);let g=null;n.forEach((_,b)=>{e(_,(E,P)=>{E&&(g=E),d[b]=P,--c==0&&o(g,d)})})},l.bezier=A,l.bindAll=te,l.cacheEntryPossiblyAdded=function(n){Fe++,Fe>Ar&&(n.getActor().send("enforceCacheSizeLimit",vr),Fe=0)},l.clamp=O,l.clearTileCache=function(n){const e=caches.delete(dr);n&&e.catch(n).then(()=>n())},l.clipLine=og,l.clone=function(n){var e=new Ta(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},l.clone$1=_e,l.collisionCircleLayout=R1,l.config=zt,l.create=function(){var n=new Ta(16);return Ta!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},l.createExpression=sa,l.createFilter=ha,l.createLayout=on,l.createStyleLayer=function(n){return n.type==="custom"?new fb(n):new mb[n.type](n)},l.dot=function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]},l.ease=F,l.emitValidationErrors=bu,l.enforceCacheSizeLimit=function(n){jr(),pr&&pr.then(e=>{e.keys().then(o=>{for(let c=0;c<o.length-n;c++)e.delete(o[c])})})},l.evaluateSizeForFeature=function(n,{uSize:e,uSizeT:o},{lowerSize:c,upperSize:d}){return n.kind==="source"?c/ho:n.kind==="composite"?Xr(c/ho,d/ho,o):e},l.evaluateSizeForZoom=function(n,e){let o=0,c=0;if(n.kind==="constant")c=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:d,minZoom:g,maxZoom:_}=n,b=d?O(jn.interpolationFactor(d,e,g,_),0,1):0;n.kind==="camera"?c=Xr(n.minSize,n.maxSize,b):o=b}return{uSizeT:o,uSize:c}},l.evaluateVariableOffset=lg,l.evented=Lo,l.exported=Ft,l.exported$1=at,l.extend=oe,l.filterObject=me,l.getAnchorAlignment=tp,l.getAnchorJustification=np,l.getArrayBuffer=Re,l.getImage=Ze,l.getJSON=function(n,e){return Le(oe(n,{type:"json"}),e)},l.getOverlapMode=lp,l.getRTLTextPluginStatus=$l,l.getReferrer=ne,l.getVideo=function(n,e){const o=window.document.createElement("video");o.muted=!0,o.onloadstart=function(){e(null,o)};for(let c=0;c<n.length;c++){const d=window.document.createElement("source");Ue(n[c])||(o.crossOrigin="Anonymous"),d.src=n[c],o.appendChild(d)}return{cancel:()=>{}}},l.identity=Bd,l.invert=function(n,e){var o=e[0],c=e[1],d=e[2],g=e[3],_=e[4],b=e[5],E=e[6],P=e[7],z=e[8],L=e[9],B=e[10],j=e[11],V=e[12],Q=e[13],ee=e[14],fe=e[15],be=o*b-c*_,xe=o*E-d*_,ke=o*P-g*_,je=c*E-d*b,Be=c*P-g*b,gt=d*P-g*E,Tt=z*Q-L*V,lt=z*ee-B*V,ct=z*fe-j*V,tt=L*ee-B*Q,pt=L*fe-j*Q,ut=B*fe-j*ee,We=be*ut-xe*pt+ke*tt+je*ct-Be*lt+gt*Tt;return We?(n[0]=(b*ut-E*pt+P*tt)*(We=1/We),n[1]=(d*pt-c*ut-g*tt)*We,n[2]=(Q*gt-ee*Be+fe*je)*We,n[3]=(B*Be-L*gt-j*je)*We,n[4]=(E*ct-_*ut-P*lt)*We,n[5]=(o*ut-d*ct+g*lt)*We,n[6]=(ee*ke-V*gt-fe*xe)*We,n[7]=(z*gt-B*ke+j*xe)*We,n[8]=(_*pt-b*ct+P*Tt)*We,n[9]=(c*ct-o*pt-g*Tt)*We,n[10]=(V*Be-Q*ke+fe*be)*We,n[11]=(L*ke-z*Be-j*be)*We,n[12]=(b*lt-_*tt-E*Tt)*We,n[13]=(o*tt-c*lt+d*Tt)*We,n[14]=(Q*xe-V*je-ee*be)*We,n[15]=(z*je-L*xe+B*be)*We,n):null},l.isImageBitmap=St,l.isSafari=nt,l.keysDifference=function(n,e){const o=[];for(const c in n)c in e||o.push(c);return o},l.lazyLoadRTLTextPlugin=function(){Qn.isLoading()||Qn.isLoaded()||$l()!=="deferred"||ga()},l.makeRequest=Le,l.mapObject=se,l.mercatorXfromLng=mg,l.mercatorYfromLat=gg,l.mercatorZfromAltitude=_g,l.mul=Wx,l.multiply=xm,l.nextPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},l.number=Xr,l.ortho=function(n,e,o,c,d,g,_){var b=1/(e-o),E=1/(c-d),P=1/(g-_);return n[0]=-2*b,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*E,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*P,n[11]=0,n[12]=(e+o)*b,n[13]=(d+c)*E,n[14]=(_+g)*P,n[15]=1,n},l.parseCacheControl=rt,l.parseGlyphPBF=function(n){return new Jd(n).readFields(Z1,[])},l.pbf=Jd,l.performSymbolLayout=function(n,e,o,c,d,g,_){n.createArrays(),n.tilePixelRatio=sn/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;const b=n.layers[0].layout,E=n.layers[0]._unevaluatedLayout._values,P={layoutIconSize:E["icon-size"].possiblyEvaluate(new kr(n.zoom+1),_),layoutTextSize:E["text-size"].possiblyEvaluate(new kr(n.zoom+1),_),textMaxSize:E["text-size"].possiblyEvaluate(new kr(18))};if(n.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:Q}=n.textSizeData;P.compositeTextSizes=[E["text-size"].possiblyEvaluate(new kr(V),_),E["text-size"].possiblyEvaluate(new kr(Q),_)]}if(n.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:Q}=n.iconSizeData;P.compositeIconSizes=[E["icon-size"].possiblyEvaluate(new kr(V),_),E["icon-size"].possiblyEvaluate(new kr(Q),_)]}const z=b.get("text-line-height")*pn,L=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point",B=b.get("text-keep-upright"),j=b.get("text-size");for(const V of n.features){const Q=b.get("text-font").evaluate(V,{},_).join(","),ee=j.evaluate(V,{},_),fe=P.layoutTextSize.evaluate(V,{},_),be=P.layoutIconSize.evaluate(V,{},_),xe={horizontal:{},vertical:void 0},ke=V.text;let je,Be=[0,0];if(ke){const lt=ke.toString(),ct=b.get("text-letter-spacing").evaluate(V,{},_)*pn,tt=wu(lt)?ct:0,pt=b.get("text-anchor").evaluate(V,{},_),ut=b.get("text-variable-anchor");if(!ut){const mr=b.get("text-radial-offset").evaluate(V,{},_);Be=mr?lg(pt,[mr*pn,rp]):b.get("text-offset").evaluate(V,{},_).map(zr=>zr*pn)}let We=L?"center":b.get("text-justify").evaluate(V,{},_);const kt=b.get("symbol-placement"),It=kt==="point"?b.get("text-max-width").evaluate(V,{},_)*pn:0,tr=()=>{n.allowVerticalPlacement&&Fl(lt)&&(xe.vertical=ju(ke,e,o,d,Q,It,z,pt,"left",tt,Be,l.WritingMode.vertical,!0,kt,fe,ee))};if(!L&&ut){const mr=We==="auto"?ut.map(Mr=>np(Mr)):[We];let zr=!1;for(let Mr=0;Mr<mr.length;Mr++){const _n=mr[Mr];if(!xe.horizontal[_n])if(zr)xe.horizontal[_n]=xe.horizontal[0];else{const Yr=ju(ke,e,o,d,Q,It,z,"center",_n,tt,Be,l.WritingMode.horizontal,!1,kt,fe,ee);Yr&&(xe.horizontal[_n]=Yr,zr=Yr.positionedLines.length===1)}}tr()}else{We==="auto"&&(We=np(pt));const mr=ju(ke,e,o,d,Q,It,z,pt,We,tt,Be,l.WritingMode.horizontal,!1,kt,fe,ee);mr&&(xe.horizontal[We]=mr),tr(),Fl(lt)&&L&&B&&(xe.vertical=ju(ke,e,o,d,Q,It,z,pt,We,tt,Be,l.WritingMode.vertical,!1,kt,fe,ee))}}let gt=!1;if(V.icon&&V.icon.name){const lt=c[V.icon.name];lt&&(je=Q1(d[V.icon.name],b.get("icon-offset").evaluate(V,{},_),b.get("icon-anchor").evaluate(V,{},_)),gt=!!lt.sdf,n.sdfIcons===void 0?n.sdfIcons=gt:n.sdfIcons!==gt&&Me("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(lt.pixelRatio!==n.pixelRatio||b.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}const Tt=ug(xe.horizontal)||xe.vertical;n.iconsInText=!!Tt&&Tt.iconsInText,(Tt||je)&&sb(n,V,xe,je,c,P,fe,be,Be,gt,_)}g&&n.generateCollisionDebugBuffers()},l.perspective=function(n,e,o,c,d){var g,_=1/Math.tan(e/2);return n[0]=_/o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=_,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,d!=null&&d!==1/0?(n[10]=(d+c)*(g=1/(c-d)),n[14]=2*d*c*g):(n[10]=-1,n[14]=-2*c),n},l.pick=function(n,e){const o={};for(let c=0;c<e.length;c++){const d=e[c];d in n&&(o[d]=n[d])}return o},l.plugin=Qn,l.pointGeometry=Ve,l.polygonIntersectsPolygon=gm,l.potpack=Gm,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=mt,l.registerForPluginStateChange=function(n){return n({pluginStatus:On,pluginURL:ji}),Lo.on("pluginStateChange",n),n},l.renderColorRamp=Sm,l.rotateX=function(n,e,o){var c=Math.sin(o),d=Math.cos(o),g=e[4],_=e[5],b=e[6],E=e[7],P=e[8],z=e[9],L=e[10],B=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=g*d+P*c,n[5]=_*d+z*c,n[6]=b*d+L*c,n[7]=E*d+B*c,n[8]=P*d-g*c,n[9]=z*d-_*c,n[10]=L*d-b*c,n[11]=B*d-E*c,n},l.rotateZ=function(n,e,o){var c=Math.sin(o),d=Math.cos(o),g=e[0],_=e[1],b=e[2],E=e[3],P=e[4],z=e[5],L=e[6],B=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=g*d+P*c,n[1]=_*d+z*c,n[2]=b*d+L*c,n[3]=E*d+B*c,n[4]=P*d-g*c,n[5]=z*d-_*c,n[6]=L*d-b*c,n[7]=B*d-E*c,n},l.scale=function(n,e,o){var c=o[0],d=o[1],g=o[2];return n[0]=e[0]*c,n[1]=e[1]*c,n[2]=e[2]*c,n[3]=e[3]*c,n[4]=e[4]*d,n[5]=e[5]*d,n[6]=e[6]*d,n[7]=e[7]*d,n[8]=e[8]*g,n[9]=e[9]*g,n[10]=e[10]*g,n[11]=e[11]*g,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},l.scale$1=function(n,e,o){return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*o,n},l.setCacheLimits=function(n,e){vr=n,Ar=e},l.setRTLTextPlugin=function(n,e,o=!1){if(On===ma||On===Nl||On===jl)throw new Error("setRTLTextPlugin cannot be called multiple times.");ji=Ft.resolveURL(n),On=ma,Vl=e,Ul(),o||ga()},l.spec=ve,l.sphericalToCartesian=function([n,e,o]){return e+=90,e*=Math.PI/180,o*=Math.PI/180,{x:n*Math.cos(e)*Math.sin(o),y:n*Math.sin(e)*Math.sin(o),z:n*Math.cos(o)}},l.toEvaluationFeature=Ps,l.transformMat4=Mu,l.translate=function(n,e,o){var c,d,g,_,b,E,P,z,L,B,j,V,Q=o[0],ee=o[1],fe=o[2];return e===n?(n[12]=e[0]*Q+e[4]*ee+e[8]*fe+e[12],n[13]=e[1]*Q+e[5]*ee+e[9]*fe+e[13],n[14]=e[2]*Q+e[6]*ee+e[10]*fe+e[14],n[15]=e[3]*Q+e[7]*ee+e[11]*fe+e[15]):(d=e[1],g=e[2],_=e[3],b=e[4],E=e[5],P=e[6],z=e[7],L=e[8],B=e[9],j=e[10],V=e[11],n[0]=c=e[0],n[1]=d,n[2]=g,n[3]=_,n[4]=b,n[5]=E,n[6]=P,n[7]=z,n[8]=L,n[9]=B,n[10]=j,n[11]=V,n[12]=c*Q+b*ee+L*fe+e[12],n[13]=d*Q+E*ee+B*fe+e[13],n[14]=g*Q+P*ee+j*fe+e[14],n[15]=_*Q+z*ee+V*fe+e[15]),n},l.triggerPluginCompletionEvent=Tu,l.unicodeBlockLookup=it,l.uniqueId=function(){return de++},l.validateCustomStyleLayer=function(n){const e=[],o=n.id;return o===void 0&&e.push({message:`layers.${o}: missing required property "id"`}),n.render===void 0&&e.push({message:`layers.${o}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&e.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),e},l.validateLight=Td,l.validateStyle=ro,l.vectorTile=jo,l.warnOnce=Me,l.wrap=K}),v(["./shared"],function(l){function T(G){const k=typeof G;if(k==="number"||k==="boolean"||k==="string"||G==null)return JSON.stringify(G);if(Array.isArray(G)){let W="[";for(const X of G)W+=`${T(X)},`;return`${W}]`}const M=Object.keys(G).sort();let U="{";for(let W=0;W<M.length;W++)U+=`${JSON.stringify(M[W])}:${T(G[M[W]])},`;return`${U}}`}function C(G){let k="";for(const M of l.refProperties)k+=`/${T(G[M])}`;return k}class A{constructor(k){this.keyCache={},k&&this.replace(k)}replace(k){this._layerConfigs={},this._layers={},this.update(k,[])}update(k,M){for(const W of k){this._layerConfigs[W.id]=W;const X=this._layers[W.id]=l.createStyleLayer(W);X._featureFilter=l.createFilter(X.filter),this.keyCache[W.id]&&delete this.keyCache[W.id]}for(const W of M)delete this.keyCache[W],delete this._layerConfigs[W],delete this._layers[W];this.familiesBySource={};const U=function(W,X){const ae={};for(let ie=0;ie<W.length;ie++){const le=X&&X[W[ie].id]||C(W[ie]);X&&(X[W[ie].id]=le);let Ie=ae[le];Ie||(Ie=ae[le]=[]),Ie.push(W[ie])}const re=[];for(const ie in ae)re.push(ae[ie]);return re}(Object.values(this._layerConfigs),this.keyCache);for(const W of U){const X=W.map(Ne=>this._layers[Ne.id]),ae=X[0];if(ae.visibility==="none")continue;const re=ae.source||"";let ie=this.familiesBySource[re];ie||(ie=this.familiesBySource[re]={});const le=ae.sourceLayer||"_geojsonTileLayer";let Ie=ie[le];Ie||(Ie=ie[le]=[]),Ie.push(X)}}}class F{constructor(k){const M={},U=[];for(const re in k){const ie=k[re],le=M[re]={};for(const Ie in ie){const Ne=ie[+Ie];if(!Ne||Ne.bitmap.width===0||Ne.bitmap.height===0)continue;const we={x:0,y:0,w:Ne.bitmap.width+2,h:Ne.bitmap.height+2};U.push(we),le[Ie]={rect:we,metrics:Ne.metrics}}}const{w:W,h:X}=l.potpack(U),ae=new l.AlphaImage({width:W||1,height:X||1});for(const re in k){const ie=k[re];for(const le in ie){const Ie=ie[+le];if(!Ie||Ie.bitmap.width===0||Ie.bitmap.height===0)continue;const Ne=M[re][le].rect;l.AlphaImage.copy(Ie.bitmap,ae,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},Ie.bitmap)}}this.image=ae,this.positions=M}}l.register("GlyphAtlas",F);class O{constructor(k){this.tileID=new l.OverscaledTileID(k.tileID.overscaledZ,k.tileID.wrap,k.tileID.canonical.z,k.tileID.canonical.x,k.tileID.canonical.y),this.uid=k.uid,this.zoom=k.zoom,this.pixelRatio=k.pixelRatio,this.tileSize=k.tileSize,this.source=k.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=k.showCollisionBoxes,this.collectResourceTiming=!!k.collectResourceTiming,this.returnDependencies=!!k.returnDependencies,this.promoteId=k.promoteId}parse(k,M,U,W,X){this.status="parsing",this.data=k,this.collisionBoxArray=new l.CollisionBoxArray;const ae=new l.DictionaryCoder(Object.keys(k.layers).sort()),re=new l.FeatureIndex(this.tileID,this.promoteId);re.bucketLayerIDs=[];const ie={},le={featureIndex:re,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:U},Ie=M.familiesBySource[this.source];for(const Wt in Ie){const Gt=k.layers[Wt];if(!Gt)continue;Gt.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${Wt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Vt=ae.encode(Wt),Zr=[];for(let Vr=0;Vr<Gt.length;Vr++){const an=Gt.feature(Vr),hn=re.getId(an,Wt);Zr.push({feature:an,id:hn,index:Vr,sourceLayerIndex:Vt})}for(const Vr of Ie[Wt]){const an=Vr[0];an.minzoom&&this.zoom<Math.floor(an.minzoom)||an.maxzoom&&this.zoom>=an.maxzoom||an.visibility!=="none"&&(K(Vr,this.zoom,U),(ie[an.id]=an.createBucket({index:re.bucketLayerIDs.length,layers:Vr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Vt,sourceID:this.source})).populate(Zr,le,this.tileID.canonical),re.bucketLayerIDs.push(Vr.map(hn=>hn.id)))}}let Ne,we,xt,ht;const Et=l.mapObject(le.glyphDependencies,Wt=>Object.keys(Wt).map(Number));Object.keys(Et).length?W.send("getGlyphs",{uid:this.uid,stacks:Et},(Wt,Gt)=>{Ne||(Ne=Wt,we=Gt,Qt.call(this))}):we={};const Pt=Object.keys(le.iconDependencies);Pt.length?W.send("getImages",{icons:Pt,source:this.source,tileID:this.tileID,type:"icons"},(Wt,Gt)=>{Ne||(Ne=Wt,xt=Gt,Qt.call(this))}):xt={};const or=Object.keys(le.patternDependencies);function Qt(){if(Ne)return X(Ne);if(we&&xt&&ht){const Wt=new F(we),Gt=new l.ImageAtlas(xt,ht);for(const Vt in ie){const Zr=ie[Vt];Zr instanceof l.SymbolBucket?(K(Zr.layers,this.zoom,U),l.performSymbolLayout(Zr,we,Wt.positions,xt,Gt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Zr.hasPattern&&(Zr instanceof l.LineBucket||Zr instanceof l.FillBucket||Zr instanceof l.FillExtrusionBucket)&&(K(Zr.layers,this.zoom,U),Zr.addFeatures(le,this.tileID.canonical,Gt.patternPositions))}this.status="done",X(null,{buckets:Object.values(ie).filter(Vt=>!Vt.isEmpty()),featureIndex:re,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Wt.image,imageAtlas:Gt,glyphMap:this.returnDependencies?we:null,iconMap:this.returnDependencies?xt:null,glyphPositions:this.returnDependencies?Wt.positions:null})}}or.length?W.send("getImages",{icons:or,source:this.source,tileID:this.tileID,type:"patterns"},(Wt,Gt)=>{Ne||(Ne=Wt,ht=Gt,Qt.call(this))}):ht={},Qt.call(this)}}function K(G,k,M){const U=new l.EvaluationParameters(k);for(const W of G)W.recalculate(U,M)}function oe(G,k){const M=l.getArrayBuffer(G.request,(U,W,X,ae)=>{U?k(U):W&&k(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(W)),rawData:W,cacheControl:X,expires:ae})});return()=>{M.cancel(),k()}}class de{constructor(k,M,U,W){this.actor=k,this.layerIndex=M,this.availableImages=U,this.loadVectorData=W||oe,this.loading={},this.loaded={}}loadTile(k,M){const U=k.uid;this.loading||(this.loading={});const W=!!(k&&k.request&&k.request.collectResourceTiming)&&new l.RequestPerformance(k.request),X=this.loading[U]=new O(k);X.abort=this.loadVectorData(k,(ae,re)=>{if(delete this.loading[U],ae||!re)return X.status="done",this.loaded[U]=X,M(ae);const ie=re.rawData,le={};re.expires&&(le.expires=re.expires),re.cacheControl&&(le.cacheControl=re.cacheControl);const Ie={};if(W){const Ne=W.finish();Ne&&(Ie.resourceTiming=JSON.parse(JSON.stringify(Ne)))}X.vectorTile=re.vectorTile,X.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ne,we)=>{if(Ne||!we)return M(Ne);M(null,l.extend({rawTileData:ie.slice(0)},we,le,Ie))}),this.loaded=this.loaded||{},this.loaded[U]=X})}reloadTile(k,M){const U=this.loaded,W=k.uid,X=this;if(U&&U[W]){const ae=U[W];ae.showCollisionBoxes=k.showCollisionBoxes;const re=(ie,le)=>{const Ie=ae.reloadCallback;Ie&&(delete ae.reloadCallback,ae.parse(ae.vectorTile,X.layerIndex,this.availableImages,X.actor,Ie)),M(ie,le)};ae.status==="parsing"?ae.reloadCallback=re:ae.status==="done"&&(ae.vectorTile?ae.parse(ae.vectorTile,this.layerIndex,this.availableImages,this.actor,re):re())}}abortTile(k,M){const U=this.loading,W=k.uid;U&&U[W]&&U[W].abort&&(U[W].abort(),delete U[W]),M()}removeTile(k,M){const U=this.loaded,W=k.uid;U&&U[W]&&delete U[W],M()}}class te{constructor(){this.loaded={}}loadTile(k,M){const{uid:U,encoding:W,rawImageData:X}=k,ae=l.isImageBitmap(X)?this.getImageData(X):X,re=new l.DEMData(U,ae,W);this.loaded=this.loaded||{},this.loaded[U]=re,M(null,re)}getImageData(k){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(k.width,k.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=k.width,this.offscreenCanvas.height=k.height,this.offscreenCanvasContext.drawImage(k,0,0,k.width,k.height);const M=this.offscreenCanvasContext.getImageData(-1,-1,k.width+2,k.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:M.width,height:M.height},M.data)}removeTile(k){const M=this.loaded,U=k.uid;M&&M[U]&&delete M[U]}}var se=function G(k,M){var U,W=k&&k.type;if(W==="FeatureCollection")for(U=0;U<k.features.length;U++)G(k.features[U],M);else if(W==="GeometryCollection")for(U=0;U<k.geometries.length;U++)G(k.geometries[U],M);else if(W==="Feature")G(k.geometry,M);else if(W==="Polygon")me(k.coordinates,M);else if(W==="MultiPolygon")for(U=0;U<k.coordinates.length;U++)me(k.coordinates[U],M);return k};function me(G,k){if(G.length!==0){_e(G[0],k);for(var M=1;M<G.length;M++)_e(G[M],!k)}}function _e(G,k){for(var M=0,U=0,W=0,X=G.length,ae=X-1;W<X;ae=W++){var re=(G[W][0]-G[ae][0])*(G[ae][1]+G[W][1]),ie=M+re;U+=Math.abs(M)>=Math.abs(re)?M-ie+re:re-ie+M,M=ie}M+U>=0!=!!k&&G.reverse()}const Ae=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Me{constructor(k){this._feature=k,this.extent=l.EXTENT,this.type=k.type,this.properties=k.tags,"id"in k&&!isNaN(k.id)&&(this.id=parseInt(k.id,10))}loadGeometry(){if(this._feature.type===1){const k=[];for(const M of this._feature.geometry)k.push([new l.pointGeometry(M[0],M[1])]);return k}{const k=[];for(const M of this._feature.geometry){const U=[];for(const W of M)U.push(new l.pointGeometry(W[0],W[1]));k.push(U)}return k}}toGeoJSON(k,M,U){return Ae.call(this,k,M,U)}}class He{constructor(k){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=k.length,this._features=k}feature(k){return new Me(this._features[k])}}var De={exports:{}},Se=l.pointGeometry,rt=l.vectorTile.VectorTileFeature,ot=ft;function ft(G,k){this.options=k||{},this.features=G,this.length=G.length}function Te(G,k){this.id=typeof G.id=="number"?G.id:void 0,this.type=G.type,this.rawGeometry=G.type===1?[G.geometry]:G.geometry,this.properties=G.tags,this.extent=k||4096}ft.prototype.feature=function(G){return new Te(this.features[G],this.options.extent)},Te.prototype.loadGeometry=function(){var G=this.rawGeometry;this.geometry=[];for(var k=0;k<G.length;k++){for(var M=G[k],U=[],W=0;W<M.length;W++)U.push(new Se(M[W][0],M[W][1]));this.geometry.push(U)}return this.geometry},Te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var G=this.geometry,k=1/0,M=-1/0,U=1/0,W=-1/0,X=0;X<G.length;X++)for(var ae=G[X],re=0;re<ae.length;re++){var ie=ae[re];k=Math.min(k,ie.x),M=Math.max(M,ie.x),U=Math.min(U,ie.y),W=Math.max(W,ie.y)}return[k,U,M,W]},Te.prototype.toGeoJSON=rt.prototype.toGeoJSON;var nt=l.pbf,St=ot;function Ft(G){var k=new nt;return function(M,U){for(var W in M.layers)U.writeMessage(3,Ve,M.layers[W])}(G,k),k.finish()}function Ve(G,k){var M;k.writeVarintField(15,G.version||1),k.writeStringField(1,G.name||""),k.writeVarintField(5,G.extent||4096);var U={keys:[],values:[],keycache:{},valuecache:{}};for(M=0;M<G.length;M++)U.feature=G.feature(M),k.writeMessage(2,Dt,U);var W=U.keys;for(M=0;M<W.length;M++)k.writeStringField(3,W[M]);var X=U.values;for(M=0;M<X.length;M++)k.writeMessage(4,vr,X[M])}function Dt(G,k){var M=G.feature;M.id!==void 0&&k.writeVarintField(1,M.id),k.writeMessage(2,zt,G),k.writeVarintField(3,M.type),k.writeMessage(4,Ir,M)}function zt(G,k){var M=G.feature,U=G.keys,W=G.values,X=G.keycache,ae=G.valuecache;for(var re in M.properties){var ie=M.properties[re],le=X[re];if(ie!==null){le===void 0&&(U.push(re),X[re]=le=U.length-1),k.writeVarint(le);var Ie=typeof ie;Ie!=="string"&&Ie!=="boolean"&&Ie!=="number"&&(ie=JSON.stringify(ie));var Ne=Ie+":"+ie,we=ae[Ne];we===void 0&&(W.push(ie),ae[Ne]=we=W.length-1),k.writeVarint(we)}}}function dr(G,k){return(k<<3)+(7&G)}function pr(G){return G<<1^G>>31}function Ir(G,k){for(var M=G.loadGeometry(),U=G.type,W=0,X=0,ae=M.length,re=0;re<ae;re++){var ie=M[re],le=1;U===1&&(le=ie.length),k.writeVarint(dr(1,le));for(var Ie=U===3?ie.length-1:ie.length,Ne=0;Ne<Ie;Ne++){Ne===1&&U!==1&&k.writeVarint(dr(2,Ie-1));var we=ie[Ne].x-W,xt=ie[Ne].y-X;k.writeVarint(pr(we)),k.writeVarint(pr(xt)),W+=we,X+=xt}U===3&&k.writeVarint(dr(7,1))}}function vr(G,k){var M=typeof G;M==="string"?k.writeStringField(1,G):M==="boolean"?k.writeBooleanField(7,G):M==="number"&&(G%1!=0?k.writeDoubleField(3,G):G<0?k.writeSVarintField(6,G):k.writeVarintField(5,G))}De.exports=Ft,De.exports.fromVectorTileJs=Ft,De.exports.fromGeojsonVt=function(G,k){k=k||{};var M={};for(var U in G)M[U]=new St(G[U].features,k),M[U].name=U,M[U].version=k.version,M[U].extent=k.extent;return Ft({layers:M})},De.exports.GeoJSONWrapper=St;var Ar=De.exports;function jr(G,k,M,U,W,X){if(W-U<=M)return;const ae=U+W>>1;Fe(G,k,ae,U,W,X%2),jr(G,k,M,U,ae-1,X+1),jr(G,k,M,ae+1,W,X+1)}function Fe(G,k,M,U,W,X){for(;W>U;){if(W-U>600){const le=W-U+1,Ie=M-U+1,Ne=Math.log(le),we=.5*Math.exp(2*Ne/3),xt=.5*Math.sqrt(Ne*we*(le-we)/le)*(Ie-le/2<0?-1:1);Fe(G,k,M,Math.max(U,Math.floor(M-Ie*we/le+xt)),Math.min(W,Math.floor(M+(le-Ie)*we/le+xt)),X)}const ae=k[2*M+X];let re=U,ie=W;for(at(G,k,U,M),k[2*W+X]>ae&&at(G,k,U,W);re<ie;){for(at(G,k,re,ie),re++,ie--;k[2*re+X]<ae;)re++;for(;k[2*ie+X]>ae;)ie--}k[2*U+X]===ae?at(G,k,U,ie):(ie++,at(G,k,ie,W)),ie<=M&&(U=ie+1),M<=ie&&(W=ie-1)}}function at(G,k,M,U){Xe(G,M,U),Xe(k,2*M,2*U),Xe(k,2*M+1,2*U+1)}function Xe(G,k,M){const U=G[k];G[k]=G[M],G[M]=U}function dt(G,k,M,U){const W=G-M,X=k-U;return W*W+X*X}const Zt=G=>G[0],nr=G=>G[1];class Rt{constructor(k,M=Zt,U=nr,W=64,X=Float64Array){this.nodeSize=W,this.points=k;const ae=k.length<65536?Uint16Array:Uint32Array,re=this.ids=new ae(k.length),ie=this.coords=new X(2*k.length);for(let le=0;le<k.length;le++)re[le]=le,ie[2*le]=M(k[le]),ie[2*le+1]=U(k[le]);jr(re,ie,W,0,re.length-1,0)}range(k,M,U,W){return function(X,ae,re,ie,le,Ie,Ne){const we=[0,X.length-1,0],xt=[];let ht,Et;for(;we.length;){const Pt=we.pop(),or=we.pop(),Qt=we.pop();if(or-Qt<=Ne){for(let Vt=Qt;Vt<=or;Vt++)ht=ae[2*Vt],Et=ae[2*Vt+1],ht>=re&&ht<=le&&Et>=ie&&Et<=Ie&&xt.push(X[Vt]);continue}const Wt=Math.floor((Qt+or)/2);ht=ae[2*Wt],Et=ae[2*Wt+1],ht>=re&&ht<=le&&Et>=ie&&Et<=Ie&&xt.push(X[Wt]);const Gt=(Pt+1)%2;(Pt===0?re<=ht:ie<=Et)&&(we.push(Qt),we.push(Wt-1),we.push(Gt)),(Pt===0?le>=ht:Ie>=Et)&&(we.push(Wt+1),we.push(or),we.push(Gt))}return xt}(this.ids,this.coords,k,M,U,W,this.nodeSize)}within(k,M,U){return function(W,X,ae,re,ie,le){const Ie=[0,W.length-1,0],Ne=[],we=ie*ie;for(;Ie.length;){const xt=Ie.pop(),ht=Ie.pop(),Et=Ie.pop();if(ht-Et<=le){for(let Gt=Et;Gt<=ht;Gt++)dt(X[2*Gt],X[2*Gt+1],ae,re)<=we&&Ne.push(W[Gt]);continue}const Pt=Math.floor((Et+ht)/2),or=X[2*Pt],Qt=X[2*Pt+1];dt(or,Qt,ae,re)<=we&&Ne.push(W[Pt]);const Wt=(xt+1)%2;(xt===0?ae-ie<=or:re-ie<=Qt)&&(Ie.push(Et),Ie.push(Pt-1),Ie.push(Wt)),(xt===0?ae+ie>=or:re+ie>=Qt)&&(Ie.push(Pt+1),Ie.push(ht),Ie.push(Wt))}return Ne}(this.ids,this.coords,k,M,U,this.nodeSize)}}const Ot={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:G=>G},Z=Math.fround||(ne=new Float32Array(1),G=>(ne[0]=+G,ne[0]));var ne;class ye{constructor(k){this.options=Ye(Object.create(Ot),k),this.trees=new Array(this.options.maxZoom+1)}load(k){const{log:M,minZoom:U,maxZoom:W,nodeSize:X}=this.options;M&&console.time("total time");const ae=`prepare ${k.length} points`;M&&console.time(ae),this.points=k;let re=[];for(let ie=0;ie<k.length;ie++)k[ie].geometry&&re.push(Re(k[ie],ie));this.trees[W+1]=new Rt(re,vt,_t,X,Float32Array),M&&console.timeEnd(ae);for(let ie=W;ie>=U;ie--){const le=+Date.now();re=this._cluster(re,ie),this.trees[ie]=new Rt(re,vt,_t,X,Float32Array),M&&console.log("z%d: %d clusters in %dms",ie,re.length,+Date.now()-le)}return M&&console.timeEnd("total time"),this}getClusters(k,M){let U=((k[0]+180)%360+360)%360-180;const W=Math.max(-90,Math.min(90,k[1]));let X=k[2]===180?180:((k[2]+180)%360+360)%360-180;const ae=Math.max(-90,Math.min(90,k[3]));if(k[2]-k[0]>=360)U=-180,X=180;else if(U>X){const Ie=this.getClusters([U,W,180,ae],M),Ne=this.getClusters([-180,W,X,ae],M);return Ie.concat(Ne)}const re=this.trees[this._limitZoom(M)],ie=re.range(qe(U),Qe(ae),qe(X),Qe(W)),le=[];for(const Ie of ie){const Ne=re.points[Ie];le.push(Ne.numPoints?Ue(Ne):this.points[Ne.index])}return le}getChildren(k){const M=this._getOriginId(k),U=this._getOriginZoom(k),W="No cluster with the specified id.",X=this.trees[U];if(!X)throw new Error(W);const ae=X.points[M];if(!ae)throw new Error(W);const re=this.options.radius/(this.options.extent*Math.pow(2,U-1)),ie=X.within(ae.x,ae.y,re),le=[];for(const Ie of ie){const Ne=X.points[Ie];Ne.parentId===k&&le.push(Ne.numPoints?Ue(Ne):this.points[Ne.index])}if(le.length===0)throw new Error(W);return le}getLeaves(k,M,U){const W=[];return this._appendLeaves(W,k,M=M||10,U=U||0,0),W}getTile(k,M,U){const W=this.trees[this._limitZoom(k)],X=Math.pow(2,k),{extent:ae,radius:re}=this.options,ie=re/ae,le=(U-ie)/X,Ie=(U+1+ie)/X,Ne={features:[]};return this._addTileFeatures(W.range((M-ie)/X,le,(M+1+ie)/X,Ie),W.points,M,U,X,Ne),M===0&&this._addTileFeatures(W.range(1-ie/X,le,1,Ie),W.points,X,U,X,Ne),M===X-1&&this._addTileFeatures(W.range(0,le,ie/X,Ie),W.points,-1,U,X,Ne),Ne.features.length?Ne:null}getClusterExpansionZoom(k){let M=this._getOriginZoom(k)-1;for(;M<=this.options.maxZoom;){const U=this.getChildren(k);if(M++,U.length!==1)break;k=U[0].properties.cluster_id}return M}_appendLeaves(k,M,U,W,X){const ae=this.getChildren(M);for(const re of ae){const ie=re.properties;if(ie&&ie.cluster?X+ie.point_count<=W?X+=ie.point_count:X=this._appendLeaves(k,ie.cluster_id,U,W,X):X<W?X++:k.push(re),k.length===U)break}return X}_addTileFeatures(k,M,U,W,X,ae){for(const re of k){const ie=M[re],le=ie.numPoints;let Ie,Ne,we;if(le)Ie=Je(ie),Ne=ie.x,we=ie.y;else{const Et=this.points[ie.index];Ie=Et.properties,Ne=qe(Et.geometry.coordinates[0]),we=Qe(Et.geometry.coordinates[1])}const xt={type:1,geometry:[[Math.round(this.options.extent*(Ne*X-U)),Math.round(this.options.extent*(we*X-W))]],tags:Ie};let ht;le?ht=ie.id:this.options.generateId?ht=ie.index:this.points[ie.index].id&&(ht=this.points[ie.index].id),ht!==void 0&&(xt.id=ht),ae.features.push(xt)}}_limitZoom(k){return Math.max(this.options.minZoom,Math.min(+k,this.options.maxZoom+1))}_cluster(k,M){const U=[],{radius:W,extent:X,reduce:ae,minPoints:re}=this.options,ie=W/(X*Math.pow(2,M));for(let le=0;le<k.length;le++){const Ie=k[le];if(Ie.zoom<=M)continue;Ie.zoom=M;const Ne=this.trees[M+1],we=Ne.within(Ie.x,Ie.y,ie),xt=Ie.numPoints||1;let ht=xt;for(const Et of we){const Pt=Ne.points[Et];Pt.zoom>M&&(ht+=Pt.numPoints||1)}if(ht>xt&&ht>=re){let Et=Ie.x*xt,Pt=Ie.y*xt,or=ae&&xt>1?this._map(Ie,!0):null;const Qt=(le<<5)+(M+1)+this.points.length;for(const Wt of we){const Gt=Ne.points[Wt];if(Gt.zoom<=M)continue;Gt.zoom=M;const Vt=Gt.numPoints||1;Et+=Gt.x*Vt,Pt+=Gt.y*Vt,Gt.parentId=Qt,ae&&(or||(or=this._map(Ie,!0)),ae(or,this._map(Gt)))}Ie.parentId=Qt,U.push(Le(Et/ht,Pt/ht,Qt,ht,or))}else if(U.push(Ie),ht>1)for(const Et of we){const Pt=Ne.points[Et];Pt.zoom<=M||(Pt.zoom=M,U.push(Pt))}}return U}_getOriginId(k){return k-this.points.length>>5}_getOriginZoom(k){return(k-this.points.length)%32}_map(k,M){if(k.numPoints)return M?Ye({},k.properties):k.properties;const U=this.points[k.index].properties,W=this.options.map(U);return M&&W===U?Ye({},W):W}}function Le(G,k,M,U,W){return{x:Z(G),y:Z(k),zoom:1/0,id:M,parentId:-1,numPoints:U,properties:W}}function Re(G,k){const[M,U]=G.geometry.coordinates;return{x:Z(qe(M)),y:Z(Qe(U)),zoom:1/0,index:k,parentId:-1}}function Ue(G){return{type:"Feature",id:G.id,properties:Je(G),geometry:{type:"Point",coordinates:[(k=G.x,360*(k-.5)),Ze(G.y)]}};var k}function Je(G){const k=G.numPoints,M=k>=1e4?`${Math.round(k/1e3)}k`:k>=1e3?Math.round(k/100)/10+"k":k;return Ye(Ye({},G.properties),{cluster:!0,cluster_id:G.id,point_count:k,point_count_abbreviated:M})}function qe(G){return G/360+.5}function Qe(G){const k=Math.sin(G*Math.PI/180),M=.5-.25*Math.log((1+k)/(1-k))/Math.PI;return M<0?0:M>1?1:M}function Ze(G){const k=(180-360*G)*Math.PI/180;return 360*Math.atan(Math.exp(k))/Math.PI-90}function Ye(G,k){for(const M in k)G[M]=k[M];return G}function vt(G){return G.x}function _t(G){return G.y}function At(G,k,M,U){for(var W,X=U,ae=M-k>>1,re=M-k,ie=G[k],le=G[k+1],Ie=G[M],Ne=G[M+1],we=k+3;we<M;we+=3){var xt=jt(G[we],G[we+1],ie,le,Ie,Ne);if(xt>X)W=we,X=xt;else if(xt===X){var ht=Math.abs(we-ae);ht<re&&(W=we,re=ht)}}X>U&&(W-k>3&&At(G,k,W,U),G[W+2]=X,M-W>3&&At(G,W,M,U))}function jt(G,k,M,U,W,X){var ae=W-M,re=X-U;if(ae!==0||re!==0){var ie=((G-M)*ae+(k-U)*re)/(ae*ae+re*re);ie>1?(M=W,U=X):ie>0&&(M+=ae*ie,U+=re*ie)}return(ae=G-M)*ae+(re=k-U)*re}function ve(G,k,M,U){var W={id:G===void 0?null:G,type:k,geometry:M,tags:U,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(X){var ae=X.geometry,re=X.type;if(re==="Point"||re==="MultiPoint"||re==="LineString")$e(X,ae);else if(re==="Polygon"||re==="MultiLineString")for(var ie=0;ie<ae.length;ie++)$e(X,ae[ie]);else if(re==="MultiPolygon")for(ie=0;ie<ae.length;ie++)for(var le=0;le<ae[ie].length;le++)$e(X,ae[ie][le])}(W),W}function $e(G,k){for(var M=0;M<k.length;M+=3)G.minX=Math.min(G.minX,k[M]),G.minY=Math.min(G.minY,k[M+1]),G.maxX=Math.max(G.maxX,k[M]),G.maxY=Math.max(G.maxY,k[M+1])}function ur(G,k,M,U){if(k.geometry){var W=k.geometry.coordinates,X=k.geometry.type,ae=Math.pow(M.tolerance/((1<<M.maxZoom)*M.extent),2),re=[],ie=k.id;if(M.promoteId?ie=k.properties[M.promoteId]:M.generateId&&(ie=U||0),X==="Point")Hr(W,re);else if(X==="MultiPoint")for(var le=0;le<W.length;le++)Hr(W[le],re);else if(X==="LineString")ir(W,re,ae,!1);else if(X==="MultiLineString"){if(M.lineMetrics){for(le=0;le<W.length;le++)ir(W[le],re=[],ae,!1),G.push(ve(ie,"LineString",re,k.properties));return}Sn(W,re,ae,!1)}else if(X==="Polygon")Sn(W,re,ae,!0);else{if(X!=="MultiPolygon"){if(X==="GeometryCollection"){for(le=0;le<k.geometry.geometries.length;le++)ur(G,{id:ie,geometry:k.geometry.geometries[le],properties:k.properties},M,U);return}throw new Error("Input data is not a valid GeoJSON object.")}for(le=0;le<W.length;le++){var Ie=[];Sn(W[le],Ie,ae,!0),re.push(Ie)}}G.push(ve(ie,X,re,k.properties))}}function Hr(G,k){k.push(Gr(G[0])),k.push(vi(G[1])),k.push(0)}function ir(G,k,M,U){for(var W,X,ae=0,re=0;re<G.length;re++){var ie=Gr(G[re][0]),le=vi(G[re][1]);k.push(ie),k.push(le),k.push(0),re>0&&(ae+=U?(W*le-ie*X)/2:Math.sqrt(Math.pow(ie-W,2)+Math.pow(le-X,2))),W=ie,X=le}var Ie=k.length-3;k[2]=1,At(k,0,Ie,M),k[Ie+2]=1,k.size=Math.abs(ae),k.start=0,k.end=k.size}function Sn(G,k,M,U){for(var W=0;W<G.length;W++){var X=[];ir(G[W],X,M,U),k.push(X)}}function Gr(G){return G/360+.5}function vi(G){var k=Math.sin(G*Math.PI/180),M=.5-.25*Math.log((1+k)/(1-k))/Math.PI;return M<0?0:M>1?1:M}function Xt(G,k,M,U,W,X,ae,re){if(U/=k,X>=(M/=k)&&ae<U)return G;if(ae<M||X>=U)return null;for(var ie=[],le=0;le<G.length;le++){var Ie=G[le],Ne=Ie.geometry,we=Ie.type,xt=W===0?Ie.minX:Ie.minY,ht=W===0?Ie.maxX:Ie.maxY;if(xt>=M&&ht<U)ie.push(Ie);else if(!(ht<M||xt>=U)){var Et=[];if(we==="Point"||we==="MultiPoint")Ke(Ne,Et,M,U,W);else if(we==="LineString")$t(Ne,Et,M,U,W,!1,re.lineMetrics);else if(we==="MultiLineString")Tn(Ne,Et,M,U,W,!1);else if(we==="Polygon")Tn(Ne,Et,M,U,W,!0);else if(we==="MultiPolygon")for(var Pt=0;Pt<Ne.length;Pt++){var or=[];Tn(Ne[Pt],or,M,U,W,!0),or.length&&Et.push(or)}if(Et.length){if(re.lineMetrics&&we==="LineString"){for(Pt=0;Pt<Et.length;Pt++)ie.push(ve(Ie.id,we,Et[Pt],Ie.tags));continue}we!=="LineString"&&we!=="MultiLineString"||(Et.length===1?(we="LineString",Et=Et[0]):we="MultiLineString"),we!=="Point"&&we!=="MultiPoint"||(we=Et.length===3?"Point":"MultiPoint"),ie.push(ve(Ie.id,we,Et,Ie.tags))}}}return ie.length?ie:null}function Ke(G,k,M,U,W){for(var X=0;X<G.length;X+=3){var ae=G[X+W];ae>=M&&ae<=U&&(k.push(G[X]),k.push(G[X+1]),k.push(G[X+2]))}}function $t(G,k,M,U,W,X,ae){for(var re,ie,le=qt(G),Ie=W===0?Ht:Xi,Ne=G.start,we=0;we<G.length-3;we+=3){var xt=G[we],ht=G[we+1],Et=G[we+2],Pt=G[we+3],or=G[we+4],Qt=W===0?xt:ht,Wt=W===0?Pt:or,Gt=!1;ae&&(re=Math.sqrt(Math.pow(xt-Pt,2)+Math.pow(ht-or,2))),Qt<M?Wt>M&&(ie=Ie(le,xt,ht,Pt,or,M),ae&&(le.start=Ne+re*ie)):Qt>U?Wt<U&&(ie=Ie(le,xt,ht,Pt,or,U),ae&&(le.start=Ne+re*ie)):oi(le,xt,ht,Et),Wt<M&&Qt>=M&&(ie=Ie(le,xt,ht,Pt,or,M),Gt=!0),Wt>U&&Qt<=U&&(ie=Ie(le,xt,ht,Pt,or,U),Gt=!0),!X&&Gt&&(ae&&(le.end=Ne+re*ie),k.push(le),le=qt(G)),ae&&(Ne+=re)}var Vt=G.length-3;xt=G[Vt],ht=G[Vt+1],Et=G[Vt+2],(Qt=W===0?xt:ht)>=M&&Qt<=U&&oi(le,xt,ht,Et),Vt=le.length-3,X&&Vt>=3&&(le[Vt]!==le[0]||le[Vt+1]!==le[1])&&oi(le,le[0],le[1],le[2]),le.length&&k.push(le)}function qt(G){var k=[];return k.size=G.size,k.start=G.start,k.end=G.end,k}function Tn(G,k,M,U,W,X){for(var ae=0;ae<G.length;ae++)$t(G[ae],k,M,U,W,X,!1)}function oi(G,k,M,U){G.push(k),G.push(M),G.push(U)}function Ht(G,k,M,U,W,X){var ae=(X-k)/(U-k);return G.push(X),G.push(M+(W-M)*ae),G.push(1),ae}function Xi(G,k,M,U,W,X){var ae=(X-M)/(W-M);return G.push(k+(U-k)*ae),G.push(X),G.push(1),ae}function si(G,k){for(var M=[],U=0;U<G.length;U++){var W,X=G[U],ae=X.type;if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")W=Di(X.geometry,k);else if(ae==="MultiLineString"||ae==="Polygon"){W=[];for(var re=0;re<X.geometry.length;re++)W.push(Di(X.geometry[re],k))}else if(ae==="MultiPolygon")for(W=[],re=0;re<X.geometry.length;re++){for(var ie=[],le=0;le<X.geometry[re].length;le++)ie.push(Di(X.geometry[re][le],k));W.push(ie)}M.push(ve(X.id,ae,W,X.tags))}return M}function Di(G,k){var M=[];M.size=G.size,G.start!==void 0&&(M.start=G.start,M.end=G.end);for(var U=0;U<G.length;U+=3)M.push(G[U]+k,G[U+1],G[U+2]);return M}function Kr(G,k){if(G.transformed)return G;var M,U,W,X=1<<G.z,ae=G.x,re=G.y;for(M=0;M<G.features.length;M++){var ie=G.features[M],le=ie.geometry,Ie=ie.type;if(ie.geometry=[],Ie===1)for(U=0;U<le.length;U+=2)ie.geometry.push(Sr(le[U],le[U+1],k,X,ae,re));else for(U=0;U<le.length;U++){var Ne=[];for(W=0;W<le[U].length;W+=2)Ne.push(Sr(le[U][W],le[U][W+1],k,X,ae,re));ie.geometry.push(Ne)}}return G.transformed=!0,G}function Sr(G,k,M,U,W,X){return[Math.round(M*(G*U-W)),Math.round(M*(k*U-X))]}function Yn(G,k,M,U,W){for(var X=k===W.maxZoom?0:W.tolerance/((1<<k)*W.extent),ae={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:M,y:U,z:k,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},re=0;re<G.length;re++){ae.numFeatures++,Ji(ae,G[re],X,W);var ie=G[re].minX,le=G[re].minY,Ie=G[re].maxX,Ne=G[re].maxY;ie<ae.minX&&(ae.minX=ie),le<ae.minY&&(ae.minY=le),Ie>ae.maxX&&(ae.maxX=Ie),Ne>ae.maxY&&(ae.maxY=Ne)}return ae}function Ji(G,k,M,U){var W=k.geometry,X=k.type,ae=[];if(X==="Point"||X==="MultiPoint")for(var re=0;re<W.length;re+=3)ae.push(W[re]),ae.push(W[re+1]),G.numPoints++,G.numSimplified++;else if(X==="LineString")rn(ae,W,G,M,!1,!1);else if(X==="MultiLineString"||X==="Polygon")for(re=0;re<W.length;re++)rn(ae,W[re],G,M,X==="Polygon",re===0);else if(X==="MultiPolygon")for(var ie=0;ie<W.length;ie++){var le=W[ie];for(re=0;re<le.length;re++)rn(ae,le[re],G,M,!0,re===0)}if(ae.length){var Ie=k.tags||null;if(X==="LineString"&&U.lineMetrics){for(var Ne in Ie={},k.tags)Ie[Ne]=k.tags[Ne];Ie.mapbox_clip_start=W.start/W.size,Ie.mapbox_clip_end=W.end/W.size}var we={geometry:ae,type:X==="Polygon"||X==="MultiPolygon"?3:X==="LineString"||X==="MultiLineString"?2:1,tags:Ie};k.id!==null&&(we.id=k.id),G.features.push(we)}}function rn(G,k,M,U,W,X){var ae=U*U;if(U>0&&k.size<(W?ae:U))M.numPoints+=k.length/3;else{for(var re=[],ie=0;ie<k.length;ie+=3)(U===0||k[ie+2]>ae)&&(M.numSimplified++,re.push(k[ie]),re.push(k[ie+1])),M.numPoints++;W&&function(le,Ie){for(var Ne=0,we=0,xt=le.length,ht=xt-2;we<xt;ht=we,we+=2)Ne+=(le[we]-le[ht])*(le[we+1]+le[ht+1]);if(Ne>0===Ie)for(we=0,xt=le.length;we<xt/2;we+=2){var Et=le[we],Pt=le[we+1];le[we]=le[xt-2-we],le[we+1]=le[xt-1-we],le[xt-2-we]=Et,le[xt-1-we]=Pt}}(re,X),G.push(re)}}function ai(G,k){var M=(k=this.options=function(W,X){for(var ae in X)W[ae]=X[ae];return W}(Object.create(this.options),k)).debug;if(M&&console.time("preprocess data"),k.maxZoom<0||k.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(k.promoteId&&k.generateId)throw new Error("promoteId and generateId cannot be used together.");var U=function(W,X){var ae=[];if(W.type==="FeatureCollection")for(var re=0;re<W.features.length;re++)ur(ae,W.features[re],X,re);else ur(ae,W.type==="Feature"?W:{geometry:W},X);return ae}(G,k);this.tiles={},this.tileCoords=[],M&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",k.indexMaxZoom,k.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),U=function(W,X){var ae=X.buffer/X.extent,re=W,ie=Xt(W,1,-1-ae,ae,0,-1,2,X),le=Xt(W,1,1-ae,2+ae,0,-1,2,X);return(ie||le)&&(re=Xt(W,1,-ae,1+ae,0,-1,2,X)||[],ie&&(re=si(ie,1).concat(re)),le&&(re=re.concat(si(le,-1)))),re}(U,k),U.length&&this.splitTile(U,0,0,0),M&&(U.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function li(G,k,M){return 32*((1<<G)*M+k)+G}function as(G,k){const M=G.tileID.canonical;if(!this._geoJSONIndex)return k(null,null);const U=this._geoJSONIndex.getTile(M.z,M.x,M.y);if(!U)return k(null,null);const W=new He(U.features);let X=Ar(W);X.byteOffset===0&&X.byteLength===X.buffer.byteLength||(X=new Uint8Array(X)),k(null,{vectorTile:W,rawData:X.buffer})}ai.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ai.prototype.splitTile=function(G,k,M,U,W,X,ae){for(var re=[G,k,M,U],ie=this.options,le=ie.debug;re.length;){U=re.pop(),M=re.pop(),k=re.pop(),G=re.pop();var Ie=1<<k,Ne=li(k,M,U),we=this.tiles[Ne];if(!we&&(le>1&&console.time("creation"),we=this.tiles[Ne]=Yn(G,k,M,U,ie),this.tileCoords.push({z:k,x:M,y:U}),le)){le>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",k,M,U,we.numFeatures,we.numPoints,we.numSimplified),console.timeEnd("creation"));var xt="z"+k;this.stats[xt]=(this.stats[xt]||0)+1,this.total++}if(we.source=G,W){if(k===ie.maxZoom||k===W)continue;var ht=1<<W-k;if(M!==Math.floor(X/ht)||U!==Math.floor(ae/ht))continue}else if(k===ie.indexMaxZoom||we.numPoints<=ie.indexMaxPoints)continue;if(we.source=null,G.length!==0){le>1&&console.time("clipping");var Et,Pt,or,Qt,Wt,Gt,Vt=.5*ie.buffer/ie.extent,Zr=.5-Vt,Vr=.5+Vt,an=1+Vt;Et=Pt=or=Qt=null,Wt=Xt(G,Ie,M-Vt,M+Vr,0,we.minX,we.maxX,ie),Gt=Xt(G,Ie,M+Zr,M+an,0,we.minX,we.maxX,ie),G=null,Wt&&(Et=Xt(Wt,Ie,U-Vt,U+Vr,1,we.minY,we.maxY,ie),Pt=Xt(Wt,Ie,U+Zr,U+an,1,we.minY,we.maxY,ie),Wt=null),Gt&&(or=Xt(Gt,Ie,U-Vt,U+Vr,1,we.minY,we.maxY,ie),Qt=Xt(Gt,Ie,U+Zr,U+an,1,we.minY,we.maxY,ie),Gt=null),le>1&&console.timeEnd("clipping"),re.push(Et||[],k+1,2*M,2*U),re.push(Pt||[],k+1,2*M,2*U+1),re.push(or||[],k+1,2*M+1,2*U),re.push(Qt||[],k+1,2*M+1,2*U+1)}}},ai.prototype.getTile=function(G,k,M){var U=this.options,W=U.extent,X=U.debug;if(G<0||G>24)return null;var ae=1<<G,re=li(G,k=(k%ae+ae)%ae,M);if(this.tiles[re])return Kr(this.tiles[re],W);X>1&&console.log("drilling down to z%d-%d-%d",G,k,M);for(var ie,le=G,Ie=k,Ne=M;!ie&&le>0;)le--,Ie=Math.floor(Ie/2),Ne=Math.floor(Ne/2),ie=this.tiles[li(le,Ie,Ne)];return ie&&ie.source?(X>1&&console.log("found parent tile z%d-%d-%d",le,Ie,Ne),X>1&&console.time("drilling down"),this.splitTile(ie.source,le,Ie,Ne,G,k,M),X>1&&console.timeEnd("drilling down"),this.tiles[re]?Kr(this.tiles[re],W):null):null};class Eo extends de{constructor(k,M,U,W){super(k,M,U,as),W&&(this.loadGeoJSON=W)}loadData(k,M){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=M,this._pendingLoadDataParams=k,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const k=this._pendingCallback,M=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const U=!!(M&&M.request&&M.request.collectResourceTiming)&&new l.RequestPerformance(M.request);this.loadGeoJSON(M,(W,X)=>{if(W||!X)return k(W);if(typeof X!="object")return k(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`));{se(X,!0);try{if(M.filter){const re=l.createExpression(M.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(re.result==="error")throw new Error(re.value.map(le=>`${le.key}: ${le.message}`).join(", "));const ie=X.features.filter(le=>re.value.evaluate({zoom:0},le));X={type:"FeatureCollection",features:ie}}this._geoJSONIndex=M.cluster?new ye(function({superclusterOptions:re,clusterProperties:ie}){if(!ie||!re)return re;const le={},Ie={},Ne={accumulated:null,zoom:0},we={properties:null},xt=Object.keys(ie);for(const ht of xt){const[Et,Pt]=ie[ht],or=l.createExpression(Pt),Qt=l.createExpression(typeof Et=="string"?[Et,["accumulated"],["get",ht]]:Et);le[ht]=or.value,Ie[ht]=Qt.value}return re.map=ht=>{we.properties=ht;const Et={};for(const Pt of xt)Et[Pt]=le[Pt].evaluate(Ne,we);return Et},re.reduce=(ht,Et)=>{we.properties=Et;for(const Pt of xt)Ne.accumulated=ht[Pt],ht[Pt]=Ie[Pt].evaluate(Ne,we)},re}(M)).load(X.features):function(re,ie){return new ai(re,ie)}(X,M.geojsonVtOptions)}catch(re){return k(re)}this.loaded={};const ae={};if(U){const re=U.finish();re&&(ae.resourceTiming={},ae.resourceTiming[M.source]=JSON.parse(JSON.stringify(re)))}k(null,ae)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(k,M){const U=this.loaded;return U&&U[k.uid]?super.reloadTile(k,M):this.loadTile(k,M)}loadGeoJSON(k,M){if(k.request)l.getJSON(k.request,M);else{if(typeof k.data!="string")return M(new Error(`Input data given to '${k.source}' is not a valid GeoJSON object.`));try{return M(null,JSON.parse(k.data))}catch{return M(new Error(`Input data given to '${k.source}' is not a valid GeoJSON object.`))}}}removeSource(k,M){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),M()}getClusterExpansionZoom(k,M){try{M(null,this._geoJSONIndex.getClusterExpansionZoom(k.clusterId))}catch(U){M(U)}}getClusterChildren(k,M){try{M(null,this._geoJSONIndex.getChildren(k.clusterId))}catch(U){M(U)}}getClusterLeaves(k,M){try{M(null,this._geoJSONIndex.getLeaves(k.clusterId,k.limit,k.offset))}catch(U){M(U)}}}class So{constructor(k){this.self=k,this.actor=new l.Actor(k,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:de,geojson:Eo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(M,U)=>{if(this.workerSourceTypes[M])throw new Error(`Worker source with name "${M}" already registered.`);this.workerSourceTypes[M]=U},this.self.registerRTLTextPlugin=M=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=M.applyArabicShaping,l.plugin.processBidirectionalText=M.processBidirectionalText,l.plugin.processStyledBidirectionalText=M.processStyledBidirectionalText}}setReferrer(k,M){this.referrer=M}setImages(k,M,U){this.availableImages[k]=M;for(const W in this.workerSources[k]){const X=this.workerSources[k][W];for(const ae in X)X[ae].availableImages=M}U()}setLayers(k,M,U){this.getLayerIndex(k).replace(M),U()}updateLayers(k,M,U){this.getLayerIndex(k).update(M.layers,M.removedIds),U()}loadTile(k,M,U){this.getWorkerSource(k,M.type,M.source).loadTile(M,U)}loadDEMTile(k,M,U){this.getDEMWorkerSource(k,M.source).loadTile(M,U)}reloadTile(k,M,U){this.getWorkerSource(k,M.type,M.source).reloadTile(M,U)}abortTile(k,M,U){this.getWorkerSource(k,M.type,M.source).abortTile(M,U)}removeTile(k,M,U){this.getWorkerSource(k,M.type,M.source).removeTile(M,U)}removeDEMTile(k,M){this.getDEMWorkerSource(k,M.source).removeTile(M)}removeSource(k,M,U){if(!this.workerSources[k]||!this.workerSources[k][M.type]||!this.workerSources[k][M.type][M.source])return;const W=this.workerSources[k][M.type][M.source];delete this.workerSources[k][M.type][M.source],W.removeSource!==void 0?W.removeSource(M,U):U()}loadWorkerSource(k,M,U){try{this.self.importScripts(M.url),U()}catch(W){U(W.toString())}}syncRTLPluginState(k,M,U){try{l.plugin.setState(M);const W=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&W!=null){this.self.importScripts(W);const X=l.plugin.isParsed();U(X?void 0:new Error(`RTL Text Plugin failed to import scripts from ${W}`),X)}}catch(W){U(W.toString())}}getAvailableImages(k){let M=this.availableImages[k];return M||(M=[]),M}getLayerIndex(k){let M=this.layerIndexes[k];return M||(M=this.layerIndexes[k]=new A),M}getWorkerSource(k,M,U){if(this.workerSources[k]||(this.workerSources[k]={}),this.workerSources[k][M]||(this.workerSources[k][M]={}),!this.workerSources[k][M][U]){const W={send:(X,ae,re)=>{this.actor.send(X,ae,re,k)}};this.workerSources[k][M][U]=new this.workerSourceTypes[M](W,this.getLayerIndex(k),this.getAvailableImages(k))}return this.workerSources[k][M][U]}getDEMWorkerSource(k,M){return this.demWorkerSources[k]||(this.demWorkerSources[k]={}),this.demWorkerSources[k][M]||(this.demWorkerSources[k][M]=new te),this.demWorkerSources[k][M]}enforceCacheSizeLimit(k,M){l.enforceCacheSizeLimit(M)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new So(self)),So}),v(["./shared"],function(l){var T=C;function C(p){return!function(r){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var h,f,y=new Blob([""],{type:"text/javascript"}),w=URL.createObjectURL(y);try{f=new Worker(w),h=!0}catch{h=!1}return f&&f.terminate(),URL.revokeObjectURL(w),h}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var h=document.createElement("canvas");h.width=h.height=1;var f=h.getContext("2d");if(!f)return!1;var y=f.getImageData(0,0,1,1);return y&&y.width===h.width}()?(A[a=r&&r.failIfMajorPerformanceCaveat]===void 0&&(A[a]=function(h){var f,y=function(w){var S=document.createElement("canvas"),I=Object.create(C.webGLContextAttributes);return I.failIfMajorPerformanceCaveat=w,S.getContext("webgl",I)||S.getContext("experimental-webgl",I)}(h);if(!y)return!1;try{f=y.createShader(y.VERTEX_SHADER)}catch{return!1}return!(!f||y.isContextLost())&&(y.shaderSource(f,"void main() {}"),y.compileShader(f),y.getShaderParameter(f,y.COMPILE_STATUS)===!0)}(a)),A[a]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var a}(p)}var A={};function F(p,r){if(Array.isArray(p)){if(!Array.isArray(r)||p.length!==r.length)return!1;for(let a=0;a<p.length;a++)if(!F(p[a],r[a]))return!1;return!0}if(typeof p=="object"&&p!==null&&r!==null){if(typeof r!="object"||Object.keys(p).length!==Object.keys(r).length)return!1;for(const a in p)if(!F(p[a],r[a]))return!1;return!0}return p===r}C.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class O{static testProp(r){if(!O.docStyle)return r[0];for(let a=0;a<r.length;a++)if(r[a]in O.docStyle)return r[a];return r[0]}static create(r,a,h){const f=window.document.createElement(r);return a!==void 0&&(f.className=a),h&&h.appendChild(f),f}static createNS(r,a){return window.document.createElementNS(r,a)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(r,a){r.style[O.transformProp]=a}static addEventListener(r,a,h,f={}){r.addEventListener(a,h,"passive"in f?f:f.capture)}static removeEventListener(r,a,h,f={}){r.removeEventListener(a,h,"passive"in f?f:f.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",O.suppressClickInternal,!0)},0)}static mousePos(r,a){const h=r.getBoundingClientRect();return new l.pointGeometry(a.clientX-h.left-r.clientLeft,a.clientY-h.top-r.clientTop)}static touchPos(r,a){const h=r.getBoundingClientRect(),f=[];for(let y=0;y<a.length;y++)f.push(new l.pointGeometry(a[y].clientX-h.left-r.clientLeft,a[y].clientY-h.top-r.clientTop));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}O.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);class K{constructor(r){this._transformRequestFn=r}transformRequest(r,a){return this._transformRequestFn&&this._transformRequestFn(r,a)||{url:r}}normalizeSpriteURL(r,a,h){const f=function(y){const w=y.match(oe);if(!w)throw new Error(`Unable to parse URL "${y}"`);return{protocol:w[1],authority:w[2],path:w[3]||"/",params:w[4]?w[4].split("&"):[]}}(r);return f.path+=`${a}${h}`,function(y){const w=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${w}`}(f)}setTransformRequest(r){this._transformRequestFn=r}}const oe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function de(p){var r=new l.ARRAY_TYPE(3);return r[0]=p[0],r[1]=p[1],r[2]=p[2],r}var te,se=function(p,r,a){return p[0]=r[0]-a[0],p[1]=r[1]-a[1],p[2]=r[2]-a[2],p};te=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(te[0]=0,te[1]=0,te[2]=0);var me=function(p){var r=p[0],a=p[1];return r*r+a*a};(function(){var p=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(p[0]=0,p[1]=0)})();class _e{constructor(r,a,h,f){this.context=r,this.format=h,this.texture=r.gl.createTexture(),this.update(a,f)}update(r,a,h){const{width:f,height:y}=r,w=!(this.size&&this.size[0]===f&&this.size[1]===y||h),{context:S}=this,{gl:I}=S;if(this.useMipmap=Boolean(a&&a.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!a||a.premultiply!==!1)),w)this.size=[f,y],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,r):I.texImage2D(I.TEXTURE_2D,0,this.format,f,y,0,this.format,I.UNSIGNED_BYTE,r.data);else{const{x:D,y:R}=h||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?I.texSubImage2D(I.TEXTURE_2D,0,D,R,I.RGBA,I.UNSIGNED_BYTE,r):I.texSubImage2D(I.TEXTURE_2D,0,D,R,f,y,I.RGBA,I.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(r,a,h){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),h!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=y.LINEAR),r!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,h||r),this.filter=r),a!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function Ae(p){const{userImage:r}=p;return!!(r&&r.render&&r.render())&&(p.data.replace(new Uint8Array(r.data.buffer)),!0)}class Me extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:a,callback:h}of this.requestors)this._notify(a,h);this.requestors=[]}}getImage(r){return this.images[r]}addImage(r,a){this._validate(r,a)&&(this.images[r]=a)}_validate(r,a){let h=!0;return this._validateStretch(a.stretchX,a.data&&a.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchX" value`))),h=!1),this._validateStretch(a.stretchY,a.data&&a.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchY" value`))),h=!1),this._validateContent(a.content,a)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "content" value`))),h=!1),h}_validateStretch(r,a){if(!r)return!0;let h=0;for(const f of r){if(f[0]<h||f[1]<f[0]||a<f[1])return!1;h=f[1]}return!0}_validateContent(r,a){return!(r&&(r.length!==4||r[0]<0||a.data.width<r[0]||r[1]<0||a.data.height<r[1]||r[2]<0||a.data.width<r[2]||r[3]<0||a.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))}updateImage(r,a){a.version=this.images[r].version+1,this.images[r]=a,this.updatedImages[r]=!0}removeImage(r){const a=this.images[r];delete this.images[r],delete this.patterns[r],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,a){let h=!0;if(!this.isLoaded())for(const f of r)this.images[f]||(h=!1);this.isLoaded()||h?this._notify(r,a):this.requestors.push({ids:r,callback:a})}_notify(r,a){const h={};for(const f of r){this.images[f]||this.fire(new l.Event("styleimagemissing",{id:f}));const y=this.images[f];y?h[f]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,hasRenderCallback:Boolean(y.userImage&&y.userImage.render)}:l.warnOnce(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}a(null,h)}getPixelSize(){const{width:r,height:a}=this.atlasImage;return{width:r,height:a}}getPattern(r){const a=this.patterns[r],h=this.getImage(r);if(!h)return null;if(a&&a.position.version===h.version)return a.position;if(a)a.position.version=h.version;else{const f={w:h.data.width+2,h:h.data.height+2,x:0,y:0},y=new l.ImagePosition(f,h);this.patterns[r]={bin:f,position:y}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const a=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _e(r,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const y in this.patterns)r.push(this.patterns[y].bin);const{w:a,h}=l.potpack(r),f=this.atlasImage;f.resize({width:a||1,height:h||1});for(const y in this.patterns){const{bin:w}=this.patterns[y],S=w.x+1,I=w.y+1,D=this.images[y].data,R=D.width,N=D.height;l.RGBAImage.copy(D,f,{x:0,y:0},{x:S,y:I},{width:R,height:N}),l.RGBAImage.copy(D,f,{x:0,y:N-1},{x:S,y:I-1},{width:R,height:1}),l.RGBAImage.copy(D,f,{x:0,y:0},{x:S,y:I+N},{width:R,height:1}),l.RGBAImage.copy(D,f,{x:R-1,y:0},{x:S-1,y:I},{width:1,height:N}),l.RGBAImage.copy(D,f,{x:0,y:0},{x:S+R,y:I},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const a of r){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const h=this.images[a];Ae(h)&&this.updateImage(a,h)}}}const He=1e20;function De(p,r,a,h,f,y,w,S,I){for(let D=r;D<r+h;D++)Se(p,a*y+D,y,f,w,S,I);for(let D=a;D<a+f;D++)Se(p,D*y+r,1,h,w,S,I)}function Se(p,r,a,h,f,y,w){y[0]=0,w[0]=-He,w[1]=He,f[0]=p[r];for(let S=1,I=0,D=0;S<h;S++){f[S]=p[r+S*a];const R=S*S;do{const N=y[I];D=(f[S]-f[N]+R-N*N)/(S-N)/2}while(D<=w[I]&&--I>-1);I++,y[I]=S,w[I]=D,w[I+1]=He}for(let S=0,I=0;S<h;S++){for(;w[I+1]<S;)I++;const D=y[I],R=S-D;p[r+S*a]=f[D]+R*R}}class rt{constructor(r,a){this.requestManager=r,this.localIdeographFontFamily=a,this.entries={}}setURL(r){this.url=r}getGlyphs(r,a){const h=[];for(const f in r)for(const y of r[f])h.push({stack:f,id:y});l.asyncAll(h,({stack:f,id:y},w)=>{let S=this.entries[f];S||(S=this.entries[f]={glyphs:{},requests:{},ranges:{}});let I=S.glyphs[y];if(I!==void 0)return void w(null,{stack:f,id:y,glyph:I});if(I=this._tinySDF(S,f,y),I)return S.glyphs[y]=I,void w(null,{stack:f,id:y,glyph:I});const D=Math.floor(y/256);if(256*D>65535)return void w(new Error("glyphs > 65535 not supported"));if(S.ranges[D])return void w(null,{stack:f,id:y,glyph:I});let R=S.requests[D];R||(R=S.requests[D]=[],rt.loadGlyphRange(f,D,this.url,this.requestManager,(N,q)=>{if(q){for(const Y in q)this._doesCharSupportLocalGlyph(+Y)||(S.glyphs[+Y]=q[+Y]);S.ranges[D]=!0}for(const Y of R)Y(N,q);delete S.requests[D]})),R.push((N,q)=>{N?w(N):q&&w(null,{stack:f,id:y,glyph:q[y]||null})})},(f,y)=>{if(f)a(f);else if(y){const w={};for(const{stack:S,id:I,glyph:D}of y)(w[S]||(w[S]={}))[I]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};a(null,w)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](r)||l.unicodeBlockLookup["Hangul Syllables"](r)||l.unicodeBlockLookup.Hiragana(r)||l.unicodeBlockLookup.Katakana(r))}_tinySDF(r,a,h){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(h))return;let y=r.tinySDF;if(!y){let S="400";/bold/i.test(a)?S="900":/medium/i.test(a)?S="500":/light/i.test(a)&&(S="200"),y=r.tinySDF=new rt.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:f,fontWeight:S})}const w=y.draw(String.fromCharCode(h));return{id:h,bitmap:new l.AlphaImage({width:w.width||30,height:w.height||30},w.data),metrics:{width:w.glyphWidth||24,height:w.glyphHeight||24,left:w.glyphLeft||0,top:w.glyphTop-27||-8,advance:w.glyphAdvance||24}}}}rt.loadGlyphRange=function(p,r,a,h,f){const y=256*r,w=y+255,S=h.transformRequest(a.replace("{fontstack}",p).replace("{range}",`${y}-${w}`),l.ResourceType.Glyphs);l.getArrayBuffer(S,(I,D)=>{if(I)f(I);else if(D){const R={};for(const N of l.parseGlyphPBF(D))R[N.id]=N;f(null,R)}})},rt.TinySDF=class{constructor({fontSize:p=24,buffer:r=3,radius:a=8,cutoff:h=.25,fontFamily:f="sans-serif",fontWeight:y="normal",fontStyle:w="normal"}={}){this.buffer=r,this.cutoff=h,this.radius=a;const S=this.size=p+4*r,I=this._createCanvas(S),D=this.ctx=I.getContext("2d",{willReadFrequently:!0});D.font=`${w} ${y} ${p}px ${f}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(p){const r=document.createElement("canvas");return r.width=r.height=p,r}draw(p){const{width:r,actualBoundingBoxAscent:a,actualBoundingBoxDescent:h,actualBoundingBoxLeft:f,actualBoundingBoxRight:y}=this.ctx.measureText(p),w=Math.ceil(a),S=Math.min(this.size-this.buffer,Math.ceil(y-f)),I=Math.min(this.size-this.buffer,w+Math.ceil(h)),D=S+2*this.buffer,R=I+2*this.buffer,N=Math.max(D*R,0),q=new Uint8ClampedArray(N),Y={data:q,width:D,height:R,glyphWidth:S,glyphHeight:I,glyphTop:w,glyphLeft:0,glyphAdvance:r};if(S===0||I===0)return Y;const{ctx:H,buffer:J,gridInner:ue,gridOuter:he}=this;H.clearRect(J,J,S,I),H.fillText(p,J,J+w);const ge=H.getImageData(J,J,S,I);he.fill(He,0,N),ue.fill(0,0,N);for(let pe=0;pe<I;pe++)for(let Oe=0;Oe<S;Oe++){const Ee=ge.data[4*(pe*S+Oe)+3]/255;if(Ee===0)continue;const Pe=(pe+J)*D+Oe+J;if(Ee===1)he[Pe]=0,ue[Pe]=He;else{const Ge=.5-Ee;he[Pe]=Ge>0?Ge*Ge:0,ue[Pe]=Ge<0?Ge*Ge:0}}De(he,0,0,D,R,D,this.f,this.v,this.z),De(ue,J,J,S,I,D,this.f,this.v,this.z);for(let pe=0;pe<N;pe++){const Oe=Math.sqrt(he[pe])-Math.sqrt(ue[pe]);q[pe]=Math.round(255-255*(Oe/this.radius+this.cutoff))}return Y}};const ot=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(p,r){return l.sphericalToCartesian(p.expression.evaluate(r))}interpolate(p,r,a){return{x:l.number(p.x,r.x,a),y:l.number(p.y,r.y,a),z:l.number(p.z,r.z,a)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),ft="-transition";class Te extends l.Evented{constructor(r){super(),this._transitionable=new l.Transitionable(ot),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,a={}){if(!this._validate(l.validateLight,r,a))for(const h in r){const f=r[h];h.endsWith(ft)?this._transitionable.setTransition(h.slice(0,-ft.length),f):this._transitionable.setValue(h,f)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,a,h){return(!h||h.validate!==!1)&&l.emitValidationErrors(this,r.call(l.validateStyle,l.extend({value:a,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class nt{constructor(r,a){this.width=r,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,a){const h=r.join(",")+String(a);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(r,a)),this.dashEntry[h]}getDashRanges(r,a,h){const f=[];let y=r.length%2==1?-r[r.length-1]*h:0,w=r[0]*h,S=!0;f.push({left:y,right:w,isDash:S,zeroLength:r[0]===0});let I=r[0];for(let D=1;D<r.length;D++){S=!S;const R=r[D];y=I*h,I+=R,w=I*h,f.push({left:y,right:w,isDash:S,zeroLength:R===0})}return f}addRoundDash(r,a,h){const f=a/2;for(let y=-h;y<=h;y++){const w=this.width*(this.nextRow+h+y);let S=0,I=r[S];for(let D=0;D<this.width;D++){D/I.right>1&&(I=r[++S]);const R=Math.abs(D-I.left),N=Math.abs(D-I.right),q=Math.min(R,N);let Y;const H=y/h*(f+1);if(I.isDash){const J=f-Math.abs(H);Y=Math.sqrt(q*q+J*J)}else Y=f-Math.sqrt(q*q+H*H);this.data[w+D]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(r){for(let S=r.length-1;S>=0;--S){const I=r[S],D=r[S+1];I.zeroLength?r.splice(S,1):D&&D.isDash===I.isDash&&(D.left=I.left,r.splice(S,1))}const a=r[0],h=r[r.length-1];a.isDash===h.isDash&&(a.left=h.left-this.width,h.right=a.right+this.width);const f=this.width*this.nextRow;let y=0,w=r[y];for(let S=0;S<this.width;S++){S/w.right>1&&(w=r[++y]);const I=Math.abs(S-w.left),D=Math.abs(S-w.right),R=Math.min(I,D);this.data[f+S]=Math.max(0,Math.min(255,(w.isDash?R:-R)+128))}}addDash(r,a){const h=a?7:0,f=2*h+1;if(this.nextRow+f>this.height)return l.warnOnce("LineAtlas out of space"),null;let y=0;for(let S=0;S<r.length;S++)y+=r[S];if(y!==0){const S=this.width/y,I=this.getDashRanges(r,this.width,S);a?this.addRoundDash(I,S,h):this.addRegularDash(I)}const w={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:y};return this.nextRow+=f,this.dirty=!0,w}bind(r){const a=r.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}class St{constructor(r,a){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const h=this.workerPool.acquire(this.id);for(let f=0;f<h.length;f++){const y=new St.Actor(h[f],a,this.id);y.name=`Worker ${f}`,this.actors.push(y)}}broadcast(r,a,h){l.asyncAll(this.actors,(f,y)=>{f.send(r,a,y)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(r=>{r.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ft(p,r,a){const h=function(f,y){if(f)return a(f);if(y){const w=l.pick(l.extend(y,p),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);y.vector_layers&&(w.vectorLayers=y.vector_layers,w.vectorLayerIds=w.vectorLayers.map(S=>S.id)),a(null,w)}};return p.url?l.getJSON(r.transformRequest(p.url,l.ResourceType.Source),h):l.exported.frame(()=>h(null,p))}St.Actor=l.Actor;class Ve{constructor(r,a,h){this.bounds=l.LngLatBounds.convert(this.validateBounds(r)),this.minzoom=a||0,this.maxzoom=h||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const a=Math.pow(2,r.z),h=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*a),f=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*a),y=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*a),w=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*a);return r.x>=h&&r.x<y&&r.y>=f&&r.y<w}}class Dt extends l.Evented{constructor(r,a,h,f){if(super(),this.id=r,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(a,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ft(this._options,this.map._requestManager,(r,a)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r?this.fire(new l.ErrorEvent(r)):a&&(l.extend(this,a),a.bounds&&(this.tileBounds=new Ve(a.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(r,a){const h=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(h,l.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function y(w,S){return delete r.request,r.aborted?a(null):w&&w.status!==404?a(w):(S&&S.resourceTiming&&(r.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&r.setExpiryData(S),r.loadVectorData(S,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),a(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}f.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=a:r.request=r.actor.send("reloadTile",f,y.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",f,y.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class zt extends l.Evented{constructor(r,a,h,f){super(),this.id=r,this.dispatcher=h,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},a),l.extend(this,l.pick(a,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ft(this._options,this.map._requestManager,(r,a)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.ErrorEvent(r)):a&&(l.extend(this,a),a.bounds&&(this.tileBounds=new Ve(a.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,a){const h=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=l.getImage(this.map._requestManager.transformRequest(h,l.ResourceType.Tile),(f,y,w)=>{if(delete r.request,r.aborted)r.state="unloaded",a(null);else if(f)r.state="errored",a(f);else if(y){this.map._refreshExpiredTiles&&r.setExpiryData(w);const S=this.map.painter.context,I=S.gl;r.texture=this.map.painter.getTileTexture(y.width),r.texture?r.texture.update(y,{useMipmap:!0}):(r.texture=new _e(S,y,I.RGBA,{useMipmap:!0}),r.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),S.extTextureFilterAnisotropic&&I.texParameterf(I.TEXTURE_2D,S.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,S.extTextureFilterAnisotropicMax)),r.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),a(null)}})}abortTile(r,a){r.request&&(r.request.cancel(),delete r.request),a()}unloadTile(r,a){r.texture&&this.map.painter.saveTileTexture(r.texture),a()}hasTransition(){return!1}}let dr;class pr extends zt{constructor(r,a,h,f){super(r,a,h,f),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(r,a){const h=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function f(y,w){y&&(r.state="errored",a(y)),w&&(r.dem=w,r.needsHillshadePrepare=!0,r.state="loaded",a(null))}r.request=l.getImage(this.map._requestManager.transformRequest(h,l.ResourceType.Tile),function(y,w){if(delete r.request,r.aborted)r.state="unloaded",a(null);else if(y)r.state="errored",a(y);else if(w){this.map._refreshExpiredTiles&&r.setExpiryData(w),delete w.cacheControl,delete w.expires;const S=l.isImageBitmap(w)&&(dr==null&&(dr=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),dr)?w:l.exported.getImageData(w,1),I={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:S,encoding:this.encoding};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",I,f.bind(this)))}}.bind(this)),r.neighboringTiles=this._getNeighboringTiles(r.tileID)}_getNeighboringTiles(r){const a=r.canonical,h=Math.pow(2,a.z),f=(a.x-1+h)%h,y=a.x===0?r.wrap-1:r.wrap,w=(a.x+1+h)%h,S=a.x+1===h?r.wrap+1:r.wrap,I={};return I[new l.OverscaledTileID(r.overscaledZ,y,a.z,f,a.y).key]={backfilled:!1},I[new l.OverscaledTileID(r.overscaledZ,S,a.z,w,a.y).key]={backfilled:!1},a.y>0&&(I[new l.OverscaledTileID(r.overscaledZ,y,a.z,f,a.y-1).key]={backfilled:!1},I[new l.OverscaledTileID(r.overscaledZ,r.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},I[new l.OverscaledTileID(r.overscaledZ,S,a.z,w,a.y-1).key]={backfilled:!1}),a.y+1<h&&(I[new l.OverscaledTileID(r.overscaledZ,y,a.z,f,a.y+1).key]={backfilled:!1},I[new l.OverscaledTileID(r.overscaledZ,r.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},I[new l.OverscaledTileID(r.overscaledZ,S,a.z,w,a.y+1).key]={backfilled:!1}),I}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class Ir extends l.Evented{constructor(r,a,h,f){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(f),this._data=a.data,this._options=l.extend({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const y=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*y,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*y,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:l.EXTENT,radius:(a.clusterRadius||50)*y,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData("content"),this}getClusterExpansionZoom(r,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},a),this}getClusterChildren(r,a){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},a),this}getClusterLeaves(r,a,h,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:a,offset:h},f),this}_updateWorkerData(r){const a=l.extend({},this.workerOptions),h=this._data;typeof h=="string"?(a.request=this.map._requestManager.transformRequest(l.exported.resolveURL(h),l.ResourceType.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(h),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,a,(f,y)=>{if(this._pendingLoads--,this._removed||y&&y.abandoned)return;let w=null;if(y&&y.resourceTiming&&y.resourceTiming[this.id]&&(w=y.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:a.source},null),f)return void this.fire(new l.ErrorEvent(f));const S={dataType:"source",sourceDataType:r};this._collectResourceTiming&&w&&w.length>0&&l.extend(S,{resourceTiming:w}),this.fire(new l.Event("data",S))})}loaded(){return this._pendingLoads===0}loadTile(r,a){const h=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(h,f,(y,w)=>(delete r.request,r.unloadVectorData(),r.aborted?a(null):y?a(y):(r.loadVectorData(w,this.map.painter,h==="reloadTile"),a(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var vr=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ar extends l.Evented{constructor(r,a,h,f){super(),this.id=r,this.dispatcher=h,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=a}load(r,a){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(h,f)=>{this._loaded=!0,h?this.fire(new l.ErrorEvent(h)):f&&(this.image=f,r&&(this.coordinates=r),a&&a(),this._finishLoading())})}loaded(){return this._loaded}updateImage(r){return this.image&&r.url?(this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}setCoordinates(r){this.coordinates=r;const a=r.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(f){let y=1/0,w=1/0,S=-1/0,I=-1/0;for(const q of f)y=Math.min(y,q.x),w=Math.min(w,q.y),S=Math.max(S,q.x),I=Math.max(I,q.y);const D=Math.max(S-y,I-w),R=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),N=Math.pow(2,R);return new l.CanonicalTileID(R,Math.floor((y+S)/2*N),Math.floor((w+I)/2*N))}(a),this.minzoom=this.maxzoom=this.tileID.z;const h=a.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(h[2].x,h[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,a=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,vr.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new _e(r,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture)}}loadTile(r,a){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},a(null)):(r.state="errored",a(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class jr extends Ar{constructor(r,a,h,f){super(r,a,h,f),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const r=this.options;this.urls=[];for(const a of r.urls)this.urls.push(this.map._requestManager.transformRequest(a,l.ResourceType.Source).url);l.getVideo(this.urls,(a,h)=>{this._loaded=!0,a?this.fire(new l.ErrorEvent(a)):h&&(this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const a=this.video.seekable;r<a.start(0)||r>a.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,a=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,vr.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new _e(r,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Fe extends Ar{constructor(r,a,h,f){super(r,a,h,f),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(w=>typeof w!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,h=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,vr.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _e(a,this.canvas,h.RGBA,{premultiply:!0});for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const at={vector:Dt,raster:zt,"raster-dem":pr,geojson:Ir,video:jr,image:Ar,canvas:Fe};function Xe(p,r){const a=l.create();return l.translate(a,a,[1,1,0]),l.scale(a,a,[.5*p.width,.5*p.height,1]),l.multiply(a,a,p.calculatePosMatrix(r.toUnwrapped()))}function dt(p,r,a,h,f,y){const w=function(N,q,Y){if(N)for(const H of N){const J=q[H];if(J&&J.source===Y&&J.type==="fill-extrusion")return!0}else for(const H in q){const J=q[H];if(J.source===Y&&J.type==="fill-extrusion")return!0}return!1}(f&&f.layers,r,p.id),S=y.maxPitchScaleFactor(),I=p.tilesIn(h,S,w);I.sort(Zt);const D=[];for(const N of I)D.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(r,a,p._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,f,y,S,Xe(p.transform,N.tileID))});const R=function(N){const q={},Y={};for(const H of N){const J=H.queryResults,ue=H.wrappedTileID,he=Y[ue]=Y[ue]||{};for(const ge in J){const pe=J[ge],Oe=he[ge]=he[ge]||{},Ee=q[ge]=q[ge]||[];for(const Pe of pe)Oe[Pe.featureIndex]||(Oe[Pe.featureIndex]=!0,Ee.push(Pe))}}return q}(D);for(const N in R)R[N].forEach(q=>{const Y=q.feature,H=p.getFeatureState(Y.layer["source-layer"],Y.id);Y.source=Y.layer.source,Y.layer["source-layer"]&&(Y.sourceLayer=Y.layer["source-layer"]),Y.state=H});return R}function Zt(p,r){const a=p.tileID,h=r.tileID;return a.overscaledZ-h.overscaledZ||a.canonical.y-h.canonical.y||a.wrap-h.wrap||a.canonical.x-h.canonical.x}class nr{constructor(r,a){this.tileID=r,this.uid=l.uniqueId(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const a=r+this.timeAdded;a<l.exported.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(r,a,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(f,y){const w={};if(!y)return w;for(const S of f){const I=S.layerIds.map(D=>y.getLayer(D)).filter(Boolean);if(I.length!==0){S.layers=I,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(D=>I.filter(R=>R.id===D)[0]));for(const D of I)w[D.id]=S}}return w}(r.buckets,a.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const y=this.buckets[f];if(y instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!h)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const y=this.buckets[f];if(y instanceof l.SymbolBucket&&y.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const f in this.buckets){const y=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(f).queryRadius(y))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const h in this.buckets){const f=this.buckets[h];f.uploadPending()&&f.upload(r)}const a=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _e(r,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _e(r,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,a,h,f,y,w,S,I,D,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:y,scale:w,tileSize:this.tileSize,pixelPosMatrix:R,transform:I,params:S,queryPadding:this.queryPadding*D},r,a,h):{}}querySourceFeatures(r,a){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const f=h.loadVTLayers(),y=a?a.sourceLayer:"",w=f._geojsonTileLayer||f[y];if(!w)return;const S=l.createFilter(a&&a.filter),{z:I,x:D,y:R}=this.tileID.canonical,N={z:I,x:D,y:R};for(let q=0;q<w.length;q++){const Y=w.feature(q);if(S.needGeometry){const ue=l.toEvaluationFeature(Y,!0);if(!S.filter(new l.EvaluationParameters(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!S.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Y))continue;const H=h.getId(Y,y),J=new l.GeoJSONFeature(Y,I,D,R,H);J.tile=N,r.push(J)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const a=this.expirationTime;if(r.cacheControl){const h=l.parseCacheControl(r.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const h=Date.now();let f=!1;if(this.expirationTime>h)f=!1;else if(a)if(this.expirationTime<a)f=!0;else{const y=this.expirationTime-a;y?this.expirationTime=h+Math.max(y,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!a.style.hasLayer(f))continue;const y=this.buckets[f],w=y.layers[0].sourceLayer||"_geojsonTileLayer",S=h[w],I=r[w];if(!S||!I||Object.keys(I).length===0)continue;y.update(I,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=a&&a.style&&a.style.getLayer(f);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.exported.now()+r}setDependencies(r,a){const h={};for(const f of a)h[f]=!0;this.dependencies[r]=h}hasDependency(r,a){for(const h of r){const f=this.dependencies[h];if(f){for(const y of a)if(f[y])return!0}}return!1}}class Rt{constructor(r,a){this.max=r,this.onRemove=a,this.reset()}reset(){for(const r in this.data)for(const a of this.data[r])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(r,a,h){const f=r.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const y={value:a,timeout:void 0};if(h!==void 0&&(y.timeout=setTimeout(()=>{this.remove(r,y)},h)),this.data[f].push(y),this.order.push(f),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const a=this.data[r].shift();return a.timeout&&clearTimeout(a.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),a.value}getByKey(r){const a=this.data[r];return a?a[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,a){if(!this.has(r))return this;const h=r.wrapped().key,f=a===void 0?0:this.data[h].indexOf(a),y=this.data[h][f];return this.data[h].splice(f,1),y.timeout&&clearTimeout(y.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(y.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(r){const a=[];for(const h in this.data)for(const f of this.data[h])r(f.value)||a.push(f);for(const h of a)this.remove(h.value.tileID,h)}}class Ot{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,a,h){const f=String(a);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][f]=this.stateChanges[r][f]||{},l.extend(this.stateChanges[r][f],h),this.deletedStates[r]===null){this.deletedStates[r]={};for(const y in this.state[r])y!==f&&(this.deletedStates[r][y]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][f]===null){this.deletedStates[r][f]={};for(const y in this.state[r][f])h[y]||(this.deletedStates[r][f][y]=null)}else for(const y in h)this.deletedStates[r]&&this.deletedStates[r][f]&&this.deletedStates[r][f][y]===null&&delete this.deletedStates[r][f][y]}removeFeatureState(r,a,h){if(this.deletedStates[r]===null)return;const f=String(a);if(this.deletedStates[r]=this.deletedStates[r]||{},h&&a!==void 0)this.deletedStates[r][f]!==null&&(this.deletedStates[r][f]=this.deletedStates[r][f]||{},this.deletedStates[r][f][h]=null);else if(a!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][f])for(h in this.deletedStates[r][f]={},this.stateChanges[r][f])this.deletedStates[r][f][h]=null;else this.deletedStates[r][f]=null;else this.deletedStates[r]=null}getState(r,a){const h=String(a),f=l.extend({},(this.state[r]||{})[h],(this.stateChanges[r]||{})[h]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const y=this.deletedStates[r][a];if(y===null)return{};for(const w in y)delete f[w]}return f}initializeTileState(r,a){r.setFeatureState(this.state,a)}coalesceChanges(r,a){const h={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const y={};for(const w in this.stateChanges[f])this.state[f][w]||(this.state[f][w]={}),l.extend(this.state[f][w],this.stateChanges[f][w]),y[w]=this.state[f][w];h[f]=y}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const y={};if(this.deletedStates[f]===null)for(const w in this.state[f])y[w]={},this.state[f][w]={};else for(const w in this.deletedStates[f]){if(this.deletedStates[f][w]===null)this.state[f][w]={};else for(const S of Object.keys(this.deletedStates[f][w]))delete this.state[f][w][S];y[w]=this.state[f][w]}h[f]=h[f]||{},l.extend(h[f],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const f in r)r[f].setFeatureState(h,a)}}class Z extends l.Evented{constructor(r,a,h){super(),this.id=r,this.dispatcher=h,this.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(f,y,w,S){const I=new at[y.type](f,y,w,S);if(I.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${I.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],I),I}(r,a,h,this),this._tiles={},this._cache=new Rt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ot}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const r in this._tiles){const a=this._tiles[r];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(r,a){return this._source.loadTile(r,a)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.Event("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const h=this._tiles[a];h.upload(r),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(ne).map(r=>r.key)}getRenderableIds(r){const a=[];for(const h in this._tiles)this._isIdRenderable(h,r)&&a.push(this._tiles[h]);return r?a.sort((h,f)=>{const y=h.tileID,w=f.tileID,S=new l.pointGeometry(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),I=new l.pointGeometry(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-w.overscaledZ||I.y-S.y||I.x-S.x}).map(h=>h.tileID.key):a.map(h=>h.tileID).sort(ne).map(h=>h.key)}hasRenderableParent(r){const a=this.findLoadedParent(r,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(r,a){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(a||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,a){const h=this._tiles[r];h&&(h.state!=="loading"&&(h.state=a),this._loadTile(h,this._tileLoaded.bind(this,h,r,a)))}_tileLoaded(r,a,h,f){if(f)return r.state="errored",void(f.status!==404?this._source.fire(new l.ErrorEvent(f,{tile:r})):this.update(this.transform));r.timeAdded=l.exported.now(),h==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(a,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const a=this.getRenderableIds();for(let f=0;f<a.length;f++){const y=a[f];if(r.neighboringTiles&&r.neighboringTiles[y]){const w=this.getTileByID(y);h(r,w),h(w,r)}}function h(f,y){f.needsHillshadePrepare=!0;let w=y.tileID.canonical.x-f.tileID.canonical.x;const S=y.tileID.canonical.y-f.tileID.canonical.y,I=Math.pow(2,f.tileID.canonical.z),D=y.tileID.key;w===0&&S===0||Math.abs(S)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),y.dem&&f.dem&&(f.dem.backfillBorder(y.dem,w,S),f.neighboringTiles&&f.neighboringTiles[D]&&(f.neighboringTiles[D].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,a,h,f){for(const y in this._tiles){let w=this._tiles[y];if(f[y]||!w.hasData()||w.tileID.overscaledZ<=a||w.tileID.overscaledZ>h)continue;let S=w.tileID;for(;w&&w.tileID.overscaledZ>a+1;){const D=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[D.key],w&&w.hasData()&&(S=D)}let I=S;for(;I.overscaledZ>a;)if(I=I.scaledTo(I.overscaledZ-1),r[I.key]){f[S.key]=S;break}}}findLoadedParent(r,a){if(r.key in this._loadedParentTiles){const h=this._loadedParentTiles[r.key];return h&&h.tileID.overscaledZ>=a?h:null}for(let h=r.overscaledZ-1;h>=a;h--){const f=r.scaledTo(h),y=this._getLoadedTile(f);if(y)return y}}_getLoadedTile(r){const a=this._tiles[r.key];return a&&a.hasData()?a:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const a=Math.ceil(r.width/this._source.tileSize)+1,h=Math.ceil(r.height/this._source.tileSize)+1,f=Math.floor(a*h*5),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(y)}handleWrapJump(r){const a=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,a){const h={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+a),h[y.tileID.key]=y}this._tiles=h;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}update(r){if(this.transform=r,!this._sourceLoaded||this._paused)return;let a;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?a=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(I=>new l.OverscaledTileID(I.canonical.z,I.wrap,I.canonical.z,I.canonical.x,I.canonical.y)):(a=r.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(a=a.filter(I=>this._source.hasTile(I)))):a=[];const h=r.coveringZoomLevel(this._source),f=Math.max(h-Z.maxOverzooming,this._source.minzoom),y=Math.max(h+Z.maxUnderzooming,this._source.minzoom),w=this._updateRetainedTiles(a,h);if(ye(this._source.type)){const I={},D={},R=Object.keys(w);for(const N of R){const q=w[N],Y=this._tiles[N];if(!Y||Y.fadeEndTime&&Y.fadeEndTime<=l.exported.now())continue;const H=this.findLoadedParent(q,f);H&&(this._addTile(H.tileID),I[H.tileID.key]=H.tileID),D[N]=q}this._retainLoadedChildren(D,h,y,w);for(const N in I)w[N]||(this._coveredTiles[N]=!0,w[N]=I[N])}for(const I in w)this._tiles[I].clearFadeHold();const S=l.keysDifference(this._tiles,w);for(const I of S){const D=this._tiles[I];D.hasSymbolBuckets&&!D.holdingForFade()?D.setHoldDuration(this.map._fadeDuration):D.hasSymbolBuckets&&!D.symbolFadeFinished()||this._removeTile(I)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,a){const h={},f={},y=Math.max(a-Z.maxOverzooming,this._source.minzoom),w=Math.max(a+Z.maxUnderzooming,this._source.minzoom),S={};for(const I of r){const D=this._addTile(I);h[I.key]=I,D.hasData()||a<this._source.maxzoom&&(S[I.key]=I)}this._retainLoadedChildren(S,a,w,h);for(const I of r){let D=this._tiles[I.key];if(D.hasData())continue;if(a+1>this._source.maxzoom){const N=I.children(this._source.maxzoom)[0],q=this.getTile(N);if(q&&q.hasData()){h[N.key]=N;continue}}else{const N=I.children(this._source.maxzoom);if(h[N[0].key]&&h[N[1].key]&&h[N[2].key]&&h[N[3].key])continue}let R=D.wasRequested();for(let N=I.overscaledZ-1;N>=y;--N){const q=I.scaledTo(N);if(f[q.key]||(f[q.key]=!0,D=this.getTile(q),!D&&R&&(D=this._addTile(q)),D&&(h[q.key]=q,R=D.wasRequested(),D.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const a=[];let h,f=this._tiles[r].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){h=this._loadedParentTiles[f.key];break}a.push(f.key);const y=f.scaledTo(f.overscaledZ-1);if(h=this._getLoadedTile(y),h)break;f=y}for(const y of a)this._loadedParentTiles[y]=h}}_addTile(r){let a=this._tiles[r.key];if(a)return a;a=this._cache.getAndRemove(r),a&&(this._setTileReloadTimer(r.key,a),a.tileID=r,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,a)));const h=a;return a||(a=new nr(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(a,this._tileLoaded.bind(this,a,r.key,a.state))),a.uses++,this._tiles[r.key]=a,h||this._source.fire(new l.Event("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(r,a){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const h=a.getExpiryTimeout();h&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},h))}_removeTile(r){const a=this._tiles[r];a&&(a.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,a,h){const f=[],y=this.transform;if(!y)return f;const w=h?y.getCameraQueryGeometry(r):r,S=r.map(H=>y.pointCoordinate(H)),I=w.map(H=>y.pointCoordinate(H)),D=this.getIds();let R=1/0,N=1/0,q=-1/0,Y=-1/0;for(const H of I)R=Math.min(R,H.x),N=Math.min(N,H.y),q=Math.max(q,H.x),Y=Math.max(Y,H.y);for(let H=0;H<D.length;H++){const J=this._tiles[D[H]];if(J.holdingForFade())continue;const ue=J.tileID,he=Math.pow(2,y.zoom-J.tileID.overscaledZ),ge=a*J.queryPadding*l.EXTENT/J.tileSize/he,pe=[ue.getTilePoint(new l.MercatorCoordinate(R,N)),ue.getTilePoint(new l.MercatorCoordinate(q,Y))];if(pe[0].x-ge<l.EXTENT&&pe[0].y-ge<l.EXTENT&&pe[1].x+ge>=0&&pe[1].y+ge>=0){const Oe=S.map(Pe=>ue.getTilePoint(Pe)),Ee=I.map(Pe=>ue.getTilePoint(Pe));f.push({tile:J,tileID:ue,queryGeometry:Oe,cameraQueryGeometry:Ee,scale:he})}}return f}getVisibleCoordinates(r){const a=this.getRenderableIds(r).map(h=>this._tiles[h].tileID);for(const h of a)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(ye(this._source.type))for(const r in this._tiles){const a=this._tiles[r];if(a.fadeEndTime!==void 0&&a.fadeEndTime>=l.exported.now())return!0}return!1}setFeatureState(r,a,h){this._state.updateState(r=r||"_geojsonTileLayer",a,h)}removeFeatureState(r,a,h){this._state.removeFeatureState(r=r||"_geojsonTileLayer",a,h)}getFeatureState(r,a){return this._state.getState(r=r||"_geojsonTileLayer",a)}setDependencies(r,a,h){const f=this._tiles[r];f&&f.setDependencies(a,h)}reloadTilesForDependencies(r,a){for(const h in this._tiles)this._tiles[h].hasDependency(r,a)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(r,a))}}function ne(p,r){const a=Math.abs(2*p.wrap)-+(p.wrap<0),h=Math.abs(2*r.wrap)-+(r.wrap<0);return p.overscaledZ-r.overscaledZ||h-a||r.canonical.y-p.canonical.y||r.canonical.x-p.canonical.x}function ye(p){return p==="raster"||p==="image"||p==="video"}Z.maxOverzooming=10,Z.maxUnderzooming=3;const Le="mapboxgl_preloaded_worker_pool";class Re{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Re.workerCount;)this.workers.push(new Worker(Ts.workerUrl));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Le]}numActive(){return Object.keys(this.active).length}}const Ue=Math.floor(l.exported.hardwareConcurrency/2);let Je;function qe(){return Je||(Je=new Re),Je}function Qe(p,r){const a={};for(const h in p)h!=="ref"&&(a[h]=p[h]);return l.refProperties.forEach(h=>{h in r&&(a[h]=r[h])}),a}function Ze(p){p=p.slice();const r=Object.create(null);for(let a=0;a<p.length;a++)r[p[a].id]=p[a];for(let a=0;a<p.length;a++)"ref"in p[a]&&(p[a]=Qe(p[a],r[p[a].ref]));return p}Re.workerCount=Math.max(Math.min(Ue,6),1);const Ye={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function vt(p,r,a){a.push({command:Ye.addSource,args:[p,r[p]]})}function _t(p,r,a){r.push({command:Ye.removeSource,args:[p]}),a[p]=!0}function At(p,r,a,h){_t(p,a,h),vt(p,r,a)}function jt(p,r,a){let h;for(h in p[a])if(Object.prototype.hasOwnProperty.call(p[a],h)&&h!=="data"&&!F(p[a][h],r[a][h]))return!1;for(h in r[a])if(Object.prototype.hasOwnProperty.call(r[a],h)&&h!=="data"&&!F(p[a][h],r[a][h]))return!1;return!0}function ve(p,r,a,h,f,y){let w;for(w in r=r||{},p=p||{})Object.prototype.hasOwnProperty.call(p,w)&&(F(p[w],r[w])||a.push({command:y,args:[h,w,r[w],f]}));for(w in r)Object.prototype.hasOwnProperty.call(r,w)&&!Object.prototype.hasOwnProperty.call(p,w)&&(F(p[w],r[w])||a.push({command:y,args:[h,w,r[w],f]}))}function $e(p){return p.id}function ur(p,r){return p[r.id]=r,p}class Hr{constructor(r,a){this.reset(r,a)}reset(r,a){this.points=r||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.clamp(r,0,1);let a=1,h=this._distances[a];const f=r*this.paddedLength+this.padding;for(;h<f&&a<this._distances.length;)h=this._distances[++a];const y=a-1,w=this._distances[y],S=h-w,I=S>0?(f-w)/S:0;return this.points[y].mult(1-I).add(this.points[a].mult(I))}}function ir(p,r){let a=!0;return p==="always"||p!=="never"&&r!=="never"||(a=!1),a}class Sn{constructor(r,a,h){const f=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(r/h),this.yCellCount=Math.ceil(a/h);for(let w=0;w<this.xCellCount*this.yCellCount;w++)f.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=a,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,a,h,f,y){this._forEachCell(a,h,f,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(y)}insertCircle(r,a,h,f){this._forEachCell(a-f,h-f,a+f,h+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(a),this.circles.push(h),this.circles.push(f)}_insertBoxCell(r,a,h,f,y,w){this.boxCells[y].push(w)}_insertCircleCell(r,a,h,f,y,w){this.circleCells[y].push(w)}_query(r,a,h,f,y,w,S){if(h<0||r>this.width||f<0||a>this.height)return[];const I=[];if(r<=0&&a<=0&&this.width<=h&&this.height<=f){if(y)return[{key:null,x1:r,y1:a,x2:h,y2:f}];for(let D=0;D<this.boxKeys.length;D++)I.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const R=this.circles[3*D],N=this.circles[3*D+1],q=this.circles[3*D+2];I.push({key:this.circleKeys[D],x1:R-q,y1:N-q,x2:R+q,y2:N+q})}}else this._forEachCell(r,a,h,f,this._queryCell,I,{hitTest:y,overlapMode:w,seenUids:{box:{},circle:{}}},S);return I}query(r,a,h,f){return this._query(r,a,h,f,!1,null)}hitTest(r,a,h,f,y,w){return this._query(r,a,h,f,!0,y,w).length>0}hitTestCircle(r,a,h,f,y){const w=r-h,S=r+h,I=a-h,D=a+h;if(S<0||w>this.width||D<0||I>this.height)return!1;const R=[];return this._forEachCell(w,I,S,D,this._queryCellCircle,R,{hitTest:!0,overlapMode:f,circle:{x:r,y:a,radius:h},seenUids:{box:{},circle:{}}},y),R.length>0}_queryCell(r,a,h,f,y,w,S,I){const{seenUids:D,hitTest:R,overlapMode:N}=S,q=this.boxCells[y];if(q!==null){const H=this.bboxes;for(const J of q)if(!D.box[J]){D.box[J]=!0;const ue=4*J,he=this.boxKeys[J];if(r<=H[ue+2]&&a<=H[ue+3]&&h>=H[ue+0]&&f>=H[ue+1]&&(!I||I(he))&&(!R||!ir(N,he.overlapMode))&&(w.push({key:he,x1:H[ue],y1:H[ue+1],x2:H[ue+2],y2:H[ue+3]}),R))return!0}}const Y=this.circleCells[y];if(Y!==null){const H=this.circles;for(const J of Y)if(!D.circle[J]){D.circle[J]=!0;const ue=3*J,he=this.circleKeys[J];if(this._circleAndRectCollide(H[ue],H[ue+1],H[ue+2],r,a,h,f)&&(!I||I(he))&&(!R||!ir(N,he.overlapMode))){const ge=H[ue],pe=H[ue+1],Oe=H[ue+2];if(w.push({key:he,x1:ge-Oe,y1:pe-Oe,x2:ge+Oe,y2:pe+Oe}),R)return!0}}}return!1}_queryCellCircle(r,a,h,f,y,w,S,I){const{circle:D,seenUids:R,overlapMode:N}=S,q=this.boxCells[y];if(q!==null){const H=this.bboxes;for(const J of q)if(!R.box[J]){R.box[J]=!0;const ue=4*J,he=this.boxKeys[J];if(this._circleAndRectCollide(D.x,D.y,D.radius,H[ue+0],H[ue+1],H[ue+2],H[ue+3])&&(!I||I(he))&&!ir(N,he.overlapMode))return w.push(!0),!0}}const Y=this.circleCells[y];if(Y!==null){const H=this.circles;for(const J of Y)if(!R.circle[J]){R.circle[J]=!0;const ue=3*J,he=this.circleKeys[J];if(this._circlesCollide(H[ue],H[ue+1],H[ue+2],D.x,D.y,D.radius)&&(!I||I(he))&&!ir(N,he.overlapMode))return w.push(!0),!0}}}_forEachCell(r,a,h,f,y,w,S,I){const D=this._convertToXCellCoord(r),R=this._convertToYCellCoord(a),N=this._convertToXCellCoord(h),q=this._convertToYCellCoord(f);for(let Y=D;Y<=N;Y++)for(let H=R;H<=q;H++)if(y.call(this,r,a,h,f,this.xCellCount*H+Y,w,S,I))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,a,h,f,y,w){const S=f-r,I=y-a,D=h+w;return D*D>S*S+I*I}_circleAndRectCollide(r,a,h,f,y,w,S){const I=(w-f)/2,D=Math.abs(r-(f+I));if(D>I+h)return!1;const R=(S-y)/2,N=Math.abs(a-(y+R));if(N>R+h)return!1;if(D<=I||N<=R)return!0;const q=D-I,Y=N-R;return q*q+Y*Y<=h*h}}function Gr(p,r,a,h,f){const y=l.create();return r?(l.scale(y,y,[1/f,1/f,1]),a||l.rotateZ(y,y,h.angle)):l.multiply(y,h.labelPlaneMatrix,p),y}function vi(p,r,a,h,f){if(r){const y=l.clone(p);return l.scale(y,y,[f,f,1]),a||l.rotateZ(y,y,-h.angle),y}return h.glCoordMatrix}function Xt(p,r){const a=[p.x,p.y,0,1];Sr(a,a,r);const h=a[3];return{point:new l.pointGeometry(a[0]/h,a[1]/h),signedDistanceFromCamera:h}}function Ke(p,r){return .5+p/r*.5}function $t(p,r){const a=p[0]/p[3],h=p[1]/p[3];return a>=-r[0]&&a<=r[0]&&h>=-r[1]&&h<=r[1]}function qt(p,r,a,h,f,y,w,S,I){const D=h?p.textSizeData:p.iconSizeData,R=l.evaluateSizeForZoom(D,a.transform.zoom),N=[256/a.width*2+1,256/a.height*2+1],q=h?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;q.clear();const Y=p.lineVertexArray,H=h?p.text.placedSymbolArray:p.icon.placedSymbolArray,J=a.transform.width/a.transform.height;let ue=!1;for(let he=0;he<H.length;he++){const ge=H.get(he);if(ge.hidden||ge.writingMode===l.WritingMode.vertical&&!ue){Kr(ge.numGlyphs,q);continue}ue=!1;const pe=[ge.anchorX,ge.anchorY,0,1];if(l.transformMat4(pe,pe,r),!$t(pe,N)){Kr(ge.numGlyphs,q);continue}const Oe=Ke(a.transform.cameraToCenterDistance,pe[3]),Ee=l.evaluateSizeForFeature(D,R,ge),Pe=w?Ee/Oe:Ee*Oe,Ge=new l.pointGeometry(ge.anchorX,ge.anchorY),et=Xt(Ge,f).point,ze={},yt=Ht(ge,Pe,!1,S,r,f,y,p.glyphOffsetArray,Y,q,et,Ge,ze,J,I);ue=yt.useVertical,(yt.notEnoughRoom||ue||yt.needsFlipping&&Ht(ge,Pe,!0,S,r,f,y,p.glyphOffsetArray,Y,q,et,Ge,ze,J,I).notEnoughRoom)&&Kr(ge.numGlyphs,q)}h?p.text.dynamicLayoutVertexBuffer.updateData(q):p.icon.dynamicLayoutVertexBuffer.updateData(q)}function Tn(p,r,a,h,f,y,w,S,I,D,R,N){const q=S.glyphStartIndex+S.numGlyphs,Y=S.lineStartIndex,H=S.lineStartIndex+S.lineLength,J=r.getoffsetX(S.glyphStartIndex),ue=r.getoffsetX(q-1),he=si(p*J,a,h,f,y,w,S.segment,Y,H,I,D,R,N);if(!he)return null;const ge=si(p*ue,a,h,f,y,w,S.segment,Y,H,I,D,R,N);return ge?{first:he,last:ge}:null}function oi(p,r,a,h){return p===l.WritingMode.horizontal&&Math.abs(a.y-r.y)>Math.abs(a.x-r.x)*h?{useVertical:!0}:(p===l.WritingMode.vertical?r.y<a.y:r.x>a.x)?{needsFlipping:!0}:null}function Ht(p,r,a,h,f,y,w,S,I,D,R,N,q,Y,H){const J=r/24,ue=p.lineOffsetX*J,he=p.lineOffsetY*J;let ge;if(p.numGlyphs>1){const pe=p.glyphStartIndex+p.numGlyphs,Oe=p.lineStartIndex,Ee=p.lineStartIndex+p.lineLength,Pe=Tn(J,S,ue,he,a,R,N,p,I,y,q,H);if(!Pe)return{notEnoughRoom:!0};const Ge=Xt(Pe.first.point,w).point,et=Xt(Pe.last.point,w).point;if(h&&!a){const ze=oi(p.writingMode,Ge,et,Y);if(ze)return ze}ge=[Pe.first];for(let ze=p.glyphStartIndex+1;ze<pe-1;ze++)ge.push(si(J*S.getoffsetX(ze),ue,he,a,R,N,p.segment,Oe,Ee,I,y,q,H));ge.push(Pe.last)}else{if(h&&!a){const Oe=Xt(N,f).point,Ee=p.lineStartIndex+p.segment+1,Pe=new l.pointGeometry(I.getx(Ee),I.gety(Ee)),Ge=Xt(Pe,f),et=Ge.signedDistanceFromCamera>0?Ge.point:Xi(N,Pe,Oe,1,f),ze=oi(p.writingMode,Oe,et,Y);if(ze)return ze}const pe=si(J*S.getoffsetX(p.glyphStartIndex),ue,he,a,R,N,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,I,y,q,H);if(!pe)return{notEnoughRoom:!0};ge=[pe]}for(const pe of ge)l.addDynamicAttributes(D,pe.point,pe.angle);return{}}function Xi(p,r,a,h,f){const y=Xt(p.add(p.sub(r)._unit()),f).point,w=a.sub(y);return a.add(w._mult(h/w.mag()))}function si(p,r,a,h,f,y,w,S,I,D,R,N,q){const Y=h?p-r:p+r;let H=Y>0?1:-1,J=0;h&&(H*=-1,J=Math.PI),H<0&&(J+=Math.PI);let ue=H>0?S+w:S+w+1,he=f,ge=f,pe=0,Oe=0;const Ee=Math.abs(Y),Pe=[];for(;pe+Oe<=Ee;){if(ue+=H,ue<S||ue>=I)return null;if(ge=he,Pe.push(he),he=N[ue],he===void 0){const st=new l.pointGeometry(D.getx(ue),D.gety(ue)),Lt=Xt(st,R);if(Lt.signedDistanceFromCamera>0)he=N[ue]=Lt.point;else{const rr=ue-H;he=Xi(pe===0?y:new l.pointGeometry(D.getx(rr),D.gety(rr)),st,ge,Ee-pe+1,R)}}pe+=Oe,Oe=ge.dist(he)}const Ge=(Ee-pe)/Oe,et=he.sub(ge),ze=et.mult(Ge)._add(ge);ze._add(et._unit()._perp()._mult(a*H));const yt=J+Math.atan2(he.y-ge.y,he.x-ge.x);return Pe.push(ze),{point:ze,angle:q?yt:0,path:Pe}}const Di=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Kr(p,r){for(let a=0;a<p;a++){const h=r.length;r.resize(h+4),r.float32.set(Di,3*h)}}function Sr(p,r,a){const h=r[0],f=r[1];return p[0]=a[0]*h+a[4]*f+a[12],p[1]=a[1]*h+a[5]*f+a[13],p[3]=a[3]*h+a[7]*f+a[15],p}const Yn=100;class Ji{constructor(r,a=new Sn(r.width+200,r.height+200,25),h=new Sn(r.width+200,r.height+200,25)){this.transform=r,this.grid=a,this.ignoredGrid=h,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Yn,this.screenBottomBoundary=r.height+Yn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200}placeCollisionBox(r,a,h,f,y){const w=this.projectAndGetPerspectiveRatio(f,r.anchorPointX,r.anchorPointY),S=h*w.perspectiveRatio,I=r.x1*S+w.point.x,D=r.y1*S+w.point.y,R=r.x2*S+w.point.x,N=r.y2*S+w.point.y;return!this.isInsideGrid(I,D,R,N)||a!=="always"&&this.grid.hitTest(I,D,R,N,a,y)?{box:[],offscreen:!1}:{box:[I,D,R,N],offscreen:this.isOffscreen(I,D,R,N)}}placeCollisionCircles(r,a,h,f,y,w,S,I,D,R,N,q,Y){const H=[],J=new l.pointGeometry(a.anchorX,a.anchorY),ue=Xt(J,w),he=Ke(this.transform.cameraToCenterDistance,ue.signedDistanceFromCamera),ge=(R?y/he:y*he)/l.ONE_EM,pe=Xt(J,S).point,Oe=Tn(ge,f,a.lineOffsetX*ge,a.lineOffsetY*ge,!1,pe,J,a,h,S,{},!1);let Ee=!1,Pe=!1,Ge=!0;if(Oe){const et=.5*q*he+Y,ze=new l.pointGeometry(-100,-100),yt=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),st=new Hr,Lt=Oe.first,rr=Oe.last;let Kt=[];for(let Bt=Lt.path.length-1;Bt>=1;Bt--)Kt.push(Lt.path[Bt]);for(let Bt=1;Bt<rr.path.length;Bt++)Kt.push(rr.path[Bt]);const er=2.5*et;if(I){const Bt=Kt.map(sr=>Xt(sr,I));Kt=Bt.some(sr=>sr.signedDistanceFromCamera<=0)?[]:Bt.map(sr=>sr.point)}let Nr=[];if(Kt.length>0){const Bt=Kt[0].clone(),sr=Kt[0].clone();for(let xr=1;xr<Kt.length;xr++)Bt.x=Math.min(Bt.x,Kt[xr].x),Bt.y=Math.min(Bt.y,Kt[xr].y),sr.x=Math.max(sr.x,Kt[xr].x),sr.y=Math.max(sr.y,Kt[xr].y);Nr=Bt.x>=ze.x&&sr.x<=yt.x&&Bt.y>=ze.y&&sr.y<=yt.y?[Kt]:sr.x<ze.x||Bt.x>yt.x||sr.y<ze.y||Bt.y>yt.y?[]:l.clipLine([Kt],ze.x,ze.y,yt.x,yt.y)}for(const Bt of Nr){st.reset(Bt,.25*et);let sr=0;sr=st.length<=.5*et?1:Math.ceil(st.paddedLength/er)+1;for(let xr=0;xr<sr;xr++){const dn=xr/Math.max(sr-1,1),Un=st.lerp(dn),ei=Un.x+Yn,ti=Un.y+Yn;H.push(ei,ti,et,0);const Vi=ei-et,Rn=ti-et,bi=ei+et,so=ti+et;if(Ge=Ge&&this.isOffscreen(Vi,Rn,bi,so),Pe=Pe||this.isInsideGrid(Vi,Rn,bi,so),r!=="always"&&this.grid.hitTestCircle(ei,ti,et,r,N)&&(Ee=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Ee}}}}return{circles:!D&&Ee||!Pe?[]:H,offscreen:Ge,collisionDetected:Ee}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let h=1/0,f=1/0,y=-1/0,w=-1/0;for(const R of r){const N=new l.pointGeometry(R.x+Yn,R.y+Yn);h=Math.min(h,N.x),f=Math.min(f,N.y),y=Math.max(y,N.x),w=Math.max(w,N.y),a.push(N)}const S=this.grid.query(h,f,y,w).concat(this.ignoredGrid.query(h,f,y,w)),I={},D={};for(const R of S){const N=R.key;if(I[N.bucketInstanceId]===void 0&&(I[N.bucketInstanceId]={}),I[N.bucketInstanceId][N.featureIndex])continue;const q=[new l.pointGeometry(R.x1,R.y1),new l.pointGeometry(R.x2,R.y1),new l.pointGeometry(R.x2,R.y2),new l.pointGeometry(R.x1,R.y2)];l.polygonIntersectsPolygon(a,q)&&(I[N.bucketInstanceId][N.featureIndex]=!0,D[N.bucketInstanceId]===void 0&&(D[N.bucketInstanceId]=[]),D[N.bucketInstanceId].push(N.featureIndex))}return D}insertCollisionBox(r,a,h,f,y,w){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:y,collisionGroupID:w,overlapMode:a},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,a,h,f,y,w){const S=h?this.ignoredGrid:this.grid,I={bucketInstanceId:f,featureIndex:y,collisionGroupID:w,overlapMode:a};for(let D=0;D<r.length;D+=4)S.insertCircle(I,r[D],r[D+1],r[D+2])}projectAndGetPerspectiveRatio(r,a,h){const f=[a,h,0,1];return Sr(f,f,r),{point:new l.pointGeometry((f[0]/f[3]+1)/2*this.transform.width+Yn,(-f[1]/f[3]+1)/2*this.transform.height+Yn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/f[3]*.5}}isOffscreen(r,a,h,f){return h<Yn||r>=this.screenRightBoundary||f<Yn||a>this.screenBottomBoundary}isInsideGrid(r,a,h,f){return h>=0&&r<this.gridRightBoundary&&f>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const r=l.identity([]);return l.translate(r,r,[-100,-100,0]),r}}function rn(p,r,a){return r*(l.EXTENT/(p.tileSize*Math.pow(2,a-p.tileID.overscaledZ)))}class ai{constructor(r,a,h,f){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?a:-a))):f&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class li{constructor(r,a,h,f,y){this.text=new ai(r?r.text:null,a,h,y),this.icon=new ai(r?r.icon:null,a,f,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class as{constructor(r,a,h){this.text=r,this.icon=a,this.skipFade=h}}class Eo{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class So{constructor(r,a,h,f,y){this.bucketInstanceId=r,this.featureIndex=a,this.sourceLayerIndex=h,this.bucketIndex=f,this.tileID=y}}class G{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const a=++this.maxGroupID;this.collisionGroups[r]={ID:a,predicate:h=>h.collisionGroupID===a}}return this.collisionGroups[r]}}function k(p,r,a,h,f){const{horizontalAlign:y,verticalAlign:w}=l.getAnchorAlignment(p),S=-(y-.5)*r,I=-(w-.5)*a,D=l.evaluateVariableOffset(p,h);return new l.pointGeometry(S+D[0]*f,I+D[1]*f)}function M(p,r,a,h,f,y){const{x1:w,x2:S,y1:I,y2:D,anchorPointX:R,anchorPointY:N}=p,q=new l.pointGeometry(r,a);return h&&q._rotate(f?y:-y),{x1:w+q.x,y1:I+q.y,x2:S+q.x,y2:D+q.y,anchorPointX:R,anchorPointY:N}}class U{constructor(r,a,h,f){this.transform=r.clone(),this.collisionIndex=new Ji(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=a,this.retainedQueryData={},this.collisionGroups=new G(h),this.collisionCircleArrays={},this.prevPlacement=f,f&&(f.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,a,h,f){const y=h.getBucket(a),w=h.latestFeatureIndex;if(!y||!w||a.id!==y.layerIds[0])return;const S=h.collisionBoxArray,I=y.layers[0].layout,D=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),R=h.tileSize/l.EXTENT,N=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),q=I.get("text-pitch-alignment")==="map",Y=I.get("text-rotation-alignment")==="map",H=rn(h,1,this.transform.zoom),J=Gr(N,q,Y,this.transform,H);let ue=null;if(q){const ge=vi(N,q,Y,this.transform,H);ue=l.multiply([],this.transform.labelPlaneMatrix,ge)}this.retainedQueryData[y.bucketInstanceId]=new So(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,h.tileID);const he={bucket:y,layout:I,posMatrix:N,textLabelPlaneMatrix:J,labelToScreenMatrix:ue,scale:D,textPixelRatio:R,holdingForFade:h.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(f)for(const ge of y.sortKeyRanges){const{sortKey:pe,symbolInstanceStart:Oe,symbolInstanceEnd:Ee}=ge;r.push({sortKey:pe,symbolInstanceStart:Oe,symbolInstanceEnd:Ee,parameters:he})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:he})}attemptAnchorPlacement(r,a,h,f,y,w,S,I,D,R,N,q,Y,H,J){const ue=[q.textOffset0,q.textOffset1],he=k(r,h,f,ue,y),ge=this.collisionIndex.placeCollisionBox(M(a,he.x,he.y,w,S,this.transform.angle),N,I,D,R.predicate);if((!J||this.collisionIndex.placeCollisionBox(M(J,he.x,he.y,w,S,this.transform.angle),N,I,D,R.predicate).box.length!==0)&&ge.box.length>0){let pe;return this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(pe=this.prevPlacement.variableOffsets[q.crossTileID].anchor),this.variableOffsets[q.crossTileID]={textOffset:ue,width:h,height:f,anchor:r,textBoxScale:y,prevAnchor:pe},this.markUsedJustification(Y,r,q,H),Y.allowVerticalPlacement&&(this.markUsedOrientation(Y,H,q),this.placedOrientations[q.crossTileID]=H),{shift:he,placedGlyphBoxes:ge}}}placeLayerBucketPart(r,a,h){const{bucket:f,layout:y,posMatrix:w,textLabelPlaneMatrix:S,labelToScreenMatrix:I,textPixelRatio:D,holdingForFade:R,collisionBoxArray:N,partiallyEvaluatedTextSize:q,collisionGroup:Y}=r.parameters,H=y.get("text-optional"),J=y.get("icon-optional"),ue=l.getOverlapMode(y,"text-overlap","text-allow-overlap"),he=ue==="always",ge=l.getOverlapMode(y,"icon-overlap","icon-allow-overlap"),pe=ge==="always",Oe=y.get("text-rotation-alignment")==="map",Ee=y.get("text-pitch-alignment")==="map",Pe=y.get("icon-text-fit")!=="none",Ge=y.get("symbol-z-order")==="viewport-y",et=he&&(pe||!f.hasIconData()||J),ze=pe&&(he||!f.hasTextData()||H);!f.collisionArrays&&N&&f.deserializeCollisionBoxes(N);const yt=(st,Lt)=>{if(a[st.crossTileID])return;if(R)return void(this.placements[st.crossTileID]=new as(!1,!1,!1));let rr=!1,Kt=!1,er=!0,Nr=null,Bt={box:null,offscreen:null},sr={box:null,offscreen:null},xr=null,dn=null,Un=null,ei=0,ti=0,Vi=0;Lt.textFeatureIndex?ei=Lt.textFeatureIndex:st.useRuntimeCollisionCircles&&(ei=st.featureIndex),Lt.verticalTextFeatureIndex&&(ti=Lt.verticalTextFeatureIndex);const Rn=Lt.textBox;if(Rn){const $n=fr=>{let Jr=l.WritingMode.horizontal;if(f.allowVerticalPlacement&&!fr&&this.prevPlacement){const In=this.prevPlacement.placedOrientations[st.crossTileID];In&&(this.placedOrientations[st.crossTileID]=In,Jr=In,this.markUsedOrientation(f,Jr,st))}return Jr},ar=(fr,Jr)=>{if(f.allowVerticalPlacement&&st.numVerticalGlyphVertices>0&&Lt.verticalTextBox){for(const In of f.writingModes)if(In===l.WritingMode.vertical?(Bt=Jr(),sr=Bt):Bt=fr(),Bt&&Bt.box&&Bt.box.length)break}else Bt=fr()};if(y.get("text-variable-anchor")){let fr=y.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[st.crossTileID]){const Dr=this.prevPlacement.variableOffsets[st.crossTileID];fr.indexOf(Dr.anchor)>0&&(fr=fr.filter(ao=>ao!==Dr.anchor),fr.unshift(Dr.anchor))}const Jr=(Dr,ao,wi)=>{const xa=Dr.x2-Dr.x1,Gl=Dr.y2-Dr.y1,ba=st.textBoxScale,Cu=Pe&&ge==="never"?ao:null;let lo={box:[],offscreen:!1};const wa=ue!=="never"?2*fr.length:fr.length;for(let Ei=0;Ei<wa;++Ei){const Bo=this.attemptAnchorPlacement(fr[Ei%fr.length],Dr,xa,Gl,ba,Oe,Ee,D,w,Y,Ei>=fr.length?ue:"never",st,f,wi,Cu);if(Bo&&(lo=Bo.placedGlyphBoxes,lo&&lo.box&&lo.box.length)){rr=!0,Nr=Bo.shift;break}}return lo};ar(()=>Jr(Rn,Lt.iconBox,l.WritingMode.horizontal),()=>{const Dr=Lt.verticalTextBox;return f.allowVerticalPlacement&&!(Bt&&Bt.box&&Bt.box.length)&&st.numVerticalGlyphVertices>0&&Dr?Jr(Dr,Lt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Bt&&(rr=Bt.box,er=Bt.offscreen);const In=$n(Bt&&Bt.box);if(!rr&&this.prevPlacement){const Dr=this.prevPlacement.variableOffsets[st.crossTileID];Dr&&(this.variableOffsets[st.crossTileID]=Dr,this.markUsedJustification(f,Dr.anchor,st,In))}}else{const fr=(Jr,In)=>{const Dr=this.collisionIndex.placeCollisionBox(Jr,ue,D,w,Y.predicate);return Dr&&Dr.box&&Dr.box.length&&(this.markUsedOrientation(f,In,st),this.placedOrientations[st.crossTileID]=In),Dr};ar(()=>fr(Rn,l.WritingMode.horizontal),()=>{const Jr=Lt.verticalTextBox;return f.allowVerticalPlacement&&st.numVerticalGlyphVertices>0&&Jr?fr(Jr,l.WritingMode.vertical):{box:null,offscreen:null}}),$n(Bt&&Bt.box&&Bt.box.length)}}if(xr=Bt,rr=xr&&xr.box&&xr.box.length>0,er=xr&&xr.offscreen,st.useRuntimeCollisionCircles){const $n=f.text.placedSymbolArray.get(st.centerJustifiedTextSymbolIndex),ar=l.evaluateSizeForFeature(f.textSizeData,q,$n),fr=y.get("text-padding");dn=this.collisionIndex.placeCollisionCircles(ue,$n,f.lineVertexArray,f.glyphOffsetArray,ar,w,S,I,h,Ee,Y.predicate,st.collisionCircleDiameter,fr),rr=he||dn.circles.length>0&&!dn.collisionDetected,er=er&&dn.offscreen}if(Lt.iconFeatureIndex&&(Vi=Lt.iconFeatureIndex),Lt.iconBox){const $n=ar=>{const fr=Pe&&Nr?M(ar,Nr.x,Nr.y,Oe,Ee,this.transform.angle):ar;return this.collisionIndex.placeCollisionBox(fr,ge,D,w,Y.predicate)};sr&&sr.box&&sr.box.length&&Lt.verticalIconBox?(Un=$n(Lt.verticalIconBox),Kt=Un.box.length>0):(Un=$n(Lt.iconBox),Kt=Un.box.length>0),er=er&&Un.offscreen}const bi=H||st.numHorizontalGlyphVertices===0&&st.numVerticalGlyphVertices===0,so=J||st.numIconVertices===0;if(bi||so?so?bi||(Kt=Kt&&rr):rr=Kt&&rr:Kt=rr=Kt&&rr,rr&&xr&&xr.box&&this.collisionIndex.insertCollisionBox(xr.box,ue,y.get("text-ignore-placement"),f.bucketInstanceId,sr&&sr.box&&ti?ti:ei,Y.ID),Kt&&Un&&this.collisionIndex.insertCollisionBox(Un.box,ge,y.get("icon-ignore-placement"),f.bucketInstanceId,Vi,Y.ID),dn&&(rr&&this.collisionIndex.insertCollisionCircles(dn.circles,ue,y.get("text-ignore-placement"),f.bucketInstanceId,ei,Y.ID),h)){const $n=f.bucketInstanceId;let ar=this.collisionCircleArrays[$n];ar===void 0&&(ar=this.collisionCircleArrays[$n]=new Eo);for(let fr=0;fr<dn.circles.length;fr+=4)ar.circles.push(dn.circles[fr+0]),ar.circles.push(dn.circles[fr+1]),ar.circles.push(dn.circles[fr+2]),ar.circles.push(dn.collisionDetected?1:0)}this.placements[st.crossTileID]=new as(rr||et,Kt||ze,er||f.justReloaded),a[st.crossTileID]=!0};if(Ge){const st=f.getSortedSymbolIndexes(this.transform.angle);for(let Lt=st.length-1;Lt>=0;--Lt){const rr=st[Lt];yt(f.symbolInstances.get(rr),f.collisionArrays[rr])}}else for(let st=r.symbolInstanceStart;st<r.symbolInstanceEnd;st++)yt(f.symbolInstances.get(st),f.collisionArrays[st]);if(h&&f.bucketInstanceId in this.collisionCircleArrays){const st=this.collisionCircleArrays[f.bucketInstanceId];l.invert(st.invProjMatrix,w),st.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}markUsedJustification(r,a,h,f){let y;y=f===l.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(a)];const w=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const S of w)S>=0&&(r.text.placedSymbolArray.get(S).crossTileID=y>=0&&S!==y?0:h.crossTileID)}markUsedOrientation(r,a,h){const f=a===l.WritingMode.horizontal||a===l.WritingMode.horizontalOnly?a:0,y=a===l.WritingMode.vertical?a:0,w=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const S of w)r.text.placedSymbolArray.get(S).placedOrientation=f;h.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let h=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const f=a?a.symbolFadeChange(r):1,y=a?a.opacities:{},w=a?a.variableOffsets:{},S=a?a.placedOrientations:{};for(const I in this.placements){const D=this.placements[I],R=y[I];R?(this.opacities[I]=new li(R,f,D.text,D.icon),h=h||D.text!==R.text.placed||D.icon!==R.icon.placed):(this.opacities[I]=new li(null,f,D.text,D.icon,D.skipFade),h=h||D.text||D.icon)}for(const I in y){const D=y[I];if(!this.opacities[I]){const R=new li(D,f,!1,!1);R.isHidden()||(this.opacities[I]=R,h=h||D.text.placed||D.icon.placed)}}for(const I in w)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=w[I]);for(const I in S)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=S[I]);h?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:r)}updateLayerOpacities(r,a){const h={};for(const f of a){const y=f.getBucket(r);y&&f.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,h,f.collisionBoxArray)}}updateBucketOpacities(r,a,h){r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const f=r.layers[0].layout,y=new li(null,0,!1,!1,!0),w=f.get("text-allow-overlap"),S=f.get("icon-allow-overlap"),I=f.get("text-variable-anchor"),D=f.get("text-rotation-alignment")==="map",R=f.get("text-pitch-alignment")==="map",N=f.get("icon-text-fit")!=="none",q=new li(null,0,w&&(S||!r.hasIconData()||f.get("icon-optional")),S&&(w||!r.hasTextData()||f.get("text-optional")),!0);!r.collisionArrays&&h&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(h);const Y=(H,J,ue)=>{for(let he=0;he<J/4;he++)H.opacityVertexArray.emplaceBack(ue)};for(let H=0;H<r.symbolInstances.length;H++){const J=r.symbolInstances.get(H),{numHorizontalGlyphVertices:ue,numVerticalGlyphVertices:he,crossTileID:ge}=J;let pe=this.opacities[ge];a[ge]?pe=y:pe||(pe=q,this.opacities[ge]=pe),a[ge]=!0;const Oe=J.numIconVertices>0,Ee=this.placedOrientations[J.crossTileID],Pe=Ee===l.WritingMode.vertical,Ge=Ee===l.WritingMode.horizontal||Ee===l.WritingMode.horizontalOnly;if(ue>0||he>0){const et=we(pe.text);Y(r.text,ue,Pe?xt:et),Y(r.text,he,Ge?xt:et);const ze=pe.text.isHidden();[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach(Lt=>{Lt>=0&&(r.text.placedSymbolArray.get(Lt).hidden=ze||Pe?1:0)}),J.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).hidden=ze||Ge?1:0);const yt=this.variableOffsets[J.crossTileID];yt&&this.markUsedJustification(r,yt.anchor,J,Ee);const st=this.placedOrientations[J.crossTileID];st&&(this.markUsedJustification(r,"left",J,st),this.markUsedOrientation(r,st,J))}if(Oe){const et=we(pe.icon),ze=!(N&&J.verticalPlacedIconSymbolIndex&&Pe);J.placedIconSymbolIndex>=0&&(Y(r.icon,J.numIconVertices,ze?et:xt),r.icon.placedSymbolArray.get(J.placedIconSymbolIndex).hidden=pe.icon.isHidden()),J.verticalPlacedIconSymbolIndex>=0&&(Y(r.icon,J.numVerticalIconVertices,ze?xt:et),r.icon.placedSymbolArray.get(J.verticalPlacedIconSymbolIndex).hidden=pe.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const et=r.collisionArrays[H];if(et){let ze=new l.pointGeometry(0,0);if(et.textBox||et.verticalTextBox){let st=!0;if(I){const Lt=this.variableOffsets[ge];Lt?(ze=k(Lt.anchor,Lt.width,Lt.height,Lt.textOffset,Lt.textBoxScale),D&&ze._rotate(R?this.transform.angle:-this.transform.angle)):st=!1}et.textBox&&W(r.textCollisionBox.collisionVertexArray,pe.text.placed,!st||Pe,ze.x,ze.y),et.verticalTextBox&&W(r.textCollisionBox.collisionVertexArray,pe.text.placed,!st||Ge,ze.x,ze.y)}const yt=Boolean(!Ge&&et.verticalIconBox);et.iconBox&&W(r.iconCollisionBox.collisionVertexArray,pe.icon.placed,yt,N?ze.x:0,N?ze.y:0),et.verticalIconBox&&W(r.iconCollisionBox.collisionVertexArray,pe.icon.placed,!yt,N?ze.x:0,N?ze.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.bucketInstanceId in this.collisionCircleArrays){const H=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=H.invProjMatrix,r.placementViewportMatrix=H.viewportMatrix,r.collisionCircleArray=H.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,a){const h=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*h>r}setStale(){this.stale=!0}}function W(p,r,a,h,f){p.emplaceBack(r?1:0,a?1:0,h||0,f||0),p.emplaceBack(r?1:0,a?1:0,h||0,f||0),p.emplaceBack(r?1:0,a?1:0,h||0,f||0),p.emplaceBack(r?1:0,a?1:0,h||0,f||0)}const X=Math.pow(2,25),ae=Math.pow(2,24),re=Math.pow(2,17),ie=Math.pow(2,16),le=Math.pow(2,9),Ie=Math.pow(2,8),Ne=Math.pow(2,1);function we(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const r=p.placed?1:0,a=Math.floor(127*p.opacity);return a*X+r*ae+a*re+r*ie+a*le+r*Ie+a*Ne+r}const xt=0;class ht{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,a,h,f,y){const w=this._bucketParts;for(;this._currentTileIndex<r.length;)if(a.getBucketParts(w,f,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((S,I)=>S.sortKey-I.sortKey));this._currentPartIndex<w.length;)if(a.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,y())return!0;return!1}}class Et{constructor(r,a,h,f,y,w,S){this.placement=new U(r,y,w,S),this._currentPlacementIndex=a.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=f,this._done=!1}isDone(){return this._done}continuePlacement(r,a,h){const f=l.exported.now(),y=()=>{const w=l.exported.now()-f;return!this._forceFullPlacement&&w>2};for(;this._currentPlacementIndex>=0;){const w=a[r[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=S)&&(!w.maxzoom||w.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new ht(w)),this._inProgressLayer.continuePlacement(h[w.source],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Pt=512/l.EXTENT/2;class or{constructor(r,a,h){this.tileID=r,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(let f=0;f<a.length;f++){const y=a.get(f),w=y.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:y.crossTileID,coord:this.getScaledCoordinates(y,r)})}}getScaledCoordinates(r,a){const h=Pt/Math.pow(2,a.canonical.z-this.tileID.canonical.z);return{x:Math.floor((a.canonical.x*l.EXTENT+r.anchorX)*h),y:Math.floor((a.canonical.y*l.EXTENT+r.anchorY)*h)}}findMatches(r,a,h){const f=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let y=0;y<r.length;y++){const w=r.get(y);if(w.crossTileID)continue;const S=this.indexedSymbolInstances[w.key];if(!S)continue;const I=this.getScaledCoordinates(w,a);for(const D of S)if(Math.abs(D.coord.x-I.x)<=f&&Math.abs(D.coord.y-I.y)<=f&&!h[D.crossTileID]){h[D.crossTileID]=!0,w.crossTileID=D.crossTileID;break}}}}class Qt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Wt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const a=Math.round((r-this.lng)/360);if(a!==0)for(const h in this.indexes){const f=this.indexes[h],y={};for(const w in f){const S=f[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+a),y[S.tileID.key]=S}this.indexes[h]=y}this.lng=r}addBucket(r,a,h){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let y=0;y<a.symbolInstances.length;y++)a.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const f=this.usedCrossTileIDs[r.overscaledZ];for(const y in this.indexes){const w=this.indexes[y];if(Number(y)>r.overscaledZ)for(const S in w){const I=w[S];I.tileID.isChildOf(r)&&I.findMatches(a.symbolInstances,r,f)}else{const S=w[r.scaledTo(Number(y)).key];S&&S.findMatches(a.symbolInstances,r,f)}}for(let y=0;y<a.symbolInstances.length;y++){const w=a.symbolInstances.get(y);w.crossTileID||(w.crossTileID=h.generate(),f[w.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new or(r,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(r,a){for(const h in a.indexedSymbolInstances)for(const f of a.indexedSymbolInstances[h])delete this.usedCrossTileIDs[r][f.crossTileID]}removeStaleBuckets(r){let a=!1;for(const h in this.indexes){const f=this.indexes[h];for(const y in f)r[f[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,f[y]),delete f[y],a=!0)}return a}}class Gt{constructor(){this.layerIndexes={},this.crossTileIDs=new Qt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,a,h){let f=this.layerIndexes[r.id];f===void 0&&(f=this.layerIndexes[r.id]=new Wt);let y=!1;const w={};f.handleWrapJump(h);for(const S of a){const I=S.getBucket(r);I&&r.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(S.tileID,I,this.crossTileIDs)&&(y=!0),w[I.bucketInstanceId]=!0)}return f.removeStaleBuckets(w)&&(y=!0),y}pruneUnusedLayers(r){const a={};r.forEach(h=>{a[h]=!0});for(const h in this.layerIndexes)a[h]||delete this.layerIndexes[h]}}const Vt=(p,r)=>l.emitValidationErrors(p,r&&r.filter(a=>a.identifier!=="source.canvas")),Zr=l.pick(Ye,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Vr=l.pick(Ye,["setCenter","setZoom","setBearing","setPitch"]),an=function(){const p={},r=l.spec.$version;for(const a in l.spec.$root){const h=l.spec.$root[a];if(h.required){let f=null;f=a==="version"?r:h.type==="array"?[]:{},f!=null&&(p[a]=f)}}return p}();class hn extends l.Evented{constructor(r,a={}){super(),this.map=r,this.dispatcher=new St(qe(),this),this.imageManager=new Me,this.imageManager.setEventedParent(this),this.glyphManager=new rt(r._requestManager,a.localIdeographFontFamily),this.lineAtlas=new nt(256,512),this.crossTileSymbolIndex=new Gt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const h=this;this._rtlTextPluginCallback=hn.registerForPluginStateChange(f=>{h.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:f.pluginStatus,pluginURL:f.pluginURL},(y,w)=>{if(l.triggerPluginCompletionEvent(y),w&&w.every(S=>S))for(const S in h.sourceCaches)h.sourceCaches[S].reload()})}),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const y=this.sourceCaches[f.sourceId];if(!y)return;const w=y.getSource();if(w&&w.vectorLayerIds)for(const S in this._layers){const I=this._layers[S];I.source===w.id&&this._validateLayer(I)}})}loadURL(r,a={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const h=typeof a.validate!="boolean"||a.validate,f=this.map._requestManager.transformRequest(r,l.ResourceType.Style);this._request=l.getJSON(f,(y,w)=>{this._request=null,y?this.fire(new l.ErrorEvent(y)):w&&this._load(w,h)})}loadJSON(r,a={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(r,a.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(an,!1)}_load(r,a){if(a&&Vt(this,l.validateStyle(r)))return;this._loaded=!0,this.stylesheet=r;for(const f in r.sources)this.addSource(f,r.sources[f],{validate:!1});r.sprite?this._loadSprite(r.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(r.glyphs);const h=Ze(this.stylesheet.layers);this._order=h.map(f=>f.id),this._layers={},this._serializedLayers={};for(let f of h)f=l.createStyleLayer(f),f.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=f,this._serializedLayers[f.id]=f.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Te(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}_loadSprite(r){this._spriteRequest=function(a,h,f,y){let w,S,I;const D=f>1?"@2x":"";let R=l.getJSON(h.transformRequest(h.normalizeSpriteURL(a,D,".json"),l.ResourceType.SpriteJSON),(Y,H)=>{R=null,I||(I=Y,w=H,q())}),N=l.getImage(h.transformRequest(h.normalizeSpriteURL(a,D,".png"),l.ResourceType.SpriteImage),(Y,H)=>{N=null,I||(I=Y,S=H,q())});function q(){if(I)y(I);else if(w&&S){const Y=l.exported.getImageData(S),H={};for(const J in w){const{width:ue,height:he,x:ge,y:pe,sdf:Oe,pixelRatio:Ee,stretchX:Pe,stretchY:Ge,content:et}=w[J],ze=new l.RGBAImage({width:ue,height:he});l.RGBAImage.copy(Y,ze,{x:ge,y:pe},{x:0,y:0},{width:ue,height:he}),H[J]={data:ze,pixelRatio:Ee,sdf:Oe,stretchX:Pe,stretchY:Ge,content:et}}y(null,H)}}return{cancel(){R&&(R.cancel(),R=null),N&&(N.cancel(),N=null)}}}(r,this.map._requestManager,this.map.getPixelRatio(),(a,h)=>{if(this._spriteRequest=null,a)this.fire(new l.ErrorEvent(a));else if(h)for(const f in h)this.imageManager.addImage(f,h[f]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(r){const a=this.sourceCaches[r.source];if(!a)return;const h=r.sourceLayer;if(!h)return;const f=a.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(h)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${h}" does not exist on source "${f.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(r){const a=[];for(const h of r){const f=this._layers[h];f.type!=="custom"&&a.push(f.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const a=this._changed;if(this._changed){const f=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(f.length||y.length)&&this._updateWorkerLayers(f,y);for(const w in this._updatedSources){const S=this._updatedSources[w];S==="reload"?this._reloadSource(w):S==="clear"&&this._clearSource(w)}this._updateTilesForChangedImages();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const h={};for(const f in this.sourceCaches){const y=this.sourceCaches[f];h[f]=y.used,y.used=!1}for(const f of this._order){const y=this._layers[f];y.recalculate(r,this._availableImages),!y.isHidden(r.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const f in h){const y=this.sourceCaches[f];h[f]!==y.used&&y.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(r),this.z=r.zoom,a&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateWorkerLayers(r,a){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(r),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(r){if(this._checkLoaded(),Vt(this,l.validateStyle(r)))return!1;(r=l.clone$1(r)).layers=Ze(r.layers);const a=function(f,y){if(!f)return[{command:Ye.setStyle,args:[y]}];let w=[];try{if(!F(f.version,y.version))return[{command:Ye.setStyle,args:[y]}];F(f.center,y.center)||w.push({command:Ye.setCenter,args:[y.center]}),F(f.zoom,y.zoom)||w.push({command:Ye.setZoom,args:[y.zoom]}),F(f.bearing,y.bearing)||w.push({command:Ye.setBearing,args:[y.bearing]}),F(f.pitch,y.pitch)||w.push({command:Ye.setPitch,args:[y.pitch]}),F(f.sprite,y.sprite)||w.push({command:Ye.setSprite,args:[y.sprite]}),F(f.glyphs,y.glyphs)||w.push({command:Ye.setGlyphs,args:[y.glyphs]}),F(f.transition,y.transition)||w.push({command:Ye.setTransition,args:[y.transition]}),F(f.light,y.light)||w.push({command:Ye.setLight,args:[y.light]});const S={},I=[];(function(R,N,q,Y){let H;for(H in N=N||{},R=R||{})Object.prototype.hasOwnProperty.call(R,H)&&(Object.prototype.hasOwnProperty.call(N,H)||_t(H,q,Y));for(H in N)Object.prototype.hasOwnProperty.call(N,H)&&(Object.prototype.hasOwnProperty.call(R,H)?F(R[H],N[H])||(R[H].type==="geojson"&&N[H].type==="geojson"&&jt(R,N,H)?q.push({command:Ye.setGeoJSONSourceData,args:[H,N[H].data]}):At(H,N,q,Y)):vt(H,N,q))})(f.sources,y.sources,I,S);const D=[];f.layers&&f.layers.forEach(R=>{S[R.source]?w.push({command:Ye.removeLayer,args:[R.id]}):D.push(R)}),w=w.concat(I),function(R,N,q){N=N||[];const Y=(R=R||[]).map($e),H=N.map($e),J=R.reduce(ur,{}),ue=N.reduce(ur,{}),he=Y.slice(),ge=Object.create(null);let pe,Oe,Ee,Pe,Ge,et,ze;for(pe=0,Oe=0;pe<Y.length;pe++)Ee=Y[pe],Object.prototype.hasOwnProperty.call(ue,Ee)?Oe++:(q.push({command:Ye.removeLayer,args:[Ee]}),he.splice(he.indexOf(Ee,Oe),1));for(pe=0,Oe=0;pe<H.length;pe++)Ee=H[H.length-1-pe],he[he.length-1-pe]!==Ee&&(Object.prototype.hasOwnProperty.call(J,Ee)?(q.push({command:Ye.removeLayer,args:[Ee]}),he.splice(he.lastIndexOf(Ee,he.length-Oe),1)):Oe++,et=he[he.length-pe],q.push({command:Ye.addLayer,args:[ue[Ee],et]}),he.splice(he.length-pe,0,Ee),ge[Ee]=!0);for(pe=0;pe<H.length;pe++)if(Ee=H[pe],Pe=J[Ee],Ge=ue[Ee],!ge[Ee]&&!F(Pe,Ge))if(F(Pe.source,Ge.source)&&F(Pe["source-layer"],Ge["source-layer"])&&F(Pe.type,Ge.type)){for(ze in ve(Pe.layout,Ge.layout,q,Ee,null,Ye.setLayoutProperty),ve(Pe.paint,Ge.paint,q,Ee,null,Ye.setPaintProperty),F(Pe.filter,Ge.filter)||q.push({command:Ye.setFilter,args:[Ee,Ge.filter]}),F(Pe.minzoom,Ge.minzoom)&&F(Pe.maxzoom,Ge.maxzoom)||q.push({command:Ye.setLayerZoomRange,args:[Ee,Ge.minzoom,Ge.maxzoom]}),Pe)Object.prototype.hasOwnProperty.call(Pe,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?ve(Pe[ze],Ge[ze],q,Ee,ze.slice(6),Ye.setPaintProperty):F(Pe[ze],Ge[ze])||q.push({command:Ye.setLayerProperty,args:[Ee,ze,Ge[ze]]}));for(ze in Ge)Object.prototype.hasOwnProperty.call(Ge,ze)&&!Object.prototype.hasOwnProperty.call(Pe,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?ve(Pe[ze],Ge[ze],q,Ee,ze.slice(6),Ye.setPaintProperty):F(Pe[ze],Ge[ze])||q.push({command:Ye.setLayerProperty,args:[Ee,ze,Ge[ze]]}))}else q.push({command:Ye.removeLayer,args:[Ee]}),et=he[he.lastIndexOf(Ee)+1],q.push({command:Ye.addLayer,args:[Ge,et]})}(D,y.layers,w)}catch(S){console.warn("Unable to compute style diff:",S),w=[{command:Ye.setStyle,args:[y]}]}return w}(this.serialize(),r).filter(f=>!(f.command in Vr));if(a.length===0)return!1;const h=a.filter(f=>!(f.command in Zr));if(h.length>0)throw new Error(`Unimplemented: ${h.map(f=>f.command).join(", ")}.`);return a.forEach(f=>{f.command!=="setTransition"&&this[f.command].apply(this,f.args)}),this.stylesheet=r,!0}addImage(r,a){if(this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,a),this._afterImageUpdated(r)}updateImage(r,a){this.imageManager.updateImage(r,a)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,a,h={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(l.validateStyle.source,`sources.${r}`,a,null,h))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const f=this.sourceCaches[r]=new Z(r,a,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:f.serialize(),sourceId:r})),f.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===r)return this.fire(new l.ErrorEvent(new Error(`Source "${r}" cannot be removed while layer "${h}" is using it.`)));const a=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],a.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,a){this._checkLoaded(),this.sourceCaches[r].getSource().setData(a),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,a,h={}){this._checkLoaded();const f=r.id;if(this.getLayer(f))return void this.fire(new l.ErrorEvent(new Error(`Layer "${f}" already exists on this map.`)));let y;if(r.type==="custom"){if(Vt(this,l.validateCustomStyleLayer(r)))return;y=l.createStyleLayer(r)}else{if(typeof r.source=="object"&&(this.addSource(f,r.source),r=l.clone$1(r),r=l.extend(r,{source:f})),this._validate(l.validateStyle.layer,`layers.${f}`,r,{arrayIndex:-1},h))return;y=l.createStyleLayer(r),this._validateLayer(y),y.setEventedParent(this,{layer:{id:f}}),this._serializedLayers[y.id]=y.serialize()}const w=a?this._order.indexOf(a):this._order.length;if(a&&w===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${f}" before non-existing layer "${a}".`)));else{if(this._order.splice(w,0,f),this._layerOrderChanged=!0,this._layers[f]=y,this._removedLayers[f]&&y.source&&y.type!=="custom"){const S=this._removedLayers[f];delete this._removedLayers[f],S.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(r,a){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===a)return;const h=this._order.indexOf(r);this._order.splice(h,1);const f=a?this._order.indexOf(a):this._order.length;a&&f===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${r}" before non-existing layer "${a}".`))):(this._order.splice(f,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const a=this._layers[r];if(!a)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${r}".`)));a.setEventedParent(null);const h=this._order.indexOf(r);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=a,delete this._layers[r],delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],a.onRemove&&a.onRemove(this.map)}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,a,h){this._checkLoaded();const f=this.getLayer(r);f?f.minzoom===a&&f.maxzoom===h||(a!=null&&(f.minzoom=a),h!=null&&(f.maxzoom=h),this._updateLayer(f)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,a,h={}){this._checkLoaded();const f=this.getLayer(r);if(f){if(!F(f.filter,a))return a==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(l.validateStyle.filter,`layers.${f.id}.filter`,a,null,h)||(f.filter=l.clone$1(a),this._updateLayer(f)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.clone$1(this.getLayer(r).filter)}setLayoutProperty(r,a,h,f={}){this._checkLoaded();const y=this.getLayer(r);y?F(y.getLayoutProperty(a),h)||(y.setLayoutProperty(a,h,f),this._updateLayer(y)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,a){const h=this.getLayer(r);if(h)return h.getLayoutProperty(a);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,a,h,f={}){this._checkLoaded();const y=this.getLayer(r);y?F(y.getPaintProperty(a),h)||(y.setPaintProperty(a,h,f)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,a){return this.getLayer(r).getPaintProperty(a)}setFeatureState(r,a){this._checkLoaded();const h=r.source,f=r.sourceLayer,y=this.sourceCaches[h];if(y===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const w=y.getSource().type;w==="geojson"&&f?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||f?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),y.setFeatureState(f,r.id,a)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,a){this._checkLoaded();const h=r.source,f=this.sourceCaches[h];if(f===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const y=f.getSource().type,w=y==="vector"?r.sourceLayer:void 0;y!=="vector"||w?a&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(w,r.id,a):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const a=r.source,h=r.sourceLayer,f=this.sourceCaches[a];if(f!==void 0)return f.getSource().type!=="vector"||h?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),f.getFeatureState(h,r.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,r=>r.serialize()),layers:this._serializeLayers(this._order)},r=>r!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(r){const a=w=>this._layers[w].type==="fill-extrusion",h={},f=[];for(let w=this._order.length-1;w>=0;w--){const S=this._order[w];if(a(S)){h[S]=w;for(const I of r){const D=I[S];if(D)for(const R of D)f.push(R)}}}f.sort((w,S)=>S.intersectionZ-w.intersectionZ);const y=[];for(let w=this._order.length-1;w>=0;w--){const S=this._order[w];if(a(S))for(let I=f.length-1;I>=0;I--){const D=f[I].feature;if(h[D.layer.id]<w)break;y.push(D),f.pop()}else for(const I of r){const D=I[S];if(D)for(const R of D)y.push(R.feature)}}return y}queryRenderedFeatures(r,a,h){a&&a.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",a.filter,null,a);const f={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const w of a.layers){const S=this._layers[w];if(!S)return this.fire(new l.ErrorEvent(new Error(`The layer '${w}' does not exist in the map's style and cannot be queried for features.`))),[];f[S.source]=!0}}const y=[];a.availableImages=this._availableImages;for(const w in this.sourceCaches)a.layers&&!f[w]||y.push(dt(this.sourceCaches[w],this._layers,this._serializedLayers,r,a,h));return this.placement&&y.push(function(w,S,I,D,R,N,q){const Y={},H=N.queryRenderedSymbols(D),J=[];for(const ue of Object.keys(H).map(Number))J.push(q[ue]);J.sort(Zt);for(const ue of J){const he=ue.featureIndex.lookupSymbolFeatures(H[ue.bucketInstanceId],S,ue.bucketIndex,ue.sourceLayerIndex,R.filter,R.layers,R.availableImages,w);for(const ge in he){const pe=Y[ge]=Y[ge]||[],Oe=he[ge];Oe.sort((Ee,Pe)=>{const Ge=ue.featureSortOrder;if(Ge){const et=Ge.indexOf(Ee.featureIndex);return Ge.indexOf(Pe.featureIndex)-et}return Pe.featureIndex-Ee.featureIndex});for(const Ee of Oe)pe.push(Ee)}}for(const ue in Y)Y[ue].forEach(he=>{const ge=he.feature,pe=I[w[ue].source].getFeatureState(ge.layer["source-layer"],ge.id);ge.source=ge.layer.source,ge.layer["source-layer"]&&(ge.sourceLayer=ge.layer["source-layer"]),ge.state=pe});return Y}(this._layers,this._serializedLayers,this.sourceCaches,r,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(r,a){a&&a.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",a.filter,null,a);const h=this.sourceCaches[r];return h?function(f,y){const w=f.getRenderableIds().map(D=>f.getTileByID(D)),S=[],I={};for(let D=0;D<w.length;D++){const R=w[D],N=R.tileID.canonical.key;I[N]||(I[N]=!0,R.querySourceFeatures(S,y))}return S}(h,a):[]}addSourceType(r,a,h){return hn.getSourceType(r)?h(new Error(`A source type called "${r}" already exists.`)):(hn.setSourceType(r,a),a.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:a.workerSourceURL},h):h(null,null))}getLight(){return this.light.getLight()}setLight(r,a={}){this._checkLoaded();const h=this.light.getLight();let f=!1;for(const w in r)if(!F(r[w],h[w])){f=!0;break}if(!f)return;const y={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,a),this.light.updateTransitions(y)}_validate(r,a,h,f,y={}){return(!y||y.validate!==!1)&&Vt(this,r.call(l.validateStyle,l.extend({key:a,style:this.serialize(),value:h,styleSpec:l.spec},f)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const r in this._layers)this._layers[r].setEventedParent(null);for(const r in this.sourceCaches){const a=this.sourceCaches[r];a.setEventedParent(null),a.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const a in this.sourceCaches)this.sourceCaches[a].update(r)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,a,h,f,y=!1){let w=!1,S=!1;const I={};for(const D of this._order){const R=this._layers[D];if(R.type!=="symbol")continue;if(!I[R.source]){const q=this.sourceCaches[R.source];I[R.source]=q.getRenderableIds(!0).map(Y=>q.getTileByID(Y)).sort((Y,H)=>H.tileID.overscaledZ-Y.tileID.overscaledZ||(Y.tileID.isLessThan(H.tileID)?-1:1))}const N=this.crossTileSymbolIndex.addLayer(R,I[R.source],r.center.lng);w=w||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),r.zoom))&&(this.pauseablePlacement=new Et(r,this._order,y,a,h,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),S=!0),w&&this.pauseablePlacement.placement.setStale()),S||w)for(const D of this._order){const R=this._layers[D];R.type==="symbol"&&this.placement.updateLayerOpacities(R,I[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,a,h){this.imageManager.getImages(a.icons,h),this._updateTilesForChangedImages();const f=this.sourceCaches[a.source];f&&f.setDependencies(a.tileID.key,a.type,a.icons)}getGlyphs(r,a,h){this.glyphManager.getGlyphs(a.stacks,h)}getResource(r,a,h){return l.makeRequest(a,h)}}hn.getSourceType=function(p){return at[p]},hn.setSourceType=function(p,r){at[p]=r},hn.registerForPluginStateChange=l.registerForPluginStateChange;var cl=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),ul={prelude:Tr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:Tr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Tr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Tr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Tr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Tr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Tr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Tr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:Tr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Tr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Tr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Tr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Tr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Tr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Tr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Tr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:Tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:Tr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Tr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Tr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:Tr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Tr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function Tr(p,r){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=r.match(/attribute ([\w]+) ([\w]+)/g),f=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=y?y.concat(f):f,S={};return{fragmentSource:p=p.replace(a,(I,D,R,N,q)=>(S[q]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
varying ${R} ${N} ${q};
#else
uniform ${R} ${N} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${R} ${N} ${q} = u_${q};
#endif
`)),vertexSource:r=r.replace(a,(I,D,R,N,q)=>{const Y=N==="float"?"vec2":"vec4",H=q.match(/color/)?"color":Y;return S[q]?D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${R} ${Y} a_${q};
varying ${R} ${N} ${q};
#else
uniform ${R} ${N} u_${q};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${R} ${N} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${H}(a_${q}, u_${q}_t);
#else
    ${R} ${N} ${q} = u_${q};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${R} ${Y} a_${q};
#else
uniform ${R} ${N} u_${q};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${R} ${N} ${q} = a_${q};
#else
    ${R} ${N} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${R} ${N} ${q} = unpack_mix_${H}(a_${q}, u_${q}_t);
#else
    ${R} ${N} ${q} = u_${q};
#endif
`}),staticAttributes:h,staticUniforms:w}}class dd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,a,h,f,y,w,S,I){this.context=r;let D=this.boundPaintVertexBuffers.length!==f.length;for(let R=0;!D&&R<f.length;R++)this.boundPaintVertexBuffers[R]!==f[R]&&(D=!0);r.extVertexArrayObject&&this.vao&&this.boundProgram===a&&this.boundLayoutVertexBuffer===h&&!D&&this.boundIndexBuffer===y&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===S&&this.boundDynamicVertexBuffer2===I?(r.bindVertexArrayOES.set(this.vao),S&&S.bind(),y&&y.dynamicDraw&&y.bind(),I&&I.bind()):this.freshBind(a,h,f,y,w,S,I)}freshBind(r,a,h,f,y,w,S){let I;const D=r.numAttributes,R=this.context,N=R.gl;if(R.extVertexArrayObject)this.vao&&this.destroy(),this.vao=R.extVertexArrayObject.createVertexArrayOES(),R.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=r,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=f,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=S;else{I=R.currentNumAttributes||0;for(let q=D;q<I;q++)N.disableVertexAttribArray(q)}a.enableAttributes(N,r);for(const q of h)q.enableAttributes(N,r);w&&w.enableAttributes(N,r),S&&S.enableAttributes(N,r),a.bind(),a.setVertexAttribPointers(N,r,y);for(const q of h)q.bind(),q.setVertexAttribPointers(N,r,y);w&&(w.bind(),w.setVertexAttribPointers(N,r,y)),f&&f.bind(),S&&(S.bind(),S.setVertexAttribPointers(N,r,y)),R.currentNumAttributes=D}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function hl(p){const r=[];for(let a=0;a<p.length;a++){if(p[a]===null)continue;const h=p[a].split(" ");r.push(h.pop())}return r}class pd{constructor(r,a,h,f,y,w){const S=r.gl;this.program=S.createProgram();const I=hl(h.staticAttributes),D=f?f.getBinderAttributes():[],R=I.concat(D),N=h.staticUniforms?hl(h.staticUniforms):[],q=f?f.getBinderUniforms():[],Y=N.concat(q),H=[];for(const Ee of Y)H.indexOf(Ee)<0&&H.push(Ee);const J=f?f.defines():[];w&&J.push("#define OVERDRAW_INSPECTOR;");const ue=J.concat(ul.prelude.fragmentSource,h.fragmentSource).join(`
`),he=J.concat(ul.prelude.vertexSource,h.vertexSource).join(`
`),ge=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource(ge,ue),S.compileShader(ge),S.attachShader(this.program,ge);const pe=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource(pe,he),S.compileShader(pe),S.attachShader(this.program,pe),this.attributes={};const Oe={};this.numAttributes=R.length;for(let Ee=0;Ee<this.numAttributes;Ee++)R[Ee]&&(S.bindAttribLocation(this.program,Ee,R[Ee]),this.attributes[R[Ee]]=Ee);S.linkProgram(this.program),S.deleteShader(pe),S.deleteShader(ge);for(let Ee=0;Ee<H.length;Ee++){const Pe=H[Ee];if(Pe&&!Oe[Pe]){const Ge=S.getUniformLocation(this.program,Pe);Ge&&(Oe[Pe]=Ge)}}this.fixedUniforms=y(r,Oe),this.binderUniforms=f?f.getUniforms(r,Oe):[]}draw(r,a,h,f,y,w,S,I,D,R,N,q,Y,H,J,ue){const he=r.gl;if(this.failedToCreate)return;r.program.set(this.program),r.setDepthMode(h),r.setStencilMode(f),r.setColorMode(y),r.setCullFace(w);for(const pe in this.fixedUniforms)this.fixedUniforms[pe].set(S[pe]);H&&H.setUniforms(r,this.binderUniforms,q,{zoom:Y});const ge={[he.LINES]:2,[he.TRIANGLES]:3,[he.LINE_STRIP]:1}[a];for(const pe of N.get()){const Oe=pe.vaos||(pe.vaos={});(Oe[I]||(Oe[I]=new dd)).bind(r,this,D,H?H.getPaintVertexBuffers():[],R,pe.vertexOffset,J,ue),he.drawElements(a,pe.primitiveLength*ge,he.UNSIGNED_SHORT,pe.primitiveOffset*ge*2)}}}function dl(p,r,a){const h=1/rn(a,1,r.transform.tileZoom),f=Math.pow(2,a.tileID.overscaledZ),y=a.tileSize*Math.pow(2,r.transform.tileZoom)/f,w=y*(a.tileID.canonical.x+a.tileID.wrap*f),S=y*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[h,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[w>>16,S>>16],u_pixel_coord_lower:[65535&w,65535&S]}}const Jc=(p,r,a,h)=>{const f=r.style.light,y=f.properties.get("position"),w=[y.x,y.y,y.z],S=function(){var D=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();f.properties.get("anchor")==="viewport"&&function(D,R){var N=Math.sin(R),q=Math.cos(R);D[0]=q,D[1]=N,D[2]=0,D[3]=-N,D[4]=q,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(S,-r.transform.angle),function(D,R,N){var q=R[0],Y=R[1],H=R[2];D[0]=q*N[0]+Y*N[3]+H*N[6],D[1]=q*N[1]+Y*N[4]+H*N[7],D[2]=q*N[2]+Y*N[5]+H*N[8]}(w,w,S);const I=f.properties.get("color");return{u_matrix:p,u_lightpos:w,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+a,u_opacity:h}},pl=(p,r,a,h,f,y,w)=>l.extend(Jc(p,r,a,h),dl(y,r,w),{u_height_factor:-Math.pow(2,f.overscaledZ)/w.tileSize/8}),fl=p=>({u_matrix:p}),ml=(p,r,a,h)=>l.extend(fl(p),dl(a,r,h)),Yc=(p,r)=>({u_matrix:p,u_world:r}),Qc=(p,r,a,h,f)=>l.extend(ml(p,r,a,h),{u_world:f}),Yi=(p,r,a,h)=>{const f=p.transform;let y,w;if(h.paint.get("circle-pitch-alignment")==="map"){const S=rn(a,1,f.zoom);y=!0,w=[S,S]}else y=!1,w=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:p.translatePosMatrix(r.posMatrix,a,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:p.pixelRatio,u_extrude_scale:w}},Zs=(p,r,a)=>{const h=rn(a,1,r.zoom),f=Math.pow(2,r.zoom-a.tileID.overscaledZ),y=a.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:h,u_extrude_scale:[r.pixelsToGLUnits[0]/(h*f),r.pixelsToGLUnits[1]/(h*f)],u_overscale_factor:y}},To=(p,r,a=1)=>({u_matrix:p,u_color:r,u_overlay:0,u_overlay_scale:a}),ls=p=>({u_matrix:p}),Ws=(p,r,a,h)=>({u_matrix:p,u_extrude_scale:rn(r,1,a),u_intensity:h});function Ks(p,r){const a=Math.pow(2,r.canonical.z),h=r.canonical.y;return[new l.MercatorCoordinate(0,h/a).toLngLat().lat,new l.MercatorCoordinate(0,(h+1)/a).toLngLat().lat]}const cs=(p,r,a)=>{const h=p.transform;return{u_matrix:gl(p,r,a),u_ratio:1/rn(r,1,h.zoom),u_device_pixel_ratio:p.pixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},Xs=(p,r,a,h)=>l.extend(cs(p,r,a),{u_image:0,u_image_height:h}),us=(p,r,a,h)=>{const f=p.transform,y=hs(r,f);return{u_matrix:gl(p,r,a),u_texsize:r.imageAtlasTexture.size,u_ratio:1/rn(r,1,f.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[y,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},Xr=(p,r,a,h,f)=>{const y=p.lineAtlas,w=hs(r,p.transform),S=a.layout.get("line-cap")==="round",I=y.getDash(h.from,S),D=y.getDash(h.to,S),R=I.width*f.fromScale,N=D.width*f.toScale;return l.extend(cs(p,r,a),{u_patternscale_a:[w/R,-I.height/2],u_patternscale_b:[w/N,-D.height/2],u_sdfgamma:y.width/(256*Math.min(R,N)*p.pixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:D.y,u_mix:f.t})};function hs(p,r){return 1/rn(p,1,r.tileZoom)}function gl(p,r,a){return p.translatePosMatrix(r.tileID.posMatrix,r,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const eu=(p,r,a,h,f)=>{return{u_matrix:p,u_tl_parent:r,u_scale_parent:a,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(w=f.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(y=f.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:tu(f.paint.get("raster-hue-rotate"))};var y,w};function tu(p){p*=Math.PI/180;const r=Math.sin(p),a=Math.cos(p);return[(2*a+1)/3,(-Math.sqrt(3)*r-a+1)/3,(Math.sqrt(3)*r-a+1)/3]}const Js=(p,r,a,h,f,y,w,S,I,D)=>{const R=f.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:R.cameraToCenterDistance,u_pitch:R.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:R.width/R.height,u_fade_change:f.options.fadeDuration?f.symbolFadeChange:1,u_matrix:y,u_label_plane_matrix:w,u_coord_matrix:S,u_is_text:+I,u_pitch_with_map:+h,u_texsize:D,u_texture:0}},_l=(p,r,a,h,f,y,w,S,I,D,R)=>{const N=f.transform;return l.extend(Js(p,r,a,h,f,y,w,S,I,D),{u_gamma_scale:h?Math.cos(N._pitch)*N.cameraToCenterDistance:1,u_device_pixel_ratio:f.pixelRatio,u_is_halo:+R})},fd=(p,r,a,h,f,y,w,S,I,D)=>l.extend(_l(p,r,a,h,f,y,w,S,!0,I,!0),{u_texsize_icon:D,u_texture_icon:1}),md=(p,r,a)=>({u_matrix:p,u_opacity:r,u_color:a}),yl=(p,r,a,h,f,y)=>l.extend(function(w,S,I,D){const R=I.imageManager.getPattern(w.from.toString()),N=I.imageManager.getPattern(w.to.toString()),{width:q,height:Y}=I.imageManager.getPixelSize(),H=Math.pow(2,D.tileID.overscaledZ),J=D.tileSize*Math.pow(2,I.transform.tileZoom)/H,ue=J*(D.tileID.canonical.x+D.tileID.wrap*H),he=J*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[q,Y],u_mix:S.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/rn(D,1,I.transform.tileZoom),u_pixel_coord_upper:[ue>>16,he>>16],u_pixel_coord_lower:[65535&ue,65535&he]}}(h,y,a,f),{u_matrix:p,u_opacity:r}),vl={fillExtrusion:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_lightpos:new l.Uniform3f(p,r.u_lightpos),u_lightintensity:new l.Uniform1f(p,r.u_lightintensity),u_lightcolor:new l.Uniform3f(p,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,r.u_vertical_gradient),u_opacity:new l.Uniform1f(p,r.u_opacity)}),fillExtrusionPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_lightpos:new l.Uniform3f(p,r.u_lightpos),u_lightintensity:new l.Uniform1f(p,r.u_lightintensity),u_lightcolor:new l.Uniform3f(p,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,r.u_vertical_gradient),u_height_factor:new l.Uniform1f(p,r.u_height_factor),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade),u_opacity:new l.Uniform1f(p,r.u_opacity)}),fill:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),fillPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),fillOutline:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world)}),fillOutlinePattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),circle:(p,r)=>({u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(p,r.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(p,r.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),collisionBox:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(p,r.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(p,r.u_extrude_scale),u_overscale_factor:new l.Uniform1f(p,r.u_overscale_factor)}),collisionCircle:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_inv_matrix:new l.UniformMatrix4f(p,r.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(p,r.u_viewport_size)}),debug:(p,r)=>({u_color:new l.UniformColor(p,r.u_color),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_overlay:new l.Uniform1i(p,r.u_overlay),u_overlay_scale:new l.Uniform1f(p,r.u_overlay_scale)}),clippingMask:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),heatmap:(p,r)=>({u_extrude_scale:new l.Uniform1f(p,r.u_extrude_scale),u_intensity:new l.Uniform1f(p,r.u_intensity),u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),heatmapTexture:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world),u_image:new l.Uniform1i(p,r.u_image),u_color_ramp:new l.Uniform1i(p,r.u_color_ramp),u_opacity:new l.Uniform1f(p,r.u_opacity)}),hillshade:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_latrange:new l.Uniform2f(p,r.u_latrange),u_light:new l.Uniform2f(p,r.u_light),u_shadow:new l.UniformColor(p,r.u_shadow),u_highlight:new l.UniformColor(p,r.u_highlight),u_accent:new l.UniformColor(p,r.u_accent)}),hillshadePrepare:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_dimension:new l.Uniform2f(p,r.u_dimension),u_zoom:new l.Uniform1f(p,r.u_zoom),u_unpack:new l.Uniform4f(p,r.u_unpack)}),line:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels)}),lineGradient:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_image:new l.Uniform1i(p,r.u_image),u_image_height:new l.Uniform1f(p,r.u_image_height)}),linePattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_texsize:new l.Uniform2f(p,r.u_texsize),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_image:new l.Uniform1i(p,r.u_image),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),lineSDF:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(p,r.u_patternscale_a),u_patternscale_b:new l.Uniform2f(p,r.u_patternscale_b),u_sdfgamma:new l.Uniform1f(p,r.u_sdfgamma),u_image:new l.Uniform1i(p,r.u_image),u_tex_y_a:new l.Uniform1f(p,r.u_tex_y_a),u_tex_y_b:new l.Uniform1f(p,r.u_tex_y_b),u_mix:new l.Uniform1f(p,r.u_mix)}),raster:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_tl_parent:new l.Uniform2f(p,r.u_tl_parent),u_scale_parent:new l.Uniform1f(p,r.u_scale_parent),u_buffer_scale:new l.Uniform1f(p,r.u_buffer_scale),u_fade_t:new l.Uniform1f(p,r.u_fade_t),u_opacity:new l.Uniform1f(p,r.u_opacity),u_image0:new l.Uniform1i(p,r.u_image0),u_image1:new l.Uniform1i(p,r.u_image1),u_brightness_low:new l.Uniform1f(p,r.u_brightness_low),u_brightness_high:new l.Uniform1f(p,r.u_brightness_high),u_saturation_factor:new l.Uniform1f(p,r.u_saturation_factor),u_contrast_factor:new l.Uniform1f(p,r.u_contrast_factor),u_spin_weights:new l.Uniform3f(p,r.u_spin_weights)}),symbolIcon:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texture:new l.Uniform1i(p,r.u_texture)}),symbolSDF:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texture:new l.Uniform1i(p,r.u_texture),u_gamma_scale:new l.Uniform1f(p,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,r.u_is_halo)}),symbolTextAndIcon:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texsize_icon:new l.Uniform2f(p,r.u_texsize_icon),u_texture:new l.Uniform1i(p,r.u_texture),u_texture_icon:new l.Uniform1i(p,r.u_texture_icon),u_gamma_scale:new l.Uniform1f(p,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,r.u_is_halo)}),background:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_opacity:new l.Uniform1f(p,r.u_opacity),u_color:new l.UniformColor(p,r.u_color)}),backgroundPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_opacity:new l.Uniform1f(p,r.u_opacity),u_image:new l.Uniform1i(p,r.u_image),u_pattern_tl_a:new l.Uniform2f(p,r.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(p,r.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(p,r.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(p,r.u_pattern_br_b),u_texsize:new l.Uniform2f(p,r.u_texsize),u_mix:new l.Uniform1f(p,r.u_mix),u_pattern_size_a:new l.Uniform2f(p,r.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(p,r.u_pattern_size_b),u_scale_a:new l.Uniform1f(p,r.u_scale_a),u_scale_b:new l.Uniform1f(p,r.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(p,r.u_tile_units_to_pixels)})};class xl{constructor(r,a,h){this.context=r;const f=r.gl;this.buffer=f.createBuffer(),this.dynamicDraw=Boolean(h),this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const a=this.context.gl;this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const bl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ru{constructor(r,a,h,f){this.length=a.length,this.attributes=h,this.itemSize=a.bytesPerElement,this.dynamicDraw=f,this.context=r;const y=r.gl;this.buffer=y.createBuffer(),r.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,a){for(let h=0;h<this.attributes.length;h++){const f=a.attributes[this.attributes[h].name];f!==void 0&&r.enableVertexAttribArray(f)}}setVertexAttribPointers(r,a,h){for(let f=0;f<this.attributes.length;f++){const y=this.attributes[f],w=a.attributes[y.name];w!==void 0&&r.vertexAttribPointer(w,y.components,r[bl[y.type]],!1,this.itemSize,y.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class hr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class gd extends hr{getDefault(){return l.Color.transparent}set(r){const a=this.current;(r.r!==a.r||r.g!==a.g||r.b!==a.b||r.a!==a.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ds extends hr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class ps extends hr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class nu extends hr{getDefault(){return[!0,!0,!0,!0]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||r[3]!==a[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class jn extends hr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class wl extends hr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Ys extends hr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const a=this.current;(r.func!==a.func||r.ref!==a.ref||r.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Qs extends hr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class El extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=r,this.dirty=!1}}class Sl extends hr{getDefault(){return[0,1]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class ea extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=r,this.dirty=!1}}class Tl extends hr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Il extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.BLEND):a.disable(a.BLEND),this.current=r,this.dirty=!1}}class ta extends hr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class iu extends hr{getDefault(){return l.Color.transparent}set(r){const a=this.current;(r.r!==a.r||r.g!==a.g||r.b!==a.b||r.a!==a.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ou extends hr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Io extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;r?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=r,this.dirty=!1}}class _d extends hr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class yd extends hr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class vd extends hr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class xd extends hr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class bd extends hr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const a=this.current;(r[0]!==a[0]||r[1]!==a[1]||r[2]!==a[2]||r[3]!==a[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class wd extends hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Al extends hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Pl extends hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ao extends hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class su extends hr{getDefault(){return null}set(r){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class au extends hr{constructor(r){super(r),this.vao=r.extVertexArrayObject}getDefault(){return null}set(r){this.vao&&(r!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(r),this.current=r,this.dirty=!1)}}class Cl extends hr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Qi extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class lu extends hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class eo extends hr{constructor(r,a){super(r),this.context=r,this.parent=a}getDefault(){return null}}class Po extends eo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class cu extends eo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class kl{constructor(r,a,h,f){this.context=r,this.width=a,this.height=h;const y=this.framebuffer=r.gl.createFramebuffer();this.colorAttachment=new Po(r,y),f&&(this.depthAttachment=new cu(r,y))}destroy(){const r=this.context.gl,a=this.colorAttachment.get();if(a&&r.deleteTexture(a),this.depthAttachment){const h=this.depthAttachment.get();h&&r.deleteRenderbuffer(h)}r.deleteFramebuffer(this.framebuffer)}}class Nt{constructor(r,a,h){this.blendFunction=r,this.blendColor=a,this.mask=h}}Nt.Replace=[1,0],Nt.disabled=new Nt(Nt.Replace,l.Color.transparent,[!1,!1,!1,!1]),Nt.unblended=new Nt(Nt.Replace,l.Color.transparent,[!0,!0,!0,!0]),Nt.alphaBlended=new Nt([1,771],l.Color.transparent,[!0,!0,!0,!0]);class ra{constructor(r){this.gl=r,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new gd(this),this.clearDepth=new ds(this),this.clearStencil=new ps(this),this.colorMask=new nu(this),this.depthMask=new jn(this),this.stencilMask=new wl(this),this.stencilFunc=new Ys(this),this.stencilOp=new Qs(this),this.stencilTest=new El(this),this.depthRange=new Sl(this),this.depthTest=new ea(this),this.depthFunc=new Tl(this),this.blend=new Il(this),this.blendFunc=new ta(this),this.blendColor=new iu(this),this.blendEquation=new ou(this),this.cullFace=new Io(this),this.cullFaceSide=new _d(this),this.frontFace=new yd(this),this.program=new vd(this),this.activeTexture=new xd(this),this.viewport=new bd(this),this.bindFramebuffer=new wd(this),this.bindRenderbuffer=new Al(this),this.bindTexture=new Pl(this),this.bindVertexBuffer=new Ao(this),this.bindElementBuffer=new su(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new au(this),this.pixelStoreUnpack=new Cl(this),this.pixelStoreUnpackPremultiplyAlpha=new Qi(this),this.pixelStoreUnpackFlipY=new lu(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=r.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(r.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,a){return new xl(this,r,a)}createVertexBuffer(r,a,h){return new ru(this,r,a,h)}createRenderbuffer(r,a,h){const f=this.gl,y=f.createRenderbuffer();return this.bindRenderbuffer.set(y),f.renderbufferStorage(f.RENDERBUFFER,r,a,h),this.bindRenderbuffer.set(null),y}createFramebuffer(r,a,h){return new kl(this,r,a,h)}clear({color:r,depth:a}){const h=this.gl;let f=0;r&&(f|=h.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(f|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),h.clear(f)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){F(r.blendFunction,Nt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class _r{constructor(r,a,h){this.func=r,this.mask=a,this.range=h}}_r.ReadOnly=!1,_r.ReadWrite=!0,_r.disabled=new _r(519,_r.ReadOnly,[0,1]);const na=7680;class Cr{constructor(r,a,h,f,y,w){this.test=r,this.ref=a,this.mask=h,this.fail=f,this.depthFail=y,this.pass=w}}Cr.disabled=new Cr({func:519,mask:0},0,0,na,na,na);class Ur{constructor(r,a,h){this.enable=r,this.mode=a,this.frontFace=h}}let ia;function Dl(p,r,a,h,f,y,w){const S=p.context,I=S.gl,D=p.useProgram("collisionBox"),R=[];let N=0,q=0;for(let pe=0;pe<h.length;pe++){const Oe=h[pe],Ee=r.getTile(Oe),Pe=Ee.getBucket(a);if(!Pe)continue;let Ge=Oe.posMatrix;f[0]===0&&f[1]===0||(Ge=p.translatePosMatrix(Oe.posMatrix,Ee,f,y));const et=w?Pe.textCollisionBox:Pe.iconCollisionBox,ze=Pe.collisionCircleArray;if(ze.length>0){const yt=l.create(),st=Ge;l.mul(yt,Pe.placementInvProjMatrix,p.transform.glCoordMatrix),l.mul(yt,yt,Pe.placementViewportMatrix),R.push({circleArray:ze,circleOffset:q,transform:st,invTransform:yt}),N+=ze.length/4,q=N}et&&D.draw(S,I.LINES,_r.disabled,Cr.disabled,p.colorModeForRenderPass(),Ur.disabled,Zs(Ge,p.transform,Ee),a.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,null,p.transform.zoom,null,null,et.collisionVertexBuffer)}if(!w||!R.length)return;const Y=p.useProgram("collisionCircle"),H=new l.CollisionCircleLayoutArray;H.resize(4*N),H._trim();let J=0;for(const pe of R)for(let Oe=0;Oe<pe.circleArray.length/4;Oe++){const Ee=4*Oe,Pe=pe.circleArray[Ee+0],Ge=pe.circleArray[Ee+1],et=pe.circleArray[Ee+2],ze=pe.circleArray[Ee+3];H.emplace(J++,Pe,Ge,et,ze,0),H.emplace(J++,Pe,Ge,et,ze,1),H.emplace(J++,Pe,Ge,et,ze,2),H.emplace(J++,Pe,Ge,et,ze,3)}(!ia||ia.length<2*N)&&(ia=function(pe){const Oe=2*pe,Ee=new l.QuadTriangleArray;Ee.resize(Oe),Ee._trim();for(let Pe=0;Pe<Oe;Pe++){const Ge=6*Pe;Ee.uint16[Ge+0]=4*Pe+0,Ee.uint16[Ge+1]=4*Pe+1,Ee.uint16[Ge+2]=4*Pe+2,Ee.uint16[Ge+3]=4*Pe+2,Ee.uint16[Ge+4]=4*Pe+3,Ee.uint16[Ge+5]=4*Pe+0}return Ee}(N));const ue=S.createIndexBuffer(ia,!0),he=S.createVertexBuffer(H,l.collisionCircleLayout.members,!0);for(const pe of R){const Oe={u_matrix:pe.transform,u_inv_matrix:pe.invTransform,u_camera_to_center_distance:(ge=p.transform).cameraToCenterDistance,u_viewport_size:[ge.width,ge.height]};Y.draw(S,I.TRIANGLES,_r.disabled,Cr.disabled,p.colorModeForRenderPass(),Ur.disabled,Oe,a.id,he,ue,l.SegmentVector.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,p.transform.zoom,null,null,null)}var ge;he.destroy(),ue.destroy()}Ur.disabled=new Ur(!1,1029,2305),Ur.backCCW=new Ur(!0,1029,2305);const Ed=l.identity(new Float32Array(16));function zl(p,r,a,h,f,y){const{horizontalAlign:w,verticalAlign:S}=l.getAnchorAlignment(p),I=-(w-.5)*r,D=-(S-.5)*a,R=l.evaluateVariableOffset(p,h);return new l.pointGeometry((I/f+R[0])*y,(D/f+R[1])*y)}function oa(p,r,a,h,f,y,w,S,I,D){const R=p.text.placedSymbolArray,N=p.text.dynamicLayoutVertexArray,q=p.icon.dynamicLayoutVertexArray,Y={};N.clear();for(let H=0;H<R.length;H++){const J=R.get(H),ue=p.allowVerticalPlacement&&!J.placedOrientation,he=J.hidden||!J.crossTileID||ue?null:h[J.crossTileID];if(he){const ge=new l.pointGeometry(J.anchorX,J.anchorY),pe=Xt(ge,a?w:y),Oe=Ke(f.cameraToCenterDistance,pe.signedDistanceFromCamera);let Ee=l.evaluateSizeForFeature(p.textSizeData,I,J)*Oe/l.ONE_EM;a&&(Ee*=p.tilePixelRatio/S);const{width:Pe,height:Ge,anchor:et,textOffset:ze,textBoxScale:yt}=he,st=zl(et,Pe,Ge,ze,yt,Ee),Lt=a?Xt(ge.add(st),y).point:pe.point.add(r?st.rotate(-f.angle):st),rr=p.allowVerticalPlacement&&J.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let Kt=0;Kt<J.numGlyphs;Kt++)l.addDynamicAttributes(N,Lt,rr);D&&J.associatedIconIndex>=0&&(Y[J.associatedIconIndex]={shiftedAnchor:Lt,angle:rr})}else Kr(J.numGlyphs,N)}if(D){q.clear();const H=p.icon.placedSymbolArray;for(let J=0;J<H.length;J++){const ue=H.get(J);if(ue.hidden)Kr(ue.numGlyphs,q);else{const he=Y[J];if(he)for(let ge=0;ge<ue.numGlyphs;ge++)l.addDynamicAttributes(q,he.shiftedAnchor,he.angle);else Kr(ue.numGlyphs,q)}}p.icon.dynamicLayoutVertexBuffer.updateData(q)}p.text.dynamicLayoutVertexBuffer.updateData(N)}function sa(p,r,a){return a.iconsInText&&r?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function aa(p,r,a,h,f,y,w,S,I,D,R,N){const q=p.context,Y=q.gl,H=p.transform,J=S==="map",ue=I==="map",he=S!=="viewport"&&a.layout.get("symbol-placement")!=="point",ge=J&&!ue&&!he,pe=!a.layout.get("symbol-sort-key").isConstant();let Oe=!1;const Ee=p.depthModeForSublayer(0,_r.ReadOnly),Pe=a.layout.get("text-variable-anchor"),Ge=[];for(const et of h){const ze=r.getTile(et),yt=ze.getBucket(a);if(!yt)continue;const st=f?yt.text:yt.icon;if(!st||!st.segments.get().length)continue;const Lt=st.programConfigurations.get(a.id),rr=f||yt.sdfIcons,Kt=f?yt.textSizeData:yt.iconSizeData,er=ue||H.pitch!==0,Nr=p.useProgram(sa(rr,f,yt),Lt),Bt=l.evaluateSizeForZoom(Kt,H.zoom);let sr,xr,dn,Un,ei=[0,0],ti=null;if(f){if(xr=ze.glyphAtlasTexture,dn=Y.LINEAR,sr=ze.glyphAtlasTexture.size,yt.iconsInText){ei=ze.imageAtlasTexture.size,ti=ze.imageAtlasTexture;const wi=Kt.kind==="composite"||Kt.kind==="camera";Un=er||p.options.rotating||p.options.zooming||wi?Y.LINEAR:Y.NEAREST}}else{const wi=a.layout.get("icon-size").constantOr(0)!==1||yt.iconsNeedLinear;xr=ze.imageAtlasTexture,dn=rr||p.options.rotating||p.options.zooming||wi||er?Y.LINEAR:Y.NEAREST,sr=ze.imageAtlasTexture.size}const Vi=rn(ze,1,p.transform.zoom),Rn=Gr(et.posMatrix,ue,J,p.transform,Vi),bi=vi(et.posMatrix,ue,J,p.transform,Vi),so=Pe&&yt.hasTextData(),$n=a.layout.get("icon-text-fit")!=="none"&&so&&yt.hasIconData();if(he){const wi=a.layout.get("text-rotation-alignment")==="map";qt(yt,et.posMatrix,p,f,Rn,bi,ue,D,wi)}const ar=p.translatePosMatrix(et.posMatrix,ze,y,w),fr=he||f&&Pe||$n?Ed:Rn,Jr=p.translatePosMatrix(bi,ze,y,w,!0),In=rr&&a.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Dr;Dr=rr?yt.iconsInText?fd(Kt.kind,Bt,ge,ue,p,ar,fr,Jr,sr,ei):_l(Kt.kind,Bt,ge,ue,p,ar,fr,Jr,f,sr,!0):Js(Kt.kind,Bt,ge,ue,p,ar,fr,Jr,f,sr);const ao={program:Nr,buffers:st,uniformValues:Dr,atlasTexture:xr,atlasTextureIcon:ti,atlasInterpolation:dn,atlasInterpolationIcon:Un,isSDF:rr,hasHalo:In};if(pe&&yt.canOverlap){Oe=!0;const wi=st.segments.get();for(const xa of wi)Ge.push({segments:new l.SegmentVector([xa]),sortKey:xa.sortKey,state:ao})}else Ge.push({segments:st.segments,sortKey:0,state:ao})}Oe&&Ge.sort((et,ze)=>et.sortKey-ze.sortKey);for(const et of Ge){const ze=et.state;if(q.activeTexture.set(Y.TEXTURE0),ze.atlasTexture.bind(ze.atlasInterpolation,Y.CLAMP_TO_EDGE),ze.atlasTextureIcon&&(q.activeTexture.set(Y.TEXTURE1),ze.atlasTextureIcon&&ze.atlasTextureIcon.bind(ze.atlasInterpolationIcon,Y.CLAMP_TO_EDGE)),ze.isSDF){const yt=ze.uniformValues;ze.hasHalo&&(yt.u_is_halo=1,la(ze.buffers,et.segments,a,p,ze.program,Ee,R,N,yt)),yt.u_is_halo=0}la(ze.buffers,et.segments,a,p,ze.program,Ee,R,N,ze.uniformValues)}}function la(p,r,a,h,f,y,w,S,I){const D=h.context;f.draw(D,D.gl.TRIANGLES,y,w,S,Ur.disabled,I,a.id,p.layoutVertexBuffer,p.indexBuffer,r,a.paint,h.transform.zoom,p.programConfigurations.get(a.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function Ml(p,r,a,h,f,y,w){const S=p.context.gl,I=a.paint.get("fill-pattern"),D=I&&I.constantOr(1),R=a.getCrossfadeParameters();let N,q,Y,H,J;w?(q=D&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",N=S.LINES):(q=D?"fillPattern":"fill",N=S.TRIANGLES);for(const ue of h){const he=r.getTile(ue);if(D&&!he.patternsLoaded())continue;const ge=he.getBucket(a);if(!ge)continue;const pe=ge.programConfigurations.get(a.id),Oe=p.useProgram(q,pe);D&&(p.context.activeTexture.set(S.TEXTURE0),he.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),pe.updatePaintBuffers(R));const Ee=I.constantOr(null);if(Ee&&he.imageAtlas){const Ge=he.imageAtlas,et=Ge.patternPositions[Ee.to.toString()],ze=Ge.patternPositions[Ee.from.toString()];et&&ze&&pe.setConstantPatternPositions(et,ze)}const Pe=p.translatePosMatrix(ue.posMatrix,he,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(w){H=ge.indexBuffer2,J=ge.segments2;const Ge=[S.drawingBufferWidth,S.drawingBufferHeight];Y=q==="fillOutlinePattern"&&D?Qc(Pe,p,R,he,Ge):Yc(Pe,Ge)}else H=ge.indexBuffer,J=ge.segments,Y=D?ml(Pe,p,R,he):fl(Pe);Oe.draw(p.context,N,f,p.stencilModeForClipping(ue),y,Ur.disabled,Y,a.id,ge.layoutVertexBuffer,H,J,a.paint,p.transform.zoom,pe)}}function Co(p,r,a,h,f,y,w){const S=p.context,I=S.gl,D=a.paint.get("fill-extrusion-pattern"),R=D.constantOr(1),N=a.getCrossfadeParameters(),q=a.paint.get("fill-extrusion-opacity");for(const Y of h){const H=r.getTile(Y),J=H.getBucket(a);if(!J)continue;const ue=J.programConfigurations.get(a.id),he=p.useProgram(R?"fillExtrusionPattern":"fillExtrusion",ue);R&&(p.context.activeTexture.set(I.TEXTURE0),H.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ue.updatePaintBuffers(N));const ge=D.constantOr(null);if(ge&&H.imageAtlas){const Pe=H.imageAtlas,Ge=Pe.patternPositions[ge.to.toString()],et=Pe.patternPositions[ge.from.toString()];Ge&&et&&ue.setConstantPatternPositions(Ge,et)}const pe=p.translatePosMatrix(Y.posMatrix,H,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Oe=a.paint.get("fill-extrusion-vertical-gradient"),Ee=R?pl(pe,p,Oe,q,Y,N,H):Jc(pe,p,Oe,q);he.draw(S,S.gl.TRIANGLES,f,y,w,Ur.backCCW,Ee,a.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,a.paint,p.transform.zoom,ue)}}function ca(p,r,a,h,f,y){const w=p.context,S=w.gl,I=r.fbo;if(!I)return;const D=p.useProgram("hillshade");w.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,I.colorAttachment.get());const R=((N,q,Y)=>{const H=Y.paint.get("hillshade-shadow-color"),J=Y.paint.get("hillshade-highlight-color"),ue=Y.paint.get("hillshade-accent-color");let he=Y.paint.get("hillshade-illumination-direction")*(Math.PI/180);Y.paint.get("hillshade-illumination-anchor")==="viewport"&&(he-=N.transform.angle);const ge=!N.options.moving;return{u_matrix:N.transform.calculatePosMatrix(q.tileID.toUnwrapped(),ge),u_image:0,u_latrange:Ks(0,q.tileID),u_light:[Y.paint.get("hillshade-exaggeration"),he],u_shadow:H,u_highlight:J,u_accent:ue}})(p,r,a);D.draw(w,S.TRIANGLES,h,f,y,Ur.disabled,R,a.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}function ci(p,r,a,h,f,y){const w=p.context,S=w.gl,I=r.dem;if(I&&I.data){const D=I.dim,R=I.stride,N=I.getPixels();if(w.activeTexture.set(S.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||p.getTileTexture(R),r.demTexture){const Y=r.demTexture;Y.update(N,{premultiply:!1}),Y.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else r.demTexture=new _e(w,N,S.RGBA,{premultiply:!1}),r.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);w.activeTexture.set(S.TEXTURE0);let q=r.fbo;if(!q){const Y=new _e(w,{width:D,height:D,data:null},S.RGBA);Y.bind(S.LINEAR,S.CLAMP_TO_EDGE),q=r.fbo=w.createFramebuffer(D,D,!0),q.colorAttachment.set(Y.texture)}w.bindFramebuffer.set(q.framebuffer),w.viewport.set([0,0,D,D]),p.useProgram("hillshadePrepare").draw(w,S.TRIANGLES,h,f,y,Ur.disabled,((Y,H)=>{const J=H.stride,ue=l.create();return l.ortho(ue,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ue,ue,[0,-l.EXTENT,0]),{u_matrix:ue,u_image:1,u_dimension:[J,J],u_zoom:Y.overscaledZ,u_unpack:H.getUnpackVector()}})(r.tileID,I),a.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function uu(p,r,a,h,f){const y=h.paint.get("raster-fade-duration");if(y>0){const w=l.exported.now(),S=(w-p.timeAdded)/y,I=r?(w-r.timeAdded)/y:-1,D=a.getSource(),R=f.coveringZoomLevel({tileSize:D.tileSize,roundZoom:D.roundZoom}),N=!r||Math.abs(r.tileID.overscaledZ-R)>Math.abs(p.tileID.overscaledZ-R),q=N&&p.refreshedUponExpiration?1:l.clamp(N?S:1-I,0,1);return p.refreshedUponExpiration&&S>=1&&(p.refreshedUponExpiration=!1),r?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}const hu=new l.Color(1,0,0,1),du=new l.Color(0,1,0,1),ko=new l.Color(0,0,1,1),ua=new l.Color(1,0,1,1),Ol=new l.Color(0,1,1,1);function pu(p,r,a,h){da(p,0,r+a/2,p.transform.width,a,h)}function ha(p,r,a,h){da(p,r-a/2,0,a,p.transform.height,h)}function da(p,r,a,h,f,y){const w=p.context,S=w.gl;S.enable(S.SCISSOR_TEST),S.scissor(r*p.pixelRatio,a*p.pixelRatio,h*p.pixelRatio,f*p.pixelRatio),w.clear({color:y}),S.disable(S.SCISSOR_TEST)}function fu(p,r,a){const h=p.context,f=h.gl,y=a.posMatrix,w=p.useProgram("debug"),S=_r.disabled,I=Cr.disabled,D=p.colorModeForRenderPass(),R="$debug";h.activeTexture.set(f.TEXTURE0),p.emptyTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),w.draw(h,f.LINE_STRIP,S,I,D,Ur.disabled,To(y,l.Color.red),R,p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments);const N=r.getTileByID(a.key).latestRawTileData,q=Math.floor((N&&N.byteLength||0)/1024),Y=r.getTile(a).tileSize,H=512/Math.min(Y,512)*(a.overscaledZ/p.transform.zoom)*.5;let J=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(J+=` => ${a.overscaledZ}`),function(ue,he){ue.initDebugOverlayCanvas();const ge=ue.debugOverlayCanvas,pe=ue.context.gl,Oe=ue.debugOverlayCanvas.getContext("2d");Oe.clearRect(0,0,ge.width,ge.height),Oe.shadowColor="white",Oe.shadowBlur=2,Oe.lineWidth=1.5,Oe.strokeStyle="white",Oe.textBaseline="top",Oe.font="bold 36px Open Sans, sans-serif",Oe.fillText(he,5,5),Oe.strokeText(he,5,5),ue.debugOverlayTexture.update(ge),ue.debugOverlayTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE)}(p,`${J} ${q}kb`),w.draw(h,f.TRIANGLES,S,I,Nt.alphaBlended,Ur.disabled,To(y,l.Color.transparent,H),R,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments)}const fs={symbol:function(p,r,a,h,f){if(p.renderPass!=="translucent")return;const y=Cr.disabled,w=p.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(S,I,D,R,N,q,Y){const H=I.transform,J=N==="map",ue=q==="map";for(const he of S){const ge=R.getTile(he),pe=ge.getBucket(D);if(!pe||!pe.text||!pe.text.segments.get().length)continue;const Oe=l.evaluateSizeForZoom(pe.textSizeData,H.zoom),Ee=rn(ge,1,I.transform.zoom),Pe=Gr(he.posMatrix,ue,J,I.transform,Ee),Ge=D.layout.get("icon-text-fit")!=="none"&&pe.hasIconData();if(Oe){const et=Math.pow(2,H.zoom-ge.tileID.overscaledZ);oa(pe,J,ue,Y,H,Pe,he.posMatrix,et,Oe,Ge)}}}(h,p,a,r,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),f),a.paint.get("icon-opacity").constantOr(1)!==0&&aa(p,r,a,h,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),y,w),a.paint.get("text-opacity").constantOr(1)!==0&&aa(p,r,a,h,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),y,w),r.map.showCollisionBoxes&&(Dl(p,r,a,h,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),Dl(p,r,a,h,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))},circle:function(p,r,a,h){if(p.renderPass!=="translucent")return;const f=a.paint.get("circle-opacity"),y=a.paint.get("circle-stroke-width"),w=a.paint.get("circle-stroke-opacity"),S=!a.layout.get("circle-sort-key").isConstant();if(f.constantOr(1)===0&&(y.constantOr(1)===0||w.constantOr(1)===0))return;const I=p.context,D=I.gl,R=p.depthModeForSublayer(0,_r.ReadOnly),N=Cr.disabled,q=p.colorModeForRenderPass(),Y=[];for(let H=0;H<h.length;H++){const J=h[H],ue=r.getTile(J),he=ue.getBucket(a);if(!he)continue;const ge=he.programConfigurations.get(a.id),pe={programConfiguration:ge,program:p.useProgram("circle",ge),layoutVertexBuffer:he.layoutVertexBuffer,indexBuffer:he.indexBuffer,uniformValues:Yi(p,J,ue,a)};if(S){const Oe=he.segments.get();for(const Ee of Oe)Y.push({segments:new l.SegmentVector([Ee]),sortKey:Ee.sortKey,state:pe})}else Y.push({segments:he.segments,sortKey:0,state:pe})}S&&Y.sort((H,J)=>H.sortKey-J.sortKey);for(const H of Y){const{programConfiguration:J,program:ue,layoutVertexBuffer:he,indexBuffer:ge,uniformValues:pe}=H.state;ue.draw(I,D.TRIANGLES,R,N,q,Ur.disabled,pe,a.id,he,ge,H.segments,a.paint,p.transform.zoom,J)}},heatmap:function(p,r,a,h){if(a.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const f=p.context,y=f.gl,w=Cr.disabled,S=new Nt([y.ONE,y.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(I,D,R){const N=I.gl;I.activeTexture.set(N.TEXTURE1),I.viewport.set([0,0,D.width/4,D.height/4]);let q=R.heatmapFbo;if(q)N.bindTexture(N.TEXTURE_2D,q.colorAttachment.get()),I.bindFramebuffer.set(q.framebuffer);else{const Y=N.createTexture();N.bindTexture(N.TEXTURE_2D,Y),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),q=R.heatmapFbo=I.createFramebuffer(D.width/4,D.height/4,!1),function(H,J,ue,he){const ge=H.gl;ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,J.width/4,J.height/4,0,ge.RGBA,H.extRenderToTextureHalfFloat?H.extTextureHalfFloat.HALF_FLOAT_OES:ge.UNSIGNED_BYTE,null),he.colorAttachment.set(ue)}(I,D,Y,q)}})(f,p,a),f.clear({color:l.Color.transparent});for(let I=0;I<h.length;I++){const D=h[I];if(r.hasRenderableParent(D))continue;const R=r.getTile(D),N=R.getBucket(a);if(!N)continue;const q=N.programConfigurations.get(a.id),Y=p.useProgram("heatmap",q),{zoom:H}=p.transform;Y.draw(f,y.TRIANGLES,_r.disabled,w,S,Ur.disabled,Ws(D.posMatrix,R,H,a.paint.get("heatmap-intensity")),a.id,N.layoutVertexBuffer,N.indexBuffer,N.segments,a.paint,p.transform.zoom,q)}f.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(f,y){const w=f.context,S=w.gl,I=y.heatmapFbo;if(!I)return;w.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,I.colorAttachment.get()),w.activeTexture.set(S.TEXTURE1);let D=y.colorRampTexture;D||(D=y.colorRampTexture=new _e(w,y.colorRamp,S.RGBA)),D.bind(S.LINEAR,S.CLAMP_TO_EDGE),f.useProgram("heatmapTexture").draw(w,S.TRIANGLES,_r.disabled,Cr.disabled,f.colorModeForRenderPass(),Ur.disabled,((R,N,q,Y)=>{const H=l.create();l.ortho(H,0,R.width,R.height,0,0,1);const J=R.context.gl;return{u_matrix:H,u_world:[J.drawingBufferWidth,J.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:N.paint.get("heatmap-opacity")}})(f,y),y.id,f.viewportBuffer,f.quadTriangleIndexBuffer,f.viewportSegments,y.paint,f.transform.zoom)}(p,a))},line:function(p,r,a,h){if(p.renderPass!=="translucent")return;const f=a.paint.get("line-opacity"),y=a.paint.get("line-width");if(f.constantOr(1)===0||y.constantOr(1)===0)return;const w=p.depthModeForSublayer(0,_r.ReadOnly),S=p.colorModeForRenderPass(),I=a.paint.get("line-dasharray"),D=a.paint.get("line-pattern"),R=D.constantOr(1),N=a.paint.get("line-gradient"),q=a.getCrossfadeParameters(),Y=R?"linePattern":I?"lineSDF":N?"lineGradient":"line",H=p.context,J=H.gl;let ue=!0;for(const he of h){const ge=r.getTile(he);if(R&&!ge.patternsLoaded())continue;const pe=ge.getBucket(a);if(!pe)continue;const Oe=pe.programConfigurations.get(a.id),Ee=p.context.program.get(),Pe=p.useProgram(Y,Oe),Ge=ue||Pe.program!==Ee,et=D.constantOr(null);if(et&&ge.imageAtlas){const yt=ge.imageAtlas,st=yt.patternPositions[et.to.toString()],Lt=yt.patternPositions[et.from.toString()];st&&Lt&&Oe.setConstantPatternPositions(st,Lt)}const ze=R?us(p,ge,a,q):I?Xr(p,ge,a,I,q):N?Xs(p,ge,a,pe.lineClipsArray.length):cs(p,ge,a);if(R)H.activeTexture.set(J.TEXTURE0),ge.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),Oe.updatePaintBuffers(q);else if(I&&(Ge||p.lineAtlas.dirty))H.activeTexture.set(J.TEXTURE0),p.lineAtlas.bind(H);else if(N){const yt=pe.gradients[a.id];let st=yt.texture;if(a.gradientVersion!==yt.version){let Lt=256;if(a.stepInterpolant){const rr=r.getSource().maxzoom,Kt=he.canonical.z===rr?Math.ceil(1<<p.transform.maxZoom-he.canonical.z):1;Lt=l.clamp(l.nextPowerOfTwo(pe.maxLineLength/l.EXTENT*1024*Kt),256,H.maxTextureSize)}yt.gradient=l.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:Lt,image:yt.gradient||void 0,clips:pe.lineClipsArray}),yt.texture?yt.texture.update(yt.gradient):yt.texture=new _e(H,yt.gradient,J.RGBA),yt.version=a.gradientVersion,st=yt.texture}H.activeTexture.set(J.TEXTURE0),st.bind(a.stepInterpolant?J.NEAREST:J.LINEAR,J.CLAMP_TO_EDGE)}Pe.draw(H,J.TRIANGLES,w,p.stencilModeForClipping(he),S,Ur.disabled,ze,a.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,a.paint,p.transform.zoom,Oe,pe.layoutVertexBuffer2),ue=!1}},fill:function(p,r,a,h){const f=a.paint.get("fill-color"),y=a.paint.get("fill-opacity");if(y.constantOr(1)===0)return;const w=p.colorModeForRenderPass(),S=a.paint.get("fill-pattern"),I=p.opaquePassEnabledForLayer()&&!S.constantOr(1)&&f.constantOr(l.Color.transparent).a===1&&y.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===I){const D=p.depthModeForSublayer(1,p.renderPass==="opaque"?_r.ReadWrite:_r.ReadOnly);Ml(p,r,a,h,D,w,!1)}if(p.renderPass==="translucent"&&a.paint.get("fill-antialias")){const D=p.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,_r.ReadOnly);Ml(p,r,a,h,D,w,!0)}},"fill-extrusion":function(p,r,a,h){const f=a.paint.get("fill-extrusion-opacity");if(f!==0&&p.renderPass==="translucent"){const y=new _r(p.context.gl.LEQUAL,_r.ReadWrite,p.depthRangeFor3D);if(f!==1||a.paint.get("fill-extrusion-pattern").constantOr(1))Co(p,r,a,h,y,Cr.disabled,Nt.disabled),Co(p,r,a,h,y,p.stencilModeFor3D(),p.colorModeForRenderPass());else{const w=p.colorModeForRenderPass();Co(p,r,a,h,y,Cr.disabled,w)}}},hillshade:function(p,r,a,h){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const f=p.context,y=p.depthModeForSublayer(0,_r.ReadOnly),w=p.colorModeForRenderPass(),[S,I]=p.renderPass==="translucent"?p.stencilConfigForOverlap(h):[{},h];for(const D of I){const R=r.getTile(D);R.needsHillshadePrepare&&p.renderPass==="offscreen"?ci(p,R,a,y,Cr.disabled,w):p.renderPass==="translucent"&&ca(p,R,a,y,S[D.overscaledZ],w)}f.viewport.set([0,0,p.width,p.height])},raster:function(p,r,a,h){if(p.renderPass!=="translucent"||a.paint.get("raster-opacity")===0||!h.length)return;const f=p.context,y=f.gl,w=r.getSource(),S=p.useProgram("raster"),I=p.colorModeForRenderPass(),[D,R]=w instanceof Ar?[{},h]:p.stencilConfigForOverlap(h),N=R[R.length-1].overscaledZ,q=!p.options.moving;for(const Y of R){const H=p.depthModeForSublayer(Y.overscaledZ-N,a.paint.get("raster-opacity")===1?_r.ReadWrite:_r.ReadOnly,y.LESS),J=r.getTile(Y),ue=p.transform.calculatePosMatrix(Y.toUnwrapped(),q);J.registerFadeDuration(a.paint.get("raster-fade-duration"));const he=r.findLoadedParent(Y,0),ge=uu(J,he,r,a,p.transform);let pe,Oe;const Ee=a.paint.get("raster-resampling")==="nearest"?y.NEAREST:y.LINEAR;f.activeTexture.set(y.TEXTURE0),J.texture.bind(Ee,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST),f.activeTexture.set(y.TEXTURE1),he?(he.texture.bind(Ee,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST),pe=Math.pow(2,he.tileID.overscaledZ-J.tileID.overscaledZ),Oe=[J.tileID.canonical.x*pe%1,J.tileID.canonical.y*pe%1]):J.texture.bind(Ee,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST);const Pe=eu(ue,Oe||[0,0],pe||1,ge,a);w instanceof Ar?S.draw(f,y.TRIANGLES,H,Cr.disabled,I,Ur.disabled,Pe,a.id,w.boundsBuffer,p.quadTriangleIndexBuffer,w.boundsSegments):S.draw(f,y.TRIANGLES,H,D[Y.overscaledZ],I,Ur.disabled,Pe,a.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,r,a){const h=a.paint.get("background-color"),f=a.paint.get("background-opacity");if(f===0)return;const y=p.context,w=y.gl,S=p.transform,I=S.tileSize,D=a.paint.get("background-pattern");if(p.isPatternMissing(D))return;const R=!D&&h.a===1&&f===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==R)return;const N=Cr.disabled,q=p.depthModeForSublayer(0,R==="opaque"?_r.ReadWrite:_r.ReadOnly),Y=p.colorModeForRenderPass(),H=p.useProgram(D?"backgroundPattern":"background"),J=S.coveringTiles({tileSize:I});D&&(y.activeTexture.set(w.TEXTURE0),p.imageManager.bind(p.context));const ue=a.getCrossfadeParameters();for(const he of J){const ge=p.transform.calculatePosMatrix(he.toUnwrapped()),pe=D?yl(ge,f,p,D,{tileID:he,tileSize:I},ue):md(ge,f,h);H.draw(y,w.TRIANGLES,q,N,Y,Ur.disabled,pe,a.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}},debug:function(p,r,a){for(let h=0;h<a.length;h++)fu(p,r,a[h])},custom:function(p,r,a){const h=p.context,f=a.implementation;if(p.renderPass==="offscreen"){const y=f.prerender;y&&(p.setCustomLayerDefaults(),h.setColorMode(p.colorModeForRenderPass()),y.call(f,h.gl,p.transform.customLayerMatrix()),h.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),h.setColorMode(p.colorModeForRenderPass()),h.setStencilMode(Cr.disabled);const y=f.renderingMode==="3d"?new _r(p.context.gl.LEQUAL,_r.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,_r.ReadOnly);h.setDepthMode(y),f.render(h.gl,p.transform.customLayerMatrix()),h.setDirty(),p.setBaseState(),h.bindFramebuffer.set(null)}}};class Ll{constructor(r,a){this.context=new ra(r),this.transform=a,this._tileTextures={},this.setup(),this.numSublayers=Z.maxUnderzooming+Z.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Gt,this.gpuTimers={}}resize(r,a,h){if(this.width=r*h,this.height=a*h,this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const r=this.context,a=new l.PosArray;a.emplaceBack(0,0),a.emplaceBack(l.EXTENT,0),a.emplaceBack(0,l.EXTENT),a.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(a,cl.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const h=new l.PosArray;h.emplaceBack(0,0),h.emplaceBack(l.EXTENT,0),h.emplaceBack(0,l.EXTENT),h.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=r.createVertexBuffer(h,cl.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const f=new l.RasterBoundsArray;f.emplaceBack(0,0,0,0),f.emplaceBack(l.EXTENT,0,l.EXTENT,0),f.emplaceBack(0,l.EXTENT,0,l.EXTENT),f.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(f,vr.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const y=new l.PosArray;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(y,cl.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const w=new l.LineStripIndexArray;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(w);const S=new l.TriangleIndexArray;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(S),this.emptyTexture=new _e(r,{width:1,height:1,data:new Uint8Array([0,0,0,0])},r.gl.RGBA);const I=this.context.gl;this.stencilClearMode=new Cr({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const r=this.context,a=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=l.create();l.ortho(h,0,this.width,this.height,0,0,1),l.scale(h,h,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,a.TRIANGLES,_r.disabled,this.stencilClearMode,Nt.disabled,Ur.disabled,ls(h),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,a){if(this.currentStencilSource===r.source||!r.isTileClipped()||!a||!a.length)return;this.currentStencilSource=r.source;const h=this.context,f=h.gl;this.nextStencilID+a.length>256&&this.clearStencil(),h.setColorMode(Nt.disabled),h.setDepthMode(_r.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of a){const S=this._tileClippingMaskIDs[w.key]=this.nextStencilID++;y.draw(h,f.TRIANGLES,_r.disabled,new Cr({func:f.ALWAYS,mask:0},S,255,f.KEEP,f.KEEP,f.REPLACE),Nt.disabled,Ur.disabled,ls(w.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,a=this.context.gl;return new Cr({func:a.NOTEQUAL,mask:255},r,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(r){const a=this.context.gl;return new Cr({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(r){const a=this.context.gl,h=r.sort((w,S)=>S.overscaledZ-w.overscaledZ),f=h[h.length-1].overscaledZ,y=h[0].overscaledZ-f+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const w={};for(let S=0;S<y;S++)w[S+f]=new Cr({func:a.GEQUAL,mask:255},S+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=y,[w,h]}return[{[f]:Cr.disabled},h]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Nt([r.CONSTANT_COLOR,r.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nt.unblended:Nt.alphaBlended}depthModeForSublayer(r,a,h){if(!this.opaquePassEnabledForLayer())return _r.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new _r(h||this.context.gl.LEQUAL,a,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,a){this.style=r,this.options=a,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const h=this.style._order,f=this.style.sourceCaches;for(const I in f){const D=f[I];D.used&&D.prepare(this.context)}const y={},w={},S={};for(const I in f){const D=f[I];y[I]=D.getVisibleCoordinates(),w[I]=y[I].slice().reverse(),S[I]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<h.length;I++)if(this.style._layers[h[I]].is3D()){this.opaquePassCutoff=I;break}this.renderPass="offscreen";for(const I of h){const D=this.style._layers[I];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const R=w[D.source];(D.type==="custom"||R.length)&&this.renderLayer(this,f[D.source],D,R)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[h[this.currentLayer]],D=f[I.source],R=y[I.source];this._renderTileClippingMasks(I,R),this.renderLayer(this,D,I,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const I=this.style._layers[h[this.currentLayer]],D=f[I.source],R=(I.type==="symbol"?S:w)[I.source];this._renderTileClippingMasks(I,y[I.source]),this.renderLayer(this,D,I,R)}if(this.options.showTileBoundaries){let I,D;Object.values(this.style._layers).forEach(R=>{R.source&&!R.isHidden(this.transform.zoom)&&(R.source!==(D&&D.id)&&(D=this.style.sourceCaches[R.source]),(!I||I.getSource().maxzoom<D.getSource().maxzoom)&&(I=D))}),I&&fs.debug(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const D=I.transform.padding;pu(I,I.transform.height-(D.top||0),3,hu),pu(I,D.bottom||0,3,du),ha(I,D.left||0,3,ko),ha(I,I.transform.width-(D.right||0),3,ua);const R=I.transform.centerPoint;(function(N,q,Y,H){da(N,q-1,Y-10,2,20,H),da(N,q-10,Y-1,20,2,H)})(I,R.x,I.transform.height-R.y,Ol)}(this),this.context.setDefault()}renderLayer(r,a,h,f){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||f.length)&&(this.id=h.id,this.gpuTimingStart(h),fs[h.type](r,a,h,f,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(r){if(!this.options.gpuTiming)return;const a=this.context.extTimerQuery;let h=this.gpuTimers[r.id];h||(h=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:a.createQueryEXT()}),h.calls++,a.beginQueryEXT(a.TIME_ELAPSED_EXT,h.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}collectGpuTimers(){const r=this.gpuTimers;return this.gpuTimers={},r}queryGpuTimers(r){const a={};for(const h in r){const f=r[h],y=this.context.extTimerQuery,w=y.getQueryObjectEXT(f.query,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(f.query),a[h]=w}return a}translatePosMatrix(r,a,h,f,y){if(!h[0]&&!h[1])return r;const w=y?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(w){const D=Math.sin(w),R=Math.cos(w);h=[h[0]*R-h[1]*D,h[0]*D+h[1]*R]}const S=[y?h[0]:rn(a,h[0],this.transform.zoom),y?h[1]:rn(a,h[1],this.transform.zoom),0],I=new Float32Array(16);return l.translate(I,r,S),I}saveTileTexture(r){const a=this._tileTextures[r.size[0]];a?a.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const a=this._tileTextures[r];return a&&a.length>0?a.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const a=this.imageManager.getPattern(r.from.toString()),h=this.imageManager.getPattern(r.to.toString());return!a||!h}useProgram(r,a){this.cache=this.cache||{};const h=`${r}${a?a.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[h]||(this.cache[h]=new pd(this.context,r,ul[r],a,vl[r],this._showOverdrawInspector)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _e(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class pa{constructor(r,a){this.points=r,this.planes=a}static fromInvProjectionMatrix(r,a,h){const f=Math.pow(2,h),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>l.transformMat4([],S,r)).map(S=>l.scale$1([],S,1/S[3]/a*f)),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const I=function(q,Y){var H=Y[0],J=Y[1],ue=Y[2],he=H*H+J*J+ue*ue;return he>0&&(he=1/Math.sqrt(he)),q[0]=Y[0]*he,q[1]=Y[1]*he,q[2]=Y[2]*he,q}([],function(q,Y,H){var J=Y[0],ue=Y[1],he=Y[2],ge=H[0],pe=H[1],Oe=H[2];return q[0]=ue*Oe-he*pe,q[1]=he*ge-J*Oe,q[2]=J*pe-ue*ge,q}([],se([],y[S[0]],y[S[1]]),se([],y[S[2]],y[S[1]]))),D=-((R=I)[0]*(N=y[S[1]])[0]+R[1]*N[1]+R[2]*N[2]);var R,N;return I.concat(D)});return new pa(y,w)}}class fa{constructor(r,a){this.min=r,this.max=a,this.center=function(h,f,y){return h[0]=.5*f[0],h[1]=.5*f[1],h[2]=.5*f[2],h}([],function(h,f,y){return h[0]=f[0]+y[0],h[1]=f[1]+y[1],h[2]=f[2]+y[2],h}([],this.min,this.max))}quadrant(r){const a=[r%2==0,r<2],h=de(this.min),f=de(this.max);for(let y=0;y<a.length;y++)h[y]=a[y]?this.min[y]:this.center[y],f[y]=a[y]?this.center[y]:this.max[y];return f[2]=this.max[2],new fa(h,f)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const a=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let h=!0;for(let f=0;f<r.planes.length;f++){const y=r.planes[f];let w=0;for(let S=0;S<a.length;S++)l.dot(y,a[S])>=0&&w++;if(w===0)return 0;w!==a.length&&(h=!1)}if(h)return 2;for(let f=0;f<3;f++){let y=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let S=0;S<r.points.length;S++){const I=r.points[S][f]-this.min[f];y=Math.min(y,I),w=Math.max(w,I)}if(w<0||y>this.max[f]-this.min[f])return 0}return 1}}class Do{constructor(r=0,a=0,h=0,f=0){if(isNaN(r)||r<0||isNaN(a)||a<0||isNaN(h)||h<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=a,this.left=h,this.right=f}interpolate(r,a,h){return a.top!=null&&r.top!=null&&(this.top=l.number(r.top,a.top,h)),a.bottom!=null&&r.bottom!=null&&(this.bottom=l.number(r.bottom,a.bottom,h)),a.left!=null&&r.left!=null&&(this.left=l.number(r.left,a.left,h)),a.right!=null&&r.right!=null&&(this.right=l.number(r.right,a.right,h)),this}getCenter(r,a){const h=l.clamp((this.left+r-this.right)/2,0,r),f=l.clamp((this.top+a-this.bottom)/2,0,a);return new l.pointGeometry(h,f)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Do(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ms{constructor(r,a,h,f,y){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=y===void 0||!!y,this._minZoom=r||0,this._maxZoom=a||22,this._minPitch=h==null?0:h,this._maxPitch=f==null?60:f,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Do,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const r=new ms(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r._center=this._center,r.zoom=this.zoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._calcMatrices(),r}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const a=-l.wrap(r,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var h=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}(),function(h,f,y){var w=f[0],S=f[1],I=f[2],D=f[3],R=Math.sin(y),N=Math.cos(y);h[0]=w*N+I*R,h[1]=S*N+D*R,h[2]=w*-R+I*N,h[3]=S*-R+D*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const a=l.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const a=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,a,h){this._unmodified=!1,this._edgeInsets.interpolate(r,a,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const a=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(r){const a=[new l.UnwrappedTileID(0,r)];if(this._renderWorldCopies){const h=this.pointCoordinate(new l.pointGeometry(0,0)),f=this.pointCoordinate(new l.pointGeometry(this.width,0)),y=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),w=this.pointCoordinate(new l.pointGeometry(0,this.height)),S=Math.floor(Math.min(h.x,f.x,y.x,w.x)),I=Math.floor(Math.max(h.x,f.x,y.x,w.x)),D=1;for(let R=S-D;R<=I+D;R++)R!==0&&a.push(new l.UnwrappedTileID(R,r))}return a}coveringTiles(r){let a=this.coveringZoomLevel(r);const h=a;if(r.minzoom!==void 0&&a<r.minzoom)return[];r.maxzoom!==void 0&&a>r.maxzoom&&(a=r.maxzoom);const f=l.MercatorCoordinate.fromLngLat(this.center),y=Math.pow(2,a),w=[y*f.x,y*f.y,0],S=pa.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a);let I=r.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(I=a);const D=H=>({aabb:new fa([H*y,0,0],[(H+1)*y,y,0]),zoom:0,x:0,y:0,wrap:H,fullyVisible:!1}),R=[],N=[],q=a,Y=r.reparseOverscaled?h:a;if(this._renderWorldCopies)for(let H=1;H<=3;H++)R.push(D(-H)),R.push(D(H));for(R.push(D(0));R.length>0;){const H=R.pop(),J=H.x,ue=H.y;let he=H.fullyVisible;if(!he){const Pe=H.aabb.intersects(S);if(Pe===0)continue;he=Pe===2}const ge=H.aabb.distanceX(w),pe=H.aabb.distanceY(w),Oe=Math.max(Math.abs(ge),Math.abs(pe)),Ee=3+(1<<q-H.zoom)-2;if(H.zoom===q||Oe>Ee&&H.zoom>=I)N.push({tileID:new l.OverscaledTileID(H.zoom===q?Y:H.zoom,H.wrap,H.zoom,J,ue),distanceSq:me([w[0]-.5-J,w[1]-.5-ue])});else for(let Pe=0;Pe<4;Pe++){const Ge=(J<<1)+Pe%2,et=(ue<<1)+(Pe>>1);R.push({aabb:H.aabb.quadrant(Pe),zoom:H.zoom+1,x:Ge,y:et,wrap:H.wrap,fullyVisible:he})}}return N.sort((H,J)=>H.distanceSq-J.distanceSq).map(H=>H.tileID)}resize(r,a){this.width=r,this.height=a,this.pixelsToGLUnits=[2/r,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const a=l.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.pointGeometry(l.mercatorXfromLng(r.lng)*this.worldSize,l.mercatorYfromLat(a)*this.worldSize)}unproject(r){return new l.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(r,a){const h=this.pointCoordinate(a),f=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(r),w=new l.MercatorCoordinate(y.x-(h.x-f.x),y.y-(h.y-f.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r){return this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r){return this.coordinateLocation(this.pointCoordinate(r))}locationCoordinate(r){return l.MercatorCoordinate.fromLngLat(r)}coordinateLocation(r){return r.toLngLat()}pointCoordinate(r){const a=[r.x,r.y,0,1],h=[r.x,r.y,1,1];l.transformMat4(a,a,this.pixelMatrixInverse),l.transformMat4(h,h,this.pixelMatrixInverse);const f=a[3],y=h[3],w=a[1]/f,S=h[1]/y,I=a[2]/f,D=h[2]/y,R=I===D?0:(0-I)/(D-I);return new l.MercatorCoordinate(l.number(a[0]/f,h[0]/y,R)/this.worldSize,l.number(w,S,R)/this.worldSize)}coordinatePoint(r){const a=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(a,a,this.pixelMatrix),new l.pointGeometry(a[0]/a[3],a[1]/a[3])}getBounds(){return new l.LngLatBounds().extend(this.pointLocation(new l.pointGeometry(0,0))).extend(this.pointLocation(new l.pointGeometry(this.width,0))).extend(this.pointLocation(new l.pointGeometry(this.width,this.height))).extend(this.pointLocation(new l.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,a=!1){const h=r.key,f=a?this._alignedPosMatrixCache:this._posMatrixCache;if(f[h])return f[h];const y=r.canonical,w=this.worldSize/this.zoomScale(y.z),S=y.x+Math.pow(2,y.z)*r.wrap,I=l.identity(new Float64Array(16));return l.translate(I,I,[S*w,y.y*w,0]),l.scale(I,I,[w/l.EXTENT,w/l.EXTENT,1]),l.multiply(I,a?this.alignedProjMatrix:this.projMatrix,I),f[h]=new Float32Array(I),f[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,a,h,f,y=-90,w=90,S=-180,I=180;const D=this.size,R=this._unmodified;if(this.latRange){const Y=this.latRange;y=l.mercatorYfromLat(Y[1])*this.worldSize,w=l.mercatorYfromLat(Y[0])*this.worldSize,r=w-y<D.y?D.y/(w-y):0}if(this.lngRange){const Y=this.lngRange;S=l.mercatorXfromLng(Y[0])*this.worldSize,I=l.mercatorXfromLng(Y[1])*this.worldSize,a=I-S<D.x?D.x/(I-S):0}const N=this.point,q=Math.max(a||0,r||0);if(q)return this.center=this.unproject(new l.pointGeometry(a?(I+S)/2:N.x,r?(w+y)/2:N.y)),this.zoom+=this.scaleZoom(q),this._unmodified=R,void(this._constraining=!1);if(this.latRange){const Y=N.y,H=D.y/2;Y-H<y&&(f=y+H),Y+H>w&&(f=w-H)}if(this.lngRange){const Y=N.x,H=D.x/2;Y-H<S&&(h=S+H),Y+H>I&&(h=I-H)}h===void 0&&f===void 0||(this.center=this.unproject(new l.pointGeometry(h!==void 0?h:N.x,f!==void 0?f:N.y))),this._unmodified=R,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const a=Math.PI/2+this._pitch,h=this._fov*(.5+r.y/this.height),f=Math.sin(h)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-a-h,.01,Math.PI-.01)),y=this.point,w=y.x,S=y.y,I=1.01*(Math.cos(Math.PI/2-this._pitch)*f+this.cameraToCenterDistance),D=this.height/50;let R=new Float64Array(16);l.perspective(R,this._fov,this.width/this.height,D,I),R[8]=2*-r.x/this.width,R[9]=2*r.y/this.height,l.scale(R,R,[1,-1,1]),l.translate(R,R,[0,0,-this.cameraToCenterDistance]),l.rotateX(R,R,this._pitch),l.rotateZ(R,R,this.angle),l.translate(R,R,[-w,-S,0]),this.mercatorMatrix=l.scale([],R,[this.worldSize,this.worldSize,this.worldSize]),l.scale(R,R,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=R,this.invProjMatrix=l.invert([],this.projMatrix);const N=this.width%2/2,q=this.height%2/2,Y=Math.cos(this.angle),H=Math.sin(this.angle),J=w-Math.round(w)+Y*N+H*q,ue=S-Math.round(S)+Y*q+H*N,he=new Float64Array(R);if(l.translate(he,he,[J>.5?J-1:J,ue>.5?ue-1:ue,0]),this.alignedProjMatrix=he,R=l.create(),l.scale(R,R,[this.width/2,-this.height/2,1]),l.translate(R,R,[1,-1,0]),this.labelPlaneMatrix=R,R=l.create(),l.scale(R,R,[1,-1,1]),l.translate(R,R,[-1,-1,0]),l.scale(R,R,[2/this.width,2/this.height,1]),this.glCoordMatrix=R,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),R=l.invert(new Float64Array(16),this.pixelMatrix),!R)throw new Error("failed to invert matrix");this.pixelMatrixInverse=R,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.pointGeometry(0,0)),a=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,r))}getCameraQueryGeometry(r){const a=this.getCameraPoint();if(r.length===1)return[r[0],a];{let h=a.x,f=a.y,y=a.x,w=a.y;for(const S of r)h=Math.min(h,S.x),f=Math.min(f,S.y),y=Math.max(y,S.x),w=Math.max(w,S.y);return[new l.pointGeometry(h,f),new l.pointGeometry(y,f),new l.pointGeometry(y,w),new l.pointGeometry(h,w),new l.pointGeometry(h,f)]}}}class mu{constructor(r){this._hashName=r&&encodeURIComponent(r),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(a,h){let f=!1,y=null;const w=()=>{y=null,f&&(a(),y=setTimeout(w,300),f=!1)};return()=>(f=!0,y||w(),y)}(this._updateHashUnthrottled.bind(this))}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const a=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,f=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,f),w=Math.round(a.lng*y)/y,S=Math.round(a.lat*y)/y,I=this._map.getBearing(),D=this._map.getPitch();let R="";if(R+=r?`/${w}/${S}/${h}`:`${h}/${S}/${w}`,(I||D)&&(R+="/"+Math.round(10*I)/10),D&&(R+=`/${Math.round(D)}`),this._hashName){const N=this._hashName;let q=!1;const Y=window.location.hash.slice(1).split("&").map(H=>{const J=H.split("=")[0];return J===N?(q=!0,`${J}=${R}`):H}).filter(H=>H);return q||Y.push(`${N}=${R}`),`#${Y.join("&")}`}return`#${R}`}_getCurrentHash(){const r=window.location.hash.replace("#","");if(this._hashName){let a;return r.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(a=h)}),(a&&a[1]||"").split("/")}return r.split("/")}_onHashChange(){const r=this._getCurrentHash();if(r.length>=3&&!r.some(a=>isNaN(a))){const a=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:a,pitch:+(r[4]||0)}),!0}return!1}_updateHashUnthrottled(){const r=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,r)}catch{}}}const gs={linearity:.3,easing:l.bezier(0,0,.3,1)},gu=l.extend({deceleration:2500,maxSpeed:1400},gs),_u=l.extend({deceleration:20,maxSpeed:1400},gs),yu=l.extend({deceleration:1e3,maxSpeed:360},gs),zo=l.extend({deceleration:1e3,maxSpeed:90},gs);class vu{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,a=l.exported.now();for(;r.length>0&&a-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)a.zoom+=y.zoomDelta||0,a.bearing+=y.bearingDelta||0,a.pitch+=y.pitchDelta||0,y.panDelta&&a.pan._add(y.panDelta),y.around&&(a.around=y.around),y.pinchAround&&(a.pinchAround=y.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(a.pan.mag()){const y=ys(a.pan.mag(),h,l.extend({},gu,r||{}));f.offset=a.pan.mult(y.amount/a.pan.mag()),f.center=this._map.transform.center,_s(f,y)}if(a.zoom){const y=ys(a.zoom,h,_u);f.zoom=this._map.transform.zoom+y.amount,_s(f,y)}if(a.bearing){const y=ys(a.bearing,h,yu);f.bearing=this._map.transform.bearing+l.clamp(y.amount,-179,179),_s(f,y)}if(a.pitch){const y=ys(a.pitch,h,zo);f.pitch=this._map.transform.pitch+y.amount,_s(f,y)}if(f.zoom||f.bearing){const y=a.pinchAround===void 0?a.around:a.pinchAround;f.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),l.extend(f,{noMoveStart:!0})}}function _s(p,r){(!p.duration||p.duration<r.duration)&&(p.duration=r.duration,p.easing=r.easing)}function ys(p,r,a){const{maxSpeed:h,linearity:f,deceleration:y}=a,w=l.clamp(p*f/(r/1e3),-h,h),S=Math.abs(w)/(y*f);return{easing:a.easing,duration:1e3*S,amount:w*(S/2)}}class Vn extends l.Event{constructor(r,a,h,f={}){const y=O.mousePos(a.getCanvasContainer(),h),w=a.unproject(y);super(r,l.extend({point:y,lngLat:w,originalEvent:h},f)),this._defaultPrevented=!1,this.target=a}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Mn extends l.Event{constructor(r,a,h){const f=r==="touchend"?h.changedTouches:h.touches,y=O.touchPos(a.getCanvasContainer(),f),w=y.map(I=>a.unproject(I)),S=y.reduce((I,D,R,N)=>I.add(D.div(N.length)),new l.pointGeometry(0,0));super(r,{points:y,point:S,lngLats:w,lngLat:a.unproject(S),originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Sd extends l.Event{constructor(r,a,h){super(r,{originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class to{constructor(r,a){this._map=r,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Sd(r.type,this._map,r))}mousedown(r,a){return this._mousedownPos=a,this._firePreventable(new Vn(r.type,this._map,r))}mouseup(r){this._map.fire(new Vn(r.type,this._map,r))}click(r,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Vn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Vn(r.type,this._map,r))}mouseover(r){this._map.fire(new Vn(r.type,this._map,r))}mouseout(r){this._map.fire(new Vn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Mn(r.type,this._map,r))}touchmove(r){this._map.fire(new Mn(r.type,this._map,r))}touchend(r){this._map.fire(new Mn(r.type,this._map,r))}touchcancel(r){this._map.fire(new Mn(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xu{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Vn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Vn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._map.fire(new Vn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mo{constructor(r,a){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,a){this.isEnabled()&&r.shiftKey&&r.button===0&&(O.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(r,a){if(!this._active)return;const h=a;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=h,this._box||(this._box=O.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));const y=Math.min(f.x,h.x),w=Math.max(f.x,h.x),S=Math.min(f.y,h.y),I=Math.max(f.y,h.y);O.setTransform(this._box,`translate(${y}px,${S}px)`),this._box.style.width=w-y+"px",this._box.style.height=I-S+"px"}mouseupWindow(r,a){if(!this._active||r.button!==0)return;const h=this._startPos,f=a;if(this.reset(),O.suppressClick(),h.x!==f.x||h.y!==f.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:y=>y.fitScreenCoordinates(h,f,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,a){return this._map.fire(new l.Event(r,{originalEvent:a}))}}function ro(p,r){const a={};for(let h=0;h<p.length;h++)a[p[h].identifier]=r[h];return a}class Td{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,a,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),h.length===this.numTouches&&(this.centroid=function(f){const y=new l.pointGeometry(0,0);for(const w of f)y._add(w);return y.div(f.length)}(a),this.touches=ro(h,a)))}touchmove(r,a,h){if(this.aborted||!this.centroid)return;const f=ro(h,a);for(const y in this.touches){const w=this.touches[y],S=f[y];(!S||S.dist(w)>30)&&(this.aborted=!0)}}touchend(r,a,h){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class Rl{constructor(r){this.singleTap=new Td(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,a,h){this.singleTap.touchstart(r,a,h)}touchmove(r,a,h){this.singleTap.touchmove(r,a,h)}touchend(r,a,h){const f=this.singleTap.touchend(r,a,h);if(f){const y=r.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(f)<30;if(y&&w||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class Id{constructor(){this._zoomIn=new Rl({numTouches:1,numTaps:2}),this._zoomOut=new Rl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,a,h){this._zoomIn.touchstart(r,a,h),this._zoomOut.touchstart(r,a,h)}touchmove(r,a,h){this._zoomIn.touchmove(r,a,h),this._zoomOut.touchmove(r,a,h)}touchend(r,a,h){const f=this._zoomIn.touchend(r,a,h),y=this._zoomOut.touchend(r,a,h);return f?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:w.getZoom()+1,around:w.unproject(f)},{originalEvent:r})}):y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:w.getZoom()-1,around:w.unproject(y)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const bu={0:1,2:2};class no{constructor(r){this.reset(),this._clickTolerance=r.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(r,a){return!1}_move(r,a){return{}}mousedown(r,a){if(this._lastPoint)return;const h=O.mouseButton(r);this._correctButton(r,h)&&(this._lastPoint=a,this._eventButton=h)}mousemoveWindow(r,a){const h=this._lastPoint;if(h){if(r.preventDefault(),function(f,y){const w=bu[y];return f.buttons===void 0||(f.buttons&w)!==w}(r,this._eventButton))this.reset();else if(this._moved||!(a.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=a,this._move(h,a)}}mouseupWindow(r){this._lastPoint&&O.mouseButton(r)===this._eventButton&&(this._moved&&O.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oo extends no{mousedown(r,a){super.mousedown(r,a),this._lastPoint&&(this._active=!0)}_correctButton(r,a){return a===0&&!r.ctrlKey}_move(r,a){return{around:a,panDelta:a.sub(r)}}}class mt extends no{_correctButton(r,a){return a===0&&r.ctrlKey||a===2}_move(r,a){const h=.8*(a.x-r.x);if(h)return this._active=!0,{bearingDelta:h}}contextmenu(r){r.preventDefault()}}class Bl extends no{_correctButton(r,a){return a===0&&r.ctrlKey||a===2}_move(r,a){const h=-.5*(a.y-r.y);if(h)return this._active=!0,{pitchDelta:h}}contextmenu(r){r.preventDefault()}}class vs{constructor(r){this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0)}touchstart(r,a,h){return this._calculateTransform(r,a,h)}touchmove(r,a,h){if(this._active&&!(h.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,a,h)}touchend(r,a,h){this._calculateTransform(r,a,h),this._active&&h.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,a,h){h.length>0&&(this._active=!0);const f=ro(h,a),y=new l.pointGeometry(0,0),w=new l.pointGeometry(0,0);let S=0;for(const D in f){const R=f[D],N=this._touches[D];N&&(y._add(R),w._add(R.sub(N)),S++,f[D]=R)}if(this._touches=f,S<this._minTouches||!w.mag())return;const I=w.div(S);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(S),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class io{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(r){}_move(r,a,h){return{}}touchstart(r,a,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([a[0],a[1]]))}touchmove(r,a,h){if(!this._firstTwoTouches)return;r.preventDefault();const[f,y]=this._firstTwoTouches,w=xs(h,a,f),S=xs(h,a,y);if(!w||!S)return;const I=this._aroundCenter?null:w.add(S).div(2);return this._move([w,S],I,r)}touchend(r,a,h){if(!this._firstTwoTouches)return;const[f,y]=this._firstTwoTouches,w=xs(h,a,f),S=xs(h,a,y);w&&S||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function xs(p,r,a){for(let h=0;h<p.length;h++)if(p[h].identifier===a)return r[h]}function it(p,r){return Math.log(p/r)/Math.LN2}class Fl extends io{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,a){const h=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(it(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:it(this._distance,h),pinchAround:a}}}function wu(p,r){return 180*p.angleWith(r)/Math.PI}class Ad extends io{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,a){const h=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:wu(this._vector,h),pinchAround:a}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const a=25/(Math.PI*this._minDiameter)*360,h=wu(r,this._startVector);return Math.abs(h)<a}}function bs(p){return Math.abs(p.y)>Math.abs(p.x)}class Eu extends io{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(r){this._lastPoints=r,bs(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,a,h){const f=r[0].sub(this._lastPoints[0]),y=r[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(f,y,h.timeStamp),this._valid)return this._lastPoints=r,this._active=!0,{pitchDelta:(f.y+y.y)/2*-.5}}gestureBeginsVertically(r,a,h){if(this._valid!==void 0)return this._valid;const f=r.mag()>=2,y=a.mag()>=2;if(!f&&!y)return;if(!f||!y)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const w=r.y>0==a.y>0;return bs(r)&&bs(a)&&w}}const Su={panStep:100,bearingStep:15,pitchStep:10};class Pd{constructor(){const r=Su;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let a=0,h=0,f=0,y=0,w=0;switch(r.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:r.shiftKey?h=-1:(r.preventDefault(),y=-1);break;case 39:r.shiftKey?h=1:(r.preventDefault(),y=1);break;case 38:r.shiftKey?f=1:(r.preventDefault(),w=-1);break;case 40:r.shiftKey?f=-1:(r.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(h=0,f=0),{cameraAnimation:S=>{const I=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:Cd,zoom:a?Math.round(I)+a*(r.shiftKey?2:1):I,bearing:S.getBearing()+h*this._bearingStep,pitch:S.getPitch()+f*this._pitchStep,offset:[-y*this._panStep,-w*this._panStep],center:S.getCenter()},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Cd(p){return p*(2-p)}const ma=4.000244140625;class Nl{constructor(r,a){this._map=r,this._el=r.getCanvasContainer(),this._handler=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;let a=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const h=l.exported.now(),f=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,a!==0&&a%ma==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(f*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),r.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=r,this._delta-=a,this._active||this._start(r)),r.preventDefault()}_onTimeout(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=O.mousePos(this._el,r);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._map.transform;if(this._delta!==0){const S=this._type==="wheel"&&Math.abs(this._delta)>ma?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&I!==0&&(I=1/I);const D=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(D*I))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,h=this._startZoom,f=this._easing;let y,w=!1;if(this._type==="wheel"&&h&&f){const S=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),I=f(S);y=l.number(h,a,I),S<1?this._frameId||(this._frameId=!0):w=!0}else y=a,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:y-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let a=l.ease;if(this._prevEase){const h=this._prevEase,f=(l.exported.now()-h.start)/h.duration,y=h.easing(f+.01)-h.easing(f),w=.27/Math.sqrt(y*y+1e-4)*.01,S=Math.sqrt(.0729-w*w);a=l.bezier(w,S,.25,1)}return this._prevEase={start:l.exported.now(),duration:r,easing:a},a}reset(){this._active=!1}}class jl{constructor(r,a){this._clickZoom=r,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vl{constructor(){this.reset()}reset(){this._active=!1}dblclick(r,a){return r.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:h.getZoom()+(r.shiftKey?-1:1),around:h.unproject(a)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class On{constructor(){this._tap=new Rl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(r,a,h){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=a[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(r,a,h))}touchmove(r,a,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const f=a[0],y=f.y-this._swipePoint.y;return this._swipePoint=f,r.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(r,a,h)}touchend(r,a,h){this._tapTime?this._swipePoint&&h.length===0&&this.reset():this._tap.touchend(r,a,h)&&(this._tapTime=r.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ji{constructor(r,a,h){this._el=r,this._mousePan=a,this._touchPan=h}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Tu{constructor(r,a,h){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=a,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ul{constructor(r,a,h,f){this._el=r,this._touchZoom=a,this._touchRotate=h,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Lo=p=>p.zoom||p.drag||p.pitch||p.rotate;class $l extends l.Event{}function ga(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Qn{constructor(r,a){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new vu(r),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a),l.bindAll(["handleEvent","handleWindowEvent"],this);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,y,w]of this._listeners)O.addEventListener(f,y,f===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[r,a,h]of this._listeners)O.removeEventListener(r,a,r===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(r){const a=this._map,h=a.getCanvasContainer();this._add("mapEvent",new to(a,r));const f=a.boxZoom=new Mo(a,r);this._add("boxZoom",f);const y=new Id,w=new Vl;a.doubleClickZoom=new jl(w,y),this._add("tapZoom",y),this._add("clickZoom",w);const S=new On;this._add("tapDragZoom",S);const I=a.touchPitch=new Eu;this._add("touchPitch",I);const D=new mt(r),R=new Bl(r);a.dragRotate=new Tu(r,D,R),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);const N=new Oo(r),q=new vs(r);a.dragPan=new ji(h,N,q),this._add("mousePan",N),this._add("touchPan",q,["touchZoom","touchRotate"]);const Y=new Ad,H=new Fl;a.touchZoomRotate=new Ul(h,H,Y,S),this._add("touchRotate",Y,["touchPan","touchZoom"]),this._add("touchZoom",H,["touchPan","touchRotate"]);const J=a.scrollZoom=new Nl(a,this);this._add("scrollZoom",J,["mousePan"]);const ue=a.keyboard=new Pd;this._add("keyboard",ue),this._add("blockableMapEvent",new xu(a));for(const he of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])r.interactive&&r[he]&&a[he].enable(r[he])}_add(r,a,h){this._handlers.push({handlerName:r,handler:a,allowed:h}),this._handlersById[r]=a}stop(r){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Lo(this._eventsInProgress))||this.isZooming()}_blockedByActive(r,a,h){for(const f in r)if(f!==h&&(!a||a.indexOf(f)<0))return!0;return!1}handleWindowEvent(r){this.handleEvent(r,`${r.type}Window`)}_getMapTouches(r){const a=[];for(const h of r)this._el.contains(h.target)&&a.push(h);return a}handleEvent(r,a){if(r.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const h=r.type==="renderFrame"?void 0:r,f={needsRenderFrame:!1},y={},w={},S=r.touches,I=S?this._getMapTouches(S):void 0,D=I?O.touchPos(this._el,I):O.mousePos(this._el,r);for(const{handlerName:q,handler:Y,allowed:H}of this._handlers){if(!Y.isEnabled())continue;let J;this._blockedByActive(w,H,q)?Y.reset():Y[a||r.type]&&(J=Y[a||r.type](r,D,I),this.mergeHandlerResult(f,y,J,q,h),J&&J.needsRenderFrame&&this._triggerRenderFrame()),(J||Y.isActive())&&(w[q]=Y)}const R={};for(const q in this._previousActiveHandlers)w[q]||(R[q]=h);this._previousActiveHandlers=w,(Object.keys(R).length||ga(f))&&(this._changes.push([f,y,R]),this._triggerRenderFrame()),(Object.keys(w).length||ga(f))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:N}=f;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))}mergeHandlerResult(r,a,h,f,y){if(!h)return;l.extend(r,h);const w={handlerName:f,originalEvent:h.originalEvent||y};h.zoomDelta!==void 0&&(a.zoom=w),h.panDelta!==void 0&&(a.drag=w),h.pitchDelta!==void 0&&(a.pitch=w),h.bearingDelta!==void 0&&(a.rotate=w)}_applyChanges(){const r={},a={},h={};for(const[f,y,w]of this._changes)f.panDelta&&(r.panDelta=(r.panDelta||new l.pointGeometry(0,0))._add(f.panDelta)),f.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(r.around=f.around),f.pinchAround!==void 0&&(r.pinchAround=f.pinchAround),f.noInertia&&(r.noInertia=f.noInertia),l.extend(a,y),l.extend(h,w);this._updateMapTransform(r,a,h),this._changes=[]}_updateMapTransform(r,a,h){const f=this._map,y=f.transform;if(!ga(r))return this._fireEvents(a,h,!0);let{panDelta:w,zoomDelta:S,bearingDelta:I,pitchDelta:D,around:R,pinchAround:N}=r;N!==void 0&&(R=N),f._stop(!0),R=R||f.transform.centerPoint;const q=y.pointLocation(w?R.sub(w):R);I&&(y.bearing+=I),D&&(y.pitch+=D),S&&(y.zoom+=S),y.setLocationAtPoint(q,R),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(a,h,!0)}_fireEvents(r,a,h){const f=Lo(this._eventsInProgress),y=Lo(r),w={};for(const R in r){const{originalEvent:N}=r[R];this._eventsInProgress[R]||(w[`${R}start`]=N),this._eventsInProgress[R]=r[R]}!f&&y&&this._fireEvent("movestart",y.originalEvent);for(const R in w)this._fireEvent(R,w[R]);y&&this._fireEvent("move",y.originalEvent);for(const R in r){const{originalEvent:N}=r[R];this._fireEvent(R,N)}const S={};let I;for(const R in this._eventsInProgress){const{handlerName:N,originalEvent:q}=this._eventsInProgress[R];this._handlersById[N].isActive()||(delete this._eventsInProgress[R],I=a[N]||q,S[`${R}end`]=I)}for(const R in S)this._fireEvent(R,S[R]);const D=Lo(this._eventsInProgress);if(h&&(f||y)&&!D){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;R?(N(R.bearing||this._map.getBearing())&&(R.bearing=0),this._map.easeTo(R,{originalEvent:I})):(this._map.fire(new l.Event("moveend",{originalEvent:I})),N(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(r,a){this._map.fire(new l.Event(r,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new $l("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const kr={extend:(p,...r)=>l.extend(p,...r),run(p){p()},logToElement(p,r=!1,a="log"){const h=window.document.getElementById(a);h&&(r&&(h.innerHTML=""),h.innerHTML+=`<br>${p}`)}};class _a extends l.Evented{constructor(r,a){super(),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=a.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(r,a){return this.jumpTo({center:r},a)}panBy(r,a,h){return r=l.pointGeometry.convert(r).mult(-1),this.panTo(this.transform.center,l.extend({offset:r},a),h)}panTo(r,a,h){return this.easeTo(l.extend({center:r},a),h)}getZoom(){return this.transform.zoom}setZoom(r,a){return this.jumpTo({zoom:r},a),this}zoomTo(r,a,h){return this.easeTo(l.extend({zoom:r},a),h)}zoomIn(r,a){return this.zoomTo(this.getZoom()+1,r,a),this}zoomOut(r,a){return this.zoomTo(this.getZoom()-1,r,a),this}getBearing(){return this.transform.bearing}setBearing(r,a){return this.jumpTo({bearing:r},a),this}getPadding(){return this.transform.padding}setPadding(r,a){return this.jumpTo({padding:r},a),this}rotateTo(r,a,h){return this.easeTo(l.extend({bearing:r},a),h)}resetNorth(r,a){return this.rotateTo(0,l.extend({duration:1e3},r),a),this}resetNorthPitch(r,a){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},r),a),this}snapToNorth(r,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,a):this}getPitch(){return this.transform.pitch}setPitch(r,a){return this.jumpTo({pitch:r},a),this}cameraForBounds(r,a){r=l.LngLatBounds.convert(r);const h=a&&a.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),h,a)}_cameraForBoxAndBearing(r,a,h,f){const y={top:0,bottom:0,right:0,left:0};if(typeof(f=l.extend({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const Ee=f.padding;f.padding={top:Ee,bottom:Ee,right:Ee,left:Ee}}f.padding=l.extend(y,f.padding);const w=this.transform,S=w.padding,I=w.project(l.LngLat.convert(r)),D=w.project(l.LngLat.convert(a)),R=I.rotate(-h*Math.PI/180),N=D.rotate(-h*Math.PI/180),q=new l.pointGeometry(Math.max(R.x,N.x),Math.max(R.y,N.y)),Y=new l.pointGeometry(Math.min(R.x,N.x),Math.min(R.y,N.y)),H=q.sub(Y),J=(w.width-(S.left+S.right+f.padding.left+f.padding.right))/H.x,ue=(w.height-(S.top+S.bottom+f.padding.top+f.padding.bottom))/H.y;if(ue<0||J<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const he=Math.min(w.scaleZoom(w.scale*Math.min(J,ue)),f.maxZoom),ge=l.pointGeometry.convert(f.offset),pe=new l.pointGeometry((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(h*Math.PI/180),Oe=ge.add(pe).mult(w.scale/w.zoomScale(he));return{center:w.unproject(I.add(D).div(2).sub(Oe)),zoom:he,bearing:h}}fitBounds(r,a,h){return this._fitInternal(this.cameraForBounds(r,a),a,h)}fitScreenCoordinates(r,a,h,f,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(r)),this.transform.pointLocation(l.pointGeometry.convert(a)),h,f),f,y)}_fitInternal(r,a,h){return r?(delete(a=l.extend(r,a)).padding,a.linear?this.easeTo(a,h):this.flyTo(a,h)):this}jumpTo(r,a){this.stop();const h=this.transform;let f=!1,y=!1,w=!1;return"zoom"in r&&h.zoom!==+r.zoom&&(f=!0,h.zoom=+r.zoom),r.center!==void 0&&(h.center=l.LngLat.convert(r.center)),"bearing"in r&&h.bearing!==+r.bearing&&(y=!0,h.bearing=+r.bearing),"pitch"in r&&h.pitch!==+r.pitch&&(w=!0,h.pitch=+r.pitch),r.padding==null||h.isPaddingEqual(r.padding)||(h.padding=r.padding),this.fire(new l.Event("movestart",a)).fire(new l.Event("move",a)),f&&this.fire(new l.Event("zoomstart",a)).fire(new l.Event("zoom",a)).fire(new l.Event("zoomend",a)),y&&this.fire(new l.Event("rotatestart",a)).fire(new l.Event("rotate",a)).fire(new l.Event("rotateend",a)),w&&this.fire(new l.Event("pitchstart",a)).fire(new l.Event("pitch",a)).fire(new l.Event("pitchend",a)),this.fire(new l.Event("moveend",a))}easeTo(r,a){this._stop(!1,r.easeId),((r=l.extend({offset:[0,0],duration:500,easing:l.ease},r)).animate===!1||!r.essential&&l.exported.prefersReducedMotion)&&(r.duration=0);const h=this.transform,f=this.getZoom(),y=this.getBearing(),w=this.getPitch(),S=this.getPadding(),I="zoom"in r?+r.zoom:f,D="bearing"in r?this._normalizeBearing(r.bearing,y):y,R="pitch"in r?+r.pitch:w,N="padding"in r?r.padding:h.padding,q=l.pointGeometry.convert(r.offset);let Y=h.centerPoint.add(q);const H=h.pointLocation(Y),J=l.LngLat.convert(r.center||H);this._normalizeCenter(J);const ue=h.project(H),he=h.project(J).sub(ue),ge=h.zoomScale(I-f);let pe,Oe;r.around&&(pe=l.LngLat.convert(r.around),Oe=h.locationPoint(pe));const Ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||I!==f,this._rotating=this._rotating||y!==D,this._pitching=this._pitching||R!==w,this._padding=!h.isPaddingEqual(N),this._easeId=r.easeId,this._prepareEase(a,r.noMoveStart,Ee),this._ease(Pe=>{if(this._zooming&&(h.zoom=l.number(f,I,Pe)),this._rotating&&(h.bearing=l.number(y,D,Pe)),this._pitching&&(h.pitch=l.number(w,R,Pe)),this._padding&&(h.interpolatePadding(S,N,Pe),Y=h.centerPoint.add(q)),pe)h.setLocationAtPoint(pe,Oe);else{const Ge=h.zoomScale(h.zoom-f),et=I>f?Math.min(2,ge):Math.max(.5,ge),ze=Math.pow(et,1-Pe),yt=h.unproject(ue.add(he.mult(Pe*ze)).mult(Ge));h.setLocationAtPoint(h.renderWorldCopies?yt.wrap():yt,Y)}this._fireMoveEvents(a)},Pe=>{this._afterEase(a,Pe)},r),this}_prepareEase(r,a,h={}){this._moving=!0,a||h.moving||this.fire(new l.Event("movestart",r)),this._zooming&&!h.zooming&&this.fire(new l.Event("zoomstart",r)),this._rotating&&!h.rotating&&this.fire(new l.Event("rotatestart",r)),this._pitching&&!h.pitching&&this.fire(new l.Event("pitchstart",r))}_fireMoveEvents(r){this.fire(new l.Event("move",r)),this._zooming&&this.fire(new l.Event("zoom",r)),this._rotating&&this.fire(new l.Event("rotate",r)),this._pitching&&this.fire(new l.Event("pitch",r))}_afterEase(r,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const h=this._zooming,f=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new l.Event("zoomend",r)),f&&this.fire(new l.Event("rotateend",r)),y&&this.fire(new l.Event("pitchend",r)),this.fire(new l.Event("moveend",r))}flyTo(r,a){if(!r.essential&&l.exported.prefersReducedMotion){const er=l.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(er,a)}this.stop(),r=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},r);const h=this.transform,f=this.getZoom(),y=this.getBearing(),w=this.getPitch(),S=this.getPadding(),I="zoom"in r?l.clamp(+r.zoom,h.minZoom,h.maxZoom):f,D="bearing"in r?this._normalizeBearing(r.bearing,y):y,R="pitch"in r?+r.pitch:w,N="padding"in r?r.padding:h.padding,q=h.zoomScale(I-f),Y=l.pointGeometry.convert(r.offset);let H=h.centerPoint.add(Y);const J=h.pointLocation(H),ue=l.LngLat.convert(r.center||J);this._normalizeCenter(ue);const he=h.project(J),ge=h.project(ue).sub(he);let pe=r.curve;const Oe=Math.max(h.width,h.height),Ee=Oe/q,Pe=ge.mag();if("minZoom"in r){const er=l.clamp(Math.min(r.minZoom,f,I),h.minZoom,h.maxZoom),Nr=Oe/h.zoomScale(er-f);pe=Math.sqrt(Nr/Pe*2)}const Ge=pe*pe;function et(er){const Nr=(Ee*Ee-Oe*Oe+(er?-1:1)*Ge*Ge*Pe*Pe)/(2*(er?Ee:Oe)*Ge*Pe);return Math.log(Math.sqrt(Nr*Nr+1)-Nr)}function ze(er){return(Math.exp(er)-Math.exp(-er))/2}function yt(er){return(Math.exp(er)+Math.exp(-er))/2}const st=et(0);let Lt=function(er){return yt(st)/yt(st+pe*er)},rr=function(er){return Oe*((yt(st)*(ze(Nr=st+pe*er)/yt(Nr))-ze(st))/Ge)/Pe;var Nr},Kt=(et(1)-st)/pe;if(Math.abs(Pe)<1e-6||!isFinite(Kt)){if(Math.abs(Oe-Ee)<1e-6)return this.easeTo(r,a);const er=Ee<Oe?-1:1;Kt=Math.abs(Math.log(Ee/Oe))/pe,rr=function(){return 0},Lt=function(Nr){return Math.exp(er*pe*Nr)}}return r.duration="duration"in r?+r.duration:1e3*Kt/("screenSpeed"in r?+r.screenSpeed/pe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=y!==D,this._pitching=R!==w,this._padding=!h.isPaddingEqual(N),this._prepareEase(a,!1),this._ease(er=>{const Nr=er*Kt,Bt=1/Lt(Nr);h.zoom=er===1?I:f+h.scaleZoom(Bt),this._rotating&&(h.bearing=l.number(y,D,er)),this._pitching&&(h.pitch=l.number(w,R,er)),this._padding&&(h.interpolatePadding(S,N,er),H=h.centerPoint.add(Y));const sr=er===1?ue:h.unproject(he.add(ge.mult(rr(Nr))).mult(Bt));h.setLocationAtPoint(h.renderWorldCopies?sr.wrap():sr,H),this._fireMoveEvents(a)},()=>this._afterEase(a),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,a){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,a)}if(!r){const h=this.handlers;h&&h.stop(!1)}return this}_ease(r,a,h){h.animate===!1||h.duration===0?(r(1),a()):(this._easeStart=l.exported.now(),this._easeOptions=h,this._onEaseFrame=r,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const r=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(r,a){r=l.wrap(r,-180,180);const h=Math.abs(r-a);return Math.abs(r-360-a)<h&&(r-=360),Math.abs(r+360-a)<h&&(r+=360),r}_normalizeCenter(r){const a=this.transform;if(!a.renderWorldCopies||a.lngRange)return;const h=r.lng-a.center.lng;r.lng+=h>180?-360:h<-180?360:0}}class ya{constructor(r={}){this.options=r,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,a){const h=this._map._getUIString(`AttributionControl.${a}`);r.title=h,r.setAttribute("aria-label",h)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(r){!r||r.sourceDataType!=="metadata"&&r.sourceDataType!=="visibility"&&r.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const a=this._map.style.sourceCaches;for(const f in a){const y=a[f];if(y.used){const w=y.getSource();w.attribution&&r.indexOf(w.attribution)<0&&r.push(w.attribution)}}r=r.filter(f=>String(f).trim()),r.sort((f,y)=>f.length-y.length),r=r.filter((f,y)=>{for(let w=y+1;w<r.length;w++)if(r[w].indexOf(f)>=0)return!1;return!0});const h=r.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,r.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ql{constructor(r={}){this.options=r,l.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl mapboxgl-ctrl");const a=O.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const r=this._container.children;if(r.length){const a=r[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&a.classList.add("maplibregl-compact","mapboxgl-compact"):a.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Iu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const a=++this._id;return this._queue.push({callback:r,id:a,cancelled:!1}),a}remove(r){const a=this._currentlyRunning,h=a?this._queue.concat(a):this._queue;for(const f of h)if(f.id===r)return void(f.cancelled=!0)}run(r=0){const a=this._currentlyRunning=this._queue;this._queue=[];for(const h of a)if(!h.cancelled&&(h.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Au={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},kd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},xi={showCompass:!0,showZoom:!0,visualizePitch:!1};class va{constructor(r,a,h=!1){this._clickTolerance=10,this.element=a,this.mouseRotate=new mt({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,h&&(this.mousePitch=new Bl({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),O.addEventListener(a,"mousedown",this.mousedown),O.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(a,"touchmove",this.touchmove),O.addEventListener(a,"touchend",this.touchend),O.addEventListener(a,"touchcancel",this.reset)}down(r,a){this.mouseRotate.mousedown(r,a),this.mousePitch&&this.mousePitch.mousedown(r,a),O.disableDrag()}move(r,a){const h=this.map,f=this.mouseRotate.mousemoveWindow(r,a);if(f&&f.bearingDelta&&h.setBearing(h.getBearing()+f.bearingDelta),this.mousePitch){const y=this.mousePitch.mousemoveWindow(r,a);y&&y.pitchDelta&&h.setPitch(h.getPitch()+y.pitchDelta)}}off(){const r=this.element;O.removeEventListener(r,"mousedown",this.mousedown),O.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(r,"touchmove",this.touchmove),O.removeEventListener(r,"touchend",this.touchend),O.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup)}mousedown(r){this.down(l.extend({},r,{ctrlKey:!0,preventDefault:()=>r.preventDefault()}),O.mousePos(this.element,r)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)}mousemove(r){this.move(r,O.mousePos(this.element,r))}mouseup(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()}touchstart(r){r.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>r.preventDefault()},this._startPos))}touchmove(r){r.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,r.targetTouches)[0],this.move({preventDefault:()=>r.preventDefault()},this._lastPos))}touchend(r){r.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function wt(p,r,a){if(p=new l.LngLat(p.lng,p.lat),r){const h=new l.LngLat(p.lng-360,p.lat),f=new l.LngLat(p.lng+360,p.lat),y=a.locationPoint(p).distSqr(r);a.locationPoint(h).distSqr(r)<y?p=h:a.locationPoint(f).distSqr(r)<y&&(p=f)}for(;Math.abs(p.lng-a.center.lng)>180;){const h=a.locationPoint(p);if(h.x>=0&&h.y>=0&&h.x<=a.width&&h.y<=a.height)break;p.lng>a.center.lng?p.lng-=360:p.lng+=360}return p}const Ct={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ws(p,r,a){const h=p.classList;for(const f in Ct)h.remove(`maplibregl-${a}-anchor-${f}`,`mapboxgl-${a}-anchor-${f}`);h.add(`maplibregl-${a}-anchor-${r}`,`mapboxgl-${a}-anchor-${r}`)}class Es extends l.Evented{constructor(r,a){if(super(),(r instanceof HTMLElement||a)&&(r=l.extend({element:r},a)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.pointGeometry.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div"),this._element.setAttribute("aria-label","Map marker");const h=O.createNS("http://www.w3.org/2000/svg","svg"),f=41,y=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${f}px`),h.setAttributeNS(null,"width",`${y}px`),h.setAttributeNS(null,"viewBox",`0 0 ${y} ${f}`);const w=O.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const S=O.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const I=O.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ge of D){const pe=O.createNS("http://www.w3.org/2000/svg","ellipse");pe.setAttributeNS(null,"opacity","0.04"),pe.setAttributeNS(null,"cx","10.5"),pe.setAttributeNS(null,"cy","5.80029008"),pe.setAttributeNS(null,"rx",ge.rx),pe.setAttributeNS(null,"ry",ge.ry),I.appendChild(pe)}const R=O.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const N=O.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(N);const q=O.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const Y=O.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild(Y);const H=O.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(6.0, 7.0)"),H.setAttributeNS(null,"fill","#FFFFFF");const J=O.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ue=O.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#000000"),ue.setAttributeNS(null,"opacity","0.25"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962");const he=O.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#FFFFFF"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962"),J.appendChild(ue),J.appendChild(he),S.appendChild(I),S.appendChild(R),S.appendChild(q),S.appendChild(H),S.appendChild(J),h.appendChild(S),h.setAttributeNS(null,"height",f*this._scale+"px"),h.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(h),this._offset=l.pointGeometry.convert(r&&r.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),ws(this._element,this._anchor,"marker"),this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const f=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(r){const a=r.code,h=r.charCode||r.keyCode;a!=="Space"&&a!=="Enter"&&h!==32&&h!==13||this.togglePopup()}_onMapClick(r){const a=r.originalEvent.target,h=this._element;this._popup&&(a===h||h.contains(a))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}_update(r){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=wt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let a="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?a=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(a=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let h="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?h="rotateX(0deg)":this._pitchAlignment==="map"&&(h=`rotateX(${this._map.getPitch()}deg)`),r&&r.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${Ct[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${h} ${a}`)}getOffset(){return this._offset}setOffset(r){return this._offset=l.pointGeometry.convert(r),this._update(),this}_onMove(r){if(!this._isDragging){const a=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=a}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Hl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let nn,oo=0,Ln=!1;const Dd={maxWidth:100,unit:"metric"};function Ss(p,r,a){const h=a&&a.maxWidth||100,f=p._container.clientHeight/2,y=p.unproject([0,f]),w=p.unproject([h,f]),S=y.distanceTo(w);if(a&&a.unit==="imperial"){const I=3.2808*S;I>5280?Pr(r,h,I/5280,p._getUIString("ScaleControl.Miles")):Pr(r,h,I,p._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Pr(r,h,S/1852,p._getUIString("ScaleControl.NauticalMiles")):S>=1e3?Pr(r,h,S/1e3,p._getUIString("ScaleControl.Kilometers")):Pr(r,h,S,p._getUIString("ScaleControl.Meters"))}function Pr(p,r,a,h){const f=function(y){const w=Math.pow(10,`${Math.floor(y)}`.length-1);let S=y/w;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(I){const D=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*D)/D}(S),w*S}(a);p.style.width=r*(f/a)+"px",p.innerHTML=`${f}&nbsp;${h}`}const on={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Pu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ro(p){if(p){if(typeof p=="number"){const r=Math.round(Math.sqrt(.5*Math.pow(p,2)));return{center:new l.pointGeometry(0,0),top:new l.pointGeometry(0,p),"top-left":new l.pointGeometry(r,r),"top-right":new l.pointGeometry(-r,r),bottom:new l.pointGeometry(0,-p),"bottom-left":new l.pointGeometry(r,-r),"bottom-right":new l.pointGeometry(-r,-r),left:new l.pointGeometry(p,0),right:new l.pointGeometry(-p,0)}}if(p instanceof l.pointGeometry||Array.isArray(p)){const r=l.pointGeometry.convert(p);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.pointGeometry.convert(p.center||[0,0]),top:l.pointGeometry.convert(p.top||[0,0]),"top-left":l.pointGeometry.convert(p["top-left"]||[0,0]),"top-right":l.pointGeometry.convert(p["top-right"]||[0,0]),bottom:l.pointGeometry.convert(p.bottom||[0,0]),"bottom-left":l.pointGeometry.convert(p["bottom-left"]||[0,0]),"bottom-right":l.pointGeometry.convert(p["bottom-right"]||[0,0]),left:l.pointGeometry.convert(p.left||[0,0]),right:l.pointGeometry.convert(p.right||[0,0])}}return Ro(new l.pointGeometry(0,0))}const Ts={supported:T,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends _a{constructor(p){var r;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(p=l.extend({},kd,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ms(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),{bearingSnap:p.bearingSnap}),this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new Iu,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Au,p.locale),this._clickTolerance=p.clickTolerance,this._pixelRatio=(r=p.pixelRatio)!==null&&r!==void 0?r:devicePixelRatio,this._requestManager=new K(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Qn(this,p),this._hash=p.hash&&new mu(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new ya({customAttribution:p.customAttribution})),p.maplibreLogo&&this.addControl(new ql,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new l.Event(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new l.Event(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new l.Event("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(p,r){if(r===void 0&&(r=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=p.onAdd(this);this._controls.push(p);const h=this._controlPositions[r];return r.indexOf("bottom")!==-1?h.insertBefore(a,h.firstChild):h.appendChild(a),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(p);return r>-1&&this._controls.splice(r,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}resize(p){const r=this._containerDimensions(),a=r[0],h=r[1];this._resizeCanvas(a,h,this.getPixelRatio()),this.transform.resize(a,h),this.painter.resize(a,h,this.getPixelRatio());const f=!this._moving;return f&&(this.stop(),this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p))),this.fire(new l.Event("resize",p)),f&&this.fire(new l.Event("moveend",p)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(p){const[r,a]=this._containerDimensions();this._pixelRatio=p,this._resizeCanvas(r,a,p),this.painter.resize(r,a,p)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p==null?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p==null?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p==null?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p==null?60:p)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}project(p){return this.transform.locationPoint(l.LngLat.convert(p))}unproject(p){return this.transform.pointLocation(l.pointGeometry.convert(p))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(p,r,a){if(p==="mouseenter"||p==="mouseover"){let h=!1;return{layer:r,listener:a,delegates:{mousemove:y=>{const w=this.getLayer(r)?this.queryRenderedFeatures(y.point,{layers:[r]}):[];w.length?h||(h=!0,a.call(this,new Vn(p,this,y.originalEvent,{features:w}))):h=!1},mouseout:()=>{h=!1}}}}if(p==="mouseleave"||p==="mouseout"){let h=!1;return{layer:r,listener:a,delegates:{mousemove:w=>{(this.getLayer(r)?this.queryRenderedFeatures(w.point,{layers:[r]}):[]).length?h=!0:h&&(h=!1,a.call(this,new Vn(p,this,w.originalEvent)))},mouseout:w=>{h&&(h=!1,a.call(this,new Vn(p,this,w.originalEvent)))}}}}{const h=f=>{const y=this.getLayer(r)?this.queryRenderedFeatures(f.point,{layers:[r]}):[];y.length&&(f.features=y,a.call(this,f),delete f.features)};return{layer:r,listener:a,delegates:{[p]:h}}}}on(p,r,a){if(a===void 0)return super.on(p,r);const h=this._createDelegatedListener(p,r,a);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(h);for(const f in h.delegates)this.on(f,h.delegates[f]);return this}once(p,r,a){if(a===void 0)return super.once(p,r);const h=this._createDelegatedListener(p,r,a);for(const f in h.delegates)this.once(f,h.delegates[f]);return this}off(p,r,a){return a===void 0?super.off(p,r):(this._delegatedListeners&&this._delegatedListeners[p]&&(h=>{const f=this._delegatedListeners[p];for(let y=0;y<f.length;y++){const w=f[y];if(w.layer===r&&w.listener===a){for(const S in w.delegates)this.off(S,w.delegates[S]);return f.splice(y,1),this}}})(),this)}queryRenderedFeatures(p,r){if(!this.style)return[];let a;if(r!==void 0||p===void 0||p instanceof l.pointGeometry||Array.isArray(p)||(r=p,p=void 0),r=r||{},(p=p||[[0,0],[this.transform.width,this.transform.height]])instanceof l.pointGeometry||typeof p[0]=="number")a=[l.pointGeometry.convert(p)];else{const h=l.pointGeometry.convert(p[0]),f=l.pointGeometry.convert(p[1]);a=[h,new l.pointGeometry(f.x,h.y),f,new l.pointGeometry(h.x,f.y),h]}return this.style.queryRenderedFeatures(a,r,this.transform)}querySourceFeatures(p,r){return this.style.querySourceFeatures(p,r)}setStyle(p,r){return(r=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(p,r))}setTransformRequest(p){return this._requestManager.setTransformRequest(p),this}_getUIString(p){const r=this._locale[p];if(r==null)throw new Error(`Missing UI string '${p}'`);return r}_updateStyle(p,r){return this.style&&(this.style.setEventedParent(null),this.style._remove()),p?(this.style=new hn(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new hn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,r){if(typeof p=="string"){const a=this._requestManager.transformRequest(p,l.ResourceType.Style);l.getJSON(a,(h,f)=>{h?this.fire(new l.ErrorEvent(h)):f&&this._updateDiff(f,r)})}else typeof p=="object"&&this._updateDiff(p,r)}_updateDiff(p,r){try{this.style.setState(p)&&this._update(!0)}catch(a){l.warnOnce(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(p,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(p,r){return this._lazyInitEmptyStyle(),this.style.addSource(p,r),this._update(!0)}isSourceLoaded(p){const r=this.style&&this.style.sourceCaches[p];if(r!==void 0)return r.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${p}'`)))}areTilesLoaded(){const p=this.style&&this.style.sourceCaches;for(const r in p){const a=p[r]._tiles;for(const h in a){const f=a[h];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}addSourceType(p,r,a){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,r,a)}removeSource(p){return this.style.removeSource(p),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,r,{pixelRatio:a=1,sdf:h=!1,stretchX:f,stretchY:y,content:w}={}){if(this._lazyInitEmptyStyle(),r instanceof HTMLImageElement||l.isImageBitmap(r)){const{width:S,height:I,data:D}=l.exported.getImageData(r);this.style.addImage(p,{data:new l.RGBAImage({width:S,height:I},D),pixelRatio:a,stretchX:f,stretchY:y,content:w,sdf:h,version:0})}else{if(r.width===void 0||r.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:S,height:I,data:D}=r,R=r;this.style.addImage(p,{data:new l.RGBAImage({width:S,height:I},new Uint8Array(D)),pixelRatio:a,stretchX:f,stretchY:y,content:w,sdf:h,version:0,userImage:R}),R.onAdd&&R.onAdd(this,p)}}}updateImage(p,r){const a=this.style.getImage(p);if(!a)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=r instanceof HTMLImageElement||l.isImageBitmap(r)?l.exported.getImageData(r):r,{width:f,height:y,data:w}=h;if(f===void 0||y===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==a.data.width||y!==a.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const S=!(r instanceof HTMLImageElement||l.isImageBitmap(r));a.data.replace(w,S),this.style.updateImage(p,a)}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,r){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),r)}listImages(){return this.style.listImages()}addLayer(p,r){return this._lazyInitEmptyStyle(),this.style.addLayer(p,r),this._update(!0)}moveLayer(p,r){return this.style.moveLayer(p,r),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,r,a){return this.style.setLayerZoomRange(p,r,a),this._update(!0)}setFilter(p,r,a={}){return this.style.setFilter(p,r,a),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,r,a,h={}){return this.style.setPaintProperty(p,r,a,h),this._update(!0)}getPaintProperty(p,r){return this.style.getPaintProperty(p,r)}setLayoutProperty(p,r,a,h={}){return this.style.setLayoutProperty(p,r,a,h),this._update(!0)}getLayoutProperty(p,r){return this.style.getLayoutProperty(p,r)}setLight(p,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(p,r){return this.style.setFeatureState(p,r),this._update()}removeFeatureState(p,r){return this.style.removeFeatureState(p,r),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let p=0,r=0;return this._container&&(p=this._container.clientWidth||400,r=this._container.clientHeight||300),[p,r]}_setupContainer(){const p=this._container;p.classList.add("maplibregl-map","mapboxgl-map");const r=this._canvasContainer=O.create("div","maplibregl-canvas-container mapboxgl-canvas-container",p);this._interactive&&r.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas mapboxgl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const a=this._containerDimensions();this._resizeCanvas(a[0],a[1],this.getPixelRatio());const h=this._controlContainer=O.create("div","maplibregl-control-container mapboxgl-control-container",p),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(y=>{f[y]=O.create("div",`maplibregl-ctrl-${y} mapboxgl-ctrl-${y}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,r,a){this._canvas.width=a*p,this._canvas.height=a*r,this._canvas.style.width=`${p}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const p=l.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);r?(this.painter=new Ll(r,this.transform),l.exported$1.testSupport(r)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_render(p){let r,a=0;const h=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(r=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,r),a=l.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const w=this.transform.zoom,S=l.exported.now();this.style.zoomHistory.update(w,S);const I=new l.EvaluationParameters(w,{now:S,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),D=I.crossFadingFactor();D===1&&D===this._crossFadingFactor||(f=!0,this._crossFadingFactor=D),this.style.update(I)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const w=l.exported.now()-a;h.endQueryEXT(h.TIME_ELAPSED_EXT,r),setTimeout(()=>{const S=h.getQueryObjectEXT(r,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(r),this.fire(new l.Event("gpu-timing-frame",{cpuTime:w,gpuTime:S}))},50)}if(this.listens("gpu-timing-layer")){const w=this.painter.collectGpuTimers();setTimeout(()=>{const S=this.painter.queryGpuTimers(w);this.fire(new l.Event("gpu-timing-layer",{layerTimes:S}))},50)}const y=this._sourcesDirty||this._styleDirty||this._placementDirty;return y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||y||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const r of this._controls)r.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(p=>{l.PerformanceUtils.frame(p),this._frame=null,this._render(p)}))}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}_setCacheLimits(p,r){l.setCacheLimits(p,r)}},NavigationControl:class{constructor(p){this.options=l.extend({},xi,p),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map.getZoom(),r=p===this._map.getMaxZoom(),a=p===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=a,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",a.toString())}_rotateCompassArrow(){const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new va(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,r){const a=O.create("button",p,this._container);return a.type="button",a.addEventListener("click",r),a}_setButtonTitle(p,r){const a=this._map._getUIString(`NavigationControl.${r}`);p.title=a,p.setAttribute("aria-label",a)}},GeolocateControl:class extends l.Evented{constructor(p){super(),this.options=l.extend({},Hl,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(p){var r;return this._map=p,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,nn!==void 0?r(nn):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(a=>{nn=a.state!=="denied",r(nn)}):(nn=!!window.navigator.geolocation,r(nn)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,oo=0,Ln=!1}_isOutOfMapMaxBounds(p){const r=this._map.getMaxBounds(),a=p.coords;return r&&(a.longitude<r.getWest()||a.longitude>r.getEast()||a.latitude<r.getSouth()||a.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}}_updateCamera(p){const r=new l.LngLat(p.coords.longitude,p.coords.latitude),a=p.coords.accuracy,h=this._map.getBearing(),f=l.extend({bearing:h},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(a),f,{geolocateSource:!0})}_updateMarker(p){if(p){const r=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map._container.clientHeight/2,r=this._map.unproject([0,p]),a=this._map.unproject([1,p]),h=r.distanceTo(a),f=Math.ceil(2*this._accuracy/h);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&Ln)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Es(this._dotElement),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Es({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||this._watchState!=="ACTIVE_LOCK"||r.originalEvent&&r.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":oo--,Ln=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),oo++,oo>1?(p={maximumAge:6e5,timeout:0},Ln=!0):(p=this.options.positionOptions,Ln=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ya,LogoControl:ql,ScaleControl:class{constructor(p){this.options=l.extend({},Dd,p),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ss(this._map,this._container,this.options)}onAdd(p){return this._map=p,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(p){this.options.unit=p,Ss(this._map,this._container,this.options)}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.Evented{constructor(p){super(),this.options=l.extend(Object.create(on),p),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const r=document.createDocumentFragment(),a=document.createElement("body");let h;for(a.innerHTML=p;h=a.firstChild,h;)r.appendChild(h);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){this._container&&this._container.classList.add(p)}removeClassName(p){this._container&&this._container.classList.remove(p)}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){if(this._container)return this._container.classList.toggle(p)}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(p){this._update(p.point)}_onMouseMove(p){this._update(p.point)}_onDrag(p){this._update(p.point)}_update(p){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=O.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(y=>this._container.classList.add(y)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=wt(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p))return;const r=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let a=this.options.anchor;const h=Ro(this.options.offset);if(!a){const y=this._container.offsetWidth,w=this._container.offsetHeight;let S;S=r.y+h.bottom.y<w?["top"]:r.y>this._map.transform.height-w?["bottom"]:[],r.x<y/2?S.push("left"):r.x>this._map.transform.width-y/2&&S.push("right"),a=S.length===0?"bottom":S.join("-")}const f=r.add(h[a]).round();O.setTransform(this._container,`${Ct[a]} translate(${f.x}px,${f.y}px)`),ws(this._container,a,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Pu);p&&p.focus()}_onClose(){this.remove()}},Marker:Es,Style:hn,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:Fe,GeoJSONSource:Ir,ImageSource:Ar,RasterDEMTileSource:pr,RasterTileSource:zt,VectorTileSource:Dt,VideoSource:jr,prewarm:function(){qe().acquire(Le)},clearPrewarmedResources:function(){const p=Je;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(Le),Je=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return Re.workerCount},set workerCount(p){Re.workerCount=p},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){l.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){l.clearTileCache(p)},workerUrl:"",addProtocol(p,r){l.config.REGISTERED_PROTOCOLS[p]=r},removeProtocol(p){delete l.config.REGISTERED_PROTOCOLS[p]}};return kr.extend(Ts,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),Ts});var x=m;return x})})(Fx);var _c=Fx.exports;const a5={name:"MyMap",data:()=>({map_style_url:"https://mirrors.sustech.edu.cn/osm-tile/styles/osm-street/style.json",bus_location_data_api:[],bus_location_data_display:[],bus_plate_hash:{"866005041185986":{plate:866005041185986},"866005041186018":{plate:"\u7CA4BDF267"},"866005041186034":{plate:"\u7CA4BDF458"},"866005041187107":{plate:866005041187107},"866005041187859":{plate:"\u7CA4BDF147"},"866005041187867":{plate:"\u7CA4BDF345"},"866005041189913":{plate:"\u7CA4BDF411"},"866005041189921":{plate:"\u7CA4BDF365"},"866005041189939":{plate:"\u7CA4BDF471"},"866005041189947":{plate:"\u7CA4BDF371"},"866005041189954":{plate:"\u7CA4BDF421"},"866005041189962":{plate:"\u7CA4BDF330"},"866005041189970":{plate:"\u7CA4BDF470"},"866005041189988":{plate:"\u7CA4BDF335"},"866005041190093":{plate:"\u7CA4BDF040"},"866005041200116":{plate:866005041200116},"866005041200173":{plate:"\u7CA4BDE447"},"866005041200199":{plate:"\u7CA4BDF430"}},geojson_line_1:[[113.9902000608227,22.60334446057298,0],[113.9903507353066,22.60274690433305,0],[113.9908897685934,22.60223280847205,0],[113.9916260097764,22.60156692563558,0],[113.9920446448193,22.60109135771524,0],[113.9920345671635,22.60052003061499,0],[113.9919356057219,22.60002742855453,0],[113.9913193648925,22.59945330686925,0],[113.9908118273651,22.59919305096794,0],[113.9905758993394,22.59903425858952,0],[113.9904009525345,22.59862018369482,0],[113.9902978490773,22.59752639824848,0],[113.9904063277428,22.59709615868556,0],[113.9908760621444,22.59704147897459,0],[113.9915566904328,22.5972455558366,0],[113.9920342333153,22.59726814181022,0],[113.9927162086146,22.5968173712095,0],[113.9932552142158,22.59630326187374,0],[113.9938251162565,22.5960599036024,0],[113.9942637689173,22.59607116200299,0],[113.9945506236767,22.59551917942994,0],[113.9952872316258,22.59597241715224,0],[113.9965296425777,22.59731692465482,0],[113.9980455511388,22.59902110136386,0],[113.9987961352288,22.59953364148681,0],[113.9996172189355,22.60002130471761,0],[113.9988625272248,22.60073512664515,0],[113.998734780645,22.60117875994807,0],[113.9987272567012,22.60148247090658,0],[113.9984811102924,22.60178382602745,0],[113.9982613807302,22.6021205004729,0],[113.9980697519452,22.60258771673122,0],[113.9980026147617,22.60300575140722,0],[113.9979489117119,22.60325062940188,0],[113.9978602396981,22.6033412591236,0],[113.9968866415579,22.6029808956564,0],[113.9962401029074,22.60288348203091,0],[113.9955117554291,22.60290040283193,0],[113.9950813789864,22.60335930509263,0],[113.9944946598457,22.60394737599491,0],[113.9939497003322,22.60464554145209,0],[113.9934784038899,22.60548092977822,0],[113.995278497141,22.60640224097063,0],[113.9953277666447,22.60667341560261,0],[113.9964905851169,22.6063775771138,0],[113.9977156537446,22.60596002561628,0],[113.9983207115444,22.60613169032316,0],[113.9986648706885,22.60659923685179,0],[113.9988979465801,22.60815331611633,0],[113.9981618912118,22.60975341767644,0],[113.9976555155949,22.61051444868976,0],[113.9973489079054,22.61067741494136,0]],geojson_line_2:[[113.9914596783045,22.59960492109923,0],[113.9918969233072,22.59993661748595,0],[113.9920105698998,22.6005318195689,0],[113.9919172423369,22.60102266627295,0],[113.9917196221943,22.601431625928,0],[113.9912862193332,22.60181812810236,0],[113.9909041713777,22.60213330809864,0],[113.9904804856139,22.60253483338519,0],[113.9903330314688,22.60277899659393,0],[113.9900477774609,22.60433153499769,0],[113.9900962409839,22.60464254738627,0],[113.9903161120924,22.60505460565142,0],[113.9915641615897,22.60511717356275,0],[113.9934784038899,22.60548092977822,0],[113.995278497141,22.60640224097063,0],[113.9953277666447,22.60667341560261,0],[113.9964905851169,22.6063775771138,0],[113.9977156537446,22.60596002561628,0],[113.9983207115444,22.60613169032316,0],[113.9986648706885,22.60659923685179,0],[113.9988979465801,22.60815331611633,0],[113.9981618912118,22.60975341767644,0],[113.9976555155949,22.61051444868976,0],[113.9973489079054,22.61067741494136,0]],bus_marker_arr:[],map:[]}),async created(){},methods:{async fetch_bus(){const t=await Rx.get("https://bus.sustcra.com/api/v1/bus/monitor_osm/");this.bus_location_data_api=t.data;const i=new Date;console.log("bus location data fetched at "+i.getTime()),this.update_location()},update_location:function(){this.display_data=[],this.bus_marker_arr.forEach(u=>u.remove());let t;for(t=0;t<this.bus_location_data_api.length;t++)if(parseInt(this.bus_location_data_api[t].acc)===1){var i=document.createElement("div");i.className="marker",i.style.backgroundImage="url(https://bus.sustcra.com/bus-top-view.png)",i.style.width=35+"px",i.style.height=35+"px",i.style.backgroundSize="cover";var s=new _c.Marker(i).setLngLat([this.bus_location_data_api[t].lng,this.bus_location_data_api[t].lat]).setRotation(parseInt(this.bus_location_data_api[t].course)).setPopup(new _c.Popup({offset:25}).setHTML('<p class="car-plate">Plate: <b>'+this.bus_plate_hash[this.bus_location_data_api[t].imei].plate+"</b></p><p>Speed: <b>"+this.bus_location_data_api[t].speed+"km/h</b></p>")).addTo(this.map);this.bus_marker_arr.push(s)}},async refresh(){await this.fetch_bus()}},async mounted(){const t={lng:113.99373,lat:22.60308,zoom:14},i={bus_location_data:this.bus_location_data,geojson_line_1:this.geojson_line_1,geojson_line_2:this.geojson_line_2},s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,await s&&(console.log("dark mode enabled."),this.map_style_url="https://mirrors.sustech.edu.cn/osm-tile/styles/osm-blue/style.json"),this.map=new _c.Map({container:this.$refs.myMap,style:this.map_style_url,center:[t.lng,t.lat],zoom:t.zoom});var u=new _c.NavigationControl;this.map.addControl(u,"top-left"),this.map.addControl(new _c.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),this.map.on("load",()=>{this.map.addSource("line1",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i.geojson_line_1}}}),this.map.addSource("line2",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i.geojson_line_2}}}),this.map.addLayer({id:"line1",type:"line",source:"line1",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#29abe2","line-width":3}}),this.map.addLayer({id:"line2",type:"line",source:"line2",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f7911d","line-width":3}})}),await this.fetch_bus(),setInterval(()=>{this.refresh()},5e3)}},l5={class:"map-container",ref:"myMap"};function c5(t,i,s,u,m,v){return tn(),Dn("div",l5,null,512)}var u5=Wi(a5,[["render",c5],["__scopeId","data-v-c175b2ac"],["__file","Realtime-map.vue"]]);const h5={name:"weather-span",mounted(){this.load_weather()},methods:{load_weather(){$.getJSON("https://api.sustech.online/weather",function(t){$("#weather-container span").text(t.msg)})}}},d5={id:"weather-container"},p5=mi("span",{id:"weather"},null,-1),f5=[p5];function m5(t,i,s,u,m,v){return tn(),Dn("div",d5,f5)}var g5=Wi(h5,[["render",m5],["__file","weather-span.vue"]]),_5=yi({enhance({app:t}){t.component("BusTable",s5),t.component("Realtimemap",u5),t.component("WeatherSpan",g5)}});const Up=[DS,LS,jS,PT,FA,VA,GA,KA,aP,hP,fP,yP,_5],y5=[["v-8daa1a0e","/",{title:"\u{1F4DA}\u5357\u79D1\u624B\u518C"},["/index.html","/README.md"]],["v-74bc627b","/about/",{title:"\u5E2E\u52A9\u6211\u4EEC\u5B8C\u5584"},["/about/index.html","/about/README.md"]],["v-08ae5eba","/calendar/2018-2019.html",{title:"\u6821\u5386 - 2018-2019 \u5B66\u5E74"},["/calendar/2018-2019","/calendar/2018-2019.md"]],["v-93cfbde4","/calendar/2019-2020.html",{title:"\u6821\u5386 - 2019-2020 \u5B66\u5E74"},["/calendar/2019-2020","/calendar/2019-2020.md"]],["v-f917537a","/calendar/2020-2021.html",{title:"\u6821\u5386 - 2020-2021 \u5B66\u5E74"},["/calendar/2020-2021","/calendar/2020-2021.md"]],["v-1a0de1a3","/calendar/2021-2022.html",{title:"\u6821\u5386 - 2021-2022 \u5B66\u5E74\uFF08\u9884\u53D1\u5E03\uFF09"},["/calendar/2021-2022","/calendar/2021-2022.md"]],["v-190ab309","/calendar/2021fall.html",{title:""},["/calendar/2021fall","/calendar/2021fall.md"]],["v-96167c50","/calendar/",{title:"\u{1F4C5}\u6821\u5386"},["/calendar/index.html","/calendar/README.md"]],["v-96536bf0","/contact/",{title:"\u{1F4C7}\u9EC4\u9875"},["/contact/index.html","/contact/README.md"]],["v-dbd38712","/emergency/",{title:"\u5E94\u6025\u5904\u7406"},["/emergency/index.html","/emergency/README.md"]],["v-c73889da","/facility/",{title:"\u{1F3EB}\u5EFA\u7B51\u4E0E\u8BBE\u65BD"},["/facility/index.html","/facility/README.md"]],["v-104cfa63","/if-you-are-a-freshman/2021.html",{title:"\u5982\u679C\u4F60\u662F\u65B0\u751F..."},["/if-you-are-a-freshman/2021","/if-you-are-a-freshman/2021.md"]],["v-780207b9","/if-you-are-a-freshman/",{title:"\u5982\u679C\u4F60\u662F\u65B0\u751F..."},["/if-you-are-a-freshman/index.html","/if-you-are-a-freshman/README.md"]],["v-14e6315a","/life/",{title:"\u{1F468}\u200D\u{1F393}\u751F\u6D3B\u5728\u5357\u79D1"},["/life/index.html","/life/README.md"]],["v-42f2be94","/life/vehicle-charger.html",{title:"\u5145\u7535\u6869\u5206\u5E03"},["/life/vehicle-charger","/life/vehicle-charger.md"]],["v-ed48bdf8","/media/",{title:"\u{1F4FA}\u5A92\u4F53\u4E0E\u7F51\u7AD9"},["/media/index.html","/media/README.md"]],["v-f4bc5604","/miniapp/",{title:"\u5357\u79D1\u624B\u518C-\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F"},["/miniapp/index.html","/miniapp/README.md"]],["v-1500d063","/news/",{title:"\u66F4\u65B0\u65E5\u5FD7"},["/news/index.html","/news/README.md"]],["v-014445c8","/organizations/",{title:"\u{1F3A1}\u793E\u56E2\u6D3B\u52A8"},["/organizations/index.html","/organizations/README.md"]],["v-461d4a7c","/organizations/registered-organization-2019.html",{title:"\u6CE8\u518C\u793E\u56E2\u5217\u8868\uFF082018-2019\u5E74\u5EA6\uFF09"},["/organizations/registered-organization-2019","/organizations/registered-organization-2019.md"]],["v-6ba7e826","/organizations/registered-organization-2020.html",{title:"\u6CE8\u518C\u793E\u56E2\u5217\u8868\uFF082019-2020\u5E74\u5EA6\uFF09"},["/organizations/registered-organization-2020","/organizations/registered-organization-2020.md"]],["v-28ddfa13","/service/",{title:"\u{1F5A5}\u670D\u52A1\u4E0E\u6280\u5DE7"},["/service/index.html","/service/README.md"]],["v-be92ea7e","/site-help/",{title:"\u2753\u7AD9\u70B9\u5E2E\u52A9"},["/site-help/index.html","/site-help/README.md"]],["v-d7188082","/study/",{title:"\u{1F393}\u5B66\u5728\u5357\u79D1"},["/study/index.html","/study/README.md"]],["v-d1061704","/study/paper-tools.html",{title:"\u51E0\u4E2A\u8D76 ddl \u7684\u597D\u7528\u5DE5\u5177\u{1F527}"},["/study/paper-tools","/study/paper-tools.md"]],["v-4322d0a7","/surroundings/",{title:"\u{1F6CD}\u5468\u8FB9"},["/surroundings/index.html","/surroundings/README.md"]],["v-69b23ddf","/transport/",{title:"\u{1F684}\u4EA4\u901A"},["/transport/index.html","/transport/README.md"]],["v-1678dd6f","/transport/bustimer-wx.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB\u65F6\u523B\u8868 SUSTech Campus Bus Info"},["/transport/bustimer-wx","/transport/bustimer-wx.md"]],["v-1630dfb5","/transport/bustimer.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB\u65F6\u523B\u8868 SUSTech Campus Bus Info"},["/transport/bustimer","/transport/bustimer.md"]],["v-6a28f6e0","/transport/holiday.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB - \u8282\u5047\u65E5 (2021\u5E746\u670818\u65E5\u66F4\u65B0)"},["/transport/holiday","/transport/holiday.md"]],["v-48975204","/transport/redirect.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB - \u81EA\u52A8\u8DF3\u8F6C"},["/transport/redirect","/transport/redirect.md"]],["v-8059a7a6","/transport/workday.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB - \u5DE5\u4F5C\u65E5 (2021\u5E746\u670818\u65E5\u66F4\u65B0)"},["/transport/workday","/transport/workday.md"]],["v-22cd7d0c","/facility/panolens/",{title:"\u5168\u666F\u770B\u6821\u56ED"},["/facility/panolens/index.html","/facility/panolens/README.md"]],["v-0e92d420","/if-you-are-a-freshman/preview/",{title:"\u84E2\u6751\u62FE\u9057\uFF1A\u5357\u79D1\u5927\u51B7\u77E5\u8BC62021"},["/if-you-are-a-freshman/preview/index.html","/if-you-are-a-freshman/preview/README.md"]],["v-2b8cac58","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7"},["/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87","/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.md"]],["v-66965350","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7"},["/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87","/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.md"]],["v-66317da4","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7"},["/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87","/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.md"]],["v-5c3fcdf6","/life/catering/",{title:"\u2615\uFE0F\u9910\u996E"},["/life/catering/index.html","/life/catering/README.md"]],["v-04710004","/life/dormitory/",{title:"\u{1F3E0}\u4F4F\u5728\u5357\u79D1"},["/life/dormitory/index.html","/life/dormitory/README.md"]],["v-d42194b6","/life/freshman-register/",{title:"\u65B0\u751F\u62A5\u5230"},["/life/freshman-register/index.html","/life/freshman-register/README.md"]],["v-20383a78","/life/sports-facility/",{title:"\u{1F3CA}\u200D\u2640\uFE0F\u8FD0\u52A8\u8BBE\u65BD"},["/life/sports-facility/index.html","/life/sports-facility/README.md"]],["v-42c1fa44","/service/campus-card/",{title:"\u{1F4B3}\u6821\u56ED\u5361"},["/service/campus-card/index.html","/service/campus-card/README.md"]],["v-76cff034","/service/email/",{title:"\u7535\u5B50\u90AE\u4EF6\u670D\u52A1"},["/service/email/index.html","/service/email/README.md"]],["v-29860ed0","/service/mail-and-express/",{title:"\u{1F4E6}\u90AE\u4EF6\u4E0E\u5FEB\u9012\u6536\u53D1"},["/service/mail-and-express/index.html","/service/mail-and-express/README.md"]],["v-622da02f","/service/matlab/",{title:"MATLAB \u6FC0\u6D3B"},["/service/matlab/index.html","/service/matlab/README.md"]],["v-5e590ec6","/service/medical-treatment/",{title:"\u{1F3E5}\u5C31\u533B\u6307\u5357"},["/service/medical-treatment/index.html","/service/medical-treatment/README.md"]],["v-1fa222d4","/service/network/",{title:"\u{1F310}\u7F51\u7EDC\u4E0E\u4FE1\u606F\u4E2D\u5FC3 (its@sustech.edu.cn)"},["/service/network/index.html","/service/network/README.md"]],["v-48519846","/service/sakai/",{title:"Sakai | \u6587\u4EF6\u5206\u4EAB"},["/service/sakai/index.html","/service/sakai/README.md"]],["v-369295b4","/service/sid/",{title:"\u5B66\u53F7\uFF08SID\uFF09"},["/service/sid/index.html","/service/sid/README.md"]],["v-3692bb1f","/service/ssc/",{title:""},["/service/ssc/index.html","/service/ssc/README.md"]],["v-425958ce","/service/student-train-ticket/",{title:"\u706B\u8F66\u7968\u5B66\u751F\u4F18\u60E0\u4F7F\u7528\u6307\u5357"},["/service/student-train-ticket/index.html","/service/student-train-ticket/README.md"]],["v-3692ee77","/service/tax/",{title:"\u5982\u4F55\u7533\u62A5\u9000\u7A0E\uFF1F-- \u5E74\u5EA6\u4E2A\u4EBA\u6240\u5F97\u7A0E\u5E74\u5EA6\u6C47\u7B97"},["/service/tax/index.html","/service/tax/README.md"]],["v-2686552a","/service/unifound/",{title:"\u{1F5A8}\uFE0F\u8054\u521B\u6253\u5370\u7CFB\u7EDF"},["/service/unifound/index.html","/service/unifound/README.md"]],["v-45d74ec0","/service/work-wechat/",{title:"\u4F01\u4E1A\u5FAE\u4FE1"},["/service/work-wechat/index.html","/service/work-wechat/README.md"]],["v-772a5784","/study/borrow-books/",{title:"\u{1F4D7}\u6559\u6750\u4E0E\u56FE\u4E66\u501F\u8FD8"},["/study/borrow-books/index.html","/study/borrow-books/README.md"]],["v-8460eeb8","/study/by-shude-college/advice-on-study.html",{title:"\u{1F4D6}\u5B66\u4E60\u5EFA\u8BAE"},["/study/by-shude-college/advice-on-study","/study/by-shude-college/advice-on-study.md"]],["v-435bd49a","/study/by-shude-college/info-on-study.html",{title:"\u{1F4D6}\u5B66\u4E60\u5236\u5EA6\u4E0E\u4FE1\u606F"},["/study/by-shude-college/info-on-study","/study/by-shude-college/info-on-study.md"]],["v-6323734e","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7"},["/study/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.html","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87","/study/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.md","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.md"]],["v-2a23f022","/service/blackboard/retrive-ics-url/",{title:"BB | \u5C06Blackboard\u4E2D\u4F5C\u4E1A\uFF0CDDL\u7B49\u65E5\u7A0B\u6DFB\u52A0\u5230\u7CFB\u7EDF\u65E5\u5386"},["/service/blackboard/retrive-ics-url/index.html","/service/blackboard/retrive-ics-url/README.md"]],["v-66061b92","/service/network/apply-for-vpn/",{title:"\u7533\u8BF7\u56DE\u6821VPN"},["/service/network/apply-for-vpn/index.html","/service/network/apply-for-vpn/README.md"]],["v-89ac2bec","/service/network/choose-a-pad/",{title:"\u9009\u62E9\u4E00\u53F0\u5408\u9002\u7684\u5E73\u677F\u7535\u8111"},["/service/network/choose-a-pad/index.html","/service/network/choose-a-pad/README.md"]],["v-1549b190","/service/network/choose-a-router/",{title:"\u{1F4F6}\u9009\u62E9\u4E00\u53F0\u5408\u9002\u7684\u8DEF\u7531\u5668"},["/service/network/choose-a-router/index.html","/service/network/choose-a-router/README.md"]],["v-9e1961f8","/service/network/eduroam/",{title:"eduroam\uFF08\u5B66\u672F\u7F51\u8DEF\u6F2B\u6E38\uFF09"},["/service/network/eduroam/index.html","/service/network/eduroam/README.md"]],["v-6bba5e58","/service/network/ipv6/",{title:"\u6821\u5185 IPv6 \u8BBE\u7F6E\u6559\u7A0B"},["/service/network/ipv6/index.html","/service/network/ipv6/README.md"]],["v-83a77034","/service/network/remote-desktop/",{title:"\u6821\u5185\u8FDC\u7A0B\u684C\u9762\u4F7F\u7528\u6307\u5317"},["/service/network/remote-desktop/index.html","/service/network/remote-desktop/README.md"]],["v-296d1d15","/service/network/use-vpn/",{title:"\u4F7F\u7528 SSL VPN \u8BF4\u660E"},["/service/network/use-vpn/index.html","/service/network/use-vpn/README.md"]],["v-fb711be8","/study/book-list-by-prof-yuan/2018/",{title:"\u8881\u957F\u5E9A\u8001\u5E08\u4E3A\u65B0\u751F\u63A8\u8350\u7684\u4E66\u5355\uFF082018\uFF09"},["/study/book-list-by-prof-yuan/2018/index.html","/study/book-list-by-prof-yuan/2018/README.md"]],["v-3706649a","/404.html",{title:""},["/404"]]],v5=y5.reduce((t,[i,s,u,m])=>(t.push({name:i,path:s,component:d_,meta:u},...m.map(v=>({path:v,redirect:s}))),t),[{name:"404",path:"/:catchAll(.*)",component:d_}]);var x5=VE,b5=()=>{const t=ES({history:x5(fE(Qo.value.base)),routes:v5,scrollBehavior:(i,s,u)=>u||(i.hash?{el:i.hash}:{top:0})});return t.beforeResolve(async(i,s)=>{var u;(i.path!==s.path||s===go)&&([yo.value]=await Promise.all([Rs.resolvePageData(i.name),(u=o0[i.name])==null?void 0:u.__asyncLoader()]))}),t},w5=t=>{t.component("ClientOnly",wE),t.component("Content",Kf)},E5=(t,i)=>{const s=Fr(()=>Rs.resolveRouteLocale(Qo.value.locales,i.currentRoute.value.path)),u=Fr(()=>Rs.resolveSiteLocaleData(Qo.value,s.value)),m=Fr(()=>Rs.resolvePageFrontmatter(yo.value)),v=Fr(()=>Rs.resolvePageHeadTitle(yo.value,u.value)),x=Fr(()=>Rs.resolvePageHead(v.value,m.value,u.value)),l=Fr(()=>Rs.resolvePageLang(yo.value));return t.provide(Zf,s),t.provide(p0,u),t.provide(l0,m),t.provide(xE,v),t.provide(c0,x),t.provide(u0,l),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get:()=>m.value},$head:{get:()=>x.value},$headTitle:{get:()=>v.value},$lang:{get:()=>l.value},$page:{get:()=>yo.value},$routeLocale:{get:()=>s.value},$site:{get:()=>Qo.value},$siteLocale:{get:()=>u.value},$withBase:{get:()=>f0}}),{pageData:yo,pageFrontmatter:m,pageHead:x,pageHeadTitle:v,pageLang:l,routeLocale:s,siteData:Qo,siteLocaleData:u}},S5=()=>{const t=od(),i=vE(),s=h0(),u=En([]),m=()=>{i.value.forEach(x=>{const l=T5(x);l&&u.value.push(l)})},v=()=>{document.documentElement.lang=s.value,u.value.forEach(x=>{x.parentNode===document.head&&document.head.removeChild(x)}),u.value.splice(0,u.value.length),i.value.forEach(x=>{const l=I5(x);l!==null&&(document.head.appendChild(l),u.value.push(l))})};rs(bE,v),Zi(()=>{m(),v(),Ni(()=>t.path,()=>v())})},T5=([t,i,s=""])=>{const u=Object.entries(i).map(([l,T])=>Rr(T)?`[${l}="${T}"]`:T===!0?`[${l}]`:"").join(""),m=`head > ${t}${u}`;return Array.from(document.querySelectorAll(m)).find(l=>l.innerText===s)||null},I5=([t,i,s])=>{if(!Rr(t))return null;const u=document.createElement(t);return n0(i)&&Object.entries(i).forEach(([m,v])=>{Rr(v)?u.setAttribute(m,v):v===!0&&u.setAttribute(m,"")}),Rr(s)&&u.appendChild(document.createTextNode(s)),u},A5=lE,P5=async()=>{var s;const t=A5({name:"VuepressApp",setup(){var u;S5();for(const m of Up)(u=m.setup)==null||u.call(m);return()=>[cr(A0),...Up.flatMap(({rootComponents:m=[]})=>m.map(v=>cr(v)))]}}),i=b5();w5(t),E5(t,i);for(const u of Up)await((s=u.enhance)==null?void 0:s.call(u,{app:t,router:i,siteData:Qo}));return t.use(i),{app:t,router:i}};P5().then(({app:t,router:i})=>{i.isReady().then(()=>{t.mount("#app")})});export{d0 as A,R5 as B,B5 as C,cr as D,f0 as E,bn as F,wE as G,os as H,En as I,Ni as J,k5 as K,M5 as L,mE as M,fE as N,id as O,Rr as P,xT as Q,Zi as R,Hc as S,td as T,al as U,F5 as V,n0 as W,z5 as X,Uf as Y,wT as Z,Wi as _,qr as a,mi as b,Dn as c,P5 as createVueApp,qf as d,D5 as e,Jn as f,F0 as g,Us as h,yE as i,Fr as j,Ut as k,Gf as l,Ja as m,od as n,tn as o,Iw as p,Fc as q,qa as r,Xv as s,Ci as t,Wf as u,Qh as v,mh as w,pE as x,O5 as y,L5 as z};
